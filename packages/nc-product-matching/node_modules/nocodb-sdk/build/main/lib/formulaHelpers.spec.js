"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const formulaHelpers_1 = require("./formulaHelpers");
const UITypes_1 = __importDefault(require("./UITypes"));
describe('Formula parsing and type validation', () => {
    it('Simple formula', async () => {
        const result = await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
            formula: '1 + 2',
            columns: [],
            clientOrSqlUi: 'mysql2',
            getMeta: async () => ({}),
        });
        expect(result.dataType).toEqual(formulaHelpers_1.FormulaDataTypes.NUMERIC);
    });
    it('Formula with IF condition', async () => {
        const result = await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
            formula: 'IF({column}, "Found", BLANK())',
            columns: [
                {
                    id: 'cid',
                    title: 'column',
                    uidt: UITypes_1.default.Number,
                },
            ],
            clientOrSqlUi: 'mysql2',
            getMeta: async () => ({}),
        });
        expect(result.dataType).toEqual(formulaHelpers_1.FormulaDataTypes.STRING);
    });
    it('Complex formula', async () => {
        const result = await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
            formula: 'SWITCH({column2},"value1",IF({column1}, "Found", BLANK()),"value2", 2)',
            columns: [
                {
                    id: 'id1',
                    title: 'column1',
                    uidt: UITypes_1.default.Number,
                },
                {
                    id: 'id2',
                    title: 'column2',
                    uidt: UITypes_1.default.SingleLineText,
                },
            ],
            clientOrSqlUi: 'mysql2',
            getMeta: async () => ({}),
        });
        expect(result.dataType).toEqual(formulaHelpers_1.FormulaDataTypes.STRING);
        const result1 = await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
            formula: 'SWITCH({column2},"value1",IF({column1}, 1, 2),"value2", 2)',
            columns: [
                {
                    id: 'id1',
                    title: 'column1',
                    uidt: UITypes_1.default.Number,
                },
                {
                    id: 'id2',
                    title: 'column2',
                    uidt: UITypes_1.default.SingleLineText,
                },
            ],
            clientOrSqlUi: 'mysql2',
            getMeta: async () => ({}),
        });
        expect(result1.dataType).toEqual(formulaHelpers_1.FormulaDataTypes.NUMERIC);
    });
    describe('Date and time interaction', () => {
        it('Time - time equals numeric', async () => {
            const result = await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                formula: '{Time1} - {Time2}',
                columns: [
                    {
                        id: 'TUrXeTf4JUHdnRvn',
                        title: 'Time1',
                        uidt: UITypes_1.default.Time,
                    },
                    {
                        id: 'J3aD/yLDT2GF6NEB',
                        title: 'Time2',
                        uidt: UITypes_1.default.Time,
                    },
                ],
                clientOrSqlUi: 'pg',
                getMeta: async () => ({}),
            });
            expect(result.dataType).toEqual(formulaHelpers_1.FormulaDataTypes.NUMERIC);
        });
        it('Time - time equals numeric', async () => {
            const result = await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                formula: '{Time1} - {Time2}',
                columns: [
                    {
                        id: 'TUrXeTf4JUHdnRvn',
                        title: 'Time1',
                        uidt: UITypes_1.default.Time,
                    },
                    {
                        id: 'J3aD/yLDT2GF6NEB',
                        title: 'Time2',
                        uidt: UITypes_1.default.Time,
                    },
                ],
                clientOrSqlUi: 'pg',
                getMeta: async () => ({}),
            });
            expect(result.dataType).toEqual(formulaHelpers_1.FormulaDataTypes.NUMERIC);
        });
        it('Date + time equals date', async () => {
            const result = await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                formula: '{Date1} + {Time2}',
                columns: [
                    {
                        id: 'TUrXeTf4JUHdnRvn',
                        title: 'Date1',
                        uidt: UITypes_1.default.Date,
                    },
                    {
                        id: 'J3aD/yLDT2GF6NEB',
                        title: 'Time2',
                        uidt: UITypes_1.default.Time,
                    },
                ],
                clientOrSqlUi: 'pg',
                getMeta: async () => ({}),
            });
            expect(result.dataType).toEqual(formulaHelpers_1.FormulaDataTypes.DATE);
        });
    });
    describe('binary expression', () => {
        it(`& operator will return string`, async () => {
            const result = await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                formula: '"Hello" & "World"',
                columns: [],
                clientOrSqlUi: 'pg',
                getMeta: async () => ({}),
            });
            expect(result.dataType).toBe(formulaHelpers_1.FormulaDataTypes.STRING);
        });
    });
    describe('errors', () => {
        it(`will provide position for syntax error`, async () => {
            try {
                await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                    formula: '1 +',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: async () => ({}),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 3,
                    row: 0,
                    length: 1,
                });
            }
            try {
                await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                    formula: '(1 + 1',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: async () => ({}),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 6,
                    row: 0,
                    length: 1,
                });
            }
            try {
                await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                    formula: 'CONCAT)',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: async () => ({}),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 6,
                    row: 0,
                    length: 1,
                });
            }
        });
        it(`will provide position for column not found`, async () => {
            try {
                await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                    formula: '1 + __a_',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: async () => ({}),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 4,
                    row: 0,
                    length: 4,
                });
            }
            try {
                await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                    formula: '__a_',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: async () => ({}),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 0,
                    row: 0,
                    length: 4,
                });
            }
            try {
                await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                    formula: 'CONCAT(__a_  , "A")',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: async () => ({}),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 7,
                    row: 0,
                    length: 6,
                });
            }
        });
        it(`will handle formula missing parentheses`, async () => {
            try {
                await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                    formula: 'CONCAT',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: async () => ({}),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.message).toContain('Missing parentheses after function name');
                expect(ex.extra.position).toEqual({
                    column: 6,
                    row: 0,
                    length: 1,
                });
            }
            try {
                await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                    formula: 'CONCAT(CONCAT)',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: async () => ({}),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.message).toContain('Missing parentheses after function name');
                expect(ex.extra.position).toEqual({
                    column: 13,
                    row: 0,
                    length: 1,
                });
            }
        });
        it(`will handle formula minimum argument`, async () => {
            try {
                await (0, formulaHelpers_1.validateFormulaAndExtractTreeWithType)({
                    formula: 'CONCAT(CONCAT())',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: async () => ({}),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 7,
                    row: 0,
                    length: 8,
                });
            }
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybXVsYUhlbHBlcnMuc3BlYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvZm9ybXVsYUhlbHBlcnMuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLHFEQUcwQjtBQUMxQix3REFBZ0M7QUFFaEMsUUFBUSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtJQUNuRCxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDOUIsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFBLHNEQUFxQyxFQUFDO1lBQ3pELE9BQU8sRUFBRSxPQUFPO1lBQ2hCLE9BQU8sRUFBRSxFQUFFO1lBQ1gsYUFBYSxFQUFFLFFBQVE7WUFDdkIsT0FBTyxFQUFFLEtBQUssSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7U0FDMUIsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsaUNBQWdCLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDNUQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsMkJBQTJCLEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDekMsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFBLHNEQUFxQyxFQUFDO1lBQ3pELE9BQU8sRUFBRSxnQ0FBZ0M7WUFDekMsT0FBTyxFQUFFO2dCQUNQO29CQUNFLEVBQUUsRUFBRSxLQUFLO29CQUNULEtBQUssRUFBRSxRQUFRO29CQUNmLElBQUksRUFBRSxpQkFBTyxDQUFDLE1BQU07aUJBQ3JCO2FBQ0Y7WUFDRCxhQUFhLEVBQUUsUUFBUTtZQUN2QixPQUFPLEVBQUUsS0FBSyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztTQUMxQixDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQ0FBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztJ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