var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
import { FormulaDataTypes, validateFormulaAndExtractTreeWithType, } from './formulaHelpers';
import UITypes from './UITypes';
describe('Formula parsing and type validation', () => {
    it('Simple formula', () => __awaiter(void 0, void 0, void 0, function* () {
        const result = yield validateFormulaAndExtractTreeWithType({
            formula: '1 + 2',
            columns: [],
            clientOrSqlUi: 'mysql2',
            getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
        });
        expect(result.dataType).toEqual(FormulaDataTypes.NUMERIC);
    }));
    it('Formula with IF condition', () => __awaiter(void 0, void 0, void 0, function* () {
        const result = yield validateFormulaAndExtractTreeWithType({
            formula: 'IF({column}, "Found", BLANK())',
            columns: [
                {
                    id: 'cid',
                    title: 'column',
                    uidt: UITypes.Number,
                },
            ],
            clientOrSqlUi: 'mysql2',
            getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
        });
        expect(result.dataType).toEqual(FormulaDataTypes.STRING);
    }));
    it('Complex formula', () => __awaiter(void 0, void 0, void 0, function* () {
        const result = yield validateFormulaAndExtractTreeWithType({
            formula: 'SWITCH({column2},"value1",IF({column1}, "Found", BLANK()),"value2", 2)',
            columns: [
                {
                    id: 'id1',
                    title: 'column1',
                    uidt: UITypes.Number,
                },
                {
                    id: 'id2',
                    title: 'column2',
                    uidt: UITypes.SingleLineText,
                },
            ],
            clientOrSqlUi: 'mysql2',
            getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
        });
        expect(result.dataType).toEqual(FormulaDataTypes.STRING);
        const result1 = yield validateFormulaAndExtractTreeWithType({
            formula: 'SWITCH({column2},"value1",IF({column1}, 1, 2),"value2", 2)',
            columns: [
                {
                    id: 'id1',
                    title: 'column1',
                    uidt: UITypes.Number,
                },
                {
                    id: 'id2',
                    title: 'column2',
                    uidt: UITypes.SingleLineText,
                },
            ],
            clientOrSqlUi: 'mysql2',
            getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
        });
        expect(result1.dataType).toEqual(FormulaDataTypes.NUMERIC);
    }));
    describe('Date and time interaction', () => {
        it('Time - time equals numeric', () => __awaiter(void 0, void 0, void 0, function* () {
            const result = yield validateFormulaAndExtractTreeWithType({
                formula: '{Time1} - {Time2}',
                columns: [
                    {
                        id: 'TUrXeTf4JUHdnRvn',
                        title: 'Time1',
                        uidt: UITypes.Time,
                    },
                    {
                        id: 'J3aD/yLDT2GF6NEB',
                        title: 'Time2',
                        uidt: UITypes.Time,
                    },
                ],
                clientOrSqlUi: 'pg',
                getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
            });
            expect(result.dataType).toEqual(FormulaDataTypes.NUMERIC);
        }));
        it('Time - time equals numeric', () => __awaiter(void 0, void 0, void 0, function* () {
            const result = yield validateFormulaAndExtractTreeWithType({
                formula: '{Time1} - {Time2}',
                columns: [
                    {
                        id: 'TUrXeTf4JUHdnRvn',
                        title: 'Time1',
                        uidt: UITypes.Time,
                    },
                    {
                        id: 'J3aD/yLDT2GF6NEB',
                        title: 'Time2',
                        uidt: UITypes.Time,
                    },
                ],
                clientOrSqlUi: 'pg',
                getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
            });
            expect(result.dataType).toEqual(FormulaDataTypes.NUMERIC);
        }));
        it('Date + time equals date', () => __awaiter(void 0, void 0, void 0, function* () {
            const result = yield validateFormulaAndExtractTreeWithType({
                formula: '{Date1} + {Time2}',
                columns: [
                    {
                        id: 'TUrXeTf4JUHdnRvn',
                        title: 'Date1',
                        uidt: UITypes.Date,
                    },
                    {
                        id: 'J3aD/yLDT2GF6NEB',
                        title: 'Time2',
                        uidt: UITypes.Time,
                    },
                ],
                clientOrSqlUi: 'pg',
                getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
            });
            expect(result.dataType).toEqual(FormulaDataTypes.DATE);
        }));
    });
    describe('binary expression', () => {
        it(`& operator will return string`, () => __awaiter(void 0, void 0, void 0, function* () {
            const result = yield validateFormulaAndExtractTreeWithType({
                formula: '"Hello" & "World"',
                columns: [],
                clientOrSqlUi: 'pg',
                getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
            });
            expect(result.dataType).toBe(FormulaDataTypes.STRING);
        }));
    });
    describe('errors', () => {
        it(`will provide position for syntax error`, () => __awaiter(void 0, void 0, void 0, function* () {
            try {
                yield validateFormulaAndExtractTreeWithType({
                    formula: '1 +',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 3,
                    row: 0,
                    length: 1,
                });
            }
            try {
                yield validateFormulaAndExtractTreeWithType({
                    formula: '(1 + 1',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 6,
                    row: 0,
                    length: 1,
                });
            }
            try {
                yield validateFormulaAndExtractTreeWithType({
                    formula: 'CONCAT)',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 6,
                    row: 0,
                    length: 1,
                });
            }
        }));
        it(`will provide position for column not found`, () => __awaiter(void 0, void 0, void 0, function* () {
            try {
                yield validateFormulaAndExtractTreeWithType({
                    formula: '1 + __a_',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 4,
                    row: 0,
                    length: 4,
                });
            }
            try {
                yield validateFormulaAndExtractTreeWithType({
                    formula: '__a_',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 0,
                    row: 0,
                    length: 4,
                });
            }
            try {
                yield validateFormulaAndExtractTreeWithType({
                    formula: 'CONCAT(__a_  , "A")',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 7,
                    row: 0,
                    length: 6,
                });
            }
        }));
        it(`will handle formula missing parentheses`, () => __awaiter(void 0, void 0, void 0, function* () {
            try {
                yield validateFormulaAndExtractTreeWithType({
                    formula: 'CONCAT',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.message).toContain('Missing parentheses after function name');
                expect(ex.extra.position).toEqual({
                    column: 6,
                    row: 0,
                    length: 1,
                });
            }
            try {
                yield validateFormulaAndExtractTreeWithType({
                    formula: 'CONCAT(CONCAT)',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.message).toContain('Missing parentheses after function name');
                expect(ex.extra.position).toEqual({
                    column: 13,
                    row: 0,
                    length: 1,
                });
            }
        }));
        it(`will handle formula minimum argument`, () => __awaiter(void 0, void 0, void 0, function* () {
            try {
                yield validateFormulaAndExtractTreeWithType({
                    formula: 'CONCAT(CONCAT())',
                    columns: [],
                    clientOrSqlUi: 'mysql2',
                    getMeta: () => __awaiter(void 0, void 0, void 0, function* () { return ({}); }),
                    trackPosition: true,
                });
            }
            catch (ex) {
                expect(ex.extra.position).toEqual({
                    column: 7,
                    row: 0,
                    length: 8,
                });
            }
        }));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybXVsYUhlbHBlcnMuc3BlYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvZm9ybXVsYUhlbHBlcnMuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxPQUFPLEVBQ0wsZ0JBQWdCLEVBQ2hCLHFDQUFxQyxHQUN0QyxNQUFNLGtCQUFrQixDQUFDO0FBQzFCLE9BQU8sT0FBTyxNQUFNLFdBQVcsQ0FBQztBQUVoQyxRQUFRLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO0lBQ25ELEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFTLEVBQUU7UUFDOUIsTUFBTSxNQUFNLEdBQUcsTUFBTSxxQ0FBcUMsQ0FBQztZQUN6RCxPQUFPLEVBQUUsT0FBTztZQUNoQixPQUFPLEVBQUUsRUFBRTtZQUNYLGFBQWEsRUFBRSxRQUFRO1lBQ3ZCLE9BQU8sRUFBRSxHQUFTLEVBQUUsa0RBQUMsT0FBQSxDQUFDLEVBQUUsQ0FBQyxDQUFBLEdBQUE7U0FDMUIsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDNUQsQ0FBQyxDQUFBLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQywyQkFBMkIsRUFBRSxHQUFTLEVBQUU7UUFDekMsTUFBTSxNQUFNLEdBQUcsTUFBTSxxQ0FBcUMsQ0FBQztZQUN6RCxPQUFPLEVBQUUsZ0NBQWdDO1lBQ3pDLE9BQU8sRUFBRTtnQkFDUDtvQkFDRSxFQUFFLEVBQUUsS0FBSztvQkFDVCxLQUFLLEVBQUUsUUFBUTtvQkFDZixJQUFJLEVBQUUsT0FBTyxDQUFDLE1BQU07aUJBQ3JCO2FBQ0Y7WUFDRCxhQUFhLEVBQUUsUUFBUTtZQUN2QixPQUFPLEVBQUUsR0FBUyxFQUFFLGtEQUFDLE9BQUEsQ0FBQyxFQUFFLENBQUMsQ0FBQSxHQUFBO1NBQzFCLENBQUMsQ0FBQztRQUVI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