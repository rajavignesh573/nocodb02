const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Bew4Vbyd.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./AdvanceColorPicker.BPg1JaQv.css"])))=>i.map(i=>d[i]);
import{a9 as et,S as Ot,W as xt,a8 as Je,V as ut,f as Qe,am as rt,G as Ve,gc as $t,n as se,hX as zt,i2 as Nt,a4 as de,a5 as Me,gj as qe,bM as vt,aj as z,g_ as Dt,fY as jt,id as Ft,gS as Tt,gQ as Bt,U as Ut,j6 as Ht,a6 as qt,u as Gt,J as Wt,r as M,bX as Kt,ge as Jt,as as Pt,h7 as ct,aF as ft,b_ as Qt,bZ as Xt,h3 as pt,b1 as Yt,bJ as bt,a$ as At,ef as Zt,jv as nt,X as Mt,aG as it,jw as wt,jx as tt,fU as kt,gF as lt,gU as Et,jy as Vt,aC as eo,dk as to,ic as oo,jz as ao,jA as io,jB as gt,fN as mt,gN as yt,aD as no,bi as so,c as Ne,o as ce,a as we,e as lo,T as uo,ak as ro,bd as vo,gu as co,g as fo,$ as st,eI as po,K as He,cf as ot,ag as Ye,L as m,an as ht,b as Ie,aH as wo,w as pe,aL as Xe,I as Fe,b3 as go,M as mo,aX as yo,ar as ho,a3 as _t,O as be,b9 as Ze,bo as ke,a1 as St,aw as _o,t as Ge,N as So,d as Ke,ap as Ro,a_ as Co,_ as Io}from"./DRA9KN5F.js";import{D as Oo}from"./D7OHpRdS.js";import{Y as Rt}from"./D_txg4HT.js";import{u as dt}from"./CQa0sIfA.js";import{u as Do}from"./By5RWL3d.js";import{p as Ct,r as Ae,h as We,d as It,e as je,c as Po}from"./gAYHr7Gr.js";function Ao(C){const{meta:o,viewMeta:D,formattedData:S,paginationData:f,callbacks:e}=C,{t:te}=et(),{getMeta:Re,metas:xe}=Ot(),{addUndo:ye,clone:k,defineViewScope:Le}=xt(),{base:E}=Je(ut()),{$api:le}=Qe(),{isPaginationLoading:ue}=Je(rt()),Z=Ve($t),_e=se({get(){return!!S.value.length&&S.value.every(l=>l.rowMeta.selected)},set(l){S.value.forEach(u=>u.rowMeta.selected=l)}});function re(l=S.value.length,u=o.value){return S.value.splice(l,0,{row:{...Po(u==null?void 0:u.columns)},oldRow:{},rowMeta:{new:!0}}),S.value[l]}async function I(l,u={},{metaValue:c=o.value,viewMetaValue:h=D.value}={},_=!1){var B,q;const L=l.row;l.rowMeta&&(l.rowMeta.saving=!0);try{const{missingRequiredColumns:F,insertObj:n}=await Ct({meta:c,ltarState:u,getMeta:Re,row:L,undo:_});if(F.size)return;const i=await le.dbViewRow.create(qe,(c==null?void 0:c.base_id)??(E==null?void 0:E.value.id),c==null?void 0:c.id,h==null?void 0:h.id,{...n,...u||{}});if(await(Z==null?void 0:Z.trigger()),!_){Object.assign(l,{row:{...i,...L},rowMeta:{...l.rowMeta||{},new:void 0},oldRow:{...i}});const s=je(i,c==null?void 0:c.columns),d=Ae(i,c==null?void 0:c.columns),t=We(d,S.value);ye({redo:{fn:async function(v,g,y){var $,K;v.row={...d,...v.row};const x=await I(v,g,void 0,!0);t!==-1&&y.pageSize===f.value.pageSize?y.page===f.value.page?S.value.splice(t,0,{row:{...v,...x},rowMeta:v.rowMeta,oldRow:v.oldRow}):await(($=e==null?void 0:e.changePage)==null?void 0:$.call(e,y.page)):await((K=e==null?void 0:e.loadData)==null?void 0:K.call(e))},args:[k(l),k(u),{page:f.value.page,pageSize:f.value.pageSize}]},undo:{fn:async function(v){await J(v),t!==-1&&S.value.splice(t,1),f.value.totalRows=f.value.totalRows-1},args:[s]},scope:Le({view:D.value})})}return await((B=e==null?void 0:e.syncCount)==null?void 0:B.call(e)),i}catch(F){de.error(await Me(F))}finally{l.rowMeta&&(l.rowMeta.saving=!1),await((q=e==null?void 0:e.globalCallback)==null?void 0:q.call(e))}}async function ge(l,{metaValue:u=o.value,viewMetaValue:c=D.value}={},h=!1){var L,B,q;ue.value=!0;const _=k((u==null?void 0:u.columns)||[]).filter(F=>!F.pk&&(zt(F)||Nt(F))).map(F=>F.title);try{const F=((L=await Promise.all(l.map(async i=>{const{missingRequiredColumns:s,insertObj:d}=await Ct({meta:u,ltarState:{},getMeta:Re,row:i.row,undo:h});if(s.size===0)return _.forEach(t=>delete d[t]),d})))==null?void 0:L.filter(Boolean))??[],n=await le.dbDataTableRow.create(u==null?void 0:u.id,F,{viewId:c==null?void 0:c.id});return await((B=e==null?void 0:e.syncCount)==null?void 0:B.call(e)),n}catch(F){de.error(await Me(F))}finally{await((q=e==null?void 0:e.globalCallback)==null?void 0:q.call(e)),ue.value=!1}}async function T(l,u,{metaValue:c=o.value,viewMetaValue:h=D.value}={},_=!1){var L;l.rowMeta&&(l.rowMeta.saving=!0);try{const B=je(l.row,c==null?void 0:c.columns),q=await le.dbViewRow.update(qe,(c==null?void 0:c.base_id)??(E==null?void 0:E.value.id),c==null?void 0:c.id,h==null?void 0:h.id,encodeURIComponent(B),{[u]:l.row[u]??null});return await(Z==null?void 0:Z.trigger({fields:[{title:u}]})),_||(ye({redo:{fn:async function(n,i,s){var t,p,v;const d=await T(n,i,void 0,!0);if(s.page===f.value.page&&s.pageSize===f.value.pageSize){const g=We(Ae(n.row,(t=o==null?void 0:o.value)==null?void 0:t.columns),S.value);if(g!==-1){const y=S.value[g];Object.assign(y.row,d),Object.assign(y.oldRow,d)}else await((p=e==null?void 0:e.loadData)==null?void 0:p.call(e))}else await((v=e==null?void 0:e.changePage)==null?void 0:v.call(e,s.page))},args:[k(l),u,{page:f.value.page,pageSize:f.value.pageSize}]},undo:{fn:async function(n,i,s){var t,p,v;const d=await T({row:n.oldRow,oldRow:n.row,rowMeta:n.rowMeta},i,void 0,!0);if(s.page===f.value.page&&s.pageSize===f.value.pageSize){const g=We(Ae(n.row,(t=o==null?void 0:o.value)==null?void 0:t.columns),S.value);if(g!==-1){const y=S.value[g];Object.assign(y.row,d),Object.assign(y.oldRow,d)}else await((p=e==null?void 0:e.loadData)==null?void 0:p.call(e))}else await((v=e==null?void 0:e.changePage)==null?void 0:v.call(e,s.page))},args:[k(l),u,{page:f.value.page,pageSize:f.value.pageSize}]},scope:Le({view:D.value})}),Object.assign(l.row,c.columns.reduce((F,n)=>(n.title in q&&(n.uidt===z.Formula||n.uidt===z.QrCode||n.uidt===z.Barcode||n.uidt===z.Rollup||n.uidt===z.Checkbox||n.uidt===z.User||n.uidt===z.LastModifiedTime||n.uidt===z.LastModifiedBy||n.uidt===z.Lookup||n.uidt===z.Button||n.uidt===z.Attachment||Dt(n)||n.au||jt(n==null?void 0:n.cdf)&&/ on update /i.test(n.cdf))&&(F[n.title]=q[n.title]),F),{})),Object.assign(l.oldRow,q)),await((L=e==null?void 0:e.globalCallback)==null?void 0:L.call(e)),q}catch(B){l.row[u]=l.oldRow[u],de.error(`${te("msg.error.rowUpdateFailed")}: ${await Me(B)}`)}finally{l.rowMeta&&(l.rowMeta.saving=!1)}}async function me(l,u,c,h={}){if(l.rowMeta&&(l.rowMeta.changed=!1),await vt(()=>{var _,L;return!((_=l.rowMeta)!=null&&_.new&&((L=l.rowMeta)!=null&&L.saving))}).toMatch(_=>_),l.rowMeta.new)return await I(l,c,h);u&&await T(l,u,h)}async function Q(l,u,{metaValue:c=o.value,viewMetaValue:h=D.value}={},_=!1){var q,F;const L=[];for(const n of l)n.rowMeta&&(n.rowMeta.changed=!1),L.push(vt(()=>{var i,s;return!((i=n.rowMeta)!=null&&i.new&&((s=n.rowMeta)!=null&&s.saving))}).toMatch(i=>i));await Promise.all(L);const B=[];for(const n of l){n.rowMeta&&(n.rowMeta.saving=!0);const i=Ae(n.row,c==null?void 0:c.columns),s=u.reduce((d,t)=>(d[t]=n.row[t],d),{});B.push({...s,...i})}await le.dbTableRow.bulkUpdate(qe,c==null?void 0:c.base_id,c==null?void 0:c.id,B),await(Z==null?void 0:Z.trigger({fields:u.map(n=>({title:n}))})),_||ye({redo:{fn:async function(i,s,d){var t,p,v;if(await Q(i,s,{metaValue:c,viewMetaValue:h},!0),d.page===f.value.page&&d.pageSize===f.value.pageSize)for(const g of i){const y=We(Ae(g.row,(t=o==null?void 0:o.value)==null?void 0:t.columns),S.value);if(y!==-1){const x=S.value[y];Object.assign(x.row,g.row),Object.assign(x.oldRow,g.row)}else{await((p=e==null?void 0:e.loadData)==null?void 0:p.call(e));break}}else await((v=e==null?void 0:e.changePage)==null?void 0:v.call(e,d.page))},args:[k(l),k(u),{page:f.value.page,pageSize:f.value.pageSize}]},undo:{fn:async function(i,s,d){var t,p,v;if(await Q(i,s,{metaValue:c,viewMetaValue:h},!0),d.page===f.value.page&&d.pageSize===f.value.pageSize)for(const g of i){const y=We(Ae(g.row,(t=o==null?void 0:o.value)==null?void 0:t.columns),S.value);if(y!==-1){const x=S.value[y];Object.assign(x.row,g.row),Object.assign(x.oldRow,g.row)}else{await((p=e==null?void 0:e.loadData)==null?void 0:p.call(e));break}}else await((v=e==null?void 0:e.changePage)==null?void 0:v.call(e,d.page))},args:[k(l.map(n=>({row:n.oldRow,oldRow:n.row,rowMeta:n.rowMeta}))),u,{page:f.value.page,pageSize:f.value.pageSize}]},scope:Le({view:h})});for(const n of l)n.rowMeta&&(n.rowMeta.saving=!1);c.columns.some(n=>[z.QrCode,z.LastModifiedTime,z.Barcode,z.Formula,z.Lookup,z.Rollup,z.LinkToAnotherRecord,z.LastModifiedBy].includes(n.uidt))&&await((q=e==null?void 0:e.loadData)==null?void 0:q.call(e)),await((F=e==null?void 0:e.globalCallback)==null?void 0:F.call(e))}async function he(l,{metaValue:u=o.value,viewMetaValue:c=D.value}={}){var h,_;c&&(await le.dbTableRow.bulkUpdateAll(qe,u==null?void 0:u.base_id,u==null?void 0:u.id,l,{viewId:c.id}),await(Z==null?void 0:Z.trigger()),await((h=e==null?void 0:e.loadData)==null?void 0:h.call(e)),await((_=e==null?void 0:e.globalCallback)==null?void 0:_.call(e)))}const oe=async(l,u,c,h,{metaValue:_=o.value}={})=>{try{await le.dbTableRow.nestedAdd(qe,(_==null?void 0:_.base_id)??E.value.id,_==null?void 0:_.id,encodeURIComponent(l),h,c.title,encodeURIComponent(u))}catch(L){de.error(await Me(L))}},Se=async(l,{metaValue:u=o.value}={})=>{var h;const c=je(l,u==null?void 0:u.columns);for(const _ of(u==null?void 0:u.columns)??[]){if(_.uidt!==z.LinkToAnotherRecord)continue;const L=_.colOptions,B=(h=xe.value)==null?void 0:h[L==null?void 0:L.fk_related_model_id];if(Ft(_)||Tt(_)){const q=l[_.title]??[];for(const F of q)await oe(c,je(F,B.columns),_,L.type,{metaValue:u})}else Bt(_)&&l[_.title]&&await oe(c,je(l[_.title],B.columns),_,L.type,{metaValue:u})}};async function J(l,{metaValue:u=o.value,viewMetaValue:c=D.value}={}){if(!l)throw new Error("Delete not allowed for table which doesn't have primary Key");const h=await le.dbViewRow.delete("noco",(u==null?void 0:u.base_id)??E.value.id,u==null?void 0:u.id,c==null?void 0:c.id,encodeURIComponent(l));return await(Z==null?void 0:Z.trigger()),h.message?(de.info(`Record delete failed: ${`Unable to delete record with ID ${l} because of the following:
              
${h.message.join(`
`)}.

              Clear the data first & try again`})}`),!1):!0}async function ae(l,u){var c,h,_,L,B;try{const q=S.value[l];if(!q.rowMeta.new){const F=je(q.row,(c=o==null?void 0:o.value)==null?void 0:c.columns),n=await le.dbTableRow.read(qe,((h=o.value)==null?void 0:h.base_id)??(E==null?void 0:E.value.id),(_=o.value)==null?void 0:_.id,encodeURIComponent(F),{getHiddenColumn:!0});if(q.row=n,!await J(F))return;u||ye({redo:{fn:async function(d){var v;await J(d);const t=Ae(q.row,(v=o==null?void 0:o.value)==null?void 0:v.columns),p=We(t,S.value);p!==-1&&S.value.splice(p,1),f.value.totalRows=f.value.totalRows-1},args:[F]},undo:{fn:async function(d,t,p){var g,y,x;const v=Ae(d.row,(g=o.value)==null?void 0:g.columns);d.row={...v,...d.row},await I(d,t,{},!0),Se(d.row),l!==-1&&p.pageSize===f.value.pageSize?p.page===f.value.page?S.value.splice(l,0,d):await((y=e==null?void 0:e.changePage)==null?void 0:y.call(e,p.page)):await((x=e==null?void 0:e.loadData)==null?void 0:x.call(e))},args:[k(q),{},{page:f.value.page,pageSize:f.value.pageSize}]},scope:Le({view:D.value})})}S.value.splice(l,1),await((L=e==null?void 0:e.syncCount)==null?void 0:L.call(e))}catch(q){de.error(`${te("msg.error.deleteRowFailed")}: ${await Me(q)}`)}await((B=e==null?void 0:e.globalCallback)==null?void 0:B.call(e))}async function Y(){var _,L,B,q,F,n,i,s;let l=S.value.length;const u=[];let c="";for(;l--;){const{row:d,rowMeta:t}=S.value[l];if(t.selected&&!t.new){const p=It((_=o==null?void 0:o.value)==null?void 0:_.columns),v=je(d,(L=o==null?void 0:o.value)==null?void 0:L.columns),g=Ae(d,(B=o==null?void 0:o.value)==null?void 0:B.columns);p&&v&&(c||(c=p),u.push({[c]:v,pkData:g,row:k(S.value[l]),rowIndex:l}))}}if(!u.length)return;ue.value=!0;const{list:h}=await le.dbTableRow.list(qe,E==null?void 0:E.value.id,(q=o.value)==null?void 0:q.id,{pks:u.map(d=>d[c]).join(",")});try{for(const d of u){const t=d.row,p=Ae(t.row,(F=o==null?void 0:o.value)==null?void 0:F.columns),v=h.find(g=>Object.keys(p).every(y=>p[y]===g[y]));t.row=k(v)}await Oe(u.map(d=>d.pkData))}catch(d){return de.error(`${te("msg.error.deleteRowFailed")}: ${await Me(d)}`)}if(!u.length){ue.value=!1;return}ye({redo:{fn:async function(t){var v,g,y,x;ue.value=!0;const p=await Oe(t.map($=>$.pkData));if(Array.isArray(p))for(const{row:$}of t){const K=Ae($.row,(v=o==null?void 0:o.value)==null?void 0:v.columns),V=We(K,S.value);V!==-1&&S.value.splice(V,1),f.value.totalRows=f.value.totalRows-1}await((g=e==null?void 0:e.syncCount)==null?void 0:g.call(e)),await((y=e==null?void 0:e.syncPagination)==null?void 0:y.call(e)),await((x=e==null?void 0:e.globalCallback)==null?void 0:x.call(e))},args:[u]},undo:{fn:async function(t,p){var y,x;const v=t.map($=>{var V;const K=Ae($.row,(V=o.value)==null?void 0:V.columns);return $.row={...K,...$.row},$}).reverse(),g=await ge(v.map($=>$.row),void 0,!0);if(Array.isArray(g))for(const{row:$,rowIndex:K}of v)Se($.row),K!==-1&&p.pageSize===f.value.pageSize?p.page===f.value.page?S.value.splice(K,0,$):await((y=e==null?void 0:e.changePage)==null?void 0:y.call(e,p.page)):await((x=e==null?void 0:e.loadData)==null?void 0:x.call(e))},args:[u,{page:f.value.page,pageSize:f.value.pageSize}]},scope:Le({view:D.value})}),await((n=e==null?void 0:e.syncCount)==null?void 0:n.call(e)),await((i=e==null?void 0:e.syncPagination)==null?void 0:i.call(e)),await((s=e==null?void 0:e.globalCallback)==null?void 0:s.call(e))}async function fe(l){var q,F,n,i,s,d,t,p;if(!l._start||!l._end)return;const u=Math.max(l._start.row,l._end.row),c=Math.min(l._start.row,l._end.row);let h=u+1;const _=[];let L="";for(;h--;){try{const{row:v,rowMeta:g}=S.value[h];if(!g.new){const y=It((q=o==null?void 0:o.value)==null?void 0:q.columns),x=je(v,(F=o==null?void 0:o.value)==null?void 0:F.columns),$=Ae(v,(n=o==null?void 0:o.value)==null?void 0:n.columns);y&&x&&(L||(L=y),_.push({[L]:x,pkData:$,row:k(S.value[h]),rowIndex:h}))}}catch(v){return de.error(`${te("msg.error.deleteRowFailed")}: ${await Me(v)}`)}if(h===c)break}if(!_.length)return;ue.value=!0;const{list:B}=await le.dbTableRow.list(qe,E==null?void 0:E.value.id,(i=o.value)==null?void 0:i.id,{pks:_.map(v=>v[L]).join(",")});try{for(const v of _){const g=v.row,y=Ae(g.row,(s=o==null?void 0:o.value)==null?void 0:s.columns),x=B.find($=>Object.keys(y).every(K=>y[K]===$[K]));g.row=k(x)}await Oe(_.map(v=>v.pkData))}catch(v){return de.error(`${te("msg.error.deleteRowFailed")}: ${await Me(v)}`)}if(!_.length){ue.value=!1;return}ye({redo:{fn:async function(g){var x,$,K,V;ue.value=!0;const y=await Oe(g.map(r=>r.pkData));if(Array.isArray(y))for(const{row:r}of g){const R=Ae(r.row,(x=o==null?void 0:o.value)==null?void 0:x.columns),j=We(R,S.value);j!==-1&&S.value.splice(j,1),f.value.totalRows=f.value.totalRows-1}await(($=e==null?void 0:e.syncCount)==null?void 0:$.call(e)),await((K=e==null?void 0:e.syncPagination)==null?void 0:K.call(e)),await((V=e==null?void 0:e.globalCallback)==null?void 0:V.call(e))},args:[_]},undo:{fn:async function(g,y){var K,V;const x=g.map(r=>{var j;const R=Ae(r.row,(j=o.value)==null?void 0:j.columns);return r.row={...R,...r.row},r}).reverse(),$=await ge(x.map(r=>r.row),void 0,!0);if(Array.isArray($))for(const{row:r,rowIndex:R}of x)Se(r.row),R!==-1&&y.pageSize===f.value.pageSize?y.page===f.value.page?S.value.splice(R,0,r):await((K=e==null?void 0:e.changePage)==null?void 0:K.call(e,y.page)):await((V=e==null?void 0:e.loadData)==null?void 0:V.call(e))},args:[_,{page:f.value.page,pageSize:f.value.pageSize}]},scope:Le({view:D.value})}),await((d=e==null?void 0:e.syncCount)==null?void 0:d.call(e)),await((t=e==null?void 0:e.syncPagination)==null?void 0:t.call(e)),await((p=e==null?void 0:e.globalCallback)==null?void 0:p.call(e))}async function Oe(l,{metaValue:u=o.value,viewMetaValue:c=D.value}={}){try{const h=await le.dbDataTableRow.delete(u==null?void 0:u.id,l.length===1?l[0]:l,{viewId:c==null?void 0:c.id});return await(Z==null?void 0:Z.trigger()),l.length===1&&h?[h]:h}catch(h){de.error(await Me(h))}}return{insertRow:I,updateRowProperty:T,addEmptyRow:re,deleteRow:ae,deleteRowById:J,deleteSelectedRows:Y,deleteRangeOfRows:fe,updateOrSaveRow:me,bulkUpdateRows:Q,bulkUpdateView:he,selectedAllRecords:_e,removeRowIfNew:l=>{const u=S.value.indexOf(l);return u>-1&&l.rowMeta.new?(S.value.splice(u,1),!0):!1},bulkDeleteRows:Oe,bulkInsertRows:ge}}const Mo=C=>C.map(o=>({row:{...o},oldRow:{...o},rowMeta:{}}));function Lo(C,o,D){const S=Ut(),{activeTableId:f,activeTable:e}=Je(S),te=se(()=>C.value||e.value),Re=se(()=>{var A;return((A=C.value)==null?void 0:A.id)||f.value}),{t:xe}=et(),ye=Ht("optimisedQuery",()=>!0),{api:k,isLoading:Le,error:E}=qt(),le=Gt(),ue=le.currentRoute,{appInfo:Z,gridViewPageSize:_e}=Wt(),{isAllowed:re}=Do(),I=_e.value||Z.value.defaultLimit||25,ge=M({page:1,pageSize:I}),T=M([]),me=M(),Q=M(),he=M(),oe=M([]),Se=M(!1),J=Ve(Kt,M(!1)),{base:ae}=Je(ut()),{sharedView:Y,fetchSharedViewData:fe,paginationData:Oe}=Jt(),{$api:N}=Qe(),{sorts:l,nestedFilters:u,whereQueryFromUrl:c,fetchTotalRowsWithSearchQuery:h,totalRowsWithSearchQuery:_,totalRowsWithoutSearchQuery:L}=dt(),{isUIAllowed:B}=Pt(),q=se(()=>ue.value.query),{isPaginationLoading:F}=Je(rt()),n=se({get:()=>J.value?Oe.value:ge.value,set:A=>{J.value?Oe.value=A:ge.value=A}}),i=se(()=>{var W;const A=ze();return((W=n.value)==null?void 0:W.isLastPage)&&A===oe.value.length-1}),s=se(()=>{var W;const A=ze();return((W=n.value)==null?void 0:W.isFirstPage)&&A===0}),d=se(()=>({offset:((n.value.page??0)-1)*(n.value.pageSize??I),limit:n.value.pageSize??I,where:(D==null?void 0:D.value)??""}));async function t(){var W,H,X;const{count:A}=await N.dbViewRow.count(qe,((W=te==null?void 0:te.value)==null?void 0:W.base_id)??((H=ae==null?void 0:ae.value)==null?void 0:H.id),Re.value,(X=o==null?void 0:o.value)==null?void 0:X.id);n.value.totalRows=A}async function p(){var b;const A=((b=n.value)==null?void 0:b.totalRows)??1/0,W=n.value.pageSize??I,H=n.value.page??1,X=Math.ceil(A/W),ee=Math.max(1,Math.min(X,H));H>ee?V==null||V(ee):await $({offset:(ee-1)*W,where:D==null?void 0:D.value})}async function v(){var W,H,X,ee,b;if(!B("commentCount")||J.value)return;const A=(H=(W=oe.value)==null?void 0:W.filter(({rowMeta:{new:ie}})=>!ie))==null?void 0:H.map(({row:ie})=>{var ne;return je(ie,(ne=te==null?void 0:te.value)==null?void 0:ne.columns)});if(!(!(A!=null&&A.length)||A!=null&&A.some(ie=>!ie)))try{T.value=await N.utils.commentCount({ids:A,fk_model_id:Re.value});for(const ie of oe.value){const ne=je(ie.row,(X=te.value)==null?void 0:X.columns);ie.rowMeta.commentCount=+(((b=(ee=T.value)==null?void 0:ee.find(Ce=>Ce.row_id===ne))==null?void 0:b.count)||0)}}catch(ie){console.error(ie)}}const g=M();async function y(A={}){var H;if(!h.value)return;g.value&&g.value.cancel();const W=pt.CancelToken;g.value=W.source();try{const X=J.value?await fe({offset:0,limit:1,sortsArr:l.value,filtersArr:u.value,where:c.value}):await k.dbViewRow.list("noco",ae.value.id,Re.value,o.value.id,{...A,offset:0,limit:1,...B("sortSync")?{}:{sortArrJson:JSON.stringify(l.value)},...B("filterSync")?{}:{filterArrJson:JSON.stringify(u.value)},where:c.value,include_row_color:!0},{cancelToken:g.value.token});L.value=((H=X.pageInfo)==null?void 0:H.totalRows)??0}catch(X){if(X.code==="ERR_CANCELED")return;console.error(X)}}const x=M();async function $(A={},W=!0){var ee,b,ie,ne,Ce;if((!((ee=ae==null?void 0:ae.value)!=null&&ee.id)||!Re.value||!((b=o.value)!=null&&b.id))&&!J.value)return;x.value&&x.value.cancel();const H=pt.CancelToken;x.value=H.source(),W&&(F.value=!0);let X;try{X=J.value?await fe({sortsArr:l.value,filtersArr:u.value,where:D==null?void 0:D.value}):await k.dbViewRow.list("noco",ae.value.id,Re.value,o.value.id,{...d.value,...A,...B("sortSync")?{}:{sortArrJson:JSON.stringify(l.value)},...B("filterSync")?{}:{filterArrJson:JSON.stringify(u.value)},where:D==null?void 0:D.value,...Se.value?{excludeCount:"true"}:{},include_row_color:!0},{cancelToken:x.value.token}),y(A)}catch(Pe){return Pe.code==="ERR_CANCELED"?void 0:((ne=(ie=Pe==null?void 0:Pe.response)==null?void 0:ie.data)==null?void 0:ne.error)==="FORMULA_ERROR"?(de.error(await Me(Pe)),await S.reloadTableMeta(Re.value),$(A,W)):(console.error(Pe),de.error(await Me(Pe)))}if(oe.value=Mo(X.list),n.value=X.pageInfo||n.value||{},_.value=n.value.totalRows??0,J.value&&(Oe.value=n.value),Se.value=!X.pageInfo,F.value=!1,n.value.totalRows!==void 0&&n.value.totalRows!==null){const Pe=Math.max(1,Math.ceil(n.value.totalRows/n.value.pageSize));Pe<n.value.page&&await V(Pe)}((Ce=o.value)==null?void 0:Ce.type)===Yt.GRID&&v()}async function K(){var A,W;(A=o==null?void 0:o.value)!=null&&A.id&&(me.value=J.value?(W=Y.value)==null?void 0:W.view:await N.dbView.galleryRead(o.value.id))}async function V(A){n.value.page=A,await $({offset:(A-1)*(n.value.pageSize||I),where:D==null?void 0:D.value},!0)}const{insertRow:r,updateRowProperty:R,addEmptyRow:j,deleteRow:a,deleteRowById:w,deleteSelectedRows:O,deleteRangeOfRows:P,updateOrSaveRow:U,bulkUpdateRows:G,bulkUpdateView:De,selectedAllRecords:$e,removeRowIfNew:Te}=Ao({meta:te,viewMeta:o,formattedData:oe,paginationData:n,callbacks:{changePage:V,loadData:$,syncCount:t,syncPagination:p}});async function ve(){var A,W,H;if((A=o==null?void 0:o.value)!=null&&A.id)try{const{columns:X,...ee}=await N.dbView.formRead(o.value.id);let b=1;const ie=(X||[]).reduce((ne,Ce)=>(b<Ce.order&&(b=Ce.order),{...ne,[Ce.fk_column_id]:Ce}),{});he.value=ee,Q.value=(H=(W=te==null?void 0:te.value)==null?void 0:W.columns)==null?void 0:H.map(ne=>{var Ce,Pe;return{...ne,fk_column_id:ne.id,fk_view_id:(Ce=o.value)==null?void 0:Ce.id,...ie[ne.id]?ie[ne.id]:{},meta:{validators:[],visibility:{errors:{}},...ft((Pe=ie[ne.id])==null?void 0:Pe.meta),...ft(ne.meta)},order:ie[ne.id]&&ie[ne.id].order||b++,id:ie[ne.id]&&ie[ne.id].id,visible:!0,permissions:{isAllowedToEdit:re(Qt.FIELD,ne.id,Xt.RECORD_FIELD_EDIT,{isFormView:!0}),label:xe("objects.permissions.formViewFieldEditPermissionRestrictionTooltip")}}}).sort((ne,Ce)=>ne.order-Ce.order)}catch(X){return de.error(`${xe("msg.error.setFormDataFailed")}: ${await Me(X)}`)}}async function Be(A){var W;if(!(!((W=o==null?void 0:o.value)!=null&&W.id)||!A||!B("viewFieldEdit")))try{await N.dbView.formUpdate(o.value.id,A)}catch(H){return de.error(`${xe("msg.error.formViewUpdateFailed")}: ${await Me(H)}`)}}function ze(){return oe.value.findIndex(A=>{var W;return q.value.rowId===je(A.row,(W=te.value)==null?void 0:W.columns)})}return{error:E,isLoading:Le,loadData:$,paginationData:n,queryParams:d,formattedData:oe,insertRow:r,updateRowProperty:R,changePage:V,addEmptyRow:j,deleteRow:a,deleteRowById:w,deleteSelectedRows:O,deleteRangeOfRows:P,updateOrSaveRow:U,bulkUpdateRows:G,bulkUpdateView:De,selectedAllRecords:$e,syncCount:t,syncPagination:p,galleryData:me,loadGalleryData:K,loadFormView:ve,formColumnData:Q,formViewData:he,updateFormView:Be,aggCommentCount:T,loadAggCommentsCount:v,removeRowIfNew:Te,navigateToSiblingRow:async A=>{var b,ie,ne,Ce,Pe;let H=ze()+(A===ct.NEXT?1:-1);for(;(ie=(b=oe.value[H])==null?void 0:b.rowMeta)!=null&&ie.new;)H=H+(A===ct.NEXT?1:-1);const X=((ne=n==null?void 0:n.value)==null?void 0:ne.page)||1;if(H<0){if(X===1)return de.info(xe("msg.info.noMoreRecords"));await V(X-1),H=oe.value.length-1}else if(H>=oe.value.length){if((Ce=n==null?void 0:n.value)!=null&&Ce.isLastPage)return de.info(xe("msg.info.noMoreRecords"));await V(X+1),H=0}const ee=je(oe.value[H].row,(Pe=te.value)==null?void 0:Pe.columns);ee&&await le.push({query:{...q.value,rowId:ee}})},getExpandedRowIndex:ze,optimisedQuery:ye,islastRow:i,isFirstRow:s}}const at=100,xo=Mt.useForm,Lt=bt((C,o)=>{const{$e:D}=Qe(),{t:S}=et(),{aiLoading:f,aiError:e,predictNextFields:te,predictNextFormulas:Re,predictNextButtons:xe}=At(),{meta:ye,view:k}=dt(),Le=Ve(Zt,M(!1)),E=M(),{$api:le}=Qe(),ue=M(!1),Z=M(!1),_e=se(()=>ue.value&&Z.value),re=M("field"),I=se(()=>re.value==="formula"),ge=M(null),T=M(""),me=M(""),Q=M(""),he=M(!1),oe=M(nt.AUTO_SUGGESTIONS),Se=M(!1),J=M(0),ae=se({get:()=>oe.value,set:r=>{oe.value=r,e.value="",ue.value&&D(`c:column:ai:tab-change:${r}`)}}),Y=M([]),fe=se(()=>Y.value.filter(r=>r.tab===ae.value)),Oe=M([]),N=M([]),l=se(()=>N.value.filter(r=>r.tab===ae.value)),u=M(null),c=M([]),h=se(()=>Y.value.filter(r=>!!r.selected&&r.tab===ae.value)),_=se(()=>f.value&&T.value==="predictFromPrompt"),L=se(()=>{const r={};if(!h.value.length)return r;for(const R of h.value){const j=[{validator:(a,w)=>new Promise((O,P)=>(_e.value?h.value.some(G=>{var De,$e;return G.ai_temp_id!==(w==null?void 0:w.ai_temp_id)&&(w==null?void 0:w.title)&&(w.title.toLowerCase().trim()===(((De=G.formState)==null?void 0:De.column_name)||"").toLowerCase().trim()||w.title.toLowerCase().trim()===((($e=G.formState)==null?void 0:$e.title)||"").toLowerCase().trim()||w.title.toLowerCase().trim()===((G==null?void 0:G.title)||"").toLowerCase().trim())}):!1)?P(new Error(`${S("msg.error.duplicateColumnName")} "${w==null?void 0:w.title}"`)):O())}];switch(R.type){case z.Formula:j.push({validator:(a,w)=>new Promise((O,P)=>{var U;return(U=w==null?void 0:w.formula_raw)!=null&&U.trim()?O():P(new Error("Formula is required"))})})}j.length&&(r[R.ai_temp_id]=j)}return r}),B=se(()=>h.value.length?h.value.reduce((r,R)=>(r[R.ai_temp_id]=R.formState,r),{}):{}),{validate:q}=xo(B,L),F=r=>{if([z.SingleSelect,z.MultiSelect].includes(r.type)&&r.options){const R=[];for(const j of r.options)R.find(a=>a.title===j)||R.push({title:j,index:R.length,color:lt.light[R.length%lt.light.length]});r.colOptions={options:R}}return{title:r.title,uidt:re.value==="formula"?z.Formula:re.value==="button"?z.Button:r.type,column_name:r.title.toLowerCase().replace(/\\W/g,"_"),...r.formula?{formula_raw:r.formula}:{},...r.colOptions?{colOptions:r.colOptions}:{},meta:Et.getColumnDefaultMeta(r.type),description:(r==null?void 0:r.description)||null,is_ai_field:!0,ai_temp_id:r.ai_temp_id}},n=async()=>{var j,a,w,O;const r=Array.from(new Set(l.value.map(P=>P.title).concat(C!=null&&C.value?((a=(j=o==null?void 0:o.value)==null?void 0:j.filter(P=>!!(P!=null&&P.title)&&!!(P!=null&&P.temp_id)))==null?void 0:a.map(P=>P.title))||[]:[])));return(await(re.value==="formula"?Re:re.value==="button"?xe:te)((w=ye.value)==null?void 0:w.id,r,(O=ye.value)==null?void 0:O.base_id,ae.value===nt.PROMPT?me.value:void 0,Le.value?kt:[])).filter(P=>{var U;return!tt([...fe.value,...C!=null&&C.value?((U=o==null?void 0:o.value)==null?void 0:U.filter(G=>!!(G!=null&&G.title)&&!!(G!=null&&G.temp_id)).map(G=>({title:G.title})))||[]:[]],P.title,"title")}).map(P=>{const U={...P,tab:ae.value,ai_temp_id:`temp_${++J.value}`,selected:!1};return C!=null&&C.value?U:{...U,formState:F(U)}})},i=()=>{D("c:column:ai:toggle:false",{mode:re.value}),V()},s=async()=>{var R;T.value="predictMore",D("a:column:ai:predict-more");const r=await n();r.length?(Y.value.push(...r),N.value.push(...r)):e.value||de.info(`No more auto suggestions were found for ${((R=ye.value)==null?void 0:R.title)||"the current table"}`)},d=async r=>{var j;T.value="predictRefresh",D("a:column:ai:predict-refresh");const R=await n();R.length?(Y.value=[...Y.value.filter(a=>a.tab!==ae.value||(C==null?void 0:C.value)&&a.tab===ae.value&&!!a.selected),...R],N.value.push(...R),wt(r)&&r()):e.value||de.info(`No auto suggestions were found for ${((j=ye.value)==null?void 0:j.title)||"the current table"}`),ge.value="pick"},t=async r=>{T.value="predictFromPrompt",D("a:column:ai:predict-from-prompt",{prompt:me.value});const R=await n();R.length?(Y.value=[...Y.value.filter(j=>j.tab!==ae.value||(C==null?void 0:C.value)&&j.tab===ae.value&&!!j.selected),...R],N.value.push(...R),Q.value=me.value,wt(r)&&r()):e.value||de.info("No suggestions were found with the given prompt. Try again after modifying the prompt."),ge.value="pick",he.value=!0},p=r=>{if(!(r.selected!==!0&&(h.value.length>=at||tt(Y.value.filter(R=>!!R.selected),r.title,"title")))){if(C!=null&&C.value&&r.selected){const R=Y.value.findIndex(a=>a.ai_temp_id===r.ai_temp_id);if(R===-1)return;const j=Y.value.splice(R,1)[0];j.selected=!1,Y.value.push(j)}else Y.value=Y.value.map(R=>(R.ai_temp_id===r.ai_temp_id&&(!(C!=null&&C.value)&&!r.selected&&(u.value=r.ai_temp_id),R.selected=!r.selected),R));return!0}},v=r=>{u.value=r.ai_temp_id},g=()=>{if(c.value.length>=at)return;let r=c.value.length;const R=[],j=[];return Y.value.forEach(a=>{r<at&&!tt(Oe.value,a.title,"title")&&!tt(c.value,a.title,"title")?(j.push(a),r++):R.push(a)}),c.value.push(...j.map(a=>(C!=null&&C.value||(a.formState=F(a)),a))),Y.value=R,j},y=()=>{switch(T.value){case"predictMore":return s();case"predictRefresh":return d();case"predictFromPrompt":return t()}},x=async()=>{var r;try{return await q(),!0}catch(R){if(console.error(R),(r=R==null?void 0:R.errorFields)!=null&&r.length){const j=R==null?void 0:R.errorFields.map((a,w)=>{var O,P;return(O=a==null?void 0:a.errors)!=null&&O.length?`${w+1}. ${(P=a==null?void 0:a.errors)==null?void 0:P.join(",")}`:""}).join(", ");return de.error(j||S("msg.error.someOfTheRequiredFieldsAreEmpty")),!1}}},$=async r=>{var a,w;if(!await x())return!1;Se.value=!1;const j=h.value.filter(O=>O.formState).map(O=>{var P,U,G,De;return{op:"add",column:{...O.formState,title:((P=O.formState)==null?void 0:P.title)||O.title,column_name:(((U=O.formState)==null?void 0:U.title)||O.title).toLowerCase().replace(/\\W/g,"_"),column_order:{view_id:(G=k.value)==null?void 0:G.id},view_id:(De=k.value)==null?void 0:De.id}}});try{const O=await le.dbTableColumn.bulk((a=ye.value)==null?void 0:a.id,{hash:E.value,ops:j});if(O&&((w=O.failedOps)!=null&&w.length)){const P=O.failedOps.filter(U=>{var G;return(G=U==null?void 0:U.column)==null?void 0:G.ai_temp_id}).map(U=>U.column.ai_temp_id);return Y.value=Y.value.filter(U=>{var G;return!!P.includes((G=U.formState)==null?void 0:G.ai_temp_id)}),Se.value=!0,!1}else return await(r==null?void 0:r()),!0}catch(O){return console.error(O),!1}},K=async(r="field",R=!1)=>{D("c:column:ai:toggle:true",{mode:r}),r==="formula"?re.value="formula":r==="button"?re.value="button":re.value="field",Z.value=!!R,e.value="",ue.value=!0,ge.value="init",Y.value=[],N.value=[],me.value="",Q.value="",he.value=!1;const j=await n();Y.value=j,N.value.push(...j),ge.value="pick"};function V(){u.value=null,re.value="field",ue.value=!1,Z.value=!1,ge.value=null,Y.value=[],Oe.value=[],N.value=[],c.value=[],T.value="",me.value="",Q.value="",he.value=!1,oe.value=nt.AUTO_SUGGESTIONS,Se.value=!1}return it(ye,async r=>{r!=null&&r.id&&(E.value=(await le.dbTableColumn.hash(r.id)).hash,N.value=[])},{deep:!0,immediate:!0}),{aiMode:ue,isAiModeFieldModal:_e,aiModeStep:ge,predicted:Y,activeTabPredictedFields:fe,removedFromPredicted:Oe,predictHistory:N,activeTabPredictHistory:l,activeSelectedField:u,selected:c,activeTabSelectedFields:h,calledFunction:T,prompt:me,oldPrompt:Q,isPromtAlreadyGenerated:he,maxSelectionCount:at,activeAiTab:ae,isPredictFromPromptLoading:_,isFormulaPredictionMode:I,fieldPredictionMode:re,failedToSaveFields:Se,onInit:V,toggleAiMode:K,disableAiMode:i,predictMore:s,predictRefresh:d,predictFromPrompt:t,onToggleTag:p,onSelectedTagClick:v,onSelectAll:g,handleRefreshOnError:y,saveFields:$}}),$o=to(),zo=Mt.useForm,[da,No]=Vt((C,o,D,S,f,e)=>{const te=ut(),{isMysql:Re,isPg:xe,isXcdbBase:ye}=te,{sqlUis:k}=Je(te),{$api:Le}=Qe(),{getMeta:E}=Ot(),{isMetaReadOnly:le}=Pt(),{t:ue}=et(),{$e:Z}=Qe(),_e=se(()=>{var a,w;return(a=C.value)!=null&&a.source_id?k.value[(w=C.value)==null?void 0:w.source_id]:Object.values(k.value)[0]}),re=rt(),{activeView:I}=Je(re),{xWhere:ge,view:T,eventBus:me}=dt(),{formattedData:Q,loadData:he}=Lo(C,T,ge),{isAiModeFieldModal:oe,activeTabSelectedFields:Se}=Lt(M(!1)),J=M(!1),ae=M(!1),Y=M(!1),fe=M(!1),Oe=M(!1),N=se(()=>{var a;return!!((a=o==null?void 0:o.value)!=null&&a.id)}),l=se(()=>{var a,w;return Re((a=C.value)!=null&&a.source_id?(w=C.value)==null?void 0:w.source_id:Object.keys(k.value)[0])}),u=se(()=>{var a,w;return xe((a=C.value)!=null&&a.source_id?(w=C.value)==null?void 0:w.source_id:Object.keys(k.value)[0])}),c=se(()=>eo(o.value)),h=se(()=>{var a,w;return ye((a=C.value)!=null&&a.source_id?(w=C.value)==null?void 0:w.source_id:Object.keys(k.value)[0])});let _;const L=M({}),B=M({}),q=a=>{L.value={...L.value,...a}},F=a=>{delete L.value[a]},n=a=>{B.value={...B.value,...a}},i=a=>{_=a},s=le.value?z.Formula:z.SingleLineText,d={title:"",description:"",uidt:null,custom:{}},t=M({...d,uidt:S!=null&&S.value?s:null,...$o(o.value||{})}),p=se(()=>!!(t.value.uidt===z.Button&&t.value.type===oo.Ai||Dt(t.value))),v=a=>{var U,G,De,$e,Te,ve,Be,ze,Ue,A,W,H,X,ee;J.value=!1;const w=j(!1),O=((U=_e.value)==null?void 0:U.getDataTypeForUiType(t.value,void 0))??{};t.value={...S!=null&&S.value||(G=t.value)!=null&&G.is_ai_field||(De=t.value)!=null&&De.ai_temp_id?{is_ai_field:($e=t.value)==null?void 0:$e.is_ai_field,ai_temp_id:(Te=t.value)==null?void 0:Te.ai_temp_id,view_id:(ve=t.value)==null?void 0:ve.view_id,description:(Be=t.value)==null?void 0:Be.description}:{},custom:{},...!N.value&&{title:w||t.value.title,column_name:w||t.value.column_name,uidt:t.value.uidt,temp_id:t.value.temp_id,userHasChangedTitle:!!((ze=t.value)!=null&&ze.userHasChangedTitle)},...N.value&&{...t.value},meta:{},rqd:!1,pk:!1,ai:!1,cdf:null,un:!1,dtx:"specificType",...O},a&&(t.value={...t.value,...a}),t.value.dtxp=((Ue=_e.value)==null?void 0:Ue.getDefaultLengthForDatatype(t.value.dt))??null,t.value.dtxs=((A=_e.value)==null?void 0:A.getDefaultScaleForDatatype(t.value.dt))??null;const P=[z.MultiSelect,z.SingleSelect];o&&P.includes(t.value.uidt)&&P.includes((W=o.value)==null?void 0:W.uidt)&&(t.value.dtxp=(H=o.value)==null?void 0:H.dtxp),gt.includes(t.value.uidt)&&(t.value.meta={validate:t.value.meta&&t.value.meta.validate}),o.value&&t.value.uidt===((X=o.value)==null?void 0:X.uidt)?(t.value.dtxp=o.value.dtxp,t.value.dtxs=o.value.dtxs):((ee=t.value)==null?void 0:ee.uidt)===z.Currency&&(t.value.dtxp=19,t.value.dtxs=2),t.value.altered=t.value.altered||2},g=(a=!1)=>{var w;q({}),n({}),t.value={meta:{},...((w=_e.value)==null?void 0:w.getNewColumn(1))??{}},t.value.title="",t.value.column_name="",le.value&&(t.value.uidt=s,v()),a&&!(S!=null&&S.value)&&(t.value.uidt=null)},y=se(()=>({title:[...N.value?[{required:!0,message:ue("msg.error.columnNameRequired")}]:[],{validator:(a,w)=>new Promise((O,P)=>{var G,De,$e,Te;if(w!==""&&((De=(D==null?void 0:D.value)||((G=C.value)==null?void 0:G.columns))!=null&&De.some(ve=>ve.id!==t.value.id&&((w||"").toLowerCase()===(ve.column_name||"").toLowerCase()||(w||"").toLowerCase()===(ve.title||"").toLowerCase())&&ve.system)))return P(new Error(ue("msg.error.duplicateSystemColumnName")));const U=oe.value?Se.value.some(ve=>{var Be,ze,Ue;return ve.ai_temp_id!==((Be=t.value)==null?void 0:Be.ai_temp_id)&&((w||"").toLowerCase().trim()===(((ze=ve.formState)==null?void 0:ze.column_name)||"").toLowerCase().trim()||(w||"").toLowerCase().trim()===(((Ue=ve.formState)==null?void 0:Ue.title)||"").toLowerCase().trim()||(w||"").toLowerCase().trim()===((ve==null?void 0:ve.title)||"").toLowerCase().trim())}):!1;if(w!==""&&((Te=(D==null?void 0:D.value)||(($e=C.value)==null?void 0:$e.columns))!=null&&Te.some(ve=>ve.id!==t.value.id&&((w||"").toLowerCase()===(ve.column_name||"").toLowerCase()||(w||"").toLowerCase()===(ve.title||"").toLowerCase()))||U))return P(new Error(ue("msg.error.duplicateColumnName")));O()})},ao()],uidt:[{required:!0,message:ue("msg.error.uiDataTypeRequired")}],cdf:[{validator:(a,w)=>new Promise((O,P)=>{const U=io(t.value,w);if(U)return P(new Error(ue(U)));O()})}],...(L==null?void 0:L.value)||{}})),{resetFields:x,validate:$,validateInfos:K}=zo(t,y),V=()=>{var w,O,P,U;t.value.rqd=!1,t.value.uidt!==z.ID&&(t.value.primaryKey=!1),t.value.ai=!1,t.value.cdf=null,t.value.un=!1,t.value.dtxp=((w=_e.value)==null?void 0:w.getDefaultLengthForDatatype(t.value.dt))??null,t.value.dtxs=((O=_e.value)==null?void 0:O.getDefaultScaleForDatatype(t.value.dt))??null,t.value.dtx="specificType";const a=[z.MultiSelect,z.SingleSelect];o.value&&a.includes(t.value.uidt)&&a.includes(o.value.uidt)&&(t.value.dtxp=o.value.dtxp),o.value&&t.value.uidt===((P=o.value)==null?void 0:P.uidt)?(t.value.dtxp=o.value.dtxp,t.value.dtxs=o.value.dtxs):((U=t.value)==null?void 0:U.uidt)===z.Currency&&(t.value.dtxp=19,t.value.dtxs=2),t.value.altered=t.value.altered||2},r=(a=2,w=!1)=>{t.value.altered=t.value.altered||a,w&&(t.value.cdf=t.value.cdf||null)},R=async(a,w)=>{var U,G,De,$e,Te,ve,Be,ze,Ue,A,W;try{if(!await $())return}catch(H){let X=!1;const ee=((H==null?void 0:H.errorFields)||[]).filter(b=>(B.value[(b==null?void 0:b.name)??""]&&(X=!0),(b==null?void 0:b.name)!=="cdf"&&!B.value[(b==null?void 0:b.name)??""])).map(b=>{var ie;return(ie=b.errors)==null?void 0:ie.join(", ")}).filter(Boolean).join(", ");if(ee){de.error(ee);return}if(X)return;if(!(e!=null&&e.value)||e.value&&!H.outOfDate){de.error(ue("msg.error.formValidationFailed"));return}}let O,P;try{ae.value=!0,t.value.table_name=(U=C.value)==null?void 0:U.table_name;const H=(G=t.value.custom)==null?void 0:G.ref_model_id;if(o.value){gt.includes(t.value.uidt)||(t.value.validate="");const{filters:X,...ee}=t.value;try{P=o.value,await Le.dbTableColumn.update((De=o.value)==null?void 0:De.id,ee),P&&[z.Date,z.DateTime,z.CreatedTime,z.LastModifiedTime].includes(P.uidt)&&re.loadViews({tableId:P==null?void 0:P.fk_model_id,ignoreLoading:!0,force:!0}),me.emit(mt.FIELD_UPDATE),me.emit(mt.ROW_COLOR_UPDATE)}catch(b){K.formula_raw||(K.formula_raw={}),K.formula_raw.validateStatus="error",($e=K.formula_raw)!=null&&$e.help||(K.formula_raw.help=[]),(Te=K.formula_raw)==null||Te.help.push(await Me(b)),de.error(await Me(b));return}await(_==null?void 0:_({update:!0,colId:(ve=o.value)==null?void 0:ve.id})),(Be=C.value)!=null&&Be.id&&o.value.uidt===z.Attachment&&o.value.uidt!==t.value.uidt&&re.updateViewCoverImageColumnId({metaId:C.value.id,columnIds:new Set([o.value.id])})}else{if(!t.value.title.trim()){const ee=yt({formState:t.value,tableExplorerColumns:D==null?void 0:D.value,metaColumns:((ze=C.value)==null?void 0:ze.columns)||[]});t.value.title=ee,t.value.column_name=ee}t.value.uidt,z.ID,O=(A=(await Le.dbTableColumn.create((Ue=C.value)==null?void 0:Ue.id,{...t.value,...w,view_id:I.value.id})).columns)==null?void 0:A.find(ee=>ee.title===t.value.title||ee.column_name===t.value.column_name),await(_==null?void 0:_({update:!1,colId:O==null?void 0:O.id,column:O})),no(t.value)&&((W=C.value)==null?void 0:W.id)!==t.value.childId&&(H?E(H,!0).then(()=>{}):E(t.value.childId,!0).then(()=>{})),Z("a:column:add",{datatype:t.value.uidt})}return await(a==null?void 0:a(O)),!0}catch(H){de.error(await Me(H))}finally{ae.value=!1}};function j(a=!0){var O,P,U,G;if((O=t.value)!=null&&O.is_ai_field||N.value||!(S!=null&&S.value)||(P=t.value)!=null&&P.userHasChangedTitle||!((U=f==null?void 0:f.value)!=null&&U.call(f,t.value)))return;const w=yt({formState:t.value,tableExplorerColumns:(D==null?void 0:D.value)||[],metaColumns:((G=C.value)==null?void 0:G.columns)||[]});if(a)t.value.title=w,t.value.column_name=w;else return w}return it(()=>{var a;return(a=t.value)==null?void 0:a.title},a=>t.value.column_name=a),{formState:t,generateNewColumnMeta:g,addOrUpdate:R,onAlter:r,onDataTypeChange:V,onUidtOrIdTypeChange:v,setAdditionalValidations:q,removeAdditionalValidation:F,setAvoidShowingToastMsgForValidations:n,resetFields:x,validate:$,validateInfos:K,isEdit:N,column:o,sqlUi:_e,isPg:u,isWebhookCreateModalOpen:Y,isAiButtonConfigModalOpen:Oe,isMysql:l,isSystem:c,isXcdbBase:h,disableSubmitBtn:J,setPostSaveOrUpdateCbk:i,updateFieldName:j,fromTableExplorer:S,isAiMode:p,formattedData:Q,loadData:he,tableExplorerColumns:D,defaultFormState:d,isScriptCreateModalOpen:fe,isSaving:ae}});function jo(){const C=No();if(C==null)throw new Error("Please call `useProvideColumnCreateStore` on the appropriate parent component");return C}const Fo={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function To(C,o){return ce(),Ne("svg",Fo,o[0]||(o[0]=[we("path",{fill:"currentColor",d:"M20 10.5a6.5 6.5 0 0 1-6.5 6.5H7.83l3.09 3.09L9.5 21.5L4 16l5.5-5.5l1.41 1.41L7.83 15h5.67c2.5 0 4.5-2 4.5-4.5S16 6 13.5 6H6V4h7.5a6.5 6.5 0 0 1 6.5 6.5"},null,-1)]))}const Bo=so({name:"mdi-arrow-u-left-bottom",render:To}),Uo=yo(()=>Co(()=>import("./Bew4Vbyd.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(C=>C.default||C)),Ho={class:"w-full"},qo={key:0,class:"flex items-center nc-select-option"},Go={class:"flex items-center w-full"},Wo={class:"flex-none h-6 w-6 flex cursor-pointer mx-1"},Ko={class:"flex flex-row w-full justify-center mt-2"},Jo={class:"flex py-1 items-center nc-select-option hover:bg-gray-100 group"},Qo=["data-testid"],Xo=["data-testid"],Yo={class:"flex-none h-6 w-6 flex cursor-pointer mx-1"},bo=["data-testid","onClick"],Zo=["data-testid","onClick"],ko={class:"flex py-1 items-center nc-select-option hover:bg-gray-100 group"},Eo={class:"flex items-center w-full"},Vo={class:"p-2 flex !cursor-disabled"},ea={class:"flex-none h-6 w-6 flex cursor-pointer mx-1"},ta={class:"flex flex-row w-full justify-center mt-2"},oa={key:2,class:"mt-2 pl-1"},Ee=20,aa=lo({__name:"SelectOptions",props:{value:{},fromTableExplorer:{type:Boolean},isKanbanStack:{type:Boolean},optionId:{},isNewStack:{type:Boolean}},emits:["update:value","saveChanges"],setup(C,{emit:o}){const D=C,S=o,f=uo(D,"value",S),{isKanbanStack:e,optionId:te,isNewStack:Re}=ro(D),{$e:xe}=Qe(),{setAdditionalValidations:ye,validateInfos:k,column:Le}=jo(),{isAiFeaturesEnabled:E,aiIntegrationAvailable:le,predictSelectOptions:ue}=At(),{isAiModeFieldModal:Z}=Lt(),_e=Ve(vo,M()),re=M(),I=M([]),ge=M(!1),T=M(Ee),me=M(!1),Q=M([]),he=M([]),oe=M({}),Se=M(lt.light),J=M([]),ae=Ve(co,M(!1)),{t:Y}=et(),fe=M(!1);ye({...{colOptions:[{type:"object",fields:{options:{validator:(i,s)=>new Promise((d,t)=>{for(const p of I.value)if(!(p.status==="remove"||p.status==="new")){if(!p.title.length)return t(new Error(Y("msg.selectOption.cantBeNull")));if(f.value.uidt===z.MultiSelect&&p.title.includes(","))return t(new Error(Y("msg.selectOption.multiSelectCantHaveCommas")));if(I.value.filter(v=>{var g,y;return((g=v.title)==null?void 0:g.trim())===((y=p.title)==null?void 0:y.trim())&&v.status!=="remove"}).length>1)return t(new Error(Y("msg.selectOption.cantHaveDuplicates")))}d()})}}}]}});const N=se(()=>Re.value?Q.value[Q.value.length-1]:te.value?Q.value.find(i=>i.id===te.value):null),l=()=>{let i=Se.value[0];if(I.value.length&&I.value[I.value.length-1].color){const s=Se.value.indexOf(I.value[I.value.length-1].color);i=Se.value[(s+1)%Se.value.length]}return i},u=(i=0)=>{re.value&&(re.value.scrollTop=re.value.scrollHeight+i)},c=()=>{ge.value=!0;const i={title:"",color:l(),index:I.value.length,...e.value?{status:"new"}:{}};I.value.push(i),e.value?Q.value=I.value:(me.value=!0,T.value=I.value.length-Ee,T.value=Math.max(T.value,0),Q.value=I.value.slice(T.value,I.value.length)),u(),st(()=>{setTimeout(()=>{const s=document.querySelectorAll(".nc-col-option-select-option .nc-select-col-option-select-option"),d=s[s.length-1];d&&d.focus()},150),u(),ge.value=!1})},h=(i=!1,s=!1,d)=>{f.value.colOptions=f.value.colOptions||{},f.value.colOptions.options=I.value.filter(t=>t.status!=="remove").sort((t,p)=>{const v=Q.value.findIndex(y=>t.index!==void 0&&y.index===t.index),g=Q.value.findIndex(y=>t.index!==void 0&&y.index===p.index);return v===-1||g===-1?0:v-g}).map(t=>{const{status:p,...v}=t;return v}),i&&S("saveChanges",s,!0,d)},_=i=>{var v;const s=Q.value[i];if(s.index===void 0||isNaN(s.index))return;const d=I.value[s.index];s.status="remove",d.status="remove",h();const t=(v=Q.value[i])==null?void 0:v.id,p=J.value.find(g=>g.id===t);p&&(f.value.uidt===z.SingleSelect?(he.value=[p],J.value=[],f.value.cdf=null):(he.value=[...he.value,p],J.value=J.value.filter(g=>g.id!==t),f.value.cdf=J.value.map(g=>g.title).join(",")))},L=(i,s=!1)=>{const d=J.value.findIndex(t=>t.id!==void 0&&i.id!==void 0?t.id===i.id:t.index===i.index);d!==-1&&(f.value.uidt===z.SingleSelect?(J.value[d].title=i.title,f.value.cdf=i.title):(J.value[d].title=i.title,f.value.cdf=J.value.map(t=>t.title).join(","))),h(s)},B=i=>{var v;const s=Q.value[i];if(s.index===void 0||isNaN(s.index))return;const d=I.value[s.index];s.status=void 0,d.status=void 0,h();const t=(v=Q.value[i])==null?void 0:v.id,p=he.value.find(g=>g.id===t);p&&(f.value.uidt===z.SingleSelect?(J.value=[p],f.value.cdf=p.title,he.value=[]):(J.value=[...J.value,p],f.value.cdf=J.value.map(g=>g.title).join(","),he.value=he.value.filter(g=>g.id!==t)))};it(f,i=>{var p;const s=(i.cdf??"").toString().split(","),d=(((p=i.colOptions)==null?void 0:p.options)??[]).reduce((v,g)=>(v[g.title.replace(/^'|'$/g,"")]=g,v),{});J.value=[];const t=s.filter(v=>d[v]?(J.value.push(d[v]),!0):!1).join(",");i.cdf=t.length===0?null:t});const q=async i=>{if(!ge.value){if(T.value===0){i.complete();return}if(i.loading(),T.value-=Ee,T.value=Math.max(T.value,0),Q.value=I.value.slice(T.value,I.value.length),u(100),T.value===0){i.complete();return}i.loaded()}},F=async i=>{if(!ge.value){if(T.value===I.value.length||(i.loading(),T.value+=Ee,T.value=Math.min(T.value,I.value.length),Q.value=I.value.slice(0,T.value),T.value===I.value.length))return i.complete();i.loaded()}},n=async()=>{var d,t,p,v,g;if(!((d=f.value)!=null&&d.title)||!((t=_e.value)!=null&&t.id))return;xe("a:column:ai:select:predict-options"),fe.value=!0;const i=I.value.map(y=>y.title).filter(y=>!!y.trim()),s=await ue((p=f.value)==null?void 0:p.title,(v=_e.value)==null?void 0:v.id,i,(g=_e.value)==null?void 0:g.base_id);if(fe.value=!1,s){for(const y of s)if(!(!(y!=null&&y.trim())||I.value.find(x=>x.title===y)))if(e.value){const x=I.value.find($=>$.status==="new");x?x.title=y:I.value.push({title:y,color:l(),index:I.value.length,...e.value?{status:"new"}:{}});break}else I.value.push({title:y,color:l(),index:I.value.length,...e.value?{status:"new"}:{}});e.value?Q.value=I.value:(me.value=!0,T.value=I.value.length-Ee,T.value=Math.max(T.value,0),Q.value=I.value.slice(T.value,I.value.length),h()),u()}};return fo(()=>{var d;(d=f.value.colOptions)!=null&&d.options||(f.value.colOptions={options:[]}),me.value=!1,I.value=[...f.value.colOptions.options];let i=0;I.value=I.value.map(t=>(t.index=i++,{...t})),e.value?Q.value=I.value:(T.value=Math.min(T.value,I.value.length),Q.value=[...I.value].slice(0,T.value));for(const t of I.value.filter(p=>p.order===null))t.title=t.title.replace(/^'/,"").replace(/'$/,"");f.value.cdf&&typeof f.value.cdf=="string"&&(I.value.filter(p=>p.title===f.value.cdf).length||(f.value.cdf=f.value.cdf.replace(/^'/,"").replace(/'$/,"")));const s=I.value.filter(t=>t.title===f.value.cdf);s.length&&(J.value=f.value.uidt===z.SingleSelect?[s[0]]:s),e.value&&Re.value?c():e.value&&st(()=>{setTimeout(()=>{const t=document.querySelectorAll(".nc-col-option-select-option .nc-select-col-option-select-option"),p=t[t.length-1];p&&p.focus()},150)})}),e.value&&po(re,i=>{var d,t,p,v,g,y,x;const s=(p=(t=(d=Le.value)==null?void 0:d.colOptions)==null?void 0:t.options)==null?void 0:p.find($=>{var K;return($==null?void 0:$.id)&&$.id===((K=N.value)==null?void 0:K.id)});(v=i.target)!=null&&v.closest(`.nc-select-option-color-picker, .nc-add-select-option-auto-suggest, .nc-kanban-stack-header-${(s==null?void 0:s.id)||"new-stack"}`)||((g=N.value)!=null&&g.title&&((s==null?void 0:s.title)!==((y=N.value)==null?void 0:y.title)||(s==null?void 0:s.color)!==((x=N.value)==null?void 0:x.color))?h(!0,!0,N.value):S("saveChanges",!0,!1))}),e.value||it(fe,i=>{i&&st(()=>{u()})}),(i,s)=>{var K,V,r,R,j;const d=go,t=mo,p=Uo,v=wo,g=ho,y=Bo,x=So,$=Ro;return ce(),Ne("div",Ho,[we("div",{ref_key:"optionsWrapperDomRef",ref:re,class:Ye(["nc-col-option-select-option",{"overflow-x-auto scrollbar-thin-dull rounded-lg":!m(e),"border-1 border-gray-200":m(Q).length&&!m(e),"bg-white":m(Z)}]),style:ot({maxHeight:D.fromTableExplorer?"calc(100vh - (var(--topbar-height) * 3.6) - 320px)":"calc(min(30vh, 250px))"})},[m(e)?(ce(),Ne(ht,{key:0},[m(N)?(ce(),Ne("div",qo,[we("div",Go,[Ie(v,{visible:m(oe)[m(N).index],"onUpdate:visible":s[2]||(s[2]=a=>m(oe)[m(N).index]=a),"auto-close":!1,"overlay-class-name":"nc-select-option-color-picker",disabled:m(fe)},{overlay:pe(()=>[we("div",null,[Ie(p,{modelValue:m(N).color,"onUpdate:modelValue":s[0]||(s[0]=a=>m(N).color=a),"is-open":m(oe)[m(N).index],onInput:s[1]||(s[1]=a=>{m(N).color=a,L(m(N))})},null,8,["modelValue","is-open"])])]),default:pe(()=>[we("div",Wo,[we("div",{class:Ye(["h-6 w-6 rounded flex items-center",{"justify-center":m(fe)}]),style:ot({backgroundColor:m(N).color,color:m(Xe).isReadable(m(N).color||"#ccc","#fff",{level:"AA",size:"large"})?"#fff":m(Xe).mostReadable(m(N).color||"#ccc",["#0b1d05","#fff"]).toHex8String()})},[m(fe)?(ce(),Fe(d,{key:0,size:"regular",class:"!text-current"})):(ce(),Fe(t,{key:1,icon:"arrowDown",class:"flex-none h-4 w-4 m-auto !text-current"}))],6)])]),_:1},8,["visible","disabled"]),Ie(g,{value:m(N).title,"onUpdate:value":s[3]||(s[3]=a=>m(N).title=a),placeholder:"Enter option name...",class:"caption !rounded-lg nc-select-col-option-select-option nc-kanban-stack-input !bg-transparent","data-testid":"nc-kanban-stack-title-input",disabled:m(fe),onKeydown:s[4]||(s[4]=_t(be(a=>h(!0,!0,m(N)),["prevent","stop"]),["enter"])),onChange:s[5]||(s[5]=()=>{m(N).status=void 0,L(m(N))})},null,8,["value","disabled"])]),m(Re)?(ce(),Ne("div",{key:0,class:"ml-1 hover:!text-black-500 text-gray-500 cursor-pointer hover:bg-gray-200 py-1 px-1.5 rounded-md h-7 flex items-center",onClick:s[6]||(s[6]=a=>S("saveChanges",!0,!1))},[(ce(),Fe(Ze(("iconMap"in i?i.iconMap:m(ke)).close),{class:"-mt-0.25 w-4 h-4"}))])):He("",!0)])):He("",!0)],64)):(ce(),Ne(ht,{key:1},[m(me)?(ce(),Fe(m(Rt),St({key:0},i.$attrs,{onInfinite:q}),{spinner:pe(()=>[we("div",Ko,[Ie(d)])]),complete:pe(()=>s[10]||(s[10]=[we("span",null,null,-1)])),_:1},16)):He("",!0),Ie(m(Oo),{list:m(Q),"item-key":"id",handle:".nc-child-draggable-icon",onChange:h},_o({item:pe(({element:a,index:w})=>[we("div",Jo,[we("div",{class:Ye(["flex items-center w-full",{removed:a.status==="remove"}]),"data-testid":`select-column-option-${w}`},[m(ae)?He("",!0):(ce(),Ne("div",{key:0,class:"nc-child-draggable-icon p-2 flex cursor-pointer","data-testid":`select-option-column-handle-icon-${a.title}`},[(ce(),Fe(Ze(("iconMap"in i?i.iconMap:m(ke)).dragVertical),{small:"",class:"handle"}))],8,Xo)),Ie(v,{visible:m(oe)[w],"onUpdate:visible":O=>m(oe)[w]=O,"auto-close":!1},{overlay:pe(()=>[we("div",null,[Ie(p,{modelValue:a.color,"onUpdate:modelValue":O=>a.color=O,"is-open":m(oe)[w],onInput:O=>{a.color=O,L(a)}},null,8,["modelValue","onUpdate:modelValue","is-open","onInput"])])]),default:pe(()=>[we("div",Yo,[we("div",{class:"h-6 w-6 rounded flex items-center",style:ot({backgroundColor:a.color,color:m(Xe).isReadable(a.color||"#ccc","#fff",{level:"AA",size:"large"})?"#fff":m(Xe).mostReadable(a.color||"#ccc",["#0b1d05","#fff"]).toHex8String()})},[Ie(t,{icon:"arrowDown",class:"flex-none h-4 w-4 m-auto !text-current"})],4)])]),_:2},1032,["visible","onUpdate:visible"]),Ie(g,{value:a.title,"onUpdate:value":O=>a.title=O,class:"caption !rounded-lg nc-select-col-option-select-option !bg-transparent","data-testid":`select-column-option-input-${w}`,disabled:a.status==="remove",onKeydown:_t(be(O=>{var P;return((P=a.title)==null?void 0:P.trim())&&c()},["prevent"]),["enter"]),onChange:O=>L(a)},null,8,["value","onUpdate:value","data-testid","disabled","onKeydown","onChange"])],10,Qo),a.status!=="remove"?(ce(),Ne("div",{key:0,"data-testid":`select-column-option-remove-${w}`,class:"mx-1 hover:!text-black-500 text-gray-500 cursor-pointer hover:bg-gray-200 py-1 px-1.5 rounded-md h-7 flex items-center invisible group-hover:visible",onClick:O=>_(w)},[(ce(),Fe(Ze(("iconMap"in i?i.iconMap:m(ke)).close),{class:"-mt-0.25 w-4 h-4"}))],8,bo)):(ce(),Ne("div",{key:1,"data-testid":`select-column-option-remove-undo-${w}`,class:"mx-1 hover:!text-black-500 text-gray-500 cursor-pointer hover:bg-gray-200 py-1 px-1.5 rounded-md h-7 flex items-center invisible group-hover:visible",onClick:O=>B(w)},[Ie(y,{class:"hover:!text-black-500 text-gray-500 cursor-pointer w-4 h-4",onClick:O=>B(w)},null,8,["onClick"])],8,Zo))])]),_:2},[m(fe)?{name:"footer",fn:pe(()=>[we("div",ko,[we("div",Eo,[we("div",Vo,[(ce(),Fe(Ze(("iconMap"in i?i.iconMap:m(ke)).dragVertical),{small:"",class:"handle opacity-75"}))]),we("div",ea,[we("div",{class:"h-6 w-6 rounded flex items-center justify-center",style:ot({backgroundColor:l(),color:m(Xe).isReadable(l()||"#ccc","#fff",{level:"AA",size:"large"})?"#fff":m(Xe).mostReadable(l()||"#ccc",["#0b1d05","#fff"]).toHex8String()})},[Ie(d,{size:"regular",class:"!text-current"})],4)]),s[11]||(s[11]=we("div",{class:"caption px-3"},"...",-1))])])]),key:"0"}:void 0]),1032,["list"]),m(me)?He("",!0):(ce(),Fe(m(Rt),St({key:1},i.$attrs,{onInfinite:F}),{spinner:pe(()=>[we("div",ta,[Ie(d)])]),complete:pe(()=>s[12]||(s[12]=[we("span",null,null,-1)])),_:1},16))],64))],6),(R=(r=(V=(K=m(k))==null?void 0:K.colOptions)==null?void 0:V.help)==null?void 0:r[0])!=null&&R[0]?(ce(),Ne("div",{key:0,class:Ye(["text-error text-[10px] mb-1 mt-2",{"pl-1":m(e)}])},Ge(m(k).colOptions.help[0][0]),3)):He("",!0),m(e)?(j=m(N))!=null&&j.id?He("",!0):(ce(),Ne("div",oa,[m(E)?(ce(),Fe($,{key:0,class:"w-full",placement:"bottom"},{title:pe(()=>[Ke(Ge(m(le)?i.$t("tooltip.autoSuggestSelectOptions"):i.$t("title.noAiIntegrationAvailable")),1)]),default:pe(()=>[Ie(x,{type:"secondary",theme:"ai",class:"nc-add-select-option-auto-suggest caption w-full",size:"small",disabled:m(fe)||!m(le),loading:m(fe),onClick:s[9]||(s[9]=be(a=>n(),["stop"]))},{icon:pe(()=>[Ie(t,{icon:"ncAutoAwesome",class:"h-4 w-4"})]),loading:pe(()=>[Ke(Ge(i.$t("labels.suggesting")),1)]),default:pe(()=>[Ke(" "+Ge(i.$t("labels.autoSuggest")),1)]),_:1},8,["disabled","loading"])]),_:1})):He("",!0)])):(ce(),Ne("div",{key:1,class:Ye(["nc-add-select-option-btn-wrapper flex shadow-sm",{"mt-2":m(Q).length,"bg-white":m(Z)}])},[Ie(x,{type:"text",class:"nc-add-select-option-btn flex-1 caption",size:"small","data-testid":"nc-add-select-option-btn",onClick:s[7]||(s[7]=be(a=>c(),["stop"]))},{icon:pe(()=>[(ce(),Fe(Ze(("iconMap"in i?i.iconMap:m(ke)).plus)))]),default:pe(()=>[Ke(" "+Ge(i.$t("labels.addOption")),1)]),_:1}),m(E)?(ce(),Fe($,{key:0,class:"w-1/2"},{title:pe(()=>{var a;return[Ke(Ge(m(le)?(a=m(f).title)!=null&&a.trim()?i.$t("tooltip.autoSuggestSelectOptions"):i.$t("tooltip.fieldNameIsRequriedToAutoSuggestOptions"):i.$t("title.noAiIntegrationAvailable")),1)]}),default:pe(()=>{var a;return[Ie(x,{type:"secondary",theme:"ai",class:"nc-add-select-option-auto-suggest w-full caption",size:"small",bordered:!1,disabled:m(fe)||!((a=m(f).title)!=null&&a.trim())||!m(le),loading:m(fe),onClick:s[8]||(s[8]=be(w=>n(),["stop"]))},{icon:pe(()=>[Ie(t,{icon:"ncAutoAwesome",class:"h-4 w-4"})]),loading:pe(()=>[Ke(Ge(i.$t("labels.suggesting")),1)]),default:pe(()=>[Ke(" "+Ge(i.$t("labels.autoSuggest")),1)]),_:1},8,["disabled","loading"])]}),_:1})):He("",!0)],2))])}}}),va=Object.assign(Io(aa,[["__scopeId","data-v-4179baa6"]]),{__name:"SmartsheetColumnSelectOptions"});export{va as _,Ao as a,da as b,jo as c,Lt as d,Lo as u};
