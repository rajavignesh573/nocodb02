const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Bew4Vbyd.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./AdvanceColorPicker.BPg1JaQv.css","./B1qoNiTF.js","./CbX26EBz.js","./TimeSelector.DAR2lbHN.css","./CYKJe2Bk.js","./DkpDpjnr.js","./Dv0nYk-Y.js","./B94p8ToD.js","./DkDj6Z7Z.js","./gAYHr7Gr.js","./Cd4chHHL.js","./boyBAVNN.js","./Cell.BBaBjsLL.css","./Bw607vNV.js","./CQa0sIfA.js","./yMSt-9W5.js","./BYKJ-MHf.js","./By5RWL3d.js","./D7poRkS0.js","./C2xdh4Xe.js","./CI3EriLB.js","./C2UaKEE0.js","./Item.GTPiKSkc.css","./C_VN1MCC.js","./index.CMurbi1o.css","./owbQkEXm.js","./DivDataCell.3R8zfazT.css","./DlXIlcns.js","./DP83Cqnl.js","./CVZBrAgI.js","./LhVKWcKT.js","./QeWwuUYP.js","./index._6B72PDH.css","./B89wxTuy.js","./DjPyxH1k.js","./Markdown.CUPXKfeQ.css","./DCa6wpIA.js","./B8gs0dG7.js","./mXY_vhPu.js","./Comments.DTONmK0N.css","./CHRPOXXy.js","./gByPF8bR.js","./Modal.CB1oWLel.css","./BCBMEREK.js","./DGFEr0h-.js","./DfIS_byq.js","./YbUkeyWR.js","./lL-0_K96.js","./CIOK9Y4w.js","./CNwEZGnv.js","./BVqTF1QK.js","./Ce4xoeky.js","./C3FZdmXk.js","./index.C8L8AhJa.css","./DDmv9w84.js","./DWLi1ZcL.js","./LockView.BWC8JyQk.css","./BALLsGq5.js","./DCm6TF8M.js","./Bj4kMpzI.js","./CbSESqy_.js","./Bxzk9hCO.js","./Bm6QmuXP.js","./CkpISeXq.js","./index.N-A1gxk9.css","./zMMvJhqz.js","./FilterInput.7KjqjE1F.css","./ytmFgNfN.js","./Pagination.Cmvjwryu.css","./DxC2Oool.js","./VirtualCell.6f0pX0MN.css","./CC4cUItJ.js","./EcM5l_HA.js","./BLPDl4Qg.js","./CsX17Y_h.js","./C_gbauhL.js","./BmscXXs6.js","./ColumnMenu.tCfxYPwr.css","./C1XMFoVa.js","./C-ZUx0lq.js","./YYodiGXA.js","./U3gU45AW.js","./C316Za7m.js","./CkvAmLZt.js","./D7OHpRdS.js","./DvtLu3FC.js","./D_txg4HT.js","./SelectOptions.BDAXdwVJ.css","./-iDxnmJF.js","./CKrOnbU4.js","./index.DA-8lYYb.css","./mHhFSiUY.js","./DAM89bga.js","./xLIsHrMo.js","./FieldListAutoCompleteDropdown.DdXE7zlY.css","./GU4raMbz.js","./ColumnFilter.C3qfKB4j.css","./BJfsf0sA.js","./B-pnMzog.js","./CtCRqrd3.js","./Editor.C6FZ3q1a.css","./dff0noV4.js","./Params.DMw5rYYq.css","./BNbENqHc.js","./Headers.DsAFPHpL.css","./Bpjsm0qV.js","./DzI8hkox.js","./PlainCell.CJha1QXQ.css","./CfTpfQ4B.js","./VirtualCell.krPvGNjk.css","./CDTi0oRk.js","./Cell.DrFrP4_9.css","./mKyOPxA7.js","./RichLongTextDefaultValue.4Q6T9GwP.css","./CgKG2xON.js","./Dfq_SHGC.js","./JqUqXTOd.js","./I4o4wRE2.js","./BMPzbwPk.js","./CwPFbl3n.js","./BSgyuQBI.js","./9etkoRoP.js"])))=>i.map(i=>d[i]);
var Ta=Object.defineProperty;var Ia=(s,k,d)=>k in s?Ta(s,k,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[k]=d;var cn=(s,k,d)=>Ia(s,typeof k!="symbol"?k+"":k,d);import{_ as Qe,$ as tl,c as r,o as l,an as K,aq as $e,ag as se,I as c,K as _,b as o,b9 as we,L as e,jH as Nl,w as n,d as M,t as p,ap as ut,O as ke,e as Ue,T as je,a,ao as Al,M as Ye,N as Pt,Q as ie,P as yn,ak as St,r as B,as as Wl,n as Y,be as zl,iX as Wt,jI as to,g as $t,aj as W,a3 as xt,ar as ql,f2 as lo,j0 as Il,jJ as Sl,f as yl,G as At,bd as Et,jg as hn,bi as on,fz as Tl,fC as dn,jK as qn,ba as jl,g2 as Sa,jL as Aa,jM as Oa,bM as bn,a$ as Ll,aG as nt,jN as La,cf as sl,bo as Fe,a0 as it,a1 as st,b3 as wn,a2 as xn,jO as Gn,jP as Ea,a_ as Ve,a9 as Mt,gU as Dt,eY as Gl,eZ as Hl,es as Lt,eJ as Ct,jQ as kn,ae as Ft,i1 as Ma,jR as Ul,jS as il,aH as nl,aX as Ne,jT as Da,jh as no,hy as Ua,ah as Gt,jU as $n,jV as Ra,jW as Pa,hU as Fa,jX as Ba,a8 as Ut,V as El,S as ul,jY as oo,ie as fl,jZ as Va,j as ll,fV as kt,fW as hl,fX as bl,da as ao,db as so,bB as an,j_ as _n,j$ as en,k0 as io,bK as ro,k1 as Na,k2 as za,i as uo,k3 as ja,bv as Wa,k4 as qa,al as Cn,iY as gn,g_ as co,bb as qt,k5 as Ga,a4 as Rt,gq as Ha,aC as Kl,bm as sn,aD as gl,fP as Yt,bz as Tn,Z as In,bq as Jt,br as Sn,k6 as Ka,aF as Xt,i9 as Ya,av as An,a7 as po,am as tn,k7 as Ja,U as On,eG as mo,k8 as Hn,b1 as Xa,ac as Yl,eH as ln,eS as Za,aw as _l,aE as Qa,ad as Ot,b2 as es,aP as Kn,bA as Yn,aJ as fo,bO as rn,k9 as ts,ka as Bl,kb as ls,eg as vo,kc as Jn,kd as ns,ke as os,kf as as,J as Ol,kg as _o,bC as go,a6 as yo,du as ho,eP as ss,a5 as rl,ca as is,u as rs,d6 as us,X as nn,Y as cs,cT as jt,bs as ds,dm as ps,b$ as Rl,fs as Pl,bW as bo,aA as ms,af as fs,f3 as vs,kh as _s,ic as pt,ki as gs,kj as ys,gz as hs,j9 as bs,ef as Ln,kk as ws,kl as xs,g6 as ks,fS as $s,fZ as Vl,ja as Cs,g$ as Ts,cS as Is,by as wo,gN as Ss,km as Fl,kn as As,y as Os,aZ as Ls,bN as xo,fn as Es,W as Ms,gu as Ds,fL as Us,fY as Xn,ko as Rs,kp as Ps,kq as Fs,jv as Bs,kr as Vs,ks as Ns,kt as pn,ku as mn,jB as zs,jl as Zn,jq as js,jj as Ws,fU as qs,ax as Gs,jx as Hs,fN as Ks}from"./DRA9KN5F.js";import{_ as Ys}from"./BLPDl4Qg.js";import{c as _t,d as ko,_ as Js,b as Xs}from"./CkvAmLZt.js";import{a as En,_ as Zs}from"./C3FZdmXk.js";import{L as Qs,_ as ei,a as ti}from"./JqUqXTOd.js";import{_ as Mn,R as Dn}from"./YbUkeyWR.js";import{u as $o}from"./D7poRkS0.js";import{_ as li}from"./C5HnjaiI.js";import{u as ni,S as oi,P as ai,E as si,t as ii}from"./DjPyxH1k.js";import{s as ri}from"./Bc3_tI4-.js";import{e as Co,i as ui}from"./gAYHr7Gr.js";import{_ as Un}from"./CsX17Y_h.js";import{_ as Rn}from"./BCBMEREK.js";import{_ as ci}from"./CJAyvGKH.js";import{_ as To}from"./C2UaKEE0.js";import{_ as Io}from"./C_VN1MCC.js";import{_ as So}from"./QeWwuUYP.js";import{_ as di}from"./Dv0nYk-Y.js";import{_ as Ao}from"./D43249YX.js";import{S as Oo}from"./CNwEZGnv.js";import{u as pi}from"./U3gU45AW.js";import{i as mi}from"./BYKJ-MHf.js";import{u as fi}from"./B94p8ToD.js";import{_ as vi}from"./BBg0y0zb.js";import{C as _i,_ as gi}from"./-iDxnmJF.js";import{u as yi}from"./CQa0sIfA.js";const hi={"Africa/Timbuktu":"Africa/Bamako","America/Argentina/ComodRivadavia":"America/Argentina/Catamarca","America/Atka":"America/Adak","America/Buenos_Aires":"America/Argentina/Buenos_Aires","America/Catamarca":"America/Argentina/Catamarca","America/Coral_Harbour":"America/Atikokan","America/Cordoba":"America/Argentina/Cordoba","America/Ensenada":"America/Tijuana","America/Fort_Wayne":"America/Indiana/Indianapolis","America/Indianapolis":"America/Indiana/Indianapolis","America/Jujuy":"America/Argentina/Jujuy","America/Knox_IN":"America/Indiana/Knox","America/Louisville":"America/Kentucky/Louisville","America/Mendoza":"America/Argentina/Mendoza","America/Montreal":"America/Toronto","America/Porto_Acre":"America/Rio_Branco","America/Rosario":"America/Argentina/Cordoba","America/Shiprock":"America/Denver","America/Virgin":"America/St_Thomas","Asia/Calcutta":"Asia/Kolkata","Asia/Chungking":"Asia/Chongqing","Asia/Dacca":"Asia/Dhaka","Asia/Istanbul":"Europe/Istanbul","Asia/Katmandu":"Asia/Kathmandu","Asia/Muscat":"Asia/Dubai","Asia/Saigon":"Asia/Ho_Chi_Minh","Asia/Tel_Aviv":"Asia/Jerusalem","Asia/Ujung_Pandang":"Asia/Makassar","Atlantic/Faeroe":"Atlantic/Faroe","Atlantic/Jan_Mayen":"Europe/Oslo","Australia/ACT":"Australia/Sydney","Australia/Canberra":"Australia/Sydney","Australia/LHI":"Australia/Lord_Howe","Australia/North":"Australia/Darwin","Australia/NSW":"Australia/Sydney","Australia/Queensland":"Australia/Brisbane","Australia/South":"Australia/Adelaide","Australia/Tasmania":"Australia/Hobart","Australia/Victoria":"Australia/Melbourne","Australia/West":"Australia/Perth","Australia/Yancowinna":"Australia/Broken_Hill","Brazil/Acre":"America/Rio_Branco","Brazil/DeNoronha":"America/Noronha","Brazil/East":"America/Sao_Paulo","Brazil/West":"America/Manaus","Canada/Atlantic":"America/Halifax","Canada/Central":"America/Winnipeg","Canada/Eastern":"America/Toronto","Canada/Mountain":"America/Edmonton","Canada/Newfoundland":"America/St_Johns","Canada/Pacific":"America/Vancouver","Canada/Saskatchewan":"America/Regina","Canada/Yukon":"America/Whitehorse","Chile/Continental":"America/Santiago","Chile/EasterIsland":"Pacific/Easter",Cuba:"America/Havana",Egypt:"Africa/Cairo",Eire:"Europe/Dublin","Etc/UCT":"Etc/UTC","Europe/Belfast":"Europe/London","Europe/Tiraspol":"Europe/Chisinau",GB:"Europe/London","GB-Eire":"Europe/London",Greenwich:"Etc/GMT",Hongkong:"Asia/Hong_Kong",Iceland:"Atlantic/Reykjavik","Indian/Antananarivo":"Indian/Mayotte","Indian/Chagos":"Indian/Maldives","Indian/Comoro":"Indian/Mayotte","Indian/Mahe":"Indian/Mauritius",Iran:"Asia/Tehran",Israel:"Asia/Jerusalem",Jamaica:"America/Jamaica",Japan:"Asia/Tokyo",Kwajalein:"Pacific/Kwajalein",Libya:"Africa/Tripoli","Mexico/BajaNorte":"America/Tijuana","Mexico/BajaSur":"America/Mazatlan","Mexico/General":"America/Mexico_City",NZ:"Pacific/Auckland","NZ-CHAT":"Pacific/Chatham",Navajo:"America/Denver",PRC:"Asia/Shanghai","Pacific/Johnston":"Pacific/Honolulu","Pacific/Midway":"Pacific/Pago_Pago","Pacific/Ponape":"Pacific/Pohnpei","Pacific/Samoa":"Pacific/Pago_Pago","Pacific/Truk":"Pacific/Chuuk","Pacific/Yap":"Pacific/Chuuk",Poland:"Europe/Warsaw",Portugal:"Europe/Lisbon",ROC:"Asia/Taipei",ROK:"Asia/Seoul",Singapore:"Asia/Singapore",Turkey:"Europe/Istanbul",UCT:"Etc/UTC","US/Alaska":"America/Anchorage","US/Aleutian":"America/Adak","US/Arizona":"America/Phoenix","US/Central":"America/Chicago","US/East-Indiana":"America/Indiana/Indianapolis","US/Eastern":"America/New_York","US/Hawaii":"Pacific/Honolulu","US/Indiana-Starke":"America/Indiana/Knox","US/Michigan":"America/Detroit","US/Mountain":"America/Denver","US/Pacific":"America/Los_Angeles","US/Samoa":"Pacific/Pago_Pago","W-SU":"Europe/Moscow",Zulu:"Etc/UTC"};function Qn(s,k){return s===k||s===hi[k]}const bi={props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data(){return{selectedIndex:0}},watch:{items(){this.selectedIndex=0},selectedIndex(){tl(()=>{this.scrollToSelected()})}},created(){},methods:{onKeyDown({event:s}){return s.key==="ArrowUp"?(this.upHandler(),!0):s.key==="ArrowDown"?(this.downHandler(),!0):s.key==="Enter"?(s.stopPropagation(),this.enterHandler(s),!0):s.key==="Tab"?(this.selectItem(this.selectedIndex),!0):(s.key==="}"&&setTimeout(()=>{this.selectItem(this.selectedIndex)},250),!1)},scrollToSelected(){const s=this.$el.querySelector(".is-selected");s&&s.scrollIntoView({block:"nearest"})},upHandler(){this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length},downHandler(){this.selectedIndex=(this.selectedIndex+1)%this.items.length},enterHandler(s){this.selectItem(this.selectedIndex,s)},selectItem(s,k){const d=this.items[s];d&&this.command({id:d.title})}}},wi=["onClick"],xi={key:1,class:"px-4"};function ki(s,k,d,P,t,i){const h=ut;return l(),r("div",{class:"w-64 bg-white scroll-smooth nc-mention-list nc-scrollbar-thin border-1 border-gray-200 rounded-lg max-h-64 !py-2 px-2 shadow-lg",onMousedown:k[0]||(k[0]=ke(()=>{},["stop"]))},[d.items.length?(l(!0),r(K,{key:0},$e(d.items,(u,w)=>(l(),r("div",{key:w,class:se([{"is-selected":w===t.selectedIndex},"py-2 flex hover:bg-gray-100 rounded-md transition-all cursor-pointer items-center gap-2 text-gray-800 pl-4"]),onClick:x=>i.selectItem(w,x)},[u!=null&&u.uidt?(l(),c(we(("getUIDTIcon"in s?s.getUIDTIcon:e(Nl))(u.uidt)),{key:0,class:"flex-none w-3.5 h-3.5"})):_("",!0),o(h,{class:"truncate","show-on-truncate-only":"","tooltip-style":{zIndex:"10000"}},{title:n(()=>[M(p((u==null?void 0:u.title)||""),1)]),default:n(()=>[M(" "+p((u==null?void 0:u.title)||""),1)]),_:2},1024)],10,wi))),128)):(l(),r("div",xi,"No field available"))],32)}const $i=Qe(bi,[["render",ki],["__scopeId","data-v-d01525a6"]]),Ci={class:"flex item-center gap-2"},Ti={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},Ii=Ue({__name:"UpdateConfirm",props:{visible:{type:Boolean},saving:{type:Boolean}},emits:["submit","cancel","update:visible"],setup(s,{emit:k}){const d=s,P=k,t=je(d,"visible",P);return(i,h)=>{const u=Ye,w=Pt,x=yn;return l(),c(x,{visible:e(t),"onUpdate:visible":h[3]||(h[3]=O=>ie(t)?t.value=O:null),size:"small","show-separator":!1,centered:!1},{header:n(()=>h[4]||(h[4]=[a("div",{class:"flex flex-row items-center gap-x-2"},"Field Type Change",-1)])),default:n(()=>[a("div",{class:"flex flex-col",onClick:h[2]||(h[2]=ke(()=>{},["stop"]))},[a("div",{class:se(["text-gray-800",{"mb-3":i.$slots["entity-preview"]}])},[a("div",Ci,[o(u,{id:"nc-selected-item-icon",icon:"alertTriangle",class:"h-10 w-10 text-yellow-500"}),h[5]||(h[5]=M(" This action cannot be undone. Converting data types may result in data loss. Proceed with caution! "))])],2),Al(i.$slots,"entity-preview"),a("div",Ti,[o(w,{size:"small",type:"secondary",onClick:h[0]||(h[0]=O=>t.value=!1)},{default:n(()=>[M(p(i.$t("general.cancel")),1)]),_:1}),o(w,{key:"submit",autofocus:"",size:"small",type:"primary","html-type":"submit",loading:i.saving,"data-testid":"nc-delete-modal-delete-btn",onClick:h[1]||(h[1]=O=>P("submit"))},{loading:n(()=>h[6]||(h[6]=[M(" Saving... ")])),default:n(()=>[h[7]||(h[7]=M(" Update "))]),_:1,__:[7]},8,["loading"])])])]),_:3},8,["visible"])}}}),Si=Object.assign(Ii,{__name:"DlgColumnUpdateConfirm"}),Ai=["onKeydown"],Oi={class:"nc-column-list-wrapper flex-col w-full max-h-[290px] nc-scrollbar-thin !overflow-y-auto px-2"},Li={key:0,class:"px-2 py-6 text-gray-500 flex flex-col items-center gap-6"},Ei=["data-testid","onClick"],Mi={class:"flex flex-1 gap-2 items-center"},Di={key:0,class:"flex-1 flex"},Ui={key:1,class:"!text-xs !text-gray-300"},Ri={key:2,class:"text-sm text-nc-content-purple-dark bg-purple-50 px-2 rounded-md"},Pi=Ue({__name:"UITypesOptionsWithSearch",props:{options:{},extraIcons:{}},emits:["selected"],setup(s,{emit:k}){const d=s,P=k,{options:t}=St(d),i=B(""),{isMetaReadOnly:h}=Wl(),u=B({}),w=Y(()=>(u.value={},(t.value||[]).filter($=>zl([$.name,Wt[$.name]],i.value)?!0:zl([...to[$.name]||[]],i.value,b=>{b&&(u.value[$.name]=`Matched by keyword: ${b}`)})))),x=B(),O=B(-1),A=$=>h.value&&!Il.includes($),D=$=>{!$||A($)||P("selected",$)},L=()=>{const $=document.querySelector(".nc-column-list-option-active");$&&setTimeout(()=>{$==null||$.scrollIntoView({behavior:"smooth",block:"center"})},50)},m=()=>{O.value=Math.min(O.value+1,w.value.length-1),L()},v=()=>{O.value=Math.max(O.value-1,0),L()},C=()=>{(w.value[O.value]||w.value[0])&&D(w.value[O.value].name)};$t(()=>{i.value="",O.value=t.value.findIndex($=>$.name===W.SingleLineText)});const{isSystem:U}=_t();return($,b)=>{const H=Ye,ne=ql,q=ut,j=Ys;return l(),r("div",{class:"flex-1 border-1 border-gray-200 rounded-lg flex flex-col pb-2","data-testid":"nc-column-uitypes-options-list-wrapper",onKeydown:[xt(ke(m,["prevent"]),["arrow-down"]),xt(ke(v,["prevent"]),["arrow-up"]),b[3]||(b[3]=xt(ke(N=>D(e(w)[e(O)].name),["prevent"]),["enter"]))]},[a("div",{class:"w-full mb-2 !border-b-1",onClick:b[2]||(b[2]=ke(()=>{},["stop"]))},[o(ne,{ref_key:"inputRef",ref:x,value:e(i),"onUpdate:value":b[0]||(b[0]=N=>ie(i)?i.value=N:null),placeholder:`${$.$t("general.search")} ${$.$t("labels.columnType").toLowerCase()}`,class:"nc-column-type-search-input nc-toolbar-dropdown-search-field-input !border-none !shadow-none !py-2 !rounded-t-lg",disabled:e(U),onKeydown:xt(ke(C,["stop"]),["enter"]),onChange:b[1]||(b[1]=N=>O.value=0)},{prefix:n(()=>[o(H,{icon:"search",class:"nc-search-icon h-4 w-4 mr-1"})]),_:1},8,["value","placeholder","disabled","onKeydown"])]),a("div",Oi,[e(w).length?_("",!0):(l(),r("div",Li,[b[4]||(b[4]=a("img",{src:lo,class:"!w-[164px] flex-none",alt:"No search results found"},null,-1)),M(" "+p(e(t).length?$.$t("title.noResultsMatchedYourSearch"):"The list is empty"),1)])),(l(!0),r(K,null,$e(e(w),(N,J)=>(l(),c(j,{key:J,message:$.$t("tooltip.typeNotAllowed"),enabled:A(N.name)},{default:n(()=>[a("div",{class:se(["flex w-full py-2 items-center justify-between px-2 rounded-md",[`nc-column-list-option-${J}`,{"hover:bg-gray-100 cursor-pointer":!A(N.name),"bg-gray-100 nc-column-list-option-active":e(O)===J&&!A(N.name),"!text-gray-400 cursor-not-allowed":A(N.name),"!text-nc-content-purple-dark":N.name==="AIButton"||N.name==="AIPrompt"}]]),"data-testid":N.name,onClick:oe=>D(N.name)},[a("div",Mi,[(l(),c(we(N.icon),{class:se(["w-4 h-4",A(N.name)?"!text-gray-400":"text-gray-700"])},null,8,["class"])),a("div",{class:se(["text-sm",{"flex-1":!e(u)[N.name]}])},p(e(Wt)[N.name]),3),e(u)[N.name]?(l(),r("div",Di,[o(q,{title:e(u)[N.name],class:"flex cursor-help"},{default:n(()=>[o(H,{icon:"info",class:"flex-none h-3.5 w-3.5 text-nc-content-gray-muted"})]),_:2},1032,["title"])])):_("",!0),N.deprecated?(l(),r("span",Ui,"("+p($.$t("general.deprecated"))+")",1)):_("",!0),N.isNew?(l(),r("span",Ri,p($.$t("general.new")),1)):_("",!0)]),$.extraIcons&&$.extraIcons[N.name]?(l(),c(H,{key:0,class:"!text-gray-500",icon:$.extraIcons[N.name]},null,8,["icon"])):_("",!0)],10,Ei)]),_:2},1032,["message","enabled"]))),128))])],40,Ai)}}}),Fi=Object.assign(Pi,{__name:"SmartsheetColumnUITypesOptionsWithSearch"}),Bi=Object.keys(Sl),Vi={base:"vs",inherit:!0,rules:[{token:"string",foreground:"#007b77",fontStyle:"bold"},{token:"keyword",foreground:"#00921d",fontStyle:"bold"},{token:"number",foreground:"#9c6200",fontStyle:"bold"},{token:"operator",foreground:"#000000"},{token:"identifier",foreground:"#8541f9",fontStyle:"bold"},{token:"delimiter.parenthesis",foreground:"#333333",fontStyle:"bold"},{token:"delimiter.brace",foreground:"#8541f9",fontStyle:"bold"},{token:"invalid",foreground:"#000000"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editorCursor.foreground":"#3366FF","editor.selectionBackground":"#3366FF50",focusBorder:"#ffffff"}},Ni=s=>(s=s.map(d=>`{${d}}`),{defaultToken:"invalid",keywords:Bi,identifiers:s,brackets:[{open:"(",close:")",token:"delimiter.parenthesis"},{open:"{",close:"}",token:"delimiter.brace"}],tokenizer:{root:[[/"/,{token:"string.quote",bracket:"@open",next:"@dblString"}],[/'/,{token:"string.quote",bracket:"@open",next:"@sglString"}],[new RegExp(`\\{(${s.map(d=>d.replace(/^\{([\s\S]+)\}$/,"$1").replace(/[.*+?^${}()|[\]\\-]/g,"\\$&")).join("|")})\\}`),{cases:{"@identifiers":"identifier","@default":"invalid"}}],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"keyword","@default":"invalid"}}],[/\d+/,"number"],[/[-+/*=<>!]+/,"operator"],[/[{}()]/,"@brackets"],[/[ \t\r\n]+/,"white"]],dblString:[[/[^\\"]+/,"string"],[/\\./,"string.escape"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],sglString:[[/[^\\']+/,"string"],[/\\./,"string.escape"],[/'/,{token:"string.quote",bracket:"@close",next:"@pop"}]]}}),zi={brackets:[["{","}"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},vl={name:"formula",theme:Vi,generateLanguageDefinition:Ni,languageConfiguration:zi},ji=Object.keys(Sl);function eo(s,k){let d=!1,P=!1,t=!1;for(let i=0;i<k;i++){const h=s[i];if(t){t=!1;continue}if(h==="\\"){t=!0;continue}h==="'"&&!P?d=!d:h==='"'&&!d&&(P=!P)}return P||d}class Wi{constructor(){cn(this,"trie");cn(this,"suggestions");this.trie={},this.suggestions=[]}newNode(){return{value:[],isLeaf:!1,children:{}}}add(k){Object.keys(this.trie).length===0&&(this.trie=this.newNode());let d=this.trie;for(const P of k.text.toLowerCase())P in d.children||(d.children[P]=this.newNode()),d=d.children[P];d.value=d.value||[],d.value.push(k),d.isLeaf=!0}find(k){Object.keys(this.trie).length===0&&(this.trie=this.newNode());let d=this.trie;for(const P of k)if(P in d.children)d=d.children[P];else return null;return d}traverse(k){k.isLeaf&&this.suggestions.push(...k.value);for(const d in k.children)this.traverse(k.children[d])}complete(k,d=null){this.suggestions=[];const P=this.find(k.toLowerCase());if(!P||Object.keys(P).length===0)return this.suggestions;this.suggestions.push(...P.value);const t=P.children;let i=0;for(const h in t)if(this.traverse(t[h]),i++,d&&i===d)break;return this.suggestions}}const qi={class:"pr-3"},Gi={class:"flex flex-row w-full justify-between pb-2 border-b-1"},Hi={class:"flex items-center gap-x-1 font-semibold text-lg text-gray-600"},Ki={class:"flex flex-col max-h-120 nc-scrollbar-thin pr-2"},Yi={class:"flex mt-3 text-[13px] leading-6"},Ji={class:"bg-white rounded-md py-1 text-[13px] mono-font leading-6 px-2 border-1"},Xi={class:"flex flex-row mt-3 mb-3 justify-end pr-3"},Zi=["href"],Qi={key:0,class:"w-full flex justify-end mt-2"},er={class:"flex gap-2 items-center"},tr={key:0,class:"text-[13px] font-semibold"},lr={key:1,class:"text-[13px] font-semibold"},nr={key:1,class:"prompt-wrapper"},or={class:"prompt-input-wrapper w-full flex"},ar={class:"flex items-center gap-2 pl-3 pr-1 py-1"},sr={class:"flex items-center gap-2"},ir={key:0,class:"border-b-1 bg-gray-50 px-3 py-1 uppercase text-gray-600 text-xs font-semibold sticky top-0 z-10"},rr={key:0,class:"ml-5 text-gray-400 text-xs"},ur={key:0,class:"border-b-1 bg-gray-50 px-3 py-1 uppercase text-gray-600 text-xs font-semibold sticky top-0 z-10"},cr={class:"flex items-center gap-x-1 justify-between"},dr={class:"flex items-center gap-x-1 rounded-md px-1 h-5"},pr={class:"text-small leading-[18px] text-gray-800 font-weight-500"},mr=Ue({__name:"FormulaInputHelper",props:{error:{type:Boolean},editorError:{},value:{},label:{},editorHeight:{},suggestionHeight:{default:"large"},disableSuggestionHeaders:{type:Boolean,default:!1},disabledFormulas:{default:()=>[]}},emits:["update:value"],setup(s,{emit:k}){const d=s,P=k,{suggestionHeight:t,editorHeight:i}=St(d),h=je(d,"value",P),{$e:u}=yl(),w=[W.QrCode,W.Barcode,W.Button],{sqlUi:x,column:O,fromTableExplorer:A,validateInfos:D}=_t(),{isAiModeFieldModal:L}=ko(),m=At(Et,B()),v=Y(()=>{var I,G;return((G=(I=m==null?void 0:m.value)==null?void 0:I.columns)==null?void 0:G.filter(he=>!(w.includes(he.uidt)||hn(he,m.value))))||[]}),C=B(),U=B(0),$=B(!0),b=ji,H=["+","-","*","/",">","<","==","<=",">=","!=","&"],ne=B([]),q=B([]),j=B(""),N=B(0),J={column:0,function:1,op:2},oe=Y(()=>{const I=x.value.getUnsupportedFnList();return[...b.map(G=>({text:`${G}()`,type:"function",description:Sl[G].description,syntax:Sl[G].syntax,examples:Sl[G].examples,docsUrl:Sl[G].docsUrl,unsupported:I.includes(G)})),...v.value.filter(G=>{var he;return G.uidt===W.LinkToAnotherRecord&&G.system?!1:O?((he=O.value)==null?void 0:he.id)!==G.id:!0}).map(G=>({text:G.title,type:"column",icon:Nl(G.uidt)?on(Nl(G.uidt)):void 0,uidt:G.uidt})),...H.map(G=>({text:G,type:"op"}))].sort((G,he)=>G.unsupported&&!he.unsupported?1:!G.unsupported&&he.unsupported?-1:0).filter(G=>!d.disabledFormulas.includes(G.text))}),ce=B(oe.value),f=Y(()=>{const I=new Wi;for(const G of oe.value)I.add(G);return I}),ge=Y(()=>ce.value.filter(I=>I&&I.type!=="column")),ye=Y(()=>ce.value.filter(I=>I&&I.type==="column")),Ae=B();let _e,Q;function Z(){const I=_e.getModel(),G=_e.getPosition();if(!I||!G)return null;const he=I.getWordAtPosition(G);return he==null?void 0:he.word}const z=jl(function(){F()},250);$t(async()=>{Ae.value&&(Q=Tl.createModel(h.value,"formula"),dn.register({id:vl.name}),Tl.defineTheme(vl.name,vl.theme),dn.setMonarchTokensProvider(vl.name,vl.generateLanguageDefinition(v.value.map(I=>I.title.replace(/@/g,"")))),dn.setLanguageConfiguration(vl.name,vl.languageConfiguration),Tl.addKeybindingRules([{keybinding:qn.DownArrow,when:"editorTextFocus"},{keybinding:qn.UpArrow,when:"editorTextFocus"}]),_e=Tl.create(Ae.value,{model:Q,contextmenu:!1,theme:"formula",selectOnLineNumbers:!1,language:"formula",roundedSelection:!1,scrollBeyondLastLine:!1,lineNumbers:"off",glyphMargin:!1,folding:!1,wordWrap:"on",wrappingStrategy:"advanced","bracketPairColorization.enabled":!1,padding:{top:8,bottom:8},lineDecorationsWidth:8,lineNumbersMinChars:0,renderLineHighlight:"none",renderIndentGuides:!1,scrollbar:{horizontal:"hidden"},tabSize:2,automaticLayout:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,matchBrackets:"never",minimap:{enabled:!1},wordBasedSuggestions:"off"}),_e.layout({width:339,height:120}),_e.onDidChangeModelContent(async()=>{h.value=_e.getValue(),await z()}),_e.onDidChangeCursorPosition(()=>{const I=_e.getPosition(),G=_e.getModel();if(!I||!G)return;const he=G.getValue(),Se=G.getOffsetAt(I);eo(he,Se)?ce.value=[]:F();const et=((Me,Xe)=>{const He=new RegExp(`\\b(?<!['"])(\\w+)\\s*\\(`,"g"),ot=[];let ft=!1,gt="";const V=new Array(Me.length).fill(!1);for(let g=0;g<Me.length;g++)(Me[g]==='"'||Me[g]==="'")&&(g===0||Me[g-1]!=="\\")&&(ft?Me[g]===gt&&(ft=!1):(ft=!0,Me[g]&&(gt=Me[g]))),V[g]=ft;let ue;for(;(ue=He.exec(Me))!==null;){if(V[ue.index])continue;if(ue.index>Xe)break;const g={name:ue[1],start:ue.index,end:He.lastIndex};let te=1,ae=-1;for(let S=He.lastIndex;S<Me.length;S++)if(!V[S]){if(Me[S]==="(")te++;else if(Me[S]===")"&&(te--,te===0)){g.end=S+1;break}ae===-1&&["("].includes(Me[S])||ae!==-1&&["("].includes(Me[S])?ae=S:ae!==-1&&[")"].includes(Me[S])&&(ae=-1),S===Me.length-1&&te>0&&(g.end=S+1)}te>0&&Xe>=He.lastIndex?(g.end=Math.max(g.end,Me.length),ot.push(g)):g.start<=Xe&&g.end>=Xe&&ot.push(g)}const y=ot.filter(g=>g.start<=Xe&&g.end>=Xe);return y.length>0?y[y.length-1].name:null})(he,Se);C.value=oe.value.find(Me=>Me.text===`${et}()`)||void 0}),_e.focus())}),Sa(Ae,I=>{const G=I[0],{height:he}=G.contentRect;_e.layout({width:339,height:he})});function le(I,G,he=!1){const Se=I.getPosition();if(!Se)return;const dt=new Gn(Se.lineNumber,Se.column,Se.lineNumber,Se.column);if(I.executeEdits("",[{range:dt,text:G,forceMoveMarkers:!0}]),!he){const et=new Ea(Se.lineNumber,Se.column+G.length-1);I.setPosition(et)}I.focus()}function pe(I){var Me;const G=((Me=j.value)==null?void 0:Me.length)||0;if(!(I!=null&&I.text))return;const he=I.text,Se=_e.getPosition();if(!Se)return;const dt=Math.max(1,Se.column-G),et=new Gn(Se.lineNumber,dt,Se.lineNumber,Se.column);_e.executeEdits("",[{range:et,text:"",forceMoveMarkers:!0}]),I.type==="function"?le(_e,he):I.type==="column"?le(_e,`{${he}}`,!0):le(_e,he,!0),j.value="",I.type==="function"||I.type==="op"?ce.value=oe.value.filter(Xe=>Xe.type==="column"):ce.value=oe.value}function xe(){var et;const I=_e==null?void 0:_e.getPosition();if(!I||!_e)return!1;const G=(et=_e.getModel())==null?void 0:et.getLineContent(I.lineNumber);if(!G)return!1;const he=G.substring(0,I.column-1),Se=(he.match(/\(/g)||[]).length,dt=(he.match(/\)/g)||[]).length;return Se>dt}const Ie=I=>{var G;return((G=C.value)==null?void 0:G.text)===I.text};function F(){var Me,Xe;if(!_e)return;const I=_e.getModel(),G=_e.getPosition();if(!I||!G)return;const he=I.getValue(),Se=I.getOffsetAt(G);if(he.length===0&&((Me=D.formula_raw)==null?void 0:Me.validateStatus)==="error"&&(D.formula_raw.validateStatus="success",D.formula_raw.help=[]),eo(he,Se)){ce.value=[];return}U.value=xe()?-1:1,N.value=0,ce.value=[];const et=(Z()??"").split(/\W+/);j.value=et.pop()||"",ce.value=(Xe=f.value.complete(j.value))==null?void 0:Xe.sort((He,ot)=>J[He.type]-J[ot.type]),xe()?(ce.value=ce.value.sort((He,ot)=>He.type==="column"?-1:ot.type==="column"?1:0),N.value=0,U.value=-1):$.value||($.value=!0)}function re(){if(ce.value&&N.value>-1&&N.value<ce.value.length)if(N.value<ge.value.length){if(ge.value[N.value].unsupported)return;pe(ge.value[N.value])}else{const I=N.value-ge.value.length;pe(ye.value[I])}N.value=0}function Te(){if(ce.value){if(N.value=--N.value>-1?N.value:ce.value.length-1,N.value<ge.value.length)C.value=ge.value[N.value];else{const I=N.value-ge.value.length;C.value=ye.value[I]}Oe()}}function Le(){if(ce.value){if(N.value=++N.value%ce.value.length,N.value<ge.value.length)C.value=ge.value[N.value];else{const I=N.value-ge.value.length;C.value=ye.value[I]}Oe()}}function Oe(){tl(()=>{if(q.value[N.value])try{q.value[N.value].$el.scrollIntoView({block:"center"})}catch{}})}const be=B({top:"0px",left:"344px"});$t(()=>{Aa.plugins.register(Oa),bn(()=>Ae.value).toBeTruthy().then(()=>{setTimeout(()=>{var G;const I=(G=Ae.value)==null?void 0:G.getBoundingClientRect();I&&(be.value.top=`${I.top-75}px`,A!=null&&A.value||I.left>352?be.value.left=`${I.left-344}px`:be.value.left=`${I.right+8}px`)},250)})});const We=I=>{switch(I.stopPropagation(),I.key){case"ArrowUp":{I.preventDefault(),Te();break}case"ArrowDown":{I.preventDefault(),Le();break}case"Enter":{I.preventDefault(),re();break}}},{isAiFeaturesEnabled:ct,aiIntegrationAvailable:Ke,aiLoading:qe,predictFormula:mt,repairFormula:Je}=Ll(),Ce=B("none"),ee=B(""),R=B(""),De=B(null),Ee=async()=>{var G;if(!((G=ee.value)!=null&&G.trim()))return;De.value="promptAI",u("a:column:ai:formula:predict-from-prompt",{prompt:ee.value});const I=await mt(ee.value,h.value);I&&(_e.setValue(I),R.value=ee.value)},Ge=async()=>{var G;De.value="repairFormulaAI",u("a:column:ai:formula:repair");const I=await Je(h.value,(G=D==null?void 0:D.formula_raw)==null?void 0:G.help.join(" | "));I&&_e.setValue(I)},de=async()=>{var I;u("c:column:ai:formula:enable"),((I=D==null?void 0:D.formula_raw)==null?void 0:I.validateStatus)==="error"?await Ge():Ce.value="prompt"};nt(()=>d.editorError,I=>{I!=null&&I.isError?Tl.setModelMarkers(_e.getModel(),"owner",[{startLineNumber:I.position.row+1,startColumn:I.position.column+1,endLineNumber:I.position.row+1,endColumn:I.position.column+1+I.position.length,message:I.message,severity:La.Error}]):Tl.setModelMarkers(_e.getModel(),"owner",[])});const fe=Y(()=>{var I;return(I=d.editorError)!=null&&I.isError?{validateStatus:"success"}:D.formula_raw});return(I,G)=>{var gt,V,ue;const he=Ye,Se=Pt,dt=it,et=wn,Me=En,Xe=xn,He=ti,ot=ei,ft=Qs;return l(),r(K,null,[e(C)&&!e(C).unsupported&&e(C).type==="function"?(l(),r("div",{key:0,class:"w-84 fixed bg-white z-11 pl-3 pt-3 border-1 shadow-md rounded-xl",style:sl({left:e(be).left,top:e(be).top})},[a("div",qi,[a("div",Gi,[a("div",Hi,[(l(),c(we(("iconMap"in I?I.iconMap:e(Fe)).function),{class:"text-lg"})),M(" "+p(e(C).text),1)]),o(Se,{type:"text",size:"small",class:"!h-7 !w-7 !min-w-0",onClick:G[0]||(G[0]=y=>C.value=void 0)},{default:n(()=>[o(he,{icon:"close"})]),_:1})])]),a("div",Ki,[a("div",Yi,p(e(C).description),1),G[2]||(G[2]=a("div",{class:"text-gray-500 uppercase text-[11px] mt-3 mb-2"},"Syntax",-1)),a("div",Ji,p(e(C).syntax),1),G[3]||(G[3]=a("div",{class:"text-gray-500 uppercase text-[11px] mt-3 mb-2"},"Examples",-1)),(l(!0),r(K,null,$e(e(C).examples,(y,g)=>(l(),r("div",{key:y,class:se(["bg-gray-100 mono-font text-[13px] leading-6 py-1 px-2",{"border-t-1  border-gray-200":g!==0,"rounded-b-md":g===e(C).examples.length-1&&e(C).examples.length!==1,"rounded-t-md":g===0&&e(C).examples.length!==1,"rounded-md":e(C).examples.length===1}])},p(y),3))),128))]),a("div",Xi,[e(C).docsUrl?(l(),r("a",{key:0,target:"_blank",rel:"noopener noreferrer",href:e(C).docsUrl},[o(Se,{type:"text",size:"small",class:"!text-gray-400 !hover:text-gray-700 !text-xs"},{default:n(()=>[G[4]||(G[4]=M("View in Docs ")),o(he,{icon:"openInNew",class:"ml-1"})]),_:1,__:[4]})],8,Zi)):_("",!0)])],4)):_("",!0),o(dt,st({label:I.label,required:""},e(fe)),{default:n(()=>{var y,g,te,ae;return[a("div",{ref_key:"monacoRoot",ref:Ae,style:sl({height:e(i)??"100px"}),class:se([{"!border-red-500 formula-error":!((y=e(fe))!=null&&y.validateStatus)||((g=e(fe))==null?void 0:g.validateStatus)!=="success","!focus-within:border-brand-500 shadow-default hover:shadow-hover formula-success":!((te=e(fe))!=null&&te.validateStatus)||((ae=e(fe))==null?void 0:ae.validateStatus)==="success","bg-white":e(L)},"formula-monaco transition-colors duration-300"]),onKeydown:ke(We,["stop"])},null,38)]}),_:1},16,["label"]),e(ct)?(l(),r(K,{key:1},[e(Ce)==="none"?(l(),r("div",Qi,[o(Se,{size:"small",type:"text",loading:e(qe),onClick:de},{icon:n(()=>[o(he,{icon:"ncAutoAwesome",class:"text-nc-content-purple-medium h-4 w-4"})]),loadingIcon:n(()=>[o(et,{class:"!text-nc-content-purple-medium",size:"regular"})]),default:n(()=>{var y,g;return[a("div",er,[((g=(y=e(D))==null?void 0:y.formula_raw)==null?void 0:g.validateStatus)==="error"?(l(),r("span",tr,"Fix Formula")):(l(),r("span",lr,"Formula Helper"))])]}),_:1},8,["loading"])])):e(Ce)==="prompt"?(l(),r(K,{key:1},[e(Ke)?(l(),r("div",nr,[G[9]||(G[9]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"9",viewBox:"0 0 18 9",fill:"none",class:"nc-polygon-2"},[a("path",{d:"M1.51476 8.5L9 0.721111L16.4852 8.5H1.51476Z",fill:"white",stroke:"#e5d4f5"})],-1)),a("div",or,[G[8]||(G[8]=a("div",{class:"nc-triangle-bottom-bar"},null,-1)),a("div",ar,[G[7]||(G[7]=a("div",{class:"flex-1 text-small leading-[18px] font-bold text-nc-content-gray-subtle2"},"Prompt",-1)),a("div",sr,[((V=(gt=e(D))==null?void 0:gt.formula_raw)==null?void 0:V.validateStatus)==="error"?(l(),c(Se,{key:0,type:"secondary",size:"xs",theme:"ai",bordered:!1,class:"nc-formula-helper-ai-btn !px-2",disabled:e(qe)&&e(De)==="repairFormulaAI",loading:e(qe)&&e(De)==="repairFormulaAI",onClick:Ge},{icon:n(()=>[o(he,{icon:"ncAutoAwesome",class:"!text-current h-4 w-4"})]),loadingIcon:n(()=>[o(et,{class:"!text-current",size:"regular"})]),default:n(()=>[G[5]||(G[5]=a("div",{class:"flex items-center gap-1"},[a("span",{class:"text-[13px] font-semibold text-purple-400"},"Repair")],-1))]),_:1,__:[5]},8,["disabled","loading"])):_("",!0),o(Se,{type:"secondary",size:"xs",theme:"ai",bordered:!1,class:"nc-formula-helper-ai-btn !px-2",loading:e(qe)&&e(De)==="promptAI",disabled:!((ue=e(ee))!=null&&ue.trim())||!!e(ee).trim()&&e(ee).trim()===e(R).trim()||e(qe)&&e(De)==="promptAI",onClick:Ee},{icon:n(()=>[o(he,{icon:"ncAutoAwesome",class:"!text-current h-4 w-4"})]),loadingIcon:n(()=>[o(et,{class:"!text-current",size:"regular"})]),default:n(()=>[G[6]||(G[6]=a("div",{class:"flex items-center gap-1"},"Generate",-1))]),_:1,__:[6]},8,["loading","disabled"])])]),o(Xe,{value:e(ee),"onUpdate:value":G[1]||(G[1]=y=>ie(ee)?ee.value=y:null),class:"nc-ai-formula-helper-input nc-input-shadow nc-ai-input nc-scrollbar-thin !min-h-[80px]",placeholder:`Enter prompt to ${e(h)?"modify":"generate"} formula`},null,8,["value","placeholder"])])])):(l(),c(Me,{key:0,class:"mt-4"}))],64)):_("",!0)],64)):_("",!0),a("div",{class:se([{"h-[250px]":e(t)==="large","h-[150px]":e(t)==="medium","h-[125px]":e(t)==="small","bg-white":e(L)},"overflow-auto flex flex-col nc-suggestion-list nc-scrollbar-thin border-1 border-gray-200 rounded-lg mt-4"])},[e(ge)&&e($)?(l(),r("div",{key:0,style:sl({order:e(U)===-1?2:1})},[I.disableSuggestionHeaders?_("",!0):(l(),r("div",ir," Formulas ")),o(ft,{"data-source":e(ge),locale:{emptyText:I.$t("msg.formula.noSuggestedFormulaFound")}},{renderItem:n(({item:y,index:g})=>[o(ot,{ref:te=>{e(q)[g]=te},class:se(["cursor-pointer !overflow-hidden hover:bg-gray-50",{"!bg-gray-100":Ie(y),"cursor-not-allowed":y.unsupported}]),onClick:ke(te=>!y.unsupported&&pe(y),["prevent","stop"]),onMouseenter:te=>C.value=y},{default:n(()=>[o(He,null,{title:n(()=>[a("div",{class:se(["flex items-center gap-x-1",{"text-gray-400":y.unsupported}])},[y.type==="function"?(l(),c(we(("iconMap"in I?I.iconMap:e(Fe)).function),{key:0,class:"w-4 h-4 !text-gray-600"})):_("",!0),y.type==="op"?(l(),c(we(("iconMap"in I?I.iconMap:e(Fe)).calculator),{key:1,class:"w-4 h-4 !text-gray-600"})):_("",!0),y.type==="column"?(l(),c(we(y.icon),{key:2,class:"w-4 h-4 !text-gray-600"})):_("",!0),a("span",{class:se(["text-small leading-[18px]",{"text-gray-800":!y.unsupported}])},p(y.text),3)],2),y.unsupported?(l(),r("div",rr,p(I.$t("msg.formulaNotSupported")),1)):_("",!0)]),_:2},1024)]),_:2},1032,["class","onClick","onMouseenter"])]),_:1},8,["data-source","locale"])],4)):_("",!0),e(ye)?(l(),r("div",{key:1,style:sl({order:e(U)===1?2:1})},[I.disableSuggestionHeaders?_("",!0):(l(),r("div",ur," Fields ")),o(ft,{ref_key:"variableListRef",ref:ne,"data-source":e(ye),locale:{emptyText:I.$t("msg.formula.noSuggestedFieldFound")},class:"!overflow-hidden"},{renderItem:n(({item:y,index:g})=>[o(ot,{ref:te=>{e(q)[g+e(ge).length]=te},class:se([{"!bg-gray-100":Ie(y)},"cursor-pointer hover:bg-gray-50"]),onClick:ke(te=>pe(y),["prevent","stop"])},{default:n(()=>[o(He,{class:"nc-variable-list-item"},{title:n(()=>[a("div",cr,[a("div",dr,[(l(),c(we(y.icon),{class:"w-4 h-4 !text-gray-600"})),a("span",pr,p(y.text),1)]),o(Se,{size:"small",type:"text",class:"nc-variable-list-item-use-field-btn !h-7 px-3 !text-small invisible"},{default:n(()=>[M(p(I.$t("general.use"))+" "+p(I.$t("objects.field").toLowerCase()),1)]),_:1})])]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:1},8,["data-source","locale"])],4)):_("",!0)],2)],64)}}}),Lo=Object.assign(Qe(mr,[["__scopeId","data-v-366251bb"]]),{__name:"SmartsheetColumnFormulaInputHelper"}),Pn=s=>({0:s("placeholder.decimal0"),1:s("placeholder.decimal1"),2:s("placeholder.decimal2"),3:s("placeholder.decimal3"),4:s("placeholder.decimal4"),5:s("placeholder.decimal5"),6:s("placeholder.decimal6"),7:s("placeholder.decimal7"),8:s("placeholder.decimal8")}),Eo=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYR","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CYP","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHC","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","ROL","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDD","SEK","SGD","SHP","SIT","SKK","SLL","SOS","SRD","STD","SYP","SZL","THB","TJS","TMM","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","USS","UYU","UZS","VEB","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XFO","XFU","XOF","XPD","XPF","XPT","XTS","XXX","YER","ZAR","ZMK","ZWD"];function fr(s){return Eo.includes(s)}async function vr(){const{all:s}=await Ve(async()=>{const{all:k}=await import("./Dh4tf4Xa.js");return{all:k}},[],import.meta.url);return s.filter(k=>Mo(k.tag)).map(k=>({text:`${k.name} (${k.tag})`,value:k.tag}))}function Mo(s){try{return Intl.NumberFormat.supportedLocalesOf(s).length>0}catch{return!1}}const _r={class:"flex gap-2 w-full truncate items-center"},gr={class:"flex gap-2 w-full justify-between items-center"},yr={class:"flex gap-2 w-full justify-between items-center"},hr={class:"text-[#FB8C00]"},br=Ue({__name:"CurrencyOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const d=s,P=k,{t}=Mt(),i=je(d,"value",P),h=Pn(t),u={"meta.currency_locale":[{validator:($,b)=>new Promise((H,ne)=>{if(!Mo(b))return ne(new Error(t("msg.invalidLocale")));H()})}],"meta.currency_code":[{validator:($,b)=>new Promise((H,ne)=>{if(!fr(b))return ne(new Error(t("msg.invalidCurrencyCode")));H()})}]},{setAdditionalValidations:w,setAvoidShowingToastMsgForValidations:x,validateInfos:O,isPg:A}=_t();w({...u}),x({"meta.currency_locale":!0,"meta.currency_code":!0});const D=Eo||[],L=B([]),m=Y(()=>i.value.dt==="money"),v=Y(()=>m.value&&A.value?t("msg.postgresHasItsOwnCurrencySettings"):"");function C($,b){return zl([b.value,b.key],$)}i.value.meta={...Dt.getColumnDefaultMeta(W.Currency),...i.value.meta||{}},vr().then($=>{L.value.push(...$)});const U=$=>{i.value.dtxs=Math.max($,i.value.dtxs)};return($,b)=>{const H=Ye,ne=ut,q=Ct,j=Lt,N=it,J=Hl,oe=Gl;return l(),c(oe,{gutter:8},{default:n(()=>[o(J,{span:12},{default:n(()=>[o(N,st(e(O)["meta.currency_locale"],{label:$.$t("title.currencyLocale")}),{default:n(()=>[o(j,{value:e(i).meta.currency_locale,"onUpdate:value":b[0]||(b[0]=ce=>e(i).meta.currency_locale=ce),class:"w-52","show-search":"","filter-option":C,disabled:e(m)&&e(A),"dropdown-class-name":"nc-dropdown-currency-cell-locale"},{suffixIcon:n(()=>[o(H,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(L),ce=>(l(),c(q,{key:ce.text,value:ce.value},{default:n(()=>[a("div",_r,[o(ne,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[M(p(ce.text),1)]),default:n(()=>[M(" "+p(ce.text),1)]),_:2},1024),e(i).meta.currency_locale===ce.value?(l(),c(we(("iconMap"in $?$.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])]),_:1}),o(J,{span:12},{default:n(()=>[o(N,st(e(O)["meta.currency_code"],{label:$.$t("title.currencyCode")}),{default:n(()=>[o(j,{value:e(i).meta.currency_code,"onUpdate:value":b[1]||(b[1]=ce=>e(i).meta.currency_code=ce),class:"w-52","show-search":"","filter-option":C,disabled:e(m)&&e(A),"dropdown-class-name":"nc-dropdown-currency-cell-code"},{suffixIcon:n(()=>[o(H,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(D),(ce,f)=>(l(),c(q,{key:f,value:ce},{default:n(()=>[a("div",gr,[M(p(ce)+" ",1),e(i).meta.currency_code===ce?(l(),c(we(("iconMap"in $?$.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"])]),_:1}),o(J,{span:24,class:"mt-4"},{default:n(()=>[o(N,{label:$.$t("placeholder.precision")},{default:n(()=>{var ce,f;return[(ce=e(i).meta)!=null&&ce.precision||((f=e(i).meta)==null?void 0:f.precision)===0?(l(),c(j,{key:0,value:e(i).meta.precision,"onUpdate:value":b[2]||(b[2]=ge=>e(i).meta.precision=ge),disabled:e(m)&&e(A),"dropdown-class-name":"nc-dropdown-decimal-format",onChange:U},{suffixIcon:n(()=>[o(H,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e("precisionFormats"in $?$.precisionFormats:e(kn),(ge,ye)=>(l(),c(q,{key:ye,value:ge},{default:n(()=>[a("div",yr,[M(p(e(h)[ge])+" ",1),e(i).meta.precision===ge?(l(),c(we(("iconMap"in $?$.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])):_("",!0)]}),_:1},8,["label"])]),_:1}),e(m)&&e(A)?(l(),c(J,{key:0},{default:n(()=>[a("span",hr,p(e(v)),1)]),_:1})):_("",!0)]),_:1})}}}),Do=Object.assign(br,{__name:"SmartsheetColumnCurrencyOptions"}),wr={class:"flex gap-2 w-full justify-between items-center"},xr={class:"flex items-center gap-1"},kr={class:"text-sm text-gray-800 select-none"},$r=Ue({__name:"DecimalOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const d=s,P=k,{t}=Mt(),i=je(d,"value",P),h=Pn(t);i.value.meta={...Dt.getColumnDefaultMeta(W.Decimal),...i.value.meta||{}};const u=x=>{i.value.dtxs=Math.max(x,i.value.dtxs)},{isMetaReadOnly:w}=Wl();return(x,O)=>{const A=Ye,D=Ct,L=Lt,m=it,v=Ft;return l(),r(K,null,[o(m,{label:x.$t("placeholder.precision")},{default:n(()=>{var C,U;return[(C=e(i).meta)!=null&&C.precision||((U=e(i).meta)==null?void 0:U.precision)===0?(l(),c(L,{key:0,value:e(i).meta.precision,"onUpdate:value":O[0]||(O[0]=$=>e(i).meta.precision=$),disabled:e(w),"dropdown-class-name":"nc-dropdown-decimal-format",onChange:u},{suffixIcon:n(()=>[o(A,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e("precisionFormats"in x?x.precisionFormats:e(kn),($,b)=>(l(),c(D,{key:b,value:$},{default:n(()=>[a("div",wr,[M(p(e(h)[$])+" ",1),e(i).meta.precision===$?(l(),c(we(("iconMap"in x?x.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])):_("",!0)]}),_:1},8,["label"]),o(m,null,{default:n(()=>[a("div",xr,[e(i).meta?(l(),c(v,{key:0,checked:e(i).meta.isLocaleString,"onUpdate:checked":O[1]||(O[1]=C=>e(i).meta.isLocaleString=C)},{default:n(()=>[a("div",kr,p(x.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked"])):_("",!0)])]),_:1})],64)}}}),Uo=Object.assign($r,{__name:"SmartsheetColumnDecimalOptions"}),Cr={class:"flex flex-col"},Tr={class:"flex items-center gap-1"},Ir={class:"text-sm text-gray-800 select-none"},Sr=Ue({__name:"PercentOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k),i={},{setAdditionalValidations:h}=_t();return h({...i}),t.value.meta={...Dt.getColumnDefaultMeta(W.Percent),...t.value.meta||{}},(u,w)=>{const x=Ft,O=it;return l(),r("div",Cr,[o(O,null,{default:n(()=>[a("div",Tr,[e(t).meta?(l(),c(x,{key:0,checked:e(t).meta.is_progress,"onUpdate:checked":w[0]||(w[0]=A=>e(t).meta.is_progress=A)},{default:n(()=>[a("div",Ir,p(u.$t("labels.displayAsProgress")),1)]),_:1},8,["checked"])):_("",!0)])]),_:1})])}}}),Ro=Object.assign(Sr,{__name:"SmartsheetColumnPercentOptions"}),Ar=Ne(()=>Ve(()=>import("./Bew4Vbyd.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.default||s)),Or={class:"flex gap-2 w-full truncate items-center"},Lr={class:"flex-1 flex items-center text-gray-700 gap-2 children:h-4 children:w-4"},Er={class:"flex-1 flex items-center gap-2 children:h-4 children:w-4"},Mr={class:"flex gap-2 w-full justify-between items-center nc-dropdown-rating-max-option"},Dr=Ue({__name:"RatingOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k),i=Y({get:()=>t.value.meta.color,set:w=>{t.value.meta.color=w}}),h=B(!1);t.value.meta={...Dt.getColumnDefaultMeta(W.Rating),...t.value.meta||{},icon:Ma(t.value.meta||{})};const u=Ul.findIndex(w=>w.full===t.value.meta.icon.full&&w.empty===t.value.meta.icon.empty);return t.value.meta.iconIdx=u===-1?0:u,nt(()=>t.value.meta.iconIdx,w=>{t.value.meta.icon=Ul[w]}),(w,x)=>{const O=Ye,A=Ct,D=Lt,L=it,m=Hl,v=Ar,C=nl,U=Gl;return l(),c(U,{gutter:8},{default:n(()=>[o(m,{span:8},{default:n(()=>[o(L,{label:w.$t("labels.icon")},{default:n(()=>[o(D,{value:e(t).meta.iconIdx,"onUpdate:value":x[0]||(x[0]=$=>e(t).meta.iconIdx=$),class:"w-52","dropdown-class-name":"nc-dropdown-rating-icon"},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e("ratingIconList"in w?w.ratingIconList:e(Ul),($,b)=>(l(),c(A,{key:b,value:b},{default:n(()=>[a("div",Or,[a("div",Lr,[(l(),c(we(("getMdiIcon"in w?w.getMdiIcon:e(il))($.full)))),(l(),c(we(("getMdiIcon"in w?w.getMdiIcon:e(il))($.empty))))]),e(t).meta.iconIdx===b?(l(),c(we(("iconMap"in w?w.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(m,{span:8},{default:n(()=>[o(L,{label:w.$t("general.colour")},{default:n(()=>[o(C,{visible:e(h),"onUpdate:visible":x[3]||(x[3]=$=>ie(h)?h.value=$:null),placement:"bottom","auto-close":!1,class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",null,[o(v,{modelValue:e(i),"onUpdate:modelValue":x[1]||(x[1]=$=>ie(i)?i.value=$:null),"is-open":e(h),onInput:x[2]||(x[2]=$=>e(t).meta.color=$)},null,8,["modelValue","is-open"])])]),default:n(()=>[a("div",{class:se(["flex-1 border-1 border-gray-300 rounded-lg h-8 px-[11px] flex items-center justify-between transition-all cursor-pointer",{"border-brand-500 shadow-selected":e(h)}])},[a("div",Er,[(l(),c(we(("getMdiIcon"in w?w.getMdiIcon:e(il))(("ratingIconList"in w?w.ratingIconList:e(Ul))[e(t).meta.iconIdx].full)),{style:sl({color:e(t).meta.color})},null,8,["style"])),(l(),c(we(("getMdiIcon"in w?w.getMdiIcon:e(il))(("ratingIconList"in w?w.ratingIconList:e(Ul))[e(t).meta.iconIdx].empty)),{style:sl({color:e(t).meta.color})},null,8,["style"]))]),o(O,{icon:"arrowDown",class:"text-gray-700 h-4 w-4"})],2)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1}),o(m,{span:8},{default:n(()=>[o(L,{label:w.$t("labels.max")},{default:n(()=>[o(D,{value:e(t).meta.max,"onUpdate:value":x[4]||(x[4]=$=>e(t).meta.max=$),"data-testid":"nc-dropdown-rating-max",class:"w-52","dropdown-class-name":"nc-dropdown-rating-color"},{suffixIcon:n(()=>[o(O,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),r(K,null,$e([1,2,3,4,5,6,7,8,9,10],($,b)=>o(A,{key:b,value:$},{default:n(()=>[a("div",Mr,[M(p($)+" ",1),e(t).meta.max===$?(l(),c(we(("iconMap"in w?w.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),Po=Object.assign(Qe(Dr,[["__scopeId","data-v-1d2776db"]]),{__name:"SmartsheetColumnRatingOptions"}),Ur={class:"flex flex-col gap-2"},Rr={class:"flex items-center gap-2 children:flex-1"},Pr=Ue({__name:"TimeOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k);t.value.meta={...Dt.getColumnDefaultMeta(W.Time),...t.value.meta??{}};const{isSystem:i}=_t();return(h,u)=>{const w=Dn,x=Mn,O=it;return l(),r("div",Ur,[a("div",Rr,[o(O,null,{default:n(()=>[e(t).meta?(l(),c(x,{key:0,value:e(t).meta.is12hrFormat,"onUpdate:value":u[0]||(u[0]=A=>e(t).meta.is12hrFormat=A),class:"nc-time-form-layout",disabled:e(i)},{default:n(()=>[o(w,{value:!0},{default:n(()=>u[1]||(u[1]=[M("12 Hrs")])),_:1,__:[1]}),o(w,{value:!1},{default:n(()=>u[2]||(u[2]=[M("24 Hrs")])),_:1,__:[2]})]),_:1},8,["value","disabled"])):_("",!0)]),_:1})])])}}}),Fo=Object.assign(Qe(Pr,[["__scopeId","data-v-60c801ce"]]),{__name:"SmartsheetColumnTimeOptions"}),Fr={class:"flex flex-col gap-4"},Br={class:"flex items-center gap-2 children:flex-1"},Vr={class:"flex gap-2 w-full justify-between items-center"},Nr=["data-testid"],zr={class:"flex items-center gap-1"},jr={class:"text-sm text-gray-800 select-none font-semibold"},Wr={class:"flex items-center gap-1"},qr={class:"text-sm text-gray-800 select-none font-semibold"},Gr={class:"flex gap-2 w-full justify-between items-center"},Hr={class:"text-nc-content-gray-muted text-[13px] mr-2"},Kr={class:"flex gap-2 w-full justify-between items-center"},Yr={class:"text-nc-content-gray-muted text-[13px] mr-2"},Jr=Ue({__name:"DateTimeOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k),i=Da({includeUtc:!0}).sort((m,v)=>m.name.localeCompare(v.name)),h=Intl.DateTimeFormat().resolvedOptions().timeZone,u=i.find(m=>Qn(m.name,h)),w=i.find(m=>m.name==="Etc/UTC"),x=[u,w].filter(m=>m),O=Y(()=>{const m=[];for(const v of i)(u==null?void 0:u.countryCode)===v.countryCode&&!x.find(C=>Qn(C==null?void 0:C.name,v.name))&&m.push(v);return[...x,...m]});t.value.meta={...Dt.getColumnDefaultMeta(W.DateTime),...t.value.meta||{}};const{isSystem:A}=_t(),D=Y({get:()=>{var m;return!!((m=t.value.meta)!=null&&m.isDisplayTimezone)},set:m=>{t.value.meta||(t.value.meta={}),t.value.meta.isDisplayTimezone=m}}),L=Y({get:()=>{var m;return!!((m=t.value.meta)!=null&&m.useSameTimezoneForAll)},set:m=>{var v;t.value.meta||(t.value.meta={}),t.value.meta.useSameTimezoneForAll=m,m?t.value.meta.timezone||(t.value.meta.timezone=(v=O.value[0])==null?void 0:v.name):t.value.meta.timezone=void 0}});return(m,v)=>{const C=Ye,U=Ct,$=Lt,b=it,H=Dn,ne=Mn,q=Ft,j=ut,N=Ra;return l(),r("div",Fr,[a("div",Br,[o(b,null,{default:n(()=>[o($,{value:e(t).meta.date_format,"onUpdate:value":v[0]||(v[0]=J=>e(t).meta.date_format=J),class:"nc-date-select","dropdown-class-name":"nc-dropdown-date-format",disabled:e(A)},{suffixIcon:n(()=>[o(C,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(no),(J,oe)=>(l(),c(U,{key:oe,value:J},{default:n(()=>[a("div",Vr,[M(p(J)+" ",1),e(t).meta.date_format===J?(l(),c(we(("iconMap"in m?m.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1}),o(b,null,{default:n(()=>[o($,{value:e(t).meta.time_format,"onUpdate:value":v[1]||(v[1]=J=>e(t).meta.time_format=J),class:"nc-time-select","dropdown-class-name":"nc-dropdown-time-format",disabled:e(A)},{suffixIcon:n(()=>[o(C,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(Ua),(J,oe)=>(l(),c(U,{key:oe,value:J},{default:n(()=>[a("div",{class:"flex gap-2 w-full justify-between items-center","data-testid":`nc-time-${J}`},[M(p(J)+" ",1),e(t).meta.time_format===J?(l(),c(we(("iconMap"in m?m.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)],8,Nr)]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1})]),o(b,null,{default:n(()=>[e(t).meta?(l(),c(ne,{key:0,value:e(t).meta.is12hrFormat,"onUpdate:value":v[2]||(v[2]=J=>e(t).meta.is12hrFormat=J),class:"nc-time-form-layout",disabled:e(A)},{default:n(()=>[o(H,{value:!0},{default:n(()=>v[6]||(v[6]=[M("12 Hrs")])),_:1,__:[6]}),o(H,{value:!1},{default:n(()=>v[7]||(v[7]=[M("24 Hrs")])),_:1,__:[7]})]),_:1},8,["value","disabled"])):_("",!0)]),_:1}),("isEeUI"in m?m.isEeUI:e(Gt))?(l(),r(K,{key:0},[o(b,null,{default:n(()=>[o(j,{disabled:!0},{default:n(()=>[a("div",zr,[o(q,{checked:e(D),"onUpdate:checked":v[3]||(v[3]=J=>ie(D)?D.value=J:null)},{default:n(()=>[a("div",jr,p(m.$t("labels.displayTimezone")),1)]),_:1},8,["checked"])])]),_:1})]),_:1}),o(b,null,{default:n(()=>[o(j,{disabled:!0},{default:n(()=>[a("div",Wr,[o(q,{checked:e(L),"onUpdate:checked":v[4]||(v[4]=J=>ie(L)?L.value=J:null)},{default:n(()=>[a("div",qr,p(m.$t("labels.useSameTimezoneForAllMembers")),1)]),_:1},8,["checked"])])]),_:1})]),_:1}),e(L)?(l(),c(b,{key:0},{default:n(()=>[o($,{value:e(t).meta.timezone,"onUpdate:value":v[5]||(v[5]=J=>e(t).meta.timezone=J),"show-search":"","allow-clear":"","filter-option":(J,oe)=>("antSelectFilterOption"in m?m.antSelectFilterOption:e($n))(J,oe,["key","data-abbreviation"]),"dropdown-class-name":"nc-dropdown-timezone",placeholder:"Use same timezone for all collaborator",class:"nc-search-timezone",disabled:e(A)},{suffixIcon:n(()=>[o(C,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[o(N,{label:"Suggested"},{default:n(()=>[(l(!0),r(K,null,$e(e(O),J=>(l(),c(U,{key:J.name,value:J.name,"data-abbreviation":J.abbreviation},{default:n(()=>[a("div",Gr,[a("span",null,p(J.name),1),a("div",null,[a("span",Hr,p(J.abbreviation),1),(l(),c(we(("iconMap"in m?m.iconMap:e(Fe)).check),{id:"nc-selected-item-icon",class:se(["text-primary w-4 h-4",{invisible:e(t).meta.timezone!==J.name}])},null,8,["class"]))])])]),_:2},1032,["value","data-abbreviation"]))),128))]),_:1}),o(N,{label:"All"},{default:n(()=>[(l(!0),r(K,null,$e(e(i),J=>(l(),c(U,{key:J.name,value:J.name,"data-abbreviation":J.abbreviation},{default:n(()=>[a("div",Kr,[a("span",null,p(J.name),1),a("div",null,[a("span",Yr,p(J.abbreviation),1),(l(),c(we(("iconMap"in m?m.iconMap:e(Fe)).check),{id:"nc-selected-item-icon",class:se(["text-primary w-4 h-4",{invisible:e(t).meta.timezone!==J.name}])},null,8,["class"]))])])]),_:2},1032,["value","data-abbreviation"]))),128))]),_:1})]),_:1},8,["value","filter-option","disabled"])]),_:1})):_("",!0)],64)):_("",!0)])}}}),Bo=Object.assign(Qe(Jr,[["__scopeId","data-v-6e039a6c"]]),{__name:"SmartsheetColumnDateTimeOptions"}),Xr={class:"w-full flex gap-2 justify-between items-center"},Zr=Ue({__name:"DateOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k);t.value.meta={...Dt.getColumnDefaultMeta(W.Date),...t.value.meta||{}};const{isSystem:i}=_t();return(h,u)=>{const w=Ye,x=Ct,O=Lt,A=it;return l(),c(A,null,{default:n(()=>[o(O,{value:e(t).meta.date_format,"onUpdate:value":u[0]||(u[0]=D=>e(t).meta.date_format=D),disabled:e(i),"show-search":"",class:"nc-date-select","dropdown-class-name":"nc-dropdown-date-format"},{suffixIcon:n(()=>[o(w,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e([...e(no),...e(Pa)],(D,L)=>(l(),c(x,{key:L,value:D},{default:n(()=>[a("div",Xr,[M(p(D)+" ",1),e(t).meta.date_format===D?(l(),c(we(("iconMap"in h?h.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1})}}}),Vo=Object.assign(Zr,{__name:"SmartsheetColumnDateOptions"}),Qr=Ne(()=>Ve(()=>import("./Bew4Vbyd.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.default||s)),eu={class:"flex gap-2 w-full truncate items-center"},tu={class:"flex-1 flex items-center text-gray-700 gap-2 children:h-4 children:w-4"},lu={class:"flex-1 flex items-center gap-2 children:h-4 children:w-4"},nu=Ue({__name:"CheckboxOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k),i=Ba,h=Y({get:()=>t.value.meta.color,set:x=>{t.value.meta.color=x}}),u=B(!1);t.value.meta={...Dt.getColumnDefaultMeta(W.Checkbox),...t.value.meta||{},icon:Fa(t.value.meta||{})};const w=i.findIndex(x=>x.checked===t.value.meta.icon.checked&&x.unchecked===t.value.meta.icon.unchecked);return t.value.meta.iconIdx=w===-1?0:w,nt(()=>t.value.meta.iconIdx,x=>{t.value.meta.icon=i[x]}),(x,O)=>{const A=Ye,D=Ct,L=Lt,m=it,v=Hl,C=Qr,U=nl,$=Gl;return l(),c($,{gutter:8},{default:n(()=>[o(v,{span:12},{default:n(()=>[o(m,{label:x.$t("labels.icon")},{default:n(()=>[o(L,{value:e(t).meta.iconIdx,"onUpdate:value":O[0]||(O[0]=b=>e(t).meta.iconIdx=b),class:"w-52","dropdown-class-name":"nc-dropdown-checkbox-icon"},{suffixIcon:n(()=>[o(A,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(i),(b,H)=>(l(),c(D,{key:H,value:H},{default:n(()=>[a("div",eu,[a("div",tu,[(l(),c(we(("getMdiIcon"in x?x.getMdiIcon:e(il))(b.checked)))),(l(),c(we(("getMdiIcon"in x?x.getMdiIcon:e(il))(b.unchecked))))]),e(t).meta.iconIdx===H?(l(),c(we(("iconMap"in x?x.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),o(v,{span:12},{default:n(()=>[o(m,{label:x.$t("general.colour")},{default:n(()=>[o(U,{visible:e(u),"onUpdate:visible":O[3]||(O[3]=b=>ie(u)?u.value=b:null),placement:"bottomRight","auto-close":!1,class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",null,[o(C,{modelValue:e(h),"onUpdate:modelValue":O[1]||(O[1]=b=>ie(h)?h.value=b:null),"is-open":e(u),onInput:O[2]||(O[2]=b=>e(t).meta.color=b)},null,8,["modelValue","is-open"])])]),default:n(()=>[a("div",{class:se(["flex-1 border-1 border-gray-300 rounded-lg h-8 px-[11px] flex items-center justify-between transition-all cursor-pointer",{"border-brand-500 shadow-selected":e(u)}])},[a("div",lu,[(l(),c(we(("getMdiIcon"in x?x.getMdiIcon:e(il))(e(i)[e(t).meta.iconIdx].checked)),{style:sl({color:e(t).meta.color})},null,8,["style"])),(l(),c(we(("getMdiIcon"in x?x.getMdiIcon:e(il))(e(i)[e(t).meta.iconIdx].unchecked)),{style:sl({color:e(t).meta.color})},null,8,["style"]))]),o(A,{icon:"arrowDown",class:"text-gray-700 h-4 w-4"})],2)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),No=Object.assign(Qe(nu,[["__scopeId","data-v-d6020249"]]),{__name:"SmartsheetColumnCheckboxOptions"}),ou={class:"formula-wrapper relative"},au={class:"tab"},su={class:"px-0.5"},iu={class:"tab"},ru={class:"flex flex-col px-0.5 gap-4 pb-0.5"},uu={class:"flex w-full items-center gap-2 justify-between"},cu={class:"w-full"},du=Ue({__name:"FormulaOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){var f,ge,ye,Ae,_e,Q,Z;const d=s,P=k,t=[W.QrCode,W.Barcode,W.Button],i=je(d,"value",P);i.value.meta={...Dt.getColumnDefaultMeta(W.Formula),...i.value.meta||{}};const{setAdditionalValidations:h,setAvoidShowingToastMsgForValidations:u,sqlUi:w,column:x,validateInfos:O}=_t(),{t:A}=Mt(),D=At(Et,B()),L={isError:!1,message:"",position:{column:-1,row:-1}},m=B(L),{base:v}=Ut(El()),C=Y(()=>{var z,le;return((le=(z=D==null?void 0:D.value)==null?void 0:z.columns)==null?void 0:le.filter(pe=>!(t.includes(pe.uidt)||hn(pe,D.value))))||[]}),{getMeta:U}=ul(),$={formula_raw:[{required:!0,validator:(z,le)=>(async()=>{var pe,xe;if(!(le!=null&&le.trim()))throw new Error("Required");try{await _n({column:x.value,formula:le,columns:C.value,clientOrSqlUi:w.value,getMeta:U,trackPosition:!0}),m.value={...L}}catch(Ie){const F=Ie instanceof en&&((pe=Ie.extra)!=null&&pe.key)?A(Ie.extra.key,Ie.extra):Ie.message;throw Ie instanceof en&&((xe=Ie.extra)!=null&&xe.position)?m.value={isError:!0,message:F,position:Ie.extra.position}:m.value={...L},new Error(F)}})()}]};(ge=(f=x.value)==null?void 0:f.colOptions)!=null&&ge.formula_raw&&(i.value.formula_raw=oo((Ae=(ye=x.value)==null?void 0:ye.colOptions)==null?void 0:Ae.formula,(_e=D==null?void 0:D.value)==null?void 0:_e.columns,(Z=(Q=x.value)==null?void 0:Q.colOptions)==null?void 0:Z.formula_raw)||"");const b=Y(()=>{var z,le;return(le=(z=v.value)==null?void 0:z.sources)==null?void 0:le.find(pe=>{var xe;return pe.id===((xe=D.value)==null?void 0:xe.source_id)})}),H=B({dataType:fl.UNKNOWN}),ne=B(),q=B(i.value.meta.display_type),j=B(!1);let N=0;const J=jl(async()=>{var le,pe,xe,Ie,F,re;N+=1;const z=N;try{const Te=await _n({formula:i.value.formula||i.value.formula_raw,columns:((le=D.value)==null?void 0:le.columns)||[],column:x.value??void 0,clientOrSqlUi:(pe=b.value)==null?void 0:pe.type,getMeta:async Le=>await U(Le),trackPosition:!0});z===N&&(H.value=Te),j.value&&ne.value&&(i.value.meta.display_type=ne.value),ne.value=void 0,j.value=!1}catch{z===N&&(H.value={dataType:fl.UNKNOWN}),ne.value=i.value.meta.display_type,j.value=!0}finally{((F=(Ie=(xe=i.value)==null?void 0:xe.colOptions)==null?void 0:Ie.parsed_tree)==null?void 0:F.dataType)!==((re=H.value)==null?void 0:re.dataType)?i.value.meta.display_type=null:i.value.meta.display_type=q.value}},300);nt(()=>i.value.formula||i.value.formula_raw,()=>{J()},{immediate:!0}),h({...$}),u({formula_raw:!0});const oe=B("formula"),ce=Y(()=>{var z,le;if(!((z=H.value)!=null&&z.dataType))return[];try{return Va((le=H.value)==null?void 0:le.dataType).map(pe=>({value:pe,label:A(`datatype.${pe}`),icon:ll(kt(pe)?hl:bl,{columnMeta:{uidt:pe}})}))}catch{return[]}});return nt(()=>{var z;return(z=i.value.meta)==null?void 0:z.display_type},(z,le)=>{le===void 0&&!z&&(i.value.meta.display_column_meta={meta:{},custom:{}})},{immediate:!0}),(z,le)=>{const pe=Lo,xe=so,Ie=Ct,F=an,re=it,Te=Do,Le=Uo,Oe=Ro,be=Po,We=Fo,ct=Bo,Ke=Vo,qe=No,mt=ao;return l(),r("div",ou,[o(mt,{"active-key":e(oe),"onUpdate:activeKey":le[3]||(le[3]=Je=>ie(oe)?oe.value=Je:null)},{default:n(()=>{var Je,Ce;return[o(xe,{key:"formula"},{tab:n(()=>[a("div",au,[a("div",null,p(z.$t("datatype.Formula")),1)])]),default:n(()=>{var ee;return[a("div",su,[o(pe,{value:e(i).formula_raw,"onUpdate:value":le[0]||(le[0]=R=>e(i).formula_raw=R),error:((ee=e(O).formula_raw)==null?void 0:ee.validateStatus)==="error","editor-error":e(m)},null,8,["value","error","editor-error"])])]}),_:1}),o(xe,{key:"format",disabled:!((Je=e(ce))!=null&&Je.length)||!((Ce=e(H))!=null&&Ce.dataType)},{tab:n(()=>[a("div",iu,[a("div",null,p(z.$t("labels.formatting")),1)])]),default:n(()=>{var ee;return[a("div",ru,[o(re,{class:"mt-4",label:z.$t("general.format")},{default:n(()=>[o(F,{value:e(i).meta.display_type,"onUpdate:value":le[1]||(le[1]=R=>e(i).meta.display_type=R),class:"w-full nc-select-shadow",placeholder:z.$t("labels.selectAFormatType"),"allow-clear":"",onChange:le[2]||(le[2]=R=>{q.value=R})},{default:n(()=>[(l(!0),r(K,null,$e(e(ce),R=>(l(),c(Ie,{key:R.value,value:R.value},{default:n(()=>{var De;return[a("div",uu,[a("div",cu,[(l(),c(we(R.icon),{class:"w-4 h-4 !text-gray-600"})),M(" "+p(R.label),1)]),R.value===((De=e(i).meta)==null?void 0:De.display_type)?(l(),c(we(("iconMap"in z?z.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]}),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"]),[e(fl).NUMERIC,e(fl).DATE,e(fl).BOOLEAN,e(fl).STRING,e(fl).COND_EXP].includes((ee=e(H))==null?void 0:ee.dataType)?(l(),r(K,{key:0},[e(i).meta.display_type===e(W).Currency?(l(),c(Te,{key:0,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(W).Decimal?(l(),c(Le,{key:1,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(W).Percent?(l(),c(Oe,{key:2,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(W).Rating?(l(),c(be,{key:3,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(W).Time?(l(),c(We,{key:4,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(W).DateTime?(l(),c(ct,{key:5,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(W).Date?(l(),c(Ke,{key:6,value:e(i).meta.display_column_meta},null,8,["value"])):e(i).meta.display_type===e(W).Checkbox?(l(),c(qe,{key:7,value:e(i).meta.display_column_meta},null,8,["value"])):_("",!0)],64)):_("",!0)])]}),_:1},8,["disabled"])]}),_:1},8,["active-key"])])}}}),pu=Object.assign(Qe(du,[["__scopeId","data-v-b299cb61"]]),{__name:"SmartsheetColumnFormulaOptions"}),mu={class:"flex flex-col gap-2"},fu=["data-testid"],vu={class:"inline-flex items-center gap-2 flex-1 truncate"},_u=Ue({__name:"QrCodeOptions",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{emit:k}){const d=s,P=k,{t}=Mt(),{fields:i,metaColumnById:h}=$o(),u=je(d,"modelValue",P),{setAdditionalValidations:w,setAvoidShowingToastMsgForValidations:x,validateInfos:O,column:A,isEdit:D}=_t(),L=Y(()=>{var v;return((v=i.value)==null?void 0:v.filter(C=>C.fk_column_id&&io.includes(h.value[C.fk_column_id].uidt)).map(C=>h.value[C.fk_column_id]))||[]});$t(()=>{var v,C,U,$;u.value.fk_qr_value_column_id=((C=(v=A==null?void 0:A.value)==null?void 0:v.colOptions)==null?void 0:C.fk_qr_value_column_id)||(D.value?null:($=(U=L.value)==null?void 0:U[0])==null?void 0:$.id)}),w({fk_qr_value_column_id:[{required:!0,message:t("general.required")}]}),x({fk_qr_value_column_id:!0});const m=v=>ll(kt(v)?hl:bl,{columnMeta:v});return(v,C)=>{const U=Ye,$=ut,b=Ct,H=Lt,ne=it;return l(),r("div",mu,[o(ne,st({class:"flex nc-qr-code-value-column-select",label:`${v.$t("placeholder.value")} ${e(t)("objects.field").toLowerCase()}`},e(O).fk_qr_value_column_id),{default:n(()=>[o(H,{value:e(u).fk_qr_value_column_id,"onUpdate:value":C[0]||(C[0]=q=>e(u).fk_qr_value_column_id=q),placeholder:v.$t("placeholder.selectAColumnForTheQRCodeValue"),onClick:C[1]||(C[1]=ke(()=>{},["stop"]))},{suffixIcon:n(()=>[o(U,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(L),(q,j)=>(l(),c(b,{key:j,value:q.id},{default:n(()=>[a("div",{class:"flex gap-2 w-full truncate items-center","data-testid":`nc-qr-${q.title}`},[a("div",vu,[(l(),c(we(m(q)),{"column-meta":q,class:"!mx-0 flex-none w-4 h-4"},null,8,["column-meta"])),o($,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[M(p(q.title),1)]),default:n(()=>[M(" "+p(q.title),1)]),_:2},1024)]),e(u).fk_qr_value_column_id===q.id?(l(),c(we(("iconMap"in v?v.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)],8,fu)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},16,["label"])])}}}),gu=Object.assign(_u,{__name:"SmartsheetColumnQrCodeOptions"}),yu={class:"flex flex-col gap-4"},hu={class:"flex flex-row items-center"},bu=["data-testid"],wu={class:"inline-flex items-center gap-2 flex-1 truncate"},xu={class:"truncate flex-1"},ku={key:0,class:"pl-2"},$u=Ue({__name:"BarcodeOptions",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{emit:k}){const d=s,P=k,{fields:t,metaColumnById:i}=$o(),h=je(d,"modelValue",P),{setAdditionalValidations:u,setAvoidShowingToastMsgForValidations:w,validateInfos:x,column:O,isEdit:A}=_t(),{t:D}=Mt(),L=Y(()=>{var C;return((C=t.value)==null?void 0:C.filter(U=>U.fk_column_id&&io.includes(i.value[U.fk_column_id].uidt)).map(U=>i.value[U.fk_column_id]))||[]});$t(()=>{var C,U,$,b;h.value.meta={...Dt.getColumnDefaultMeta(W.Barcode),...h.value.meta||{}},h.value.fk_barcode_value_column_id=((U=(C=O==null?void 0:O.value)==null?void 0:C.colOptions)==null?void 0:U.fk_barcode_value_column_id)||(A.value?null:(b=($=L.value)==null?void 0:$[0])==null?void 0:b.id)}),nt(L,C=>{var U;h.value.fk_barcode_value_column_id===null&&(h.value.fk_barcode_value_column_id=(U=C==null?void 0:C[0])==null?void 0:U.id)}),u({fk_barcode_value_column_id:[{required:!0,message:D("general.required")}],barcode_format:[{required:!0,message:D("general.required")}]}),w({fk_barcode_value_column_id:!0,barcode_format:!0});const m=Y(()=>{var C;return!((C=L.value)!=null&&C.length)}),v=C=>ll(kt(C)?hl:bl,{columnMeta:C});return(C,U)=>{const $=Ye,b=Ct,H=Lt,ne=ro,q=it;return l(),r("div",yu,[o(q,st({class:"flex pb-2 nc-barcode-value-column-select flex-row",label:`${C.$t("placeholder.value")} ${e(D)("objects.field").toLowerCase()}`},e(x).fk_barcode_value_column_id),{default:n(()=>[a("div",hu,[o(H,{value:e(h).fk_barcode_value_column_id,"onUpdate:value":U[0]||(U[0]=j=>e(h).fk_barcode_value_column_id=j),placeholder:C.$t("placeholder.barcodeColumn"),"not-found-content":C.$t("placeholder.notFoundContent"),onClick:U[1]||(U[1]=ke(()=>{},["stop"]))},{suffixIcon:n(()=>[o($,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(L),(j,N)=>(l(),c(b,{key:N,value:j.id},{default:n(()=>[a("div",{class:"w-full flex gap-2 truncate items-center justify-between","data-testid":`nc-barcode-${j.title}`},[a("div",wu,[(l(),c(we(v(j)),{"column-meta":j,class:"!mx-0"},null,8,["column-meta"])),a("div",xu,p(j.title),1)]),e(h).fk_barcode_value_column_id===j.id?(l(),c(we(("iconMap"in C?C.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)],8,bu)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","not-found-content"]),e(m)?(l(),r("div",ku,[o(ne,{placement:"bottom"},{title:n(()=>[a("span",null,p(C.$t("msg.validColumnsForBarCode")),1)]),default:n(()=>[(l(),c(we(("iconMap"in C?C.iconMap:e(Fe)).info),{class:"cursor-pointer"}))]),_:1})])):_("",!0)])]),_:1},16,["label"]),o(q,st({class:"flexp nc-barcode-format-select",label:C.$t("general.format")},e(x).barcode_format),{default:n(()=>[o(H,{value:e(h).meta.barcodeFormat,"onUpdate:value":U[2]||(U[2]=j=>e(h).meta.barcodeFormat=j),options:e(Na),placeholder:C.$t("placeholder.selectBarcodeFormat"),onClick:U[3]||(U[3]=ke(()=>{},["stop"]))},{suffixIcon:n(()=>[o($,{icon:"arrowDown",class:"text-gray-700"})]),_:1},8,["value","options","placeholder"])]),_:1},16,["label"])])}}}),Cu=Object.assign($u,{__name:"SmartsheetColumnBarcodeOptions"}),Tu={class:"flex flex-col w-[320px] overflow-hidden"},Iu={class:"flex items-center justify-between w-full p-3 bg-purple-50"},Su={target:"_blank",rel:"noopener noreferrer",class:"!no-underline !hover:underline !hover:text-nc-content-purple-dark text-nc-content-purple-dark"},Au={class:"flex flex-col p-3 text-sm gap-3"},Ou={class:"flex items-center gap-2"},Lu={key:0,class:"w-1/6 flex justify-end"},Eu={class:"w-full flex gap-2 items-center"},Mu={class:"flex items-center gap-2"},Du={key:0,class:"w-1/6 flex justify-end"},Uu={class:"w-full flex gap-2 items-center"},Ru=Ue({__name:"Settings",props:{fkIntegrationId:{},model:{},randomness:{},workspaceId:{},scope:{},showTooltip:{type:Boolean,default:!0},isEditColumn:{type:Boolean,default:!1}},emits:["update:fkIntegrationId","update:model","update:randomness"],setup(s,{emit:k}){const d=s,P=k,t=je(d,"fkIntegrationId",P),i=je(d,"model",P),{isEditColumn:h}=St(d),{$api:u}=yl(),{aiIntegrations:w}=Ll(),x=B(null),O=B(!1),A=B([]),D=B(!1),L=async m=>{if(!(!t.value&&!m)){m||(m=t.value),A.value=[],x.value!==m&&(i.value=void 0),D.value=!0;try{const v=await u.integrations.endpoint(m,"availableModels",{});A.value=v||[],!i.value&&A.value.length>0&&(i.value=A.value[0].value)}catch(v){console.error(v)}finally{D.value=!1}}};return $t(async()=>{!t.value&&!h.value?w.value.length>0&&w.value[0].id&&(t.value=w.value[0].id,tl(()=>{L()})):t.value&&(x.value=t.value,(!i.value||!A.value.length)&&L())}),(m,v)=>{const C=Ye,U=ut,$=li,b=Ct,H=an,ne=it,q=nl;return l(),c(q,{visible:e(O),"onUpdate:visible":v[2]||(v[2]=j=>ie(O)?O.value=j:null),trigger:["click"],placement:"bottomRight","overlay-class-name":"overflow-hidden"},{overlay:n(()=>[a("div",Tu,[a("div",Iu,[v[3]||(v[3]=a("span",{class:"text-sm font-bold text-nc-content-gray"},"Settings",-1)),a("a",Su,p(m.$t("title.docs")),1)]),a("div",Au,[a("div",Ou,[v[5]||(v[5]=a("span",{class:"text-nc-content-gray w-2/6"},"Integration",-1)),m.showTooltip?(l(),r("div",Lu,[o(U,{placement:"top"},{title:n(()=>v[4]||(v[4]=[a("span",null,"Integration to use for this operation",-1)])),default:n(()=>[o(C,{icon:"info",class:"text-sm text-gray-500"})]),_:1})])):_("",!0),o(ne,{class:"flex-1 !my-0 min-w-0"},{default:n(()=>[o(H,{value:e(t),"onUpdate:value":v[0]||(v[0]=j=>ie(t)?t.value=j:null),class:"w-full nc-select-shadow nc-ai-input",size:"middle",placeholder:"- select integration -",onChange:L},{default:n(()=>[(l(!0),r(K,null,$e(e(w),j=>(l(),c(b,{key:j.id,value:j.id},{default:n(()=>[a("div",Eu,[j!=null&&j.sub_type?(l(),c($,{key:0,type:j.sub_type},null,8,["type"])):_("",!0),o(U,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[M(p(j.title),1)]),default:n(()=>[M(" "+p(j.title),1)]),_:2},1024),e(t)===j.id?(l(),c(we(("iconMap"in m?m.iconMap:e(Fe)).check),{key:1,id:"nc-selected-item-icon",class:"text-nc-content-purple-medium w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),a("div",Mu,[v[7]||(v[7]=a("span",{class:"text-nc-content-gray w-2/6"},"Model",-1)),m.showTooltip?(l(),r("div",Du,[o(U,{placement:"top"},{title:n(()=>v[6]||(v[6]=[a("span",null,"Model to use for this operation",-1)])),default:n(()=>[o(C,{icon:"info",class:"text-sm text-gray-500"})]),_:1})])):_("",!0),o(ne,{class:"flex-1 !my-0 min-w-0"},{default:n(()=>[o(H,{value:e(i),"onUpdate:value":v[1]||(v[1]=j=>ie(i)?i.value=j:null),class:"w-full nc-select-shadow nc-ai-input",size:"middle",placeholder:"- select model -",disabled:!e(t)||e(A).length===0,loading:e(D)},{default:n(()=>[(l(!0),r(K,null,$e(e(A),j=>(l(),c(b,{key:j.label,value:j.value},{default:n(()=>[a("div",Uu,[o(U,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[M(p(j.label),1)]),default:n(()=>[M(" "+p(j.label),1)]),_:2},1024),e(i)===j.value?(l(),c(we(("iconMap"in m?m.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-nc-content-purple-medium w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","loading"])]),_:1})])])])]),default:n(()=>[Al(m.$slots,"default",{},()=>[o(C,{icon:"ncSettings",class:"text-gray-500 cursor-pointer"})],!0)]),_:3},8,["visible"])}}}),zo=Object.assign(Qe(Ru,[["__scopeId","data-v-80af4ca1"]]),{__name:"AiSettings"}),Pu={class:"nc-ai-prompt-with-fields w-full"},Fu=Ue({__name:"PromptWithFields",props:{modelValue:{},options:{default:()=>[]},autoFocus:{type:Boolean,default:!0},promptFieldTagClassName:{default:""},suggestionIconClassName:{default:""},placeholder:{default:"Write your prompt here..."},readOnly:{type:Boolean,default:!1},markdown:{type:Boolean,default:!0}},emits:["update:modelValue","keydown"],setup(s,{emit:k}){const d=s,P=k,t=Y({get:()=>d.modelValue,set:L=>{P("update:modelValue",L)}}),{autoFocus:i,readOnly:h}=St(d),u=jl(A,1e3),w=ni({content:t.value,enableInputRules:d.markdown,extensions:[oi.configure({heading:!1}),ai.configure({emptyEditorClass:"is-editor-empty",placeholder:d.placeholder}),za.configure({suggestion:{...ri($i),items:({query:L})=>{var m;return L.length===0?d.options??[]:((m=d.options)==null?void 0:m.filter(v=>{var C,U,$;return((U=(C=v.title)==null?void 0:C.toLowerCase())==null?void 0:U.includes(L.toLowerCase()))||`${($=v.title)==null?void 0:$.toLowerCase()}}`===L.toLowerCase()}))??[]},char:"{",allowSpaces:!0},renderHTML:({node:L})=>{var C;const m=(C=d.options)==null?void 0:C.find(U=>U.title===L.attrs.id);return["span",{class:`prompt-field-tag ${(m==null?void 0:m.uidt)===W.Attachment?"!bg-green-200":""} ${d.promptFieldTagClassName}`,style:"max-width: 200px; white-space: nowrap; overflow: hidden; display: inline-block; text-overflow: ellipsis;","data-tooltip":L.attrs.id},`${L.attrs.id}`]}})],onUpdate:({editor:L})=>{let m="";L.state.doc.descendants(v=>{v.type.name==="mention"?m+=`{${v.attrs.id}}`:v.text?m+=v.text:(v.type.name==="paragraph"||v.type.name==="hardBreak")&&(m+=`
`)}),m=m.trim(),t.value=m,u()},editable:!h.value,autofocus:i.value,editorProps:{scrollThreshold:100}}),x=()=>{var U,$,b,H;if(!w.value)return;const{$from:L}=w.value.state.selection,m=w.value.state.doc.textBetween(L.pos-1,L.pos,`
`,`
`),v=w.value.state.doc.textBetween(L.pos-1,L.pos),C=m.includes(`
`);v==="{"?w.value.chain().deleteRange({from:L.pos-1,to:L.pos}).run():v!==" "&&L.pos!==1&&!C?((U=w.value)==null||U.commands.insertContent(" {"),($=w.value)==null||$.chain().focus().run()):((b=w.value)==null||b.commands.insertContent("{"),(H=w.value)==null||H.chain().focus().run())};$t(async()=>{var m;await bn(()=>t.value!==null&&t.value!==void 0).toBeTruthy();const L=t.value.replace(/\{(.*?)\}/g,'<span data-type="mention" data-id="$1"></span>').trim().replace(/\n/g,"<br>");(m=w.value)==null||m.commands.setContent(L),i.value&&setTimeout(()=>{var v;(v=w.value)==null||v.chain().focus().setTextSelection(t.value.length).run()},100)});const O=[];function A(){document.querySelectorAll(".nc-ai-prompt-with-fields .prompt-field-tag").forEach(L=>{const m=Object.values(L.attributes).find(C=>C.name==="data-tooltip");if(!m||L.scrollWidth<=L.clientWidth)return;const v=ii(L,{content:`<div class="tooltip text-xs">${m.value}</div>`,placement:"top",allowHTML:!0,arrow:!0,animation:"fade",duration:0,maxWidth:"200px"});O.push(v)})}$t(()=>{u()}),uo(()=>{O.forEach(L=>L==null?void 0:L.destroy()),O.length=0});const D=ja();return Wa(D,"focusPromptWithFields",()=>{setTimeout(()=>{var L;(L=w.value)==null||L.chain().focus().setTextSelection(t.value.length*2).run()},100)}),(L,m)=>{const v=Ye,C=Pt;return l(),r("div",Pu,[o(e(si),{ref:"editorDom",editor:e(w),onKeydown:[m[0]||(m[0]=U=>L.$emit("keydown",U)),m[1]||(m[1]=xt(ke(()=>{},["alt","stop"]),["enter"])),m[2]||(m[2]=xt(ke(()=>{},["shift","stop"]),["enter"])),xt("handleOnEscRichTextEditor"in L?L.handleOnEscRichTextEditor:e(qa),["esc"])]},null,8,["editor","onKeydown"]),o(C,{size:"xs",type:"text",class:"nc-prompt-with-field-suggestion-btn !px-1",disabled:e(h),onClick:ke(x,["stop"])},{default:n(()=>[Al(L.$slots,"triggerIcon",{},()=>[o(v,{icon:"ncPlusSquareSolid",class:se(["text-nc-content-brand",[`${L.suggestionIconClassName}`,{"opacity-75":e(h)}]])},null,8,["class"])])]),_:3},8,["disabled"])])}}}),jo=Object.assign(Fu,{__name:"AiPromptWithFields"}),Bu=Ne(()=>Ve(()=>import("./B1qoNiTF.js").then(s=>s.C),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then(s=>s.default||s)),Vu=Ne(()=>Ve(()=>import("./Bw607vNV.js").then(s=>s.R),__vite__mapDeps([16,1,2,17,11,10,12,13,14,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,4,5,6,7,8,9,15,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93]),import.meta.url).then(s=>s.default||s)),Nu={class:"flex flex-col gap-4"},zu={class:"flex items-center gap-1"},ju={class:"text-sm text-gray-800 select-none font-semibold"},Wu={key:0,class:"relative"},qu={class:"absolute right-0"},Gu={class:"nc-prompt-input-wrapper bg-nc-bg-gray-light rounded-lg w-full"},Hu={class:"rounded-b-lg flex items-center gap-1.5 p-1"},Ku={key:0,class:"nc-ai-options-preview overflow-hidden"},Yu={class:"flex flex-col flex-1 gap-1"},Ju={class:"flex items-center gap-2"},Xu={key:0,class:"text-[11px] leading-[18px] text-nc-content-gray-muted"},Zu={key:0},Qu={class:"relative"},ec=Ue({__name:"LongTextOptions",props:{modelValue:{}},emits:["update:modelValue","navigateToIntegrations"],setup(s,{emit:k}){var _e,Q;const d=s,P=k,{t}=Mt(),i=At(Et),h=Cn(),{activeWorkspaceId:u}=Ut(h),w=Y(()=>{var Z;return(Z=i.value)!=null&&Z.columns?i.value.columns.filter(z=>z.title&&!z.system&&z.uidt!==W.ID):[]}),x=je(d,"modelValue",P),{isEdit:O,setAdditionalValidations:A,column:D,formattedData:L,loadData:m,disableSubmitBtn:v}=_t(),{isAiBetaFeaturesEnabled:C,aiIntegrationAvailable:U,generateRows:$}=Ll(),b=B({row:{},oldRow:{},rowMeta:{new:!0}}),H=B(x.value.title||"temp_title"),ne=B(!1),q=B(!1),j=Y(()=>w.value.some(z=>{var le;return(le=x.value.prompt_raw)==null?void 0:le.includes(`{${z.title}}`)})),N=Y({get:()=>{var Z;return(Z=x.value.meta)==null?void 0:Z[gn]},set:Z=>{x.value.meta[gn]=Z,x.value.prompt_raw="",b.value.row={},q.value=!1}}),J=Y(()=>{var Z;return O.value?!!((Z=D.value)!=null&&Z.pv):!1}),oe=async()=>{L.value.length||await m(void 0,!1)},ce=async()=>{var le,pe,xe,Ie;ne.value=!0,await oe();const Z=L.value.length?Co(e(L.value[0].row),((le=i.value)==null?void 0:le.columns)||[]):"";if(!L.value.length||!Z){Rt.error("Include at least 1 sample record in table to generate"),ne.value=!1;return}H.value=((pe=x.value)==null?void 0:pe.title)||"temp_title";const z=await $(i.value.id,{title:H.value,prompt_raw:x.value.prompt_raw,fk_integration_id:x.value.fk_integration_id,uidt:W.LongText},[Z]);z!=null&&z.length&&((xe=z[0])!=null&&xe[H.value])&&(b.value.row={...z[0],[H.value]:{value:(Ie=z[0])==null?void 0:Ie[H.value]}},q.value=!0),ne.value=!1},f=Y(()=>O.value&&co(D.value)||C.value);$t(()=>{var Z,z;x.value.prompt_raw=((z=(Z=D==null?void 0:D.value)==null?void 0:Z.colOptions)==null?void 0:z.prompt_raw)||""});const ge={fk_integration_id:[{validator:(Z,z)=>new Promise((le,pe)=>{N.value&&!z&&pe(new Error(t("title.aiIntegrationMissing"))),le()})}]};O.value&&(x.value.fk_integration_id=(Q=(_e=x.value)==null?void 0:_e.colOptions)==null?void 0:Q.fk_integration_id),A({...ge}),qt(Ga,B(!0));const ye=Y({get:()=>{var Z;return!!((Z=x.value.meta)!=null&&Z.richMode)},set:Z=>{x.value.meta||(x.value.meta={}),x.value.meta.richMode=Z}}),Ae=()=>{if(!N.value){v.value&&(v.value=!1);return}j.value?v.value=!1:v.value=!0};return nt(ye,()=>{x.value.cdf=null}),nt(j,Ae,{immediate:!0}),(Z,z)=>{var We,ct;const le=Ft,pe=ut,xe=it,Ie=Ye,F=Pt,re=zo,Te=jo,Le=Bu,Oe=Vu,be=En;return l(),r("div",Nu,[o(xe,null,{default:n(()=>[o(pe,{disabled:!(e(N)||e(J)&&!e(ye))},{title:n(()=>[M(p(e(J)&&!e(ye)?`${e(Wt).RichText} field cannot be used as display value field`:"Rich text formatting is not supported when generate text using AI is enabled"),1)]),default:n(()=>[a("div",zu,[o(le,{checked:e(ye),"onUpdate:checked":z[0]||(z[0]=Ke=>ie(ye)?ye.value=Ke:null),disabled:e(N)||e(J)&&!e(ye)},{default:n(()=>[a("div",ju,p(Z.$t("labels.enableRichText")),1)]),_:1},8,["checked","disabled"])])]),_:1},8,["disabled"])]),_:1}),e(f)?(l(),r("div",Wu,[o(xe,{class:"flex items-center"},{default:n(()=>[o(pe,{disabled:!(e(ye)||e(J)&&!e(N)),class:"flex items-center"},{title:n(()=>[M(p(e(J)&&!e(N)?`${e(Wt).AIPrompt} field cannot be used as display value field`:"Generate text using AI is not supported when rich text formatting is enabled"),1)]),default:n(()=>[o(le,{checked:e(N),"onUpdate:checked":z[1]||(z[1]=Ke=>ie(N)?N.value=Ke:null),disabled:e(ye)||e(J)&&!e(N),class:"nc-ai-field-generate-text nc-ai-input",onChange:Ae},{default:n(()=>[a("span",{class:se(["text-sm font-semibold pl-1",{"text-nc-content-purple-dark":e(N),"text-nc-content-gray":!e(N)}])}," Generate text using AI ",2)]),_:1},8,["checked","disabled"])]),_:1},8,["disabled"]),o(pe,{class:"ml-2 mr-[40px] flex cursor-pointer"},{title:n(()=>z[6]||(z[6]=[M(" Use AI to generate content based on record data. ")])),default:n(()=>[o(Ie,{icon:"info",class:"text-nc-content-gray-muted hover:text-nc-content-gray-subtle opacity-70 w-3.5 h-3.5"})]),_:1}),z[7]||(z[7]=a("div",{class:"flex-1"},null,-1)),a("div",qu,[o(re,{"fk-integration-id":e(x).fk_integration_id,"onUpdate:fkIntegrationId":z[2]||(z[2]=Ke=>e(x).fk_integration_id=Ke),model:e(x).model,"onUpdate:model":z[3]||(z[3]=Ke=>e(x).model=Ke),randomness:e(x).randomness,"onUpdate:randomness":z[4]||(z[4]=Ke=>e(x).randomness=Ke),"workspace-id":e(u),"show-tooltip":!1,"is-edit-column":e(O),placement:"bottomRight"},{default:n(()=>[o(F,{size:"xs",theme:"ai",class:"!px-1",type:"text"},{default:n(()=>[o(Ie,{icon:"settings"})]),_:1})]),_:1},8,["fk-integration-id","model","randomness","workspace-id","is-edit-column"])])]),_:1,__:[7]})])):_("",!0),e(f)&&(e(O)?e(N):e(U)&&e(N))?(l(),r(K,{key:1},[o(xe,{class:"flex"},{default:n(()=>[a("div",Gu,[o(Te,{modelValue:e(x).prompt_raw,"onUpdate:modelValue":z[5]||(z[5]=Ke=>e(x).prompt_raw=Ke),options:e(w),"read-only":!e(U),placeholder:"Write custom AI Prompt instruction here","prompt-field-tag-class-name":"!text-nc-content-purple-dark font-weight-500","suggestion-icon-class-name":"!text-nc-content-purple-medium"},null,8,["modelValue","options","read-only"]),a("div",Hu,[o(Ie,{icon:"info",class:"!text-nc-content-purple-medium w-3.5 h-3.5"}),z[8]||(z[8]=a("span",{class:"text-xs text-nc-content-gray-subtle2"},[M("Mention fields using curly braces, e.g. "),a("span",{class:"text-nc-content-purple-dark"},"{Field name}"),M(".")],-1))])])]),_:1}),e(U)&&e(N)?(l(),r("div",Ku,[a("div",null,[a("div",{class:se(["flex items-center gap-2 transition-all duration-300",{"pl-3 py-2 pr-2":!e(q),"pl-3 py-1 pr-1 border-b-1 border-nc-border-gray-medium":e(q)}])},[a("div",Yu,[a("div",Ju,[z[10]||(z[10]=a("span",{class:"text-sm font-bold text-nc-content-gray-subtle"},"Preview",-1)),o(pe,{class:"flex cursor-pointer"},{title:n(()=>z[9]||(z[9]=[M(" Preview is generated using the first record in this table")])),default:n(()=>[o(Ie,{icon:"info",class:"text-nc-content-gray-muted hover:text-nc-content-gray-subtle opacity-70 w-3.5 h-3.5"})]),_:1})]),e(q)?_("",!0):(l(),r("span",Xu," Include at least 1 field in prompt. "))]),o(pe,{disabled:e(j)},{title:n(()=>z[11]||(z[11]=[M(" Include at least 1 field in prompt to generate ")])),default:n(()=>[o(F,{class:se(["nc-aioptions-preview-generate-btn",{"nc-is-already-generated":e(q),"nc-preview-enabled":e(j)}]),size:"xs",type:e(q)?"text":"secondary",theme:e(j)?"ai":"default",disabled:!e(j),loading:e(ne),onClick:ke(ce,["stop"])},{default:n(()=>[a("div",{class:se({"nc-animate-dots min-w-[91px] text-left":e(ne),"min-w-[102px]":e(q)&&e(ne),"min-w-[80px]":!e(q)&&e(ne)})},p(e(q)?e(ne)?"Re-generating":"Re-generate":e(ne)?"Generating":"Generate preview"),3)]),_:1},8,["class","type","theme","disabled","loading"])]),_:1},8,["disabled"])],2),(ct=(We=e(b).row)==null?void 0:We[e(H)])!=null&&ct.value?(l(),r("div",Zu,[a("div",Qu,[o(Oe,{row:e(b)},{default:n(()=>[o(Le,{"edit-enabled":!0,"model-value":e(b).row[e(H)],column:e(x),class:"!border-none h-auto my-auto pl-1"},null,8,["model-value","column"])]),_:1},8,["row"])])])):_("",!0)])])):_("",!0)],64)):_("",!0),!e(U)&&e(N)&&e(f)?(l(),c(be,{key:2})):_("",!0)])}}}),tc=Object.assign(Qe(ec,[["__scopeId","data-v-3462002f"]]),{__name:"SmartsheetColumnLongTextOptions"}),lc=["data-testid"],nc=Ue({__name:"DurationOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k),i=Ha.map(h=>({...h,title:`${h.title}`}))||[];return t.value.meta={...Dt.getColumnDefaultMeta(W.Duration),...t.value.meta||{}},(h,u)=>{const w=Ye,x=ut,O=Ct,A=Lt,D=it,L=Hl,m=Gl;return l(),c(m,null,{default:n(()=>[o(L,{span:24},{default:n(()=>[o(D,{label:h.$t("general.format")},{default:n(()=>[o(A,{value:e(t).meta.duration,"onUpdate:value":u[0]||(u[0]=v=>e(t).meta.duration=v),class:"w-52","dropdown-class-name":"nc-dropdown-duration-option"},{suffixIcon:n(()=>[o(w,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(i),(v,C)=>(l(),c(O,{key:C,value:v.id},{default:n(()=>[a("div",{class:"flex gap-2 w-full truncate items-center","data-testid":v.title},[o(x,{"show-on-truncate-only":"",class:"flex-1 truncate"},{title:n(()=>[M(p(v.title),1)]),default:n(()=>[M(" "+p(v.title),1)]),_:2},1024),e(t).meta.duration===v.id?(l(),c(we(("iconMap"in h?h.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)],8,lc)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1})}}}),oc=Object.assign(nc,{__name:"SmartsheetColumnDurationOptions"}),ac=[W.Button],sc=({lookupColumnId:s,column:k})=>(!s||k.id!==s)&&!Kl(k)&&!ac.includes(k.uidt),ic=Ne(()=>Ve(()=>import("./mHhFSiUY.js"),__vite__mapDeps([94,78,1,2]),import.meta.url).then(s=>s.default||s)),rc=Ne(()=>Ve(()=>import("./DAM89bga.js").then(s=>s.C),__vite__mapDeps([95,1,2,24,25,26,27,96,21,11,97,61,62,63,64,5,6,65,66,67,68,69,98,58,59,85,17,99]),import.meta.url).then(s=>s.default||s)),uc={key:0,class:"w-full flex flex-col gap-4"},cc={class:"w-full flex flex-row space-x-2"},dc={class:"flex gap-2 w-full justify-between truncate items-center"},pc={class:"min-w-1/2 flex items-center gap-2"},mc={class:"inline-flex items-center truncate gap-2"},fc={class:"text-[0.65rem] leading-4 flex-1 truncate text-gray-600 nc-relation-details"},vc={class:"w-full flex gap-2 truncate items-center justify-between"},_c={class:"inline-flex items-center gap-2 flex-1 truncate"},gc={class:"truncate flex-1"},yc={key:0,class:"w-full flex flex-row space-x-2"},hc={class:"flex items-center gap-2"},bc={key:1,class:"w-full flex flex-col gap-4"},wc={class:"flex flex-col gap-2"},xc={class:"flex gap-1 items-center whitespace-nowrap"},kc={key:0,class:"overflow-auto nc-scrollbar-thin"},$c={key:1},Cc=Ue({__name:"LookupOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k),i=At(Et,B()),{t:h}=Mt(),{$e:u}=yl(),{getPlanTitle:w}=sn(),{setAdditionalValidations:x,setAvoidShowingToastMsgForValidations:O,validateInfos:A,onDataTypeChange:D,isEdit:L,disableSubmitBtn:m,updateFieldName:v,setPostSaveOrUpdateCbk:C}=_t(),U=El(),{tables:$}=Ut(U),{metas:b,getMeta:H}=ul(),ne=B();x({fk_relation_column_id:[{required:!0,message:h("general.required")}],fk_lookup_column_id:[{required:!0,message:h("general.required")}]}),O({fk_relation_column_id:!0,fk_lookup_column_id:!0}),t.value.fk_relation_column_id||(t.value.fk_relation_column_id=null),t.value.fk_lookup_column_id||(t.value.fk_lookup_column_id=null);const q=Y(()=>!$.value||!$.value.length||!i.value||!i.value.columns?[]:i.value.columns.filter(Z=>{var z;return gl(Z)&&(!Z.system||[Yt.MANY_TO_MANY,Yt.ONE_TO_ONE,Yt.BELONGS_TO].includes(Z.colOptions.type))&&Z.source_id===((z=i.value)==null?void 0:z.source_id)}).map(Z=>({col:Z.colOptions,column:Z,...$.value.find(z=>z.id===Z.colOptions.fk_related_model_id)||b.value[Z.colOptions.fk_related_model_id]||{}})).filter(Z=>{var z;return((z=Z.col)==null?void 0:z.fk_related_model_id)===Z.id&&!Z.mm})),j=Y(()=>q.value.find(Q=>Q.column.id===t.value.fk_relation_column_id)),N=Y(()=>!1),J=Y({get:()=>{var Q;return((Q=t.value.meta)==null?void 0:Q.useRecursiveEvaluation)??!1},set:Q=>{t.value.meta=t.value.meta??{},t.value.meta.useRecursiveEvaluation=Q}}),oe=Y(()=>{var Q,Z;return(Q=j.value)!=null&&Q.id?(Z=b.value[j.value.id])==null?void 0:Z.columns.filter(z=>t.value.fk_lookup_column_id===z.id||sc({column:z,lookupColumnId:t.value.id})):[]}),ce=Y({get(){var Q;return!!((Q=t.value.meta)!=null&&Q.enableConditions)},set(Q){t.value.meta=t.value.meta||{},t.value.meta.enableConditions=Q,u("c:lookup:limit-record-by-filter",{status:Q})}});qt(Et,Y(()=>j.value?b.value[j.value.id]||{}:{})),$t(()=>{var Q,Z;L.value&&(t.value.fk_lookup_column_id=(Q=t.value.colOptions)==null?void 0:Q.fk_lookup_column_id,t.value.fk_relation_column_id=(Z=t.value.colOptions)==null?void 0:Z.fk_relation_column_id),C(async({colId:z,column:le})=>{var pe;await((pe=ne.value)==null?void 0:pe.applyChanges(z||(le==null?void 0:le.id),!1))})}),Tn(()=>{C(null)});const f=()=>{var Z,z;const Q=(((Z=i.value)==null?void 0:Z.columns)||[]).filter(le=>le.uidt===W.Lookup).map(le=>{var pe;return(pe=le.colOptions)==null?void 0:pe.fk_lookup_column_id});return(z=oe.value.find(le=>!Q.includes(le.id)))==null?void 0:z.id},ge=async()=>{var Q,Z;j.value&&await H(j.value.id),t.value.fk_lookup_column_id=f()||((Z=(Q=oe.value)==null?void 0:Q[0])==null?void 0:Z.id),D()};In(()=>{q.value.length?q.value.length&&m.value&&(m.value=!1):m.value=!0});const ye=Q=>ll(kt(Q)?hl:bl,{columnMeta:Q});nt(()=>t.value.fk_relation_column_id,Q=>{if(!Q)return;const Z=q.value.find(z=>z.col.fk_column_id===Q);Z&&(t.value.lookupTableTitle=(Z==null?void 0:Z.title)||Z.table_name)}),nt(()=>t.value.fk_lookup_column_id,Q=>{if(!Q)return;const Z=oe.value.find(z=>z.id===Q);Z&&(t.value.lookupColumnTitle=(Z==null?void 0:Z.title)||Z.column_name,v())});const Ae=()=>{j.value&&(ce.value=!ce.value)},_e=()=>{var Q,Z;(Z=(Q=ne.value)==null?void 0:Q.$el)==null||Z.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})};return(Q,Z)=>{const z=Ye,le=ut,pe=Ct,xe=Lt,Ie=it,F=Ft,re=ic,Te=Un,Le=rc,Oe=Rn;return e(q).length?(l(),r("div",uc,[a("div",cc,[o(Ie,st({class:"flex w-1/2 !max-w-[calc(50%_-_4px)]",label:`${Q.$t("general.link")} ${Q.$t("objects.field")}`},e(A).fk_relation_column_id),{default:n(()=>[o(xe,{value:e(t).fk_relation_column_id,"onUpdate:value":Z[0]||(Z[0]=be=>e(t).fk_relation_column_id=be),placeholder:"-select-","dropdown-class-name":"!w-64 !rounded-md nc-dropdown-relation-table",onChange:ge},{suffixIcon:n(()=>[o(z,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(q),(be,We)=>(l(),c(pe,{key:We,value:be.col.fk_column_id},{default:n(()=>[a("div",dc,[a("div",pc,[(l(),c(we(ye(be.column)),{"column-meta":be.column,class:"!mx-0"},null,8,["column-meta"])),o(le,{class:"truncate min-w-[calc(100%_-_24px)]","show-on-truncate-only":""},{title:n(()=>[M(p(be.column.title),1)]),default:n(()=>[M(" "+p(be.column.title),1)]),_:2},1024)]),a("div",mc,[a("div",fc,[o(le,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[M(p(be.title||be.table_name),1)]),default:n(()=>[M(" "+p(be.title||be.table_name),1)]),_:2},1024)]),e(t).fk_relation_column_id===be.col.fk_column_id?(l(),c(we(("iconMap"in Q?Q.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"]),o(Ie,st({class:"flex w-1/2",label:`${Q.$t("datatype.Lookup")} ${Q.$t("objects.field")}`},e(t).fk_relation_column_id?e(A).fk_lookup_column_id:void 0),{default:n(()=>[o(xe,{value:e(t).fk_lookup_column_id,"onUpdate:value":Z[1]||(Z[1]=be=>e(t).fk_lookup_column_id=be),name:"fk_lookup_column_id",placeholder:"-select-",disabled:!e(t).fk_relation_column_id,"show-search":"","filter-option":"antSelectFilterOption"in Q?Q.antSelectFilterOption:e($n),"dropdown-class-name":"nc-dropdown-relation-column !rounded-md",onChange:e(D)},{suffixIcon:n(()=>[o(z,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(oe),be=>(l(),c(pe,{key:be.title,value:be.id},{default:n(()=>[a("div",vc,[a("div",_c,[(l(),c(we(ye(be)),{"column-meta":be,class:"!mx-0"},null,8,["column-meta"])),a("div",gc,p(be.title),1)]),e(t).fk_lookup_column_id===be.id?(l(),c(we(("iconMap"in Q?Q.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","filter-option","onChange"])]),_:1},16,["label"])]),e(N)?(l(),r("div",yc,[o(Ie,{class:"w-full"},{default:n(()=>[a("div",hc,[o(F,{checked:e(J),"onUpdate:checked":Z[2]||(Z[2]=be=>ie(J)?J.value=be:null)},{default:n(()=>[o(le,null,{title:n(()=>[M(p(Q.$t("msg.evaluateRecursivelyTooltip")),1)]),default:n(()=>[M(" "+p(Q.$t("msg.evaluateRecursively"))+" ",1),o(z,{icon:"info",class:"h-4 w-4 text-gray-400"})]),_:1})]),_:1},8,["checked"])])]),_:1})])):_("",!0),("isEeUI"in Q?Q.isEeUI:e(Gt))?(l(),r("div",bc,[a("div",wc,[o(Te,{feature:e(Jt).FEATURE_LOOKUP_LIMIT_RECORDS_BY_FILTER},{default:n(({click:be})=>[a("div",xc,[o(F,{checked:e(ce),disabled:!e(j),size:"small","data-testid":"nc-lookup-limit-record-filters",onChange:We=>{We&&be(e(Jt).FEATURE_LOOKUP_LIMIT_RECORDS_BY_FILTER)||Ae()}},{default:n(()=>[M(p(Q.$t("labels.onlyIncludeLinkedRecordsThatMeetSpecificConditions")),1)]),_:2},1032,["checked","disabled","onChange"]),e(ce)?_("",!0):(l(),c(re,{key:0,feature:e(Jt).FEATURE_LOOKUP_LIMIT_RECORDS_BY_FILTER,content:Q.$t("upgrade.upgradeToIncludeLinkedRecordsThatMeetSpecificConditions",{plan:e(w)(e(Sn).PLUS)}),class:"ml-1"},null,8,["feature","content"]))])]),_:1},8,["feature"]),e(ce)?(l(),r("div",kc,[o(Le,{ref_key:"filterRef",ref:ne,modelValue:e(t).filters,"onUpdate:modelValue":Z[3]||(Z[3]=be=>e(t).filters=be),class:"!pl-10 !p-0 max-w-620px","auto-save":!1,"show-loading":!1,link:"","show-dynamic-condition":!1,"root-meta":e(i),"link-col-id":e(t).id,onAddFilter:_e,onAddFilterGroup:_e},null,8,["modelValue","root-meta","link-col-id"])])):_("",!0)])])):_("",!0)])):(l(),r("div",$c,[o(Oe,{type:"warning","show-icon":""},{icon:n(()=>[o(z,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>Z[4]||(Z[4]=[M(" Alert ")])),description:n(()=>[M(p(Q.$t("msg.linkColumnClearNotSupportedYet",{type:"Lookup"})),1)]),_:1})]))}}}),Tc=Object.assign(Qe(Cc,[["__scopeId","data-v-a6696855"]]),{__name:"SmartsheetColumnLookupOptions"}),Ic={class:"flex items-center gap-1"},Sc={class:"text-sm text-gray-800 select-none"},Ac=Ue({__name:"NumberOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k);t.value.meta={...Dt.getColumnDefaultMeta(W.Number),...t.value.meta||{}};const{isSystem:i}=_t();return(h,u)=>{const w=Ft,x=it;return l(),c(x,null,{default:n(()=>[a("div",Ic,[e(t).meta?(l(),c(w,{key:0,checked:e(t).meta.isLocaleString,"onUpdate:checked":u[0]||(u[0]=O=>e(t).meta.isLocaleString=O),disabled:e(i)},{default:n(()=>[a("div",Sc,p(h.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked","disabled"])):_("",!0)])]),_:1})}}}),Oc=Object.assign(Ac,{__name:"SmartsheetColumnNumberOptions"}),Lc=Ne(()=>Ve(()=>import("./mHhFSiUY.js"),__vite__mapDeps([94,78,1,2]),import.meta.url).then(s=>s.default||s)),Ec=Ne(()=>Ve(()=>import("./DAM89bga.js").then(s=>s.C),__vite__mapDeps([95,1,2,24,25,26,27,96,21,11,97,61,62,63,64,5,6,65,66,67,68,69,98,58,59,85,17,99]),import.meta.url).then(s=>s.default||s)),Mc={key:0,class:"flex flex-col gap-4"},Dc={class:"w-full flex flex-row space-x-2"},Uc={class:"flex gap-2 w-full justify-between truncate items-center"},Rc={class:"min-w-1/2 flex items-center gap-2"},Pc={class:"inline-flex items-center truncate gap-2"},Fc={class:"text-[0.65rem] leading-4 flex-1 truncate text-gray-600 nc-relation-details"},Bc={class:"w-full flex gap-2 truncate items-center justify-between"},Vc={class:"flex items-center gap-2 flex-1 truncate"},Nc={class:"truncate flex-1"},zc={class:"flex gap-2 justify-between items-center"},jc={class:"flex gap-2 w-full justify-between items-center"},Wc={class:"flex items-center gap-1"},qc={class:"text-sm text-gray-800 select-none"},Gc={key:2,class:"w-full flex flex-col gap-4"},Hc={class:"flex flex-col gap-2"},Kc={class:"flex gap-1 items-center whitespace-nowrap"},Yc={key:0,class:"overflow-auto nc-scrollbar-thin"},Jc={key:1},Xc=Ue({__name:"RollupOptions",props:{value:{}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k),i=At(Et,B()),{setAdditionalValidations:h,setAvoidShowingToastMsgForValidations:u,validateInfos:w,onDataTypeChange:x,isEdit:O,disableSubmitBtn:A,updateFieldName:D,setPostSaveOrUpdateCbk:L}=_t(),m=El(),{tables:v}=Ut(m),{metas:C,getMeta:U}=ul(),{t:$}=Mt(),{$e:b}=yl(),{getPlanTitle:H}=sn(),ne=B();h({fk_relation_column_id:[{required:!0,message:$("general.required")}],fk_rollup_column_id:[{required:!0,message:$("general.required")}],rollup_function:[{required:!0,message:$("general.required")}]}),u({fk_relation_column_id:!0,fk_rollup_column_id:!0,rollup_function:!0}),t.value.fk_relation_column_id||(t.value.fk_relation_column_id=null),t.value.fk_rollup_column_id||(t.value.fk_rollup_column_id=null),t.value.rollup_function||(t.value.rollup_function=null);const q=Y(()=>!v.value||!v.value.length||!i.value||!i.value.columns?[]:i.value.columns.filter(re=>gl(re)&&re.colOptions.type&&![Yt.BELONGS_TO,Yt.ONE_TO_ONE].includes(re.colOptions.type)&&(!re.system||[Yt.MANY_TO_MANY,Yt.ONE_TO_ONE,Yt.BELONGS_TO].includes(re.colOptions.type))).map(re=>{var Oe;const Te=(Oe=re.colOptions)==null?void 0:Oe.fk_related_model_id,Le=C.value[Te]??v.value.find(be=>be.id===Te);return{col:re.colOptions,column:re,...Le}})),j=Y(()=>q.value.find(F=>F.column.id===t.value.fk_relation_column_id)),N=Y(()=>{var F,re;return(F=j.value)!=null&&F.id?(re=C.value[j.value.id])==null?void 0:re.columns.filter(Te=>(!kt(Te.uidt)||[W.CreatedTime,W.CreatedBy,W.LastModifiedTime,W.LastModifiedBy,W.Formula].includes(Te.uidt))&&(!Kl(Te)||Te.pk)):[]}),J=Y({get(){var F;return!!((F=t.value.meta)!=null&&F.enableConditions)},set(F){t.value.meta=t.value.meta||{},t.value.meta.enableConditions=F,b("c:rollup:limit-record-by-filter",{status:F})}});qt(Et,Y(()=>j.value?C.value[j.value.id]||{}:{})),$t(()=>{var F,re,Te;O.value&&(t.value.fk_relation_column_id=(F=t.value.colOptions)==null?void 0:F.fk_relation_column_id,t.value.fk_rollup_column_id=(re=t.value.colOptions)==null?void 0:re.fk_rollup_column_id,t.value.rollup_function=(Te=t.value.colOptions)==null?void 0:Te.rollup_function),L(async({colId:Le,column:Oe})=>{var be;await((be=ne.value)==null?void 0:be.applyChanges(Le||(Oe==null?void 0:Oe.id),!1))})}),Tn(()=>{L(null)});const oe=()=>{var re,Te;const F=(((re=i.value)==null?void 0:re.columns)||[]).filter(Le=>Le.uidt===W.Rollup).map(Le=>{var Oe;return(Oe=Le.colOptions)==null?void 0:Oe.fk_rollup_column_id});return(Te=N.value.find(Le=>!F.includes(Le.id)))==null?void 0:Te.id},ce=async()=>{var F,re;j.value&&await U(j.value.id),t.value.fk_rollup_column_id=oe()||((re=(F=N.value)==null?void 0:F[0])==null?void 0:re.id),x()},f=F=>ll(kt(F)?hl:bl,{columnMeta:F}),ge=B([]),ye=[{text:$("datatype.Count"),value:"count"},{text:$("general.min"),value:"min"},{text:$("general.max"),value:"max"},{text:$("general.avg"),value:"avg"},{text:$("general.sum"),value:"sum"},{text:$("general.countDistinct"),value:"countDistinct"},{text:$("general.sumDistinct"),value:"sumDistinct"},{text:$("general.avgDistinct"),value:"avgDistinct"}],Ae=Y(()=>{var re;const F={};return(re=N.value)==null||re.forEach(Te=>{Te!=null&&Te.id&&(F[Te.id]=ye.filter(Le=>Ka(Te).includes(Le.value)))}),F}),_e=Y(()=>{var F;return(F=N.value)==null?void 0:F.filter(re=>{var Te;return re.id&&((Te=Ae.value[re.id])==null?void 0:Te.length)})}),Q=()=>{const F=ge.value.find(re=>re.value===t.value.rollup_function);F&&(F!=null&&F.text)&&(t.value.rollup_function_name=F.text),x(),D()};nt(()=>t.value.fk_rollup_column_id,()=>{var re;const F=(re=N.value)==null?void 0:re.find(Te=>Te.id===t.value.fk_rollup_column_id);ge.value=Ae.value[F==null?void 0:F.id]||[],ge.value.length&&!ge.value.find(Te=>Te.value===t.value.rollup_function)&&(t.value.rollup_function=ge.value[0].value,t.value.rollup_function_name=ge.value[0].text),t.value.rollupColumnTitle=(F==null?void 0:F.title)||(F==null?void 0:F.column_name),D()}),In(()=>{q.value.length?q.value.length&&A.value&&(A.value=!1):A.value=!0}),nt(()=>t.value.fk_relation_column_id,F=>{if(!F)return;const re=q.value.find(Te=>Te.col.fk_column_id===F);re&&(t.value.rollupTableTitle=(re==null?void 0:re.title)||re.table_name)});const Z=F=>{t.value.dtxs=Math.max(F,t.value.dtxs)};t.value.meta={...Dt.getColumnDefaultMeta(W.Rollup),...t.value.meta||{}};const{isMetaReadOnly:z}=Wl(),le=Pn($),pe=Y(()=>{var Le;const F=(Le=_e.value)==null?void 0:Le.find(Oe=>Oe.id===t.value.fk_rollup_column_id);if(!F)return!1;let re=F.uidt;if(F.uidt===W.Formula){const Oe=Xt(F.meta);Oe!=null&&Oe.display_type&&(re=Oe==null?void 0:Oe.display_type)}return Ya(re).includes(t.value.rollup_function)}),xe=()=>{j.value&&(J.value=!J.value)},Ie=()=>{var F,re;(re=(F=ne.value)==null?void 0:F.$el)==null||re.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})};return(F,re)=>{const Te=Ye,Le=ut,Oe=Ct,be=Lt,We=it,ct=Ft,Ke=Lc,qe=Un,mt=Ec,Je=Rn;return e(q).length?(l(),r("div",Mc,[a("div",Dc,[o(We,st({class:"flex w-1/2 !max-w-[calc(50%_-_4px)] pb-2",label:`${F.$t("general.link")} ${F.$t("objects.field")}`},e(w).fk_relation_column_id),{default:n(()=>[o(be,{value:e(t).fk_relation_column_id,"onUpdate:value":re[0]||(re[0]=Ce=>e(t).fk_relation_column_id=Ce),placeholder:"-select-","dropdown-class-name":"!w-64 nc-dropdown-relation-table !rounded-md",onChange:ce},{suffixIcon:n(()=>[o(Te,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(q),(Ce,ee)=>(l(),c(Oe,{key:ee,value:Ce.col.fk_column_id},{default:n(()=>[a("div",Uc,[a("div",Rc,[(l(),c(we(f(Ce.column)),{"column-meta":Ce.column,class:"!mx-0"},null,8,["column-meta"])),o(Le,{class:"truncate min-w-[calc(100%_-_24px)]","show-on-truncate-only":""},{title:n(()=>[M(p(Ce.column.title),1)]),default:n(()=>[M(" "+p(Ce.column.title),1)]),_:2},1024)]),a("div",Pc,[a("div",Fc,[o(Le,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[M(p(Ce.title||Ce.table_name),1)]),default:n(()=>[M(" "+p(Ce.title||Ce.table_name),1)]),_:2},1024)]),e(t).fk_relation_column_id===Ce.col.fk_column_id?(l(),c(we(("iconMap"in F?F.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16,["label"]),o(We,st({class:"flex w-1/2",label:`${F.$t("datatype.Rollup")} ${F.$t("objects.field")}`},e(t).fk_relation_column_id?e(w).fk_rollup_column_id:void 0),{default:n(()=>[o(be,{value:e(t).fk_rollup_column_id,"onUpdate:value":re[1]||(re[1]=Ce=>e(t).fk_rollup_column_id=Ce),name:"fk_rollup_column_id",placeholder:"-select-",disabled:!e(t).fk_relation_column_id,"show-search":"","filter-option":"antSelectFilterOption"in F?F.antSelectFilterOption:e($n),"dropdown-class-name":"nc-dropdown-relation-column !rounded-xl",onChange:e(x)},{suffixIcon:n(()=>[o(Te,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(_e),Ce=>(l(),c(Oe,{key:Ce.title,value:Ce.id},{default:n(()=>[a("div",Bc,[a("div",Vc,[(l(),c(we(f(Ce)),{"column-meta":Ce,class:"!mx-0"},null,8,["column-meta"])),a("div",Nc,p(Ce.title),1)]),e(t).fk_rollup_column_id===Ce.id?(l(),c(we(("iconMap"in F?F.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled","filter-option","onChange"])]),_:1},16,["label"])]),o(We,st({label:F.$t("labels.aggregateFunction")},e(t).fk_relation_column_id?e(w).rollup_function:void 0),{default:n(()=>[o(be,{value:e(t).rollup_function,"onUpdate:value":re[2]||(re[2]=Ce=>e(t).rollup_function=Ce),disabled:!e(t).fk_relation_column_id,placeholder:"-select-","dropdown-class-name":"nc-dropdown-rollup-function",class:"!mt-0.5",onChange:Q},{suffixIcon:n(()=>[o(Te,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(ge),(Ce,ee)=>(l(),c(Oe,{key:ee,value:Ce.value},{default:n(()=>[a("div",zc,[M(p(Ce.text)+" ",1),e(t).rollup_function===Ce.value?(l(),c(we(("iconMap"in F?F.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16,["label"]),e(pe)?(l(),c(We,{key:0,label:F.$t("placeholder.precision")},{default:n(()=>{var Ce,ee;return[(Ce=e(t).meta)!=null&&Ce.precision||((ee=e(t).meta)==null?void 0:ee.precision)===0?(l(),c(be,{key:0,value:e(t).meta.precision,"onUpdate:value":re[3]||(re[3]=R=>e(t).meta.precision=R),disabled:e(z),"dropdown-class-name":"nc-dropdown-decimal-format",onChange:Z},{suffixIcon:n(()=>[o(Te,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e("precisionFormats"in F?F.precisionFormats:e(kn),(R,De)=>(l(),c(Oe,{key:De,value:R},{default:n(()=>[a("div",jc,[M(p(e(le)[R])+" ",1),e(t).meta.precision===R?(l(),c(we(("iconMap"in F?F.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])):_("",!0)]}),_:1},8,["label"])):_("",!0),e(pe)?(l(),c(We,{key:1},{default:n(()=>[a("div",Wc,[e(t).meta?(l(),c(ct,{key:0,checked:e(t).meta.isLocaleString,"onUpdate:checked":re[4]||(re[4]=Ce=>e(t).meta.isLocaleString=Ce)},{default:n(()=>[a("div",qc,p(F.$t("labels.showThousandsSeparator")),1)]),_:1},8,["checked"])):_("",!0)])]),_:1})):_("",!0),("isEeUI"in F?F.isEeUI:e(Gt))?(l(),r("div",Gc,[a("div",Hc,[o(qe,{feature:e(Jt).FEATURE_ROLLUP_LIMIT_RECORDS_BY_FILTER},{default:n(({click:Ce})=>[a("div",Kc,[o(ct,{checked:e(J),disabled:!e(j),size:"small","data-testid":"nc-rollup-limit-record-filters",onChange:ee=>{ee&&Ce(e(Jt).FEATURE_ROLLUP_LIMIT_RECORDS_BY_FILTER)||xe()}},{default:n(()=>[M(p(F.$t("labels.onlyIncludeLinkedRecordsThatMeetSpecificConditions")),1)]),_:2},1032,["checked","disabled","onChange"]),e(J)?_("",!0):(l(),c(Ke,{key:0,feature:e(Jt).FEATURE_ROLLUP_LIMIT_RECORDS_BY_FILTER,content:F.$t("upgrade.upgradeToIncludeLinkedRecordsThatMeetSpecificConditions",{plan:e(H)(e(Sn).PLUS)}),class:"ml-1"},null,8,["feature","content"]))])]),_:1},8,["feature"]),e(J)?(l(),r("div",Yc,[o(mt,{ref_key:"filterRef",ref:ne,modelValue:e(t).filters,"onUpdate:modelValue":re[5]||(re[5]=Ce=>e(t).filters=Ce),class:"!pl-10 !p-0 max-w-620px","auto-save":!1,"show-loading":!1,link:"","show-dynamic-condition":!1,"root-meta":e(i),"link-col-id":e(t).id,onAddFilter:Ie,onAddFilterGroup:Ie},null,8,["modelValue","root-meta","link-col-id"])])):_("",!0)])])):_("",!0)])):(l(),r("div",Jc,[o(Je,{type:"warning","show-icon":""},{icon:n(()=>[o(Te,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>re[6]||(re[6]=[M(" Alert ")])),description:n(()=>[M(p(F.$t("msg.linkColumnClearNotSupportedYet",{type:"Rollup"})),1)]),_:1})]))}}}),Zc=Object.assign(Qe(Xc,[["__scopeId","data-v-4271d2ca"]]),{__name:"SmartsheetColumnRollupOptions"}),Qc=Ne(()=>Ve(()=>import("./BJfsf0sA.js"),__vite__mapDeps([100,1,2]),import.meta.url).then(s=>s.default||s)),ed=Ne(()=>Ve(()=>import("./mHhFSiUY.js"),__vite__mapDeps([94,78,1,2]),import.meta.url).then(s=>s.default||s)),td=Ne(()=>Ve(()=>import("./DAM89bga.js").then(s=>s.C),__vite__mapDeps([95,1,2,24,25,26,27,96,21,11,97,61,62,63,64,5,6,65,66,67,68,69,98,58,59,85,17,99]),import.meta.url).then(s=>s.default||s)),ld=Ne(()=>Ve(()=>import("./B-pnMzog.js"),__vite__mapDeps([101,86,1,2,87,88,89,17,11,20,12,90]),import.meta.url).then(s=>s.default||s)),nd={class:"w-full flex flex-col gap-4"},od={class:"flex flex-col gap-4"},ad={class:"nc-ltar-icon nc-mm-icon"},sd={class:"nc-ltar-icon nc-hm-icon"},id={class:"nc-ltar-icon nc-oo-icon"},rd={key:0},ud={key:1},cd={class:"flex w-full items-center gap-2"},dd={class:"min-w-5 flex items-center justify-center"},pd={class:"flex gap-2 items-center"},md={key:0,class:"text-nc-content-gray-muted leading-4.5 text-xs"},fd={class:"flex w-full items-center gap-2"},vd={class:"min-w-5 flex items-center justify-center"},_d={class:"flex flex-col gap-2"},gd={class:"flex gap-2 items-center"},yd={class:"flex w-full items-center gap-2"},hd={class:"min-w-5 flex items-center justify-center"},bd={key:0},wd={key:3,class:"flex flex-col gap-2"},xd={class:"flex gap-2 items-center"},kd=["onClick"],$d={key:0,class:"overflow-auto nc-scrollbar-thin"},Cd={class:"flex items-center gap-2"},Td={class:"first-letter:capitalize"},Id={key:0,class:"flex flex-col gap-4"},Sd={class:"flex flex-row space-x-2"},Ad={class:"flex flex-row"},Od={class:"flex items-center gap-1"},Ld={class:"text-sm text-gray-800 select-none"},Ed=Ue({__name:"LinkedToAnotherRecordOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(s,{emit:k}){var ee,R,De,Ee,Ge,de,fe,I,G,he,Se,dt,et,Me,Xe,He,ot,ft,gt;const d=s,t=je(d,"value",k),i=An(d,"isEdit"),h=At(Et,B()),u=B(),w=B(((R=(ee=t.value)==null?void 0:ee.colOptions)==null?void 0:R.fk_related_base_id)!==((De=t.value)==null?void 0:De.base_id)),{basesList:x}=Ut(po()),{setAdditionalValidations:O,setAvoidShowingToastMsgForValidations:A,setPostSaveOrUpdateCbk:D,validateInfos:L,onDataTypeChange:m,sqlUi:v,isXcdbBase:C,updateFieldName:U}=_t(),$=El(),{tables:b}=Ut($),H=tn(),{viewsByTable:ne}=Ut(H),{t:q}=Mt(),{getPlanTitle:j}=sn(),{metas:N,getMeta:J}=ul();i.value||(O({childId:[{required:!0,message:q("general.required")}]}),A({childId:!0}));const oe=["NO ACTION","CASCADE","RESTRICT","SET NULL","SET DEFAULT"];i.value?((fe=t.value)==null||fe.colOptions,(G=(I=t.value)==null?void 0:I.meta)!=null&&G.custom&&Gt,t.value.is_custom_link=(Se=(he=t.value)==null?void 0:he.meta)==null?void 0:Se.custom,t.value.childViewId||(t.value.childViewId=((et=(dt=t.value)==null?void 0:dt.colOptions)==null?void 0:et.fk_target_view_id)||null)):(t.value.parentId||(t.value.parentId=(Ee=h.value)==null?void 0:Ee.id),t.value.childColumn||(t.value.childColumn=`${(Ge=h.value)==null?void 0:Ge.table_name}_id`),t.value.childTable||(t.value.childTable=(de=h.value)==null?void 0:de.table_name),t.value.parentTable||(t.value.parentTable=t.value.rtn||""),t.value.parentColumn||(t.value.parentColumn=t.value.rcn||""),t.value.type||(t.value.type="mm"),t.value.onUpdate||(t.value.onUpdate=oe[0]),t.value.onDelete||(t.value.onDelete=oe[0]),t.value.virtual||(t.value.virtual=v instanceof Ja),t.value.alias||(t.value.alias=t.value.column_name)),t.value.childId||(t.value.childId=((Xe=(Me=t.value)==null?void 0:Me.colOptions)==null?void 0:Xe.fk_related_model_id)||null),t.value.childViewId||(t.value.childViewId=((ot=(He=t.value)==null?void 0:He.colOptions)==null?void 0:ot.fk_target_view_id)||null),t.value.type||(t.value.type=((gt=(ft=t.value)==null?void 0:ft.colOptions)==null?void 0:gt.type)||"mm");const ce=B(!1),f=On(),{baseTables:ge}=Ut(f),{isFeatureEnabled:ye}=mo(),Ae=Y(()=>{if(i.value){const V=xe.value;return N.value[V]||J(V),[N.value[V]]}return w.value?ge.value.get(t.value.ref_base_id)?[...ge.value.get(t.value.ref_base_id).filter(V=>V.type===Hn.TABLE)]:[]:!b.value||!b.value.length?[]:b.value.filter(V=>{var ue;return V.type===Hn.TABLE&&V.source_id===((ue=h.value)==null?void 0:ue.source_id)})}),_e=Y(()=>{var y,g,te,ae;const V=(y=t.value)!=null&&y.is_custom_link?(te=(g=t.value)==null?void 0:g.custom)==null?void 0:te.ref_model_id:(ae=t.value)==null?void 0:ae.childId;return V?(ne.value.get(V)||[]).filter(S=>S.type!==Xa.FORM):[]}),Q=(V,ue)=>ue.key.toLowerCase().includes(V.toLowerCase()),Z=Y(()=>t.value.uidt===W.Links&&t.value.type!==Yt.ONE_TO_ONE);nt(()=>{var V,ue,y,g;return(V=t.value)!=null&&V.is_custom_link?(y=(ue=t.value)==null?void 0:ue.custom)==null?void 0:y.ref_model_id:(g=t.value)==null?void 0:g.childId},async V=>{V&&(J(V).catch(()=>{}),H.loadViews({ignoreLoading:!0,tableId:V}).catch(()=>{}))},{immediate:!0}),t.value.meta=t.value.meta||{};const z=B(!!t.value.childViewId),le=Y({get(){var V;return!!((V=t.value.meta)!=null&&V.enableConditions)},set(V){t.value.meta=t.value.meta||{},t.value.meta.enableConditions=V}}),pe=V=>{V||(t.value.childViewId=null)};qt(Et,Y(()=>{var ue,y,g,te;const V=(ue=t.value)!=null&&ue.is_custom_link?(g=(y=t.value)==null?void 0:y.custom)==null?void 0:g.ref_model_id:(te=t.value)==null?void 0:te.childId;return N.value[V]||{}})),$t(()=>{D(async({colId:V,column:ue})=>{var y;await((y=u.value)==null?void 0:y.applyChanges(V||ue.id,!1))})}),Tn(()=>{D(null)});const xe=Y({get:()=>{var V,ue,y;return(i.value?(ue=(V=t.value)==null?void 0:V.colOptions)==null?void 0:ue.fk_related_model_id:(y=t.value)==null?void 0:y.childId)??null},set:V=>{var ue;!i.value&&V&&(t.value.childId=V,t.value.childTableTitle=(ue=Ae.value.find(y=>y.id===V))==null?void 0:ue.title)}}),Ie=Y({get:()=>{var V,ue,y;return(i.value?(ue=(V=t.value)==null?void 0:V.colOptions)==null?void 0:ue.type:(y=t.value)==null?void 0:y.type)??null},set:V=>{!i.value&&V&&(t.value.type=V,U())}}),F=Y({get:()=>{var V,ue,y;return((V=t.value)==null?void 0:V.ref_base_id)??((y=(ue=t.value)==null?void 0:ue.colOptions)==null?void 0:y.fk_related_base_id)},set:V=>{!i.value&&V&&(t.value.ref_base_id=V)}}),re=()=>{m(),tl(()=>{U()})},Te=async V=>{await f.loadProjectTables(V),xe.value&&(xe.value=null)},Le={"custom.column_id":[{required:!0,message:q("general.required")}],"custom.ref_model_id":[{required:!0,message:q("general.required")}],"custom.ref_column_id":[{required:!0,message:q("general.required")}]},Oe={"custom.junc_model_id":[{required:!0,message:q("general.required")}],"custom.junc_column_id":[{required:!0,message:q("general.required")}],"custom.junc_ref_column_id":[{required:!0,message:q("general.required")}]},be=()=>{var V;(V=t.value)!=null&&V.is_custom_link?(O({childId:[],...Le,...t.value.type===Yt.MANY_TO_MANY?Oe:{}}),t.value.virtual=!0):O({childId:[{required:!0,message:q("general.required")}]})},We=()=>{i.value||(t.value.is_custom_link=!t.value.is_custom_link,be())},ct=()=>{var V;if(!(!t.value.childId&&!(t.value.is_custom_link&&((V=t.value.custom)!=null&&V.ref_model_id))))return z.value=!z.value,pe()},Ke=()=>{var V;!t.value.childId&&!(t.value.is_custom_link&&((V=t.value.custom)!=null&&V.ref_model_id))||(le.value=!le.value)},qe=()=>{w.value||(F.value=null,Ae.value.every(V=>V.id!==xe)&&(xe.value=null))},mt=V=>{if(V.project_role){if([Kn.CREATOR,Kn.OWNER].includes(V.project_role))return!0}else if(V.workspace_role&&[Yn.CREATOR,Yn.OWNER].includes(V.workspace_role))return!0;return!1},Je=()=>{i.value||(w.value=!w.value,qe())},Ce=()=>{var V,ue;(ue=(V=u.value)==null?void 0:V.$el)==null||ue.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})};return(V,ue)=>{var xl;const y=Ye,g=Dn,te=Mn,ae=it,S=Za,Pe=Qc,Re=ro,yt=Qa,ht=ut,vt=Ct,Tt=Lt,Ht=ci,Zt=es,at=an,Qt=ed,wl=Un,cl=td,Bt=Pt,wt=ld,ol=Ft,Vt=Yl("e");return l(),r("div",nd,[a("div",od,[o(ae,{label:V.$t("labels.relationType"),class:"nc-ltar-relation-type"},{default:n(()=>[o(te,{value:e(Ie),"onUpdate:value":ue[0]||(ue[0]=me=>ie(Ie)?Ie.value=me:null),name:"type",disabled:e(i)},{default:n(()=>[o(g,{value:"mm","data-testid":"Many to Many"},{default:n(()=>[a("span",ad,[o(y,{icon:"mm_solid"})]),M(" "+p(V.$t("title.manyToMany")),1)]),_:1}),o(g,{value:"hm","data-testid":"Has Many"},{default:n(()=>[a("span",sd,[o(y,{icon:"hm_solid"})]),M(" "+p(V.$t("title.hasMany")),1)]),_:1}),o(g,{value:"oo","data-testid":"One to One"},{default:n(()=>[a("span",id,[o(y,{icon:"oneToOneSolid"})]),M(" "+p(V.$t("title.oneToOne")),1)]),_:1})]),_:1},8,["value","disabled"])]),_:1},8,["label"])]),e(ye)(("FEATURE_FLAG"in V?V.FEATURE_FLAG:e(ln)).CUSTOM_LINK)&&("isEeUI"in V?V.isEeUI:e(Gt))?(l(),r("div",rd,[o(S,{checked:e(t).is_custom_link,"onUpdate:checked":ue[1]||(ue[1]=me=>e(t).is_custom_link=me),disabled:e(i),"is-edit":e(i),size:"small",name:"Custom",onChange:be},null,8,["checked","disabled","is-edit"]),a("span",{class:se(["ml-3",{"cursor-pointer":!e(i)}]),onClick:We},"Advanced Link",2)])):_("",!0),("isEeUI"in V?V.isEeUI:e(Gt))&&e(t).is_custom_link?(l(),r("div",ud,[o(Pe,{value:e(t),"onUpdate:value":ue[2]||(ue[2]=me=>ie(t)?t.value=me:null),"is-edit":e(i),meta:e(h)},null,8,["value","is-edit","meta"])])):(l(),r(K,{key:2},[e(ye)(("FEATURE_FLAG"in V?V.FEATURE_FLAG:e(ln)).CROSS_BASE_LINK)?(l(),r(K,{key:0},[a("div",null,[o(S,{checked:e(w),"onUpdate:checked":ue[3]||(ue[3]=me=>ie(w)?w.value=me:null),disabled:e(i),"is-edit":e(i),size:"small",name:"crossBase",onChange:qe},null,8,["checked","disabled","is-edit"]),o(Re,null,_l({default:n(()=>[a("span",{class:se(["ml-3",{"cursor-pointer":!e(i)}]),onClick:Je,onDblclick:We},p(V.$t("labels.crossBase")),35)]),_:2},[e(i)?void 0:{name:"title",fn:n(()=>[M(p(V.$t("tooltip.crossBase")),1)]),key:"0"}]),1024)]),e(w)?(l(),c(ae,st({key:0,class:"flex w-full pb-2 nc-ltar-child-table"},e(L).childBaseId),{default:n(()=>[o(Tt,{value:e(F),"onUpdate:value":ue[4]||(ue[4]=me=>ie(F)?F.value=me:null),"show-search":"",disabled:e(i),"filter-option":Q,placeholder:"Select base","dropdown-class-name":"nc-dropdown-ltar-child-table",onChange:ue[5]||(ue[5]=me=>Te(e(F)))},{suffixIcon:n(()=>[o(y,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(x),me=>(l(),c(vt,{key:me.title,disabled:!mt(me),value:me.id},{default:n(()=>[o(Re,null,_l({default:n(()=>{var It;return[a("div",cd,[a("div",dd,[o(yt,{color:("parseProp"in V?V.parseProp:e(Xt))(me.meta).iconColor,type:me.type,class:"nc-project-icon"},null,8,["color","type"])]),o(ht,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[M(p(me.title),1)]),default:n(()=>[a("span",null,p(me.title),1)]),_:2},1024),a("div",pd,[(me==null?void 0:me.id)===((It=e(h))==null?void 0:It.base_id)?(l(),r("div",md,p(V.$t("labels.currentBase")),1)):_("",!0)])])]}),_:2},[mt(me)?void 0:{name:"title",fn:n(()=>[ue[15]||(ue[15]=M(" You can only link to tables in bases where you have creator access or above. "))]),key:"0"}]),1024)]),_:2},1032,["disabled","value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16)):_("",!0)],64)):_("",!0),o(ae,st({class:"flex w-full pb-2 nc-ltar-child-table"},e(L).childId),{default:n(()=>[o(Tt,{value:e(xe),"onUpdate:value":ue[6]||(ue[6]=me=>ie(xe)?xe.value=me:null),"show-search":"",disabled:e(i),"filter-option":Q,placeholder:"select table to link","dropdown-class-name":"nc-dropdown-ltar-child-table",onChange:re},{suffixIcon:n(()=>[o(y,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(Ae),me=>(l(),c(vt,{key:me.title,value:me.id},{default:n(()=>[a("div",fd,[a("div",vd,[o(Ht,{meta:me,class:"text-gray-500"},null,8,["meta"])]),o(ht,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[M(p(me.title),1)]),default:n(()=>[a("span",null,p(me.title),1)]),_:2},1024)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},16)],64)),a("div",_d,[a("div",gd,[Ot(o(S,{checked:e(z),"onUpdate:checked":ue[7]||(ue[7]=me=>ie(z)?z.value=me:null),size:"small",disabled:!e(t).childId&&!(e(t).is_custom_link&&((xl=e(t).custom)!=null&&xl.ref_model_id)),onChange:pe},null,8,["checked","disabled"]),[[Vt,["c:link:limit-record-by-view",{status:e(z)}]]]),Ot((l(),r("span",{class:"text-s cursor-pointer","data-testid":"nc-limit-record-view",onClick:ct},[M(p(V.$t("labels.limitRecordSelectionToView")),1)])),[[Vt,["c:link:limit-record-by-view",{status:e(z)}]]])]),e(z)?(l(),c(ae,{key:0,class:"!pl-8 flex w-full pb-2 mt-4 space-y-2 nc-ltar-child-view"},{default:n(()=>[o(at,{value:e(t).childViewId,"onUpdate:value":ue[8]||(ue[8]=me=>e(t).childViewId=me),placeholder:V.$t("labels.selectView"),"show-search":"","filter-option":Q,"dropdown-class-name":"nc-dropdown-ltar-child-view"},{default:n(()=>[(l(!0),r(K,null,$e(e(_e),me=>(l(),c(vt,{key:me.title,value:me.id},{default:n(()=>[a("div",yd,[a("div",hd,[o(Zt,{meta:me,class:"text-gray-500"},null,8,["meta"])]),me.is_default?(l(),r("span",bd,p(V.$t("labels.defaultView")),1)):(l(),c(ht,{key:1,class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[M(p(me.title),1)]),default:n(()=>[a("span",null,p(me.title),1)]),_:2},1024))])]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1})):_("",!0)]),("isEeUI"in V?V.isEeUI:e(Gt))?(l(),r("div",wd,[o(wl,{feature:e(Jt).FEATURE_LTAR_LIMIT_SELECTION_BY_FILTER},{default:n(({click:me})=>{var It;return[a("div",xd,[Ot(o(S,{checked:e(le),disabled:!e(t).childId&&!(e(t).is_custom_link&&((It=e(t).custom)!=null&&It.ref_model_id)),size:"small",onChange:al=>{al&&me(e(Jt).FEATURE_LTAR_LIMIT_SELECTION_BY_FILTER)||Ke()}},null,8,["checked","disabled","onChange"]),[[Vt,["c:link:limit-record-by-filter",{status:e(le)}]]]),Ot((l(),r("span",{"data-testid":"nc-limit-record-filters",class:"cursor-pointer",onClick:al=>me(e(Jt).FEATURE_LTAR_LIMIT_SELECTION_BY_FILTER,()=>Ke())},[M(p(V.$t("labels.limitRecordSelectionToFilters")),1)],8,kd)),[[Vt,["c:link:limit-record-by-filter",{status:e(le)}]]]),e(le)?_("",!0):(l(),c(Qt,{key:0,feature:e(Jt).FEATURE_LTAR_LIMIT_SELECTION_BY_FILTER,content:V.$t("upgrade.upgradeToAddLimitRecordSelection",{plan:e(j)(e(Sn).PLUS)})},null,8,["feature","content"]))])]}),_:1},8,["feature"]),e(le)?(l(),r("div",$d,[o(cl,{ref_key:"filterRef",ref:u,modelValue:e(t).filters,"onUpdate:modelValue":ue[9]||(ue[9]=me=>e(t).filters=me),class:"!pl-8 !p-0 max-w-620px","auto-save":!1,"show-loading":!1,link:!0,"root-meta":e(h),"link-col-id":e(t).id,onAddFilter:Ce,onAddFilterGroup:Ce},null,8,["modelValue","root-meta","link-col-id"])])):_("",!0)])):_("",!0),!e(C)&&!e(i)||e(Z)?(l(),r(K,{key:4},[a("div",null,[o(Bt,{size:"small",type:"text",class:"!text-gray-500 !hover:text-gray-700",onClick:ue[10]||(ue[10]=ke(me=>ce.value=!e(ce),["stop"]))},{default:n(()=>[a("div",Cd,[a("span",Td,p(V.$t("title.advancedSettings").toLowerCase()),1),o(y,{icon:e(ce)?"arrowUp":"arrowDown",class:"h-4 w-4"},null,8,["icon"])])]),_:1})]),e(ce)?(l(),r("div",Id,[e(Z)?(l(),c(wt,{key:0,value:e(t),"onUpdate:value":ue[11]||(ue[11]=me=>ie(t)?t.value=me:null)},null,8,["value"])):_("",!0),!e(C)&&!e(i)?(l(),r(K,{key:1},[a("div",Sd,[o(ae,{class:"flex w-1/2",label:V.$t("labels.onUpdate")},{default:n(()=>[o(Tt,{value:e(t).onUpdate,"onUpdate:value":ue[12]||(ue[12]=me=>e(t).onUpdate=me),disabled:e(t).virtual,name:"onUpdate","dropdown-class-name":"nc-dropdown-on-update",onChange:e(m)},{suffixIcon:n(()=>[o(y,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),r(K,null,$e(oe,(me,It)=>o(vt,{key:It,value:me},{default:n(()=>[me==="NO ACTION"?(l(),r(K,{key:0},[M(p(V.$t("title.links.noAction")),1)],64)):me==="CASCADE"?(l(),r(K,{key:1},[M(p(V.$t("title.links.cascade")),1)],64)):me==="RESTRICT"?(l(),r(K,{key:2},[M(p(V.$t("title.links.restrict")),1)],64)):me==="SET NULL"?(l(),r(K,{key:3},[M(p(V.$t("title.links.setNull")),1)],64)):me==="SET DEFAULT"?(l(),r(K,{key:4},[M(p(V.$t("title.links.setDefault")),1)],64)):(l(),r(K,{key:5},[M(p(me),1)],64))]),_:2},1032,["value"])),64))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"]),o(ae,{class:"flex w-1/2",label:V.$t("labels.onDelete")},{default:n(()=>[o(Tt,{value:e(t).onDelete,"onUpdate:value":ue[13]||(ue[13]=me=>e(t).onDelete=me),disabled:e(t).virtual,name:"onDelete","dropdown-class-name":"nc-dropdown-on-delete",onChange:e(m)},{suffixIcon:n(()=>[o(y,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),r(K,null,$e(oe,(me,It)=>o(vt,{key:It,value:me},{default:n(()=>[me==="NO ACTION"?(l(),r(K,{key:0},[M(p(V.$t("title.links.noAction")),1)],64)):me==="CASCADE"?(l(),r(K,{key:1},[M(p(V.$t("title.links.cascade")),1)],64)):me==="RESTRICT"?(l(),r(K,{key:2},[M(p(V.$t("title.links.restrict")),1)],64)):me==="SET NULL"?(l(),r(K,{key:3},[M(p(V.$t("title.links.setNull")),1)],64)):me==="SET DEFAULT"?(l(),r(K,{key:4},[M(p(V.$t("title.links.setDefault")),1)],64)):(l(),r(K,{key:5},[M(p(me),1)],64))]),_:2},1032,["value"])),64))]),_:1},8,["value","disabled","onChange"])]),_:1},8,["label"])]),a("div",Ad,[o(ae,null,{default:n(()=>[a("div",Od,[o(ol,{checked:e(t).virtual,"onUpdate:checked":ue[14]||(ue[14]=me=>e(t).virtual=me),disabled:e(t).is_custom_link,onChange:e(m)},{default:n(()=>[a("div",Ld,p(V.$t("title.virtualRelation")),1)]),_:1},8,["checked","disabled","onChange"])])]),_:1})])],64)):_("",!0)])):_("",!0)],64)):_("",!0)])}}}),Md=Object.assign(Qe(Ed,[["__scopeId","data-v-42722910"]]),{__name:"SmartsheetColumnLinkedToAnotherRecordOptions"}),Dd={},Ud={class:"hidden"};function Rd(s,k){return l(),r("div",Ud)}const Pd=Object.assign(Qe(Dd,[["render",Rd]]),{__name:"SmartsheetColumnSpecificDBTypeOptions"}),Fd={class:"flex flex-col gap-4"},Bd={key:0,class:"flex items-center gap-1"},Vd={key:0,class:"flex items-center gap-1"},Nd=Ue({__name:"UserOptions",props:{value:{},isEdit:{type:Boolean}},emits:["update:value"],setup(s,{emit:k}){const t=je(s,"value",k),i=B(!1),h=B(),u={},{setAdditionalValidations:w,updateFieldName:x}=_t();w({...u}),t.value.meta={...Dt.getColumnDefaultMeta(W.User),...t.value.meta||{}},$t(()=>{h.value=t.value.meta.is_multi});const O=A=>{var D;t.value.meta.is_multi=A,t.value.meta.is_multi||(t.value.cdf=((D=t.value.cdf)==null?void 0:D.split(",")[0])||null),x()};return(A,D)=>{const L=Ft,m=it,v=Ye,C=Rn;return l(),r("div",Fd,[o(m,null,{default:n(()=>[e(t).meta?(l(),r("div",Bd,[o(L,{checked:e(t).meta.is_multi,"data-testid":"user-column-allow-multiple",onChange:O},{default:n(()=>D[1]||(D[1]=[a("div",{class:"text-sm text-gray-800 select-none"},"Allow adding multiple users",-1)])),_:1,__:[1]},8,["checked"])])):_("",!0)]),_:1}),e(i)?(l(),c(m,{key:0},{default:n(()=>[e(t).meta?(l(),r("div",Vd,[o(L,{checked:e(t).meta.notify,"onUpdate:checked":D[0]||(D[0]=U=>e(t).meta.notify=U),"data-testid":"user-column-notify-user"},{default:n(()=>D[2]||(D[2]=[a("div",{class:"text-sm text-gray-800 select-none"},"Notify users with base access when they're added",-1)])),_:1,__:[2]},8,["checked"])])):_("",!0)]),_:1})):_("",!0),e(h)&&A.isEdit&&!e(t).meta.is_multi?(l(),c(C,{key:1,type:"warning","show-icon":""},{icon:n(()=>[o(v,{icon:"alertTriangle",class:"h-6 w-6",width:"24",height:"24"})]),message:n(()=>D[3]||(D[3]=[M(" Alert ")])),description:n(()=>D[4]||(D[4]=[M(" Changing from multiple mode to single will retain only first user in each cell! ")])),_:1})):_("",!0)])}}}),zd=Object.assign(Nd,{__name:"SmartsheetColumnUserOptions"}),jd=["onKeydown"],Wd={class:"nc-unified-search-list-wrapper flex-col w-full max-h-100 nc-scrollbar-thin !overflow-y-auto px-2 pb-2"},qd={key:0,class:"px-2 py-6 text-center text-gray-500 flex flex-col items-center gap-6"},Gd={key:0,src:lo,class:"!w-[164px] flex-none",alt:"No search results found"},Hd=["onClick"],Kd=Ue({__name:"ListWithSearch",props:{isParentOpen:{type:Boolean},searchInputPlaceholder:{},optionConfig:{},options:{},disableMascot:{type:Boolean},selectedOptionId:{},uniqueIdentifier:{default:"id"},filterField:{},showSelectedOption:{type:Boolean}},emits:["selected"],setup(s,{emit:k}){const d=s,P=k,{isParentOpen:t,searchInputPlaceholder:i,selectedOptionId:h,showSelectedOption:u,filterField:w,options:x,optionConfig:O,disableMascot:A,uniqueIdentifier:D}=St(d),L=B(),m=B(-1),v=B(""),{t:C}=Mt(),U=B(),$=()=>{const N=document.querySelector(".nc-unified-list-option-active");N&&setTimeout(()=>{N==null||N.scrollIntoView({behavior:"smooth",block:"center"})},50)},b=Y(()=>{var N;return((N=x.value)==null?void 0:N.filter(J=>{var oe;return(oe=J[w.value])==null?void 0:oe.toLowerCase().includes(v.value.toLowerCase())}))??[]}),H=()=>{m.value=Math.min(m.value+1,b.value.length-1),$()},ne=()=>{m.value=Math.max(m.value-1,0),$()},q=N=>{N&&P("selected",N)},j=()=>{(b.value[m.value]||b.value[0])&&q(b.value[m.value])};return $t(()=>{v.value="",m.value=-1}),nt(t,()=>{t.value&&(v.value="",setTimeout(()=>{var N;(N=L.value)==null||N.focus()},100))},{immediate:!0}),(N,J)=>{const oe=Ye,ce=ql,f=ut,ge=Yl("e");return l(),r("div",{ref_key:"wrapperRef",ref:U,class:"flex flex-col pt-2 nc-list-with-search w-64",onKeydown:[xt(ke(H,["prevent"]),["arrow-down"]),xt(ke(ne,["prevent"]),["arrow-up"]),J[3]||(J[3]=xt(ke(ye=>q(e(b)[e(m)]),["prevent"]),["enter"]))]},[a("div",{class:"w-full pb-2 px-2",onClick:J[2]||(J[2]=ke(()=>{},["stop"]))},[o(ce,{ref_key:"inputRef",ref:L,value:e(v),"onUpdate:value":J[0]||(J[0]=ye=>ie(v)?v.value=ye:null),placeholder:e(i)||e(C)("placeholder.search"),class:"nc-dropdown-search-unified-input",onKeydown:xt(ke(j,["stop"]),["enter"]),onChange:J[1]||(J[1]=ye=>m.value=0)},{prefix:n(()=>[o(oe,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1"})]),_:1},8,["value","placeholder","onKeydown"])]),a("div",Wd,[e(b).length?_("",!0):(l(),r("div",qd,[e(A)?_("",!0):(l(),r("img",Gd)),M(" "+p(e(x).length?e(C)("title.noResultsMatchedYourSearch"):"The list is empty"),1)])),(l(!0),r(K,null,$e(e(b),(ye,Ae)=>Ot((l(),r("div",{key:Ae,class:se(["flex w-full py-[5px] items-center justify-between px-2 hover:bg-gray-100 cursor-pointer rounded-md",[`${e(O).optionClassName}`,`nc-unified-list-option-${Ae}`,{"bg-gray-100 nc-unified-list-option-active":e(m)===Ae}]]),onClick:_e=>q(ye)},[a("div",{class:se(["flex items-center gap-x-1.5",{"max-w-[calc(100%_-_28px)]":e(u),"max-w-full":!e(u)}])},[Al(N.$slots,"default",{option:ye},void 0,!0),o(f,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[M(p(ye.title),1)]),default:n(()=>[a("span",null,p(ye.title),1)]),_:2},1024)],2),e(u)&&ye[e(D)]===e(h)?(l(),c(oe,{key:0,icon:"check",class:"flex-none text-primary w-4 h-4"})):_("",!0)],10,Hd)),[[ge,e(O).selectOptionEvent]])),128)),Al(N.$slots,"bottom",{},void 0,!0)])],40,jd)}}}),Yd=Object.assign(Qe(Kd,[["__scopeId","data-v-3df0ba79"]]),{__name:"NcListWithSearch"}),Jd={class:"w-full flex items-center justify-between h-[28px]"},Xd={class:"flex items-center justify-center gap-2"},Zd={class:"flex items-center w-full truncate gap-3 text-nc-content-gray-subtle hover:text-black transition-colors"},Qd={class:"flex-1 font-550 leading-5 text-small"},ep={key:0},tp={key:0,class:"mt-2 gap-2 flex flex-wrap min-h-5.5"},lp={class:"text-[13px] font-default leading-4.5"},np={key:1,class:"flex flex-row text-gray-400 mt-2"},op=Ue({__name:"TriggerByField",props:{columns:{},triggerField:{type:Boolean},triggerFields:{}},emits:["update:triggerFields","update:triggerField"],setup(s,{emit:k}){const d=s,P=k,t=An(d,"columns"),i=je(d,"triggerFields",P,{defaultValue:[]}),h=je(d,"triggerField",P),u=B(!1),w=Y(()=>{var O;return(O=i.value)==null?void 0:O.map(A=>t.value.find(D=>D.id===A))}),x=O=>{var A;i.value=(A=i.value)==null?void 0:A.filter(D=>D!==O)};return(O,A)=>{var q;const D=Ft,L=Ye,m=Pt,v=So,C=hl,U=bl,$=ut,b=rn,H=fo,ne=nl;return l(),r(K,null,[a("div",Jd,[a("label",{class:"cursor-pointer flex items-center",onClick:A[0]||(A[0]=ke(j=>h.value=!e(h),["prevent"]))},[o(D,{checked:e(h),class:"nc-check-box-trigger-field"},{default:n(()=>A[4]||(A[4]=[a("span",{class:"!text-gray-700 font-semibold"}," Trigger only when specific fields change ",-1)])),_:1,__:[4]},8,["checked"])]),e(h)?(l(),c(ne,{key:0,visible:e(u),"onUpdate:visible":A[3]||(A[3]=j=>ie(u)?u.value=j:null),"overlay-class-name":"!pt-0"},{overlay:n(()=>[o(H,{value:e(i),"onUpdate:value":A[1]||(A[1]=j=>ie(i)?i.value=j:null),open:e(u),"onUpdate:open":A[2]||(A[2]=j=>ie(u)?u.value=j:null),class:"nc-list-field","is-multi-select":"","close-on-select":!1,list:e(t),variant:"small","option-value-key":"id","option-label-key":"title"},{headerExtraRight:n(()=>[o(v,{border:!1,color:"brand",class:"mr-2"},{default:n(()=>[M(p(e(i).length)+" fields ",1)]),_:1})]),listItem:n(({option:j})=>[a("div",Zd,[e(kt)(j)?(l(),c(C,{key:0,"column-meta":j},null,8,["column-meta"])):(l(),c(U,{key:1,"column-meta":j},null,8,["column-meta"])),o($,{class:"flex-1 truncate","show-on-truncate-only":""},{title:n(()=>[M(p(j==null?void 0:j.title),1)]),default:n(()=>[a("div",Qd,p(j==null?void 0:j.title),1)]),_:2},1024),o(b,{checked:!!e(i).includes(j.id)},null,8,["checked"])])]),_:1},8,["value","open","list"])]),default:n(()=>[o(m,{size:"xs",type:"secondary",class:se({"!shadow-selected !border-brand-500":e(u)})},{default:n(()=>[a("div",Xd,[o(L,{icon:"plus"}),M(" "+p(O.$t("activity.addFieldFromFormView")),1)])]),_:1},8,["class"])]),_:1},8,["visible"])):_("",!0)]),e(h)?(l(),r("div",ep,[(q=e(i))!=null&&q.length?(l(),r("div",tp,[(l(!0),r(K,null,$e(e(w),j=>(l(),r("div",{key:j.id,class:"bg-nc-bg-gray-medium text-nc-content-gray-subtle2 px-1 py-0.5 rounded-md flex gap-1 items-center"},[e(kt)(j)?(l(),c(C,{key:0,"column-meta":j},null,8,["column-meta"])):(l(),c(U,{key:1,"column-meta":j},null,8,["column-meta"])),a("div",lp,p(j.title),1),A[5]||(A[5]=a("div",{class:"w-0.25 h-4 bg-nc-border-gray-dark"},null,-1)),o(L,{class:"cursor-pointer opacity-70 hover:opacity-100",icon:"close",onClick:N=>x(j.id)},null,8,["onClick"])]))),128))])):(l(),r("div",np,p(O.$t("title.noFieldsSelected")),1))])):_("",!0)],64)}}}),ap=Object.assign(Qe(op,[["__scopeId","data-v-820c39aa"]]),{__name:"WebhookTriggerByField"});function sp(s){var k;const d=Bl(s);return(k=d==null?void 0:d.$el)!=null?k:d}const ip=as?window:void 0;function rp(...s){let k,d,P,t;if(typeof s[0]=="string"||Array.isArray(s[0])?([d,P,t]=s,k=ip):[k,d,P,t]=s,!k)return ns;Array.isArray(d)||(d=[d]),Array.isArray(P)||(P=[P]);const i=[],h=()=>{i.forEach(O=>O()),i.length=0},u=(O,A,D,L)=>(O.addEventListener(A,D,L),()=>O.removeEventListener(A,D,L)),w=nt(()=>[sp(k),Bl(t)],([O,A])=>{if(h(),!O)return;const D=os(A)?{...A}:A;i.push(...d.flatMap(L=>P.map(m=>u(O,L,m,D))))},{immediate:!0,flush:"post"}),x=()=>{w(),h()};return vo(x),x}function fn(s){return typeof Window<"u"&&s instanceof Window?s.document.documentElement:typeof Document<"u"&&s instanceof Document?s.documentElement:s}function Wo(s){const k=window.getComputedStyle(s);if(k.overflowX==="scroll"||k.overflowY==="scroll"||k.overflowX==="auto"&&s.clientWidth<s.scrollWidth||k.overflowY==="auto"&&s.clientHeight<s.scrollHeight)return!0;{const d=s.parentNode;return!d||d.tagName==="BODY"?!1:Wo(d)}}function up(s){const k=s||window.event,d=k.target;return Wo(d)?!1:k.touches.length>1?!0:(k.preventDefault&&k.preventDefault(),!1)}const vn=new WeakMap;function cp(s,k=!1){const d=B(k);let P=null,t="";nt(ls(s),u=>{const w=fn(Bl(u));if(w){const x=w;if(vn.get(x)||vn.set(x,x.style.overflow),x.style.overflow!=="hidden"&&(t=x.style.overflow),x.style.overflow==="hidden")return d.value=!0;if(d.value)return x.style.overflow="hidden"}},{immediate:!0});const i=()=>{const u=fn(Bl(s));!u||d.value||(Jn&&(P=rp(u,"touchmove",w=>{up(w)},{passive:!1})),u.style.overflow="hidden",d.value=!0)},h=()=>{const u=fn(Bl(s));!u||!d.value||(Jn&&(P==null||P()),u.style.overflow=t,vn.delete(u),d.value=!1)};return vo(h),Y({get(){return d.value},set(u){u?i():h()}})}function dp(){let s=!1;const k=B(!1);return(d,P)=>{if(k.value=P.value,s)return;s=!0;const t=cp(d,P.value);nt(k,i=>t.value=i)}}dp();const pp=Ue({name:"UseVirtualList",props:["list","options","height"],setup(s,{slots:k,expose:d}){const{list:P}=St(s),{list:t,containerProps:i,wrapperProps:h,scrollTo:u}=ts(P,s.options);return d({scrollTo:u}),i.style&&typeof i.style=="object"&&!Array.isArray(i.style)&&(i.style.height=s.height||"300px"),()=>ll("div",{...i},[ll("div",{...h.value},t.value.map(w=>ll("div",{style:{overflow:"hidden",height:w.height}},k.default?k.default(w):"Please set content!")))])}}),mp={class:"nc-pagition-btns-wrapper"},fp={key:1,class:"nc-pagition-v2-border"},vp={key:0,class:"nc-pagination-selector-wrapper text-gray-500"},_p={class:"flex items-center gap-2"},gp={class:"nc-current-page"},yp={key:0,class:"text-small1 font-500 text-nc-content-gray-subtle"},hp={class:"rounded-lg text-[13px] font-medium w-full"},bp={class:"nc-pagition-btns-wrapper"},wp={key:0,class:"nc-pagition-v2-border"},xp={key:1,class:"text-gray-500"},kp=Ue({__name:"PaginationV2",props:{current:{},total:{},pageSize:{},entityName:{},mode:{},variant:{default:"default"},prevPageTooltip:{},nextPageTooltip:{},firstPageTooltip:{},lastPageTooltip:{},showSizeChanger:{type:Boolean}},emits:["update:current","update:pageSize"],setup(s,{emit:k}){const d=s,P=k,{total:t,showSizeChanger:i}=St(d),h=je(d,"current",P),u=je(d,"pageSize",P),{gridViewPageSize:w,setGridViewPageSize:x}=Ol(),O=Y({get:()=>{if(!i.value)return u.value;const ne=w.value||25;return u.value!==ne&&(u.value=ne),u.value},set:ne=>{x(ne),u.value=ne}}),A=Y(()=>d.entityName||"item"),D=Y(()=>Math.max(Math.ceil(t.value/O.value),1)),{isMobileMode:L}=Ol(),m=Y(()=>d.mode||(L.value?"simple":"full")),v=Y(()=>d.variant==="default"?"xsmall":"xs"),C=({increase:ne,set:q})=>{q?h.value=q:ne&&h.value<D.value?h.value=h.value+1:h.value>0&&(h.value=h.value-1)},U=()=>{h.value=D.value},$=()=>{h.value=1},b=Y(()=>Array.from({length:D.value},(ne,q)=>({value:q+1,label:q+1}))),H=[{value:25,label:"25 / page"},{value:50,label:"50 / page"},{value:75,label:"75 / page"},{value:100,label:"100 / page"}];return(ne,q)=>{const j=Ye,N=Pt,J=To,oe=Zs,ce=Io,f=nl,ge=Yl("e");return l(),r("div",{class:se(["nc-pagination flex flex-row items-center gap-x-0.25",`nc-variant-${ne.variant}`])},[a("div",mp,[e(m)==="full"?(l(),c(we(d.firstPageTooltip&&e(m)==="full"?ut:"div"),{key:0},_l({default:n(()=>[Ot((l(),c(N,{class:"first-page !border-0",type:"text",size:e(v),disabled:e(h)===1,onClick:$},{default:n(()=>[o(j,{icon:"doubleLeftArrow",class:"nc-pagination-icon"})]),_:1},8,["size","disabled"])),[[ge,[`a:pagination:${e(A)}:first-page`]]])]),_:2},[d.firstPageTooltip?{name:"title",fn:n(()=>[M(p(d.firstPageTooltip),1)]),key:"0"}:void 0]),1024)):_("",!0),ne.variant==="v2"?(l(),r("div",fp)):_("",!0),(l(),c(we(d.prevPageTooltip&&e(m)==="full"?ut:"div"),null,_l({default:n(()=>[Ot((l(),c(N,{class:"prev-page",type:"text",size:e(v),disabled:e(h)===1,onClick:q[0]||(q[0]=ye=>C({increase:!1}))},{default:n(()=>[o(j,{icon:"arrowLeft",class:"nc-pagination-icon"})]),_:1},8,["size","disabled"])),[[ge,[`a:pagination:${e(A)}:prev-page`]]])]),_:2},[d.prevPageTooltip?{name:"title",fn:n(()=>[M(p(d.prevPageTooltip),1)]),key:"0"}:void 0]),1024))]),e(L)?_("",!0):(l(),r("div",vp,[o(f,{placement:"top","overlay-class-name":"!shadow-none"},{overlay:n(()=>[o(ce,{class:"nc-pagination-menu overflow-hidden",variant:"small"},{default:n(()=>[e(i)?(l(),c(oe,{key:`${e(O)}page`,class:"bg-gray-100 z-20 top-0 !sticky",variant:"small"},{title:n(()=>[a("div",hp,p(e(O))+" / page",1)]),default:n(()=>[(l(),r(K,null,$e(H,ye=>o(J,{key:ye.value,onClick:Ae=>O.value=ye.value},{default:n(()=>[a("span",{class:se(["text-[13px]",{"!text-brand-500":ye.value===e(O)}])},p(ye.value)+" / page ",3)]),_:2},1032,["onClick"])),64))]),_:1})):_("",!0),(l(),c(e(pp),{key:e(O),list:e(b),height:"auto",options:{itemHeight:28},class:"mt-1 max-h-46 nc-scrollbar-thin"},{default:n(({data:ye})=>[(l(),c(J,{key:`${e(O)}${ye.value}`,style:{height:"28px"},onClick:ke(Ae=>C({set:ye.value}),["stop"])},{default:n(()=>[a("div",{class:se([{"text-brand-500":ye.value===e(h)},"flex text-[13px] !w-full text-gray-800 items-center justify-between"])},p(ye.label),3)]),_:2},1032,["onClick"]))]),_:1},8,["list"]))]),_:1})]),default:n(()=>[a("div",_p,[o(N,{class:"nc-select-page",type:ne.variant==="default"?"text":"secondary",size:e(v)},{default:n(()=>[a("div",{class:se(["flex items-center",{"gap-1 px-2":ne.variant==="default","gap-2":ne.variant!=="default"}])},[a("span",gp,p(e(h)),1),o(j,{icon:"arrowDown",class:"text-gray-800 mt-0.5 nc-select-expand-btn"})],2)]),_:1},8,["type","size"]),ne.variant==="v2"?(l(),r("div",yp,"/"+p(e(b).length),1)):_("",!0)])]),_:1})])),a("div",bp,[(l(),c(we(d.nextPageTooltip&&e(m)==="full"?ut:"div"),null,_l({default:n(()=>[Ot((l(),c(N,{class:"next-page",type:"text",size:e(v),disabled:e(h)===e(D),onClick:q[1]||(q[1]=ye=>C({increase:!0}))},{default:n(()=>[o(j,{icon:"arrowRight",class:"nc-pagination-icon"})]),_:1},8,["size","disabled"])),[[ge,[`a:pagination:${e(A)}:next-page`]]])]),_:2},[d.nextPageTooltip?{name:"title",fn:n(()=>[M(p(d.nextPageTooltip),1)]),key:"0"}:void 0]),1024)),ne.variant==="v2"?(l(),r("div",wp)):_("",!0),e(m)==="full"?(l(),c(we(d.lastPageTooltip&&e(m)==="full"?ut:"div"),{key:1},_l({default:n(()=>[Ot((l(),c(N,{class:"last-page",type:"text",size:e(v),disabled:e(h)===e(D),onClick:U},{default:n(()=>[o(j,{icon:"doubleRightArrow",class:"nc-pagination-icon"})]),_:1},8,["size","disabled"])),[[ge,[`a:pagination:${e(A)}:last-page`]]])]),_:2},[d.lastPageTooltip?{name:"title",fn:n(()=>[M(p(d.lastPageTooltip),1)]),key:"0"}:void 0]),1024)):_("",!0)]),e(i)&&!e(L)?(l(),r("div",xp)):_("",!0)],2)}}}),$p=Object.assign(Qe(kp,[["__scopeId","data-v-61a2e2cb"]]),{__name:"NcPaginationV2"}),Cp={class:"container"},Tp=["onClick"],Ip={class:"icon-wrapper flex children:flex-none"},Sp={class:"flex flex-col"},Ap={class:"font-bold"},Op={class:"text-nc-content-gray-subtle2 text-small1"},Lp={class:"flex flex-col items-center gap-2 flex-1 justify-end pt-2"},Ep=Ue({__name:"List",props:{hookLogs:{},activeItem:{},logPaginationData:{}},emits:["update:activeItem","reload","pageSizeChange","pageChange"],setup(s,{emit:k}){const d=k;return(P,t)=>{const i=Ye,h=go,u=$p;return l(),r("div",Cp,[(l(!0),r(K,null,$e(P.hookLogs,(w,x)=>(l(),r(K,{key:w.id},[a("div",{class:se(["item",{active:P.activeItem===w}]),onClick:O=>d("update:activeItem",w)},[a("div",Ip,[w.error?(l(),c(i,{key:0,icon:"alertTriangleSolid",class:"h-5 w-5 text-nc-content-red-dark"})):(l(),c(i,{key:1,icon:"checkFill",class:"text-white h-5 w-5"}))]),a("div",Sp,[a("h4",Ap,p(e(_o)(w.created_at)),1),a("span",Op,[w.error?(l(),r(K,{key:0},[M(" Error occurred "+p(w.error_code??""),1)],64)):(l(),r(K,{key:1},[M(" Executed in "+p(w.execution_time)+" ms ",1)],64))])])],10,Tp),o(h,{class:se(["!my-0",{invisible:P.activeItem===w||x<P.hookLogs.length-1&&P.hookLogs[x+1]===P.activeItem}])},null,8,["class"])],64))),128)),a("div",Lp,[o(u,{current:P.logPaginationData.page,"page-size":P.logPaginationData.pageSize,total:+P.logPaginationData.totalRows,variant:"v2","onUpdate:pageSize":t[0]||(t[0]=w=>d("pageSizeChange",w)),"onUpdate:current":t[1]||(t[1]=w=>d("pageChange",w))},null,8,["current","page-size","total"])])])}}}),Mp=Object.assign(Qe(Ep,[["__scopeId","data-v-03ee528d"]]),{__name:"WebhookCallLogList"}),Dp={class:"detail-card"},Up={class:"detail-title"},Rp={class:"content"},Pp={class:"detail-headers"},Fp={class:"log-details"},Bp={class:"detail-payload -mt-1"},Vp={class:"text-sm text-gray-500 font-weight-bold pb-2 flex justify-between items-center"},Np={class:"log-details"},zp=Ue({__name:"ReqResDetailCardSkeleton",props:{title:{}},setup(s){return(k,d)=>{const P=Oo,t=Ao;return l(),r("div",Dp,[a("div",Up,p(k.title),1),a("div",Rp,[a("div",Pp,[d[0]||(d[0]=a("span",{class:"text-gray-500 font-weight-bold text-small1"},"Header",-1)),a("div",Fp,[(l(),r(K,null,$e(2,i=>o(P,{key:i,active:"",paragraph:{rows:1,width:"90%"},title:!1})),64))])]),a("div",Bp,[a("div",Vp,[d[1]||(d[1]=a("span",{class:"text-xs leading-[18px]"},"Payload",-1)),o(t,{content:"",size:"xs",class:"!px-1",disabled:""})]),a("div",Np,[(l(),r(K,null,$e(5,i=>o(P,{key:i,active:"",paragraph:{rows:1,width:"90%"},title:!1})),64))])])])])}}}),jp=Object.assign(Qe(zp,[["__scopeId","data-v-993e3dc5"]]),{__name:"WebhookCallLogReqResDetailCardSkeleton"}),Wp=Ne(()=>Ve(()=>import("./CtCRqrd3.js"),__vite__mapDeps([102,1,2,14,103]),import.meta.url).then(s=>s.default||s)),qp={class:"detail-card"},Gp={class:"detail-title font-weight-bold"},Hp={class:"content"},Kp={key:0,class:"detail-headers"},Yp={class:"log-details"},Jp={class:"label"},Xp={class:"value"},Zp={key:1,class:"detail-params"},Qp={class:"log-details"},em={class:"label"},tm={class:"value"},lm={key:2,class:"detail-payload -mt-1"},nm={class:"text-sm text-gray-500 font-weight-bold pb-2 flex justify-between items-center"},om=Ue({__name:"ReqResDetailCard",props:{title:{},headers:{},payload:{},params:{}},setup(s){const k=s,d=Y(()=>{var t;return typeof k.payload=="object"?JSON.stringify(k.payload,null,2):(t=k.payload)==null?void 0:t.toString()}),P=Y(()=>{try{return typeof k.payload=="object"?JSON.stringify(k.payload,null,2):JSON.stringify(JSON.parse(k.payload),null,2)}catch{return k.payload}});return(t,i)=>{const h=ut,u=Ao,w=Wp;return l(),r("div",qp,[a("div",Gp,p(t.title),1),a("div",Hp,[t.headers?(l(),r("div",Kp,[i[2]||(i[2]=a("span",{class:"text-gray-500 font-weight-bold text-small1"},"Header",-1)),a("div",Yp,[(l(!0),r(K,null,$e(t.headers,(x,O)=>(l(),r("div",{key:O,class:"log-detail-item"},[o(h,{class:"text-small1 min-w-40","show-on-truncate-only":""},{title:n(()=>[M(p(O),1)]),default:n(()=>[a("span",Jp,p(O),1)]),_:2},1024),o(h,{class:"text-small1 max-w-[calc(100%_-_160px)] truncate","show-on-truncate-only":""},{title:n(()=>[M(p(x),1)]),default:n(()=>[a("span",Xp,p(x),1)]),_:2},1024)]))),128))])])):_("",!0),t.params&&Object.keys(t.params).length?(l(),r("div",Zp,[i[3]||(i[3]=a("span",{class:"text-gray-500 font-weight-bold text-small1"},"Parameter",-1)),a("div",Qp,[(l(!0),r(K,null,$e(t.params,(x,O)=>(l(),r("div",{key:O,class:"log-detail-item"},[o(h,{class:"text-small1 min-w-40","show-on-truncate-only":""},{title:n(()=>[M(p(O),1)]),default:n(()=>[a("span",em,p(O),1)]),_:2},1024),o(h,{class:"text-small1 max-w-[calc(100%_-_160px)]","show-on-truncate-only":""},{title:n(()=>[M(p(x),1)]),default:n(()=>[a("span",tm,p(x),1)]),_:2},1024)]))),128))])])):_("",!0),t.payload&&Object.keys(t.payload).length?(l(),r("div",lm,[a("div",nm,[i[4]||(i[4]=a("span",{class:"text-xs leading-[18px]"},"Payload",-1)),o(u,{content:e(d),size:"xs",class:"!px-1"},null,8,["content"])]),o(w,{"model-value":e(P),class:"min-w-full w-full flex-1 min-h-50 resize-y overflow-auto expanded-editor","hide-minimap":"","disable-deep-compare":"","read-only":"","monaco-config":{lineNumbers:"on",scrollbar:{verticalScrollbarSize:6,horizontalScrollbarSize:6}},"monaco-custom-theme":{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#f9f9fa"}},onKeydown:[i[0]||(i[0]=xt(ke(()=>{},["stop"]),["enter"])),i[1]||(i[1]=ke(()=>{},["alt","stop"]))]},null,8,["model-value"])])):_("",!0)])])}}}),am=Object.assign(Qe(om,[["__scopeId","data-v-c101b5cb"]]),{__name:"WebhookCallLogReqResDetailCard"}),sm={class:"container"},im={key:0,class:"log-url-wrapper"},rm={class:"log-method"},um={class:"log-url"},cm={class:"log-details"},dm={class:"log-detail-item"},pm={class:"value"},mm={class:"log-detail-item"},fm={class:"value"},vm={class:"log-detail-item"},_m={class:"value"},gm={class:"log-detail-item"},ym={class:"value"},hm={class:"log-detail-item"},bm={class:"value"},wm={key:0,class:"log-detail-item"},xm={class:"value"},km={key:1,class:"log-detail-item"},$m={class:"value"},Cm={class:"log-detail-item"},Tm={class:"value"},Im={class:"request-response-wrapper"},Sm={class:"request-wrapper"},Am={class:"response-wrapper"},Om=Ue({__name:"Details",props:{item:{}},setup(s){const k=s,d=Y(()=>{try{return(typeof k.item.payload=="object"?k.item.payload:JSON.stringify(k.item.payload,null,2))||{}}catch{return{}}}),P=Y(()=>{try{return(typeof k.item.response=="object"?k.item.response:JSON.stringify(k.item.response,null,2))||{}}catch{return{}}}),t=i=>i.operation==="update"?"On Record Update":i.operation==="insert"?"On Record Insert":i.operation==="delete"?"On Record Delete":i.operation==="bulkDelete"||i.operation==="bulkDeleteAll"?"On Bulk Record Delete":i.operation==="bulkInsert"?"On Bulk Record Insert":i.operation==="bulkUpdate"||i.operation==="bulkUpdateAll"?"On Bulk Record Update":"On Record Insert";return(i,h)=>{const u=am;return l(),r("div",sm,[i.item?(l(),r(K,{key:0},[e(d).method&&e(d).url?(l(),r("div",im,[a("div",rm,p(e(d).method),1),a("div",um,p(e(d).url),1)])):_("",!0),a("div",cm,[a("div",dm,[h[0]||(h[0]=a("span",{class:"label"},"Execution Time",-1)),a("span",pm,p(i.item.execution_time)+" ms",1)]),a("div",mm,[h[1]||(h[1]=a("span",{class:"label"},"Trigger type",-1)),a("span",fm,p(t(i.item)),1)]),a("div",vm,[h[2]||(h[2]=a("span",{class:"label"},"Request Time",-1)),a("span",_m,p(e(_o)(i.item.created_at)),1)]),a("div",gm,[h[3]||(h[3]=a("span",{class:"label"},"Test call",-1)),a("span",ym,p(!!i.item.test_call),1)]),a("div",hm,[h[4]||(h[4]=a("span",{class:"label"},"ID",-1)),a("span",bm,p(i.item.id),1)]),i.item.error_code?(l(),r("div",wm,[h[5]||(h[5]=a("span",{class:"label"},"Error code",-1)),a("span",xm,p(i.item.error_code),1)])):_("",!0),i.item.error_message?(l(),r("div",km,[h[6]||(h[6]=a("span",{class:"label"},"Error message",-1)),a("span",$m,p(i.item.error_message),1)])):_("",!0),a("div",Cm,[h[7]||(h[7]=a("span",{class:"label"},"Triggered By",-1)),a("span",Tm,p(i.item.triggered_by),1)])]),a("div",Im,[a("div",Sm,[o(u,{title:"Request",headers:e(d).headers,payload:e(d).data,params:e(d).params},null,8,["headers","payload","params"])]),a("div",Am,[o(u,{title:"Response",headers:e(P).headers,payload:e(P).data},null,8,["headers","payload"])])])],64)):_("",!0)])}}}),Lm=Object.assign(Qe(Om,[["__scopeId","data-v-b1fdc554"]]),{__name:"WebhookCallLogDetails"}),Em={key:1,class:"flex h-full"},Mm={class:"min-w-80 border-r-1 h-full"},Dm={key:0,class:"p-3 h-full flex flex-col gap-3 children:border-b-1 children:border-nc-border-medium overflow-auto nc-scrollbar-thin"},Um={class:"flex-grow min-w-100"},Rm={key:0,class:"h-full p-3 overflow-auto nc-scrollbar-thin flex flex-col gap-6"},Pm={class:"flex gap-x-5"},Fm={class:"min-w-80 flex-1"},Bm={class:"min-w-80 flex-1"},Vm={class:"flex-1 flex items-stretch gap-4"},Nm=Ue({__name:"index",props:{hook:{}},setup(s){const k=s,{api:d,isLoading:P}=yo(),t=B([]),{appInfo:i}=Ol(),h=B({page:1,pageSize:10,totalRows:0}),u=B(),w=Y({get:()=>{var D;return u.value?u.value:(D=t.value)==null?void 0:D[0]},set:D=>{u.value=D}}),x=Y(()=>!0);async function O(D=h.value.page,L=h.value.pageSize){try{h.value.page=D||1,h.value.pageSize=L||10;const{list:m,pageInfo:v}=await d.dbTableWebhookLogs.list(k.hook.id,{offset:h.value.pageSize*(h.value.page-1),limit:L});t.value=A(m),h.value.totalRows=v.totalRows??0}catch(m){Rt.error(await rl(m))}}function A(D){var L,m;for(const v of D)v!=null&&v.response&&(v.response=Xt(v.response)),(m=(L=v==null?void 0:v.response)==null?void 0:L.config)!=null&&m.data&&(v.response.config.data=Xt(v.response.config.data)),v!=null&&v.payload&&(v.payload=Xt(v.payload)),v!=null&&v.notification&&(v.notification=Xt(v.notification));return D}return ho(async()=>{x.value&&await O()}),(D,L)=>{const m=ss,v=Oo,C=Mp,U=jp,$=Lm;return l(),r("div",{class:se(["h-full",{"flex items-center justify-center":!e(t).length&&!e(P)}])},[e(x)?(l(),r(K,{key:0},[!e(t).length&&!e(P)?(l(),c(m,{key:0})):(l(),r("div",Em,[a("div",Mm,[e(P)?(l(),r("div",Dm,[(l(),r(K,null,$e(7,b=>o(v,{key:b,loading:e(P),active:"",avatar:{size:"small"},paragraph:{rows:2},title:!1},null,8,["loading"])),64))])):(l(),c(C,{key:1,"active-item":e(w),"onUpdate:activeItem":L[0]||(L[0]=b=>ie(w)?w.value=b:null),"hook-logs":e(t),"log-pagination-data":e(h),onPageSizeChange:L[1]||(L[1]=b=>O(void 0,b)),onPageChange:L[2]||(L[2]=b=>O(b))},null,8,["active-item","hook-logs","log-pagination-data"]))]),a("div",Um,[e(P)?(l(),r("div",Rm,[o(v,{active:"",paragraph:!1,class:"!children:children:mt-0",title:{width:"50%"}}),a("div",Pm,[a("div",Fm,[(l(),r(K,null,$e(3,b=>o(v,{key:b,loading:e(P),active:"",paragraph:{rows:1,width:"90%"},title:!1,class:"min-w-80"},null,8,["loading"])),64))]),a("div",Bm,[(l(),r(K,null,$e(2,b=>o(v,{key:b,loading:e(P),active:"",paragraph:{rows:1,width:"90%"},title:!1,class:"min-w-80"},null,8,["loading"])),64))])]),a("div",Vm,[o(U,{title:"Request"}),o(U,{title:"Response"})])])):(l(),c($,{key:1,item:e(w)},null,8,["item"]))])]))],64)):_("",!0)],2)}}}),zm=Object.assign(Qe(Nm,[["__scopeId","data-v-bafd0700"]]),{__name:"WebhookCallLog"}),Fn=is("webhooksStore",()=>{const s=B([]),k=B(!0),{$api:d,$e:P}=yl(),t=rs(),i=t.currentRoute,{getMeta:h}=ul(),{activeTable:u}=St(On()),w=Y(()=>s.value.some(U=>U.version==="v2")),x=Y(()=>v({openCreatePage:!0})),O=Y(()=>v({openMainPage:!0}));async function A(){var U;k.value=!0;try{const $=(await d.dbTableWebhook.list((U=u.value)==null?void 0:U.id)).list;s.value=$.map(b=>(b.notification=Xt(b.notification),b))}catch($){Rt.error(await rl($))}finally{k.value=!1}}async function D(U){const $=s.value.findIndex(b=>b.id===U);try{U&&await d.dbTableWebhook.delete(U),s.value.splice($,1),s.value.length||(s.value=[])}catch(b){Rt.error(await rl(b))}finally{await h(u.value.id,!0)}}async function L(U){try{const $=await d.dbTableWebhook.create(U.fk_model_id,{...U,trigger_field:!!U.trigger_field,title:us(`${U.title} copy`,s.value,"title","_",!0),active:U.event==="manual"});if($){P("a:webhook:copy");const b=(await d.dbTableWebhookFilter.read(U.id,{})).list;for(const H of b)await d.dbTableWebhookFilter.create($.id,{comparison_op:H.comparison_op,comparison_sub_op:H.comparison_sub_op,fk_column_id:H.fk_column_id,fk_parent_id:H.fk_parent_id,is_group:H.is_group,logical_op:H.logical_op,value:H.value});$.notification=Xt($.notification),s.value=[$,...s.value]}}catch($){Rt.error(await rl($))}finally{await h(u.value.id,!0)}}async function m({hook:U,ogHook:$}){if(!u.value)throw new Error("activeTable is not defined");U.trigger_field=!!U.trigger_field,typeof U.notification=="string"&&(U.notification=JSON.parse(U.notification));let b=U;try{let H;b.id?H=await d.dbTableWebhook.update(b.id,{...b,notification:{...b.notification,payload:b.notification.payload}}):(H=await d.dbTableWebhook.create(u.value.id,{...b,notification:{...b.notification,payload:b.notification.payload}}),s.value.push(H)),H&&typeof H.notification=="string"&&(H.notification=JSON.parse(H.notification)),!b.id&&H&&(b={...b,...H}),s.value=s.value.map(ne=>ne.id===b.id?b:ne)}catch(H){Rt.error(await rl(H)),console.error(H),$&&(s.value=s.value.map(ne=>ne.id===$.id?$:ne))}finally{await h(u.value.id,!0)}return P("a:webhook:add",{operation:b.operation,condition:b.condition,notification:b.notification.type}),b}function v({hookId:U,openCreatePage:$,openMainPage:b}){const{activeView:H}=tn();if(!H)throw new Error("activeView is not defined");if(!b&&!$&&!U)throw new Error("hook id is not defined");return{name:"index-typeOrId-baseId-index-index-viewId-viewTitle-slugs",params:{typeOrId:i.value.params.typeOrId,baseId:i.value.params.baseId,viewId:i.value.params.viewId,viewTitle:H.id,slugs:b?["webhook"]:["webhook",$?"create":U]}}}return{hooks:s,loadHooksList:A,deleteHook:D,copyHook:L,saveHooks:m,navigateToWebhook:async({hookId:U,openCreatePage:$,openMainPage:b})=>{const{activeView:H}=tn();H&&await t.push(v({hookId:U,openCreatePage:$,openMainPage:b}))},createWebhookUrl:x,webhookMainUrl:O,isHooksLoading:k,navigateToWebhookRoute:v,hasV2Webhooks:w}}),jm=Ne(()=>Ve(()=>import("./CtCRqrd3.js"),__vite__mapDeps([102,1,2,14,103]),import.meta.url).then(s=>s.default||s)),Wm=Ne(()=>Ve(()=>import("./DAM89bga.js").then(s=>s.C),__vite__mapDeps([95,1,2,24,25,26,27,96,21,11,97,61,62,63,64,5,6,65,66,67,68,69,98,58,59,85,17,99]),import.meta.url).then(s=>s.default||s)),qm=Ne(()=>Ve(()=>import("./dff0noV4.js"),__vite__mapDeps([104,1,2,105]),import.meta.url).then(s=>s.default||s)),Gm=Ne(()=>Ve(()=>import("./BNbENqHc.js"),__vite__mapDeps([106,1,2,107]),import.meta.url).then(s=>s.default||s)),Hm=Ne(()=>Ve(()=>import("./Bpjsm0qV.js"),__vite__mapDeps([108,1,2]),import.meta.url).then(s=>s.default||s)),Km={class:"flex w-full items-center pl-4 pr-3 py-3 justify-between"},Ym={class:"flex items-center gap-3 flex-1"},Jm={class:"text-gray-900 font-semibold text-xl"},Xm={key:0,class:"flex flex-row p-1 bg-gray-200 rounded-lg gap-x-0.5 nc-view-sidebar-tab"},Zm={class:"tab-title nc-tab"},Qm={class:"tab-title nc-tab"},ef={class:"flex justify-end items-center gap-3 flex-1"},tf={key:0,class:"flex bg-white rounded-b-2xl h-[calc(100%_-_56px)]"},lf={key:0,class:"h-full w-full overflow-auto nc-scrollbar-thin"},nf={class:"h-full w-full max-w-[1040] min-w-[640px] px-6 md:px-12 py-6 flex flex-col"},of={class:"nc-webhook-version-diff"},af={class:"nc-item-title"},sf={class:"nc-item-response"},rf={class:"max-w-[640px] min-w-[564px] w-full mx-auto gap-8 flex flex-col"},uf=["placeholder"],cf={class:"flex flex-col"},df={class:"text-nc-content-gray text-base font-bold leading-6"},pf={class:"w-full flex gap-3"},mf={class:"text-nc-content-gray flex-1"},ff={class:"flex-1 w-full text-sm"},vf={class:"flex-1 w-full text-sm"},_f={key:0,class:"border-1 border-nc-border-gray-medium rounded-b-2xl px-4 pt-4"},gf={class:"w-full flex items-center justify-between h-[28px]"},yf={key:0,class:"flex gap-2"},hf={class:"flex items-center gap-1"},bf={class:"flex items-center gap-1"},wf={key:0,class:"mb-4"},xf={class:"text-nc-content-gray text-base mt-6 font-bold leading-6"},kf={class:"mt-3 border-1 custom-select border-nc-border-gray-medium p-4 border-b-0 rounded-t-2xl"},$f={key:0,class:"flex gap-3"},Cf={class:"flex items-center gap-2 justify-between w-full"},Tf={class:"flex flex-col gap-2"},If={key:0,class:"text-xs text-warning pl-2"},Sf={key:1,class:"border-1 border-nc-border-gray-medium rounded-b-2xl pt-4 px-4 pb-2"},Af={style:{"box-shadow":"0px 0px 4px 0px rgba(0, 0, 0, 0.08), 0px 0px 4px 0px rgba(0, 0, 0, 0.08)"},class:"my-3 mx-1 rounded-lg overflow-hidden"},Of={key:0,class:"flex flex-col gap-4"},Lf={key:0,class:"flex flex-col w-full gap-3"},Ef={key:1,class:"flex flex-col w-full gap-3"},Mf={key:2,class:"flex flex-col w-full gap-3"},Df={key:3,class:"flex flex-col w-full gap-3"},Uf={key:1},Rf={class:"!text-gray-700 font-semibold"},Pf={class:"flex flex-col gap-4"},Ff={class:"flex items-center justify-between -ml-1.5 !mt-[32px]"},Bf={class:"flex items-center gap-3"},Vf={class:"h-full bg-gray-50 border-l-1 w-80 p-5 rounded-br-2xl border-gray-200"},Nf={class:"w-full flex flex-col gap-3"},zf={class:"text-sm text-gray-700 font-semibold !my-0"},jf={class:"h-7 w-7 flex items-center justify-center"},Wf={key:1,class:"h-[calc(100%_-_57px)]"},qf=Ue({__name:"index",props:{value:{type:Boolean},eventList:{},hook:{},showUpgradeModal:{type:Boolean},sampleDataV2:{},stickyScroll:{type:Boolean}},emits:["close","update:value","cancel"],setup(s,{emit:k}){const d=s,P=k,{eventList:t,showUpgradeModal:i,sampleDataV2:h}=St(d),{t:u}=Mt(),{$e:w,$api:x}=yl(),{api:O,isLoading:A}=yo(),D=je(d,"value"),{hooks:L}=Ut(Fn()),{base:m}=Ut(El()),v=At(Et,B()),{getMeta:C}=ul(),{appInfo:U}=Ol(),{activeTable:$}=St(On()),{updateStatLimit:b,showWebhookLogsFeatureAccessModal:H}=sn(),ne=u("labels.webhook"),q=B(),j=B(""),N=nn.useForm,J=Y(()=>{var y;return(y=v.value)!=null&&y.columns?v.value.columns.filter(g=>[W.ID].includes(g.uidt)||gl(g)||!Kl(g)&&!kt(g)):[]}),oe=Y(()=>{const y={};for(const g of t.value)y[g.value[0]]||(y[g.value[0]]={}),y[g.value[0]][g.value[1]]=g;return y}),ce=Y(()=>{const y=[];for(const g of t.value)y.some(te=>te.value===g.value[0])||y.push({text:g.text[0],value:g.value[0]});return y});let f=cs({id:"",title:ne,event:void 0,operation:["insert","update","delete"],eventOperation:void 0,notification:{type:"URL",include_user:!1,payload:{method:"POST",body:"{{ json event }}",headers:[{enabled:!1,name:"",value:""}],parameters:[{enabled:!1,name:"",value:""}],path:""}},condition:!1,trigger_field:!1,trigger_fields:[],active:!0,version:"v3"});const ge=Y(()=>f.event?t.value.filter(g=>g.value[0]===f.event).map(g=>({text:g.text[1],value:g.value[1]})):[]),ye=B(f.version==="v1"||Gt),Ae=B("params"),_e=B(),Q=B([]),Z=B([]),z=B([]),le=B([]),pe=B(!0),xe=B(),Ie=B(),F=B(),re=y=>{var ae;const g=[...f.operation],te=(g==null?void 0:g.indexOf(y))??-1;te>=0?g==null||g.splice(te,1):g==null||g.push(y),g.includes("update")||(f.trigger_field=!1,f.trigger_fields=[]),f.operation=g,pe.value=f.event==="after"&&(g==null?void 0:g.length)===((ae=ge.value)==null?void 0:ae.length)},Te=y=>{pe.value=!pe.value,f.operation=pe.value?[...ge.value.map(g=>g.value)]:[],pe.value||(f.trigger_field=!1,f.trigger_fields=[])},Le=y=>{pe.value=!1,f.operation=[],f.event=y,y!=="after"&&(f.operation=["trigger"],f.trigger_field=!1,f.trigger_fields=[]),f.event==="manual"&&(f.active=!0)},Oe=B({Email:[{key:"to",label:u("labels.toAddress"),placeholder:u("labels.toAddress"),type:"SingleLineText",required:!0},{key:"subject",label:u("labels.subject"),placeholder:u("labels.subject"),type:"SingleLineText",required:!0},{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Slack:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],"Microsoft Teams":[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Discord:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Mattermost:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0}],Twilio:[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0},{key:"to",label:u("labels.commaSeparatedMobileNumber"),placeholder:u("labels.commaSeparatedMobileNumber"),type:"LongText",required:!0}],"Whatsapp Twilio":[{key:"body",label:u("labels.body"),placeholder:u("labels.body"),type:"LongText",required:!0},{key:"to",label:u("labels.commaSeparatedMobileNumber"),placeholder:u("labels.commaSeparatedMobileNumber"),type:"LongText",required:!0}]});Y(()=>[{type:"URL",text:u("datatype.URL")},{type:"Email",text:u("datatype.Email")},{type:"Slack",text:u("general.slack")},{type:"Microsoft Teams",text:u("general.microsoftTeams")},{type:"Discord",text:u("general.discord")},{type:"Mattermost",text:u("general.matterMost")},{type:"Twilio",text:u("general.twilio")},{type:"Whatsapp Twilio",text:u("general.whatsappTwilio")}]);const be=[{title:"GET"},{title:"POST"},{title:"DELETE"},{title:"PUT"},{title:"HEAD"},{title:"PATCH"}],We=B(!1),ct=Y(()=>({title:[jt()],"notification.type":[jt()],...f.notification.type==="URL"&&{"notification.payload.method":[jt()],"notification.payload.path":[jt(),{validator:(y,g)=>new Promise((te,ae)=>{var Re,yt;We.value=!1;const S=(Re=U.value)==null?void 0:Re.ncSiteUrl;if(!g||!S){te();return}let Pe=!1;try{const ht=new URL(f.notification.payload.path),vt=new URL(S);Pe=ht.hostname===vt.hostname}catch{Pe=g.includes(S)}Pe&&((yt=U.value)!=null&&yt.isCloud?ae(new Error(u("msg.internalUrlsNotAllowed"))):We.value=!0),te()})}]},...f.notification.type==="Email"&&{"notification.payload.to":[jt()],"notification.payload.subject":[jt()],"notification.payload.body":[jt()]},...["Slack","Microsoft Teams","Discord","Mattermost"].includes(f.notification.type)&&{"notification.payload.channels":[jt()],"notification.payload.body":[jt()]},...(f.notification.type==="Twilio"||f.notification.type==="Whatsapp Twilio")&&{"notification.payload.body":[jt()],"notification.payload.to":[jt()]}})),{validate:Ke,validateInfos:qe}=N(f,ct),mt=y=>{if(y){if(Array.isArray(y))return y;if(typeof y=="object"&&Object.keys(y).length>0)return[y]}return[]};function Je(y=!1){var g,te,ae,S,Pe,Re,yt,ht;if(y&&(f.notification.payload={},["Slack","Microsoft Teams","Discord","Mattermost"].includes(f.notification.type)&&(f.notification.payload.channels=[],f.notification.payload.body="")),f.notification.type==="Slack"&&(Q.value=mt((te=(g=_e==null?void 0:_e.value)==null?void 0:g.Slack)==null?void 0:te.parsedInput)),f.notification.type==="Microsoft Teams"&&(Z.value=mt((S=(ae=_e==null?void 0:_e.value)==null?void 0:ae["Microsoft Teams"])==null?void 0:S.parsedInput)),f.notification.type==="Discord"&&(z.value=mt((Re=(Pe=_e==null?void 0:_e.value)==null?void 0:Pe.Discord)==null?void 0:Re.parsedInput)),f.notification.type==="Mattermost"&&(le.value=mt((ht=(yt=_e==null?void 0:_e.value)==null?void 0:yt.Mattermost)==null?void 0:ht.parsedInput)),f.notification.type==="URL"){const vt=f.notification.payload.body;f.notification.payload.body=vt?vt==="{{ json data }}"?"{{ json event }}":vt:"{{ json event }}",f.notification.payload.parameters=f.notification.payload.parameters||[{}],f.notification.payload.headers=f.notification.payload.headers||[{}],f.notification.payload.method=f.notification.payload.method||"POST",f.notification.payload.auth=f.notification.payload.auth??""}}function Ce(y){const g={...y};y.version==="v2"&&(g.version="v3",g.operation=typeof y.operation=="string"?[y.operation.replace("bulk","").toLowerCase()]:y.operation);const te=y.notification;Object.assign(f,{...g,notification:{...te,include_user:(te==null?void 0:te.include_user)??!1,payload:te.payload}}),g.event==="after"&&g.operation&&g.operation.length===t.value.filter(ae=>ae.value[0]==="after").length?pe.value=!0:pe.value=!1,f.trigger_field=!!(f!=null&&f.trigger_field),Xe()}function ee(){const{notification:{payload:y={},type:g={}}={}}=f;Object.assign(f,{...f,notification:{...f.notification,type:g,payload:y}}),f.notification.payload=y;const te=B(null);switch(f.notification.type){case"Slack":te.value=Q.value;break;case"Microsoft Teams":te.value=Z.value;break;case"Discord":te.value=z.value;break;case"Mattermost":te.value=le.value;break}te&&(f.notification.payload.webhook_url=f.notification.payload.webhook_url&&f.notification.payload.webhook_url.map(ae=>{var S;return(S=te.value)==null?void 0:S.find(Pe=>ae.webhook_url===Pe.webhook_url)})),f.notification.type==="URL"&&(f.notification.payload=f.notification.payload||{},f.notification.payload.parameters=f.notification.payload.parameters||[{}],f.notification.payload.headers=f.notification.payload.headers||[{}],f.notification.payload.method=f.notification.payload.method||"POST")}async function R(){try{const y=(await O.plugin.webhookList({query:{base_id:m.value.id}})).list;_e.value=y.reduce((g,te)=>{const ae={title:"",tags:[],parsedInput:{},...te};return ae.tags=te.tags?te.tags.split(","):[],ae.parsedInput=Xt(te.input),g[ae.title]=ae,g},{})}catch(y){Rt.error(await rl(y))}}const De=Y(()=>f.event&&f.event!=="manual");async function Ee(){var g;A.value=!0;try{if(await Ke(),((g=f.operation)==null?void 0:g.length)===0&&pe.value===!1)throw Rt.error("At least one operation need to be selected"),new Error("At least one operation need to be selected")}catch(te){console.error("validation error",te),A.value=!1;return}let y=[...f.operation??[]];pe.value===!0&&(y=t.value.filter(te=>te.value[0]===f.event).map(te=>te.value[1]));try{let te;f.id?te=await O.dbTableWebhook.update(f.id,{...f,operation:y,notification:{...f.notification,payload:f.notification.payload}}):(te=await O.dbTableWebhook.create(v.value.id,{...f,operation:y,notification:{...f.notification,payload:f.notification.payload}}),L.value.push(te),b(vs.LIMIT_WEBHOOK_PER_WORKSPACE,1)),te&&typeof te.notification=="string"&&(te.notification=JSON.parse(te.notification)),!f.id&&te&&(f={...f,...te}),xe.value&&await xe.value.applyChanges(f.id,!1,De.value),L.value=L.value.map(ae=>ae.id===f.id?f:ae),w("a:webhook:add",{operation:f.operation,condition:f.condition,notification:f.notification.type}),P("close",f),i.value&&Rt.success("Webhook upgraded to v3 successfully!")}catch(te){Rt.error(await rl(te))}finally{C($.value.id,!0),A.value=!1}}const Ge=()=>{P("close",f)},de=B(!1),fe=B(),I=B(),G=B("configuration"),[he,Se]=ds(),dt=()=>{Se(),tl(()=>{he.value&&(I.value.scrollTop=I.value.scrollHeight)})};async function et(){var y;try{j.value="",q.value=!1,de.value=!0,await x.dbTableWebhook.test((y=v.value)==null?void 0:y.id,{hook:f,payload:fe.value}),q.value=!0}catch(g){j.value=await rl(g)}finally{de.value=!1}}const Me=[{title:"Getting started",href:"https://nocodb.com/docs/product-docs/automation/webhook/create-webhook"},{title:"Create webhook",href:"https://nocodb.com/docs/product-docs/automation/webhook"},{title:"Custom payload",href:"https://nocodb.com/docs/product-docs/automation/webhook/create-webhook#webhook-with-custom-payload-"},{title:"Trigger on condition",href:"https://nocodb.com/docs/product-docs/automation/webhook/create-webhook#webhook-with-conditions"}];nt(()=>f==null?void 0:f.operation,async()=>{await Xe()},{immediate:!0});async function Xe(){var g,te,ae,S;const y=await x.dbTableWebhook.samplePayloadGet((g=v==null?void 0:v.value)==null?void 0:g.id,(f==null?void 0:f.operation)&&(f==null?void 0:f.operation[0])||"insert",f.version,{query:{includeUser:(!!((te=f.notification)!=null&&te.include_user)).toString()}});f.notification.type!=="URL"&&["v2","v3"].includes(f.version)?fe.value={event:(S=(ae=fe.value)==null?void 0:ae.data)==null?void 0:S.rows}:fe.value=y}const He=y=>_s([...y.map(g=>(g==null?void 0:g.title)||"")],ne),ot=y=>{y==="log"&&H()||(G.value=y)};ps("Escape",()=>{D.value=!1}),nt(()=>f.eventOperation,()=>{if(!f.eventOperation)return;const[y,g]=f.eventOperation.split(" ");f.event=y,f.operation=g}),nt(()=>d.hook,()=>{var y,g;d.hook?(Ce(d.hook),ee()):(f.title=He(L.value),f.event=(g=(y=t.value)==null?void 0:y[0])==null?void 0:g.value[0])},{immediate:!0}),$t(async()=>{await R(),Je(),i.value||bn(()=>F.value).toBeTruthy().then(()=>{var y,g;(y=F.value)==null||y.focus(),(g=F.value)==null||g.select()})});const ft=async()=>{f.notification.include_user=!f.notification.include_user,await Xe()},gt=Y(()=>{var te;if(pe.value)return u("labels.sendAllEvents");if(!((te=f.operation)!=null&&te.length))return"Select operation";const y=f.operation.map(ae=>{var S,Pe;return(Pe=(S=oe.value[f.event])==null?void 0:S[ae])==null?void 0:Pe.text[1]});if(y.length===1)return`${f.event==="after"?`${u("general.after")} `:""}${y[0]}`;const g=y.pop();return`${f.event==="after"?`${u("general.after")} `:""}${y.join(", ")} ${u("general.or").toLowerCase()} ${g}`}),V=y=>{try{return JSON.stringify(typeof y=="object"?y:JSON.parse(y),null,2)}catch{return y}},ue=Y(()=>[{title:"Webhook v2 response",response:V(h.value??"")},{title:"Webhook v3 response",response:V(fe.value)}]);return(y,g)=>{const te=Ye,ae=Pt,S=ut,Pe=jm,Re=it,yt=Ct,ht=an,vt=rn,Tt=To,Ht=ms,Zt=Io,at=nl,Qt=Ft,wl=Wm,cl=ap,Bt=Lt,wt=ql,ol=qm,Vt=so,xl=Gm,me=ao,It=Hm,al=xn,Nt=nn,dl=di,un=zm,Jl=yn,pl=Yl("e");return l(),c(Jl,{visible:e(D),"onUpdate:visible":g[29]||(g[29]=bt=>ie(D)?D.value=bt:null),"show-separator":!0,size:"large","wrap-class-name":"nc-modal-webhook-create-edit"},{header:n(()=>[a("div",Km,[a("div",Ym,[o(te,{class:"text-gray-900 h-5 w-5",icon:"ncWebhook"}),a("span",Jm,[e(G)==="configuration"?(l(),r(K,{key:0},[M(p(e(i)?e(f).title:y.hook?"Webhook Settings":y.$t("activity.newWebhook")),1)],64)):(l(),r(K,{key:1},[M(p(y.$t("activity.webhookLogs")),1)],64))])]),y.hook&&("isEeUI"in y?y.isEeUI:e(Gt))&&!e(i)?(l(),r("div",Xm,[Ot((l(),r("div",{class:se(["tab",{active:e(G)==="configuration"}]),onClick:g[0]||(g[0]=bt=>ot("configuration"))},[a("div",Zm,p(y.$t("general.details")),1)],2)),[[pl,["c:webhook:edit"]]]),Ot((l(),r("div",{class:se(["tab",{active:e(G)==="log"}]),onClick:g[1]||(g[1]=bt=>ot("log"))},[a("div",Qm,p(y.$t("general.logs")),1)],2)),[[pl,["c:webhook:log"]]])])):_("",!0),a("div",ef,[e(G)==="configuration"?(l(),r(K,{key:0},[e(i)?(l(),c(ae,{key:1,type:"secondary",size:"small",onClick:g[2]||(g[2]=ke(bt=>P("cancel"),["stop"]))},{default:n(()=>[M(p(y.$t("general.cancel")),1)]),_:1})):(l(),c(S,{key:0,disabled:!e(j)},{title:n(()=>[M(p(e(j)),1)]),default:n(()=>[o(ae,{loading:e(de),type:"secondary",size:"small","icon-position":"right",onClick:et},{icon:n(()=>[e(q)?(l(),c(te,{key:0,icon:"circleCheckSolid",class:"!text-green-700 w-4 h-4 flex-none"})):e(j)?(l(),c(te,{key:1,icon:"alertTriangleSolid",class:"!text-red-700 w-4 h-4 flex-none"})):_("",!0)]),default:n(()=>[a("span",null,p(e(q)?"Test Successful":y.$t("activity.testWebhook")),1)]),_:1},8,["loading"])]),_:1},8,["disabled"])),o(ae,{loading:e(A),type:"primary",size:"small","data-testid":"nc-save-webhook",onClick:ke(Ee,["stop"])},{default:n(()=>[M(p(e(i)?y.$t("general.upgrade"):y.hook?y.$t("labels.multiField.saveChanges"):y.$t("activity.createWebhook")),1)]),_:1},8,["loading"])],64)):_("",!0),o(ae,{type:"text",size:"small","data-testid":"nc-close-webhook-modal",onClick:ke(Ge,["stop"])},{default:n(()=>[o(te,{icon:"close"})]),_:1})])])]),default:n(()=>[e(G)==="configuration"?(l(),r("div",tf,[e(i)?(l(),r("div",lf,[a("div",nf,[g[30]||(g[30]=a("div",{class:"flex flex-col gap-2 mb-8"},[a("div",{class:"text-base font-bold text-nc-content-gray-emphasis"},"Change in webhook response"),a("div",{class:"text-sm font-normal text-nc-content-gray-subtle2"},[M(" For more information on webhooks v3 visit "),a("a",{href:"https://nocodb.com/docs/product-docs/automation/webhook/webhook-v2-vs-v3#upgrade-to-webhook-v3",class:"nc-link",target:"_blank"}," NocoDB Docs. ")])],-1)),a("div",of,[(l(!0),r(K,null,$e(e(ue),(bt,ve)=>(l(),r("div",{key:ve,class:"nc-item"},[a("div",af,p(bt.title),1),a("div",sf,[o(Pe,{"model-value":bt.response,class:"flex-1 min-h-50 resize-y overflow-auto expanded-editor","hide-minimap":"","disable-deep-compare":"","read-only":"","monaco-config":{lineNumbers:"on",scrollbar:{verticalScrollbarSize:6,horizontalScrollbarSize:6},padding:{top:12,bottom:12},scrollBeyondLastLine:!1},"monaco-custom-theme":{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#f9f9fa"}},onKeydown:[g[3]||(g[3]=xt(ke(()=>{},["stop"]),["enter"])),g[4]||(g[4]=ke(()=>{},["alt","stop"]))]},null,8,["model-value"])])]))),128))]),g[31]||(g[31]=a("div",null,"   ",-1))])])):(l(),r(K,{key:1},[a("div",{ref_key:"containerElem",ref:I,class:"h-full flex-1 flex flex-col overflow-y-auto scroll-smooth nc-scrollbar-thin px-6 md:px-12 py-6 mx-auto"},[a("div",rf,[o(Re,Rl(Pl(e(qe).title)),{default:n(()=>[a("div",{class:"flex flex-grow px-2 py-1 title-input items-center border-b-1 rounded-t-md border-gray-200 bg-gray-100",onClick:g[8]||(g[8]=ke(bt=>{var ve;return(ve=e(F))==null?void 0:ve.focus()},["prevent"]))},[Ot(a("input",{ref_key:"titleDomRef",ref:F,"onUpdate:modelValue":g[5]||(g[5]=bt=>e(f).title=bt),class:"flex flex-grow text-lg px-2 font-medium capitalize outline-none bg-inherit nc-text-field-hook-title",placeholder:y.$t("placeholder.webhookTitle"),contenteditable:!0,onKeydown:g[6]||(g[6]=xt(bt=>{var ve;return(ve=e(F))==null?void 0:ve.blur()},["enter"]))},null,40,uf),[[bo,e(f).title]]),o(te,{icon:"rename",class:"cursor-text",onClick:g[7]||(g[7]=bt=>{var ve;return(ve=e(F))==null?void 0:ve.focus()})})])]),_:1},16),o(Nt,{class:"flex flex-col gap-8",model:e(f),name:"create-or-edit-webhook"},{default:n(()=>{var bt;return[a("div",cf,[a("div",df,p(y.$t("general.trigger")),1),a("div",{class:se(["mt-3 p-4 border-1 border-nc-border-gray-medium",{"border-b-0 rounded-t-2xl":e(De),"rounded-2xl":!e(De)}])},[a("div",pf,[o(Re,{class:"w-full !my-0"},{default:n(()=>[o(ht,{value:e(f).event,"onUpdate:value":g[9]||(g[9]=ve=>e(f).event=ve),class:"w-full webhook-event-select nc-select-shadow","data-testid":"nc-dropdown-hook-event","dropdown-class-name":"nc-modal-hook-event",onChange:Le},{default:n(()=>[(l(!0),r(K,null,$e(e(ce),ve=>(l(),c(yt,{key:ve.value},{default:n(()=>[M(p(ve.text),1)]),_:2},1024))),128))]),_:1},8,["value"])]),_:1}),e(f).event==="after"?(l(),c(at,{key:0,visible:e(Ie),"onUpdate:visible":g[10]||(g[10]=ve=>ie(Ie)?Ie.value=ve:null)},{overlay:n(()=>[o(Zt,{class:"webhook-trigger-selection",variant:"medium","data-testid":"nc-dropdown-hook-operation-modal","data-testvalue":"send_everything"},{default:n(()=>[e(f).event==="after"?(l(),r(K,{key:0},[o(Tt,{"data-testid":"nc-dropdown-hook-operation-option","data-testvalue":"sendMeEverything",onClick:ke(Te,["stop"])},{default:n(()=>[a("div",ff,p(y.$t("labels.sendAllEvents")),1),o(vt,{checked:e(pe)},null,8,["checked"])]),_:1}),o(Ht)],64)):_("",!0),(l(!0),r(K,null,$e(e(ge),ve=>(l(),c(Tt,{key:ve.value,"data-testid":"nc-dropdown-hook-operation-option","data-testvalue":ve.value,onClick:ke(el=>re(ve.value),["prevent"])},{default:n(()=>[a("div",vf,[e(f).event==="after"?(l(),r(K,{key:0},[M(p(y.$t("general.after")),1)],64)):_("",!0),M(" "+p(ve.text),1)]),o(vt,{checked:e(f).operation.includes(ve.value)},null,8,["checked"])]),_:2},1032,["data-testvalue","onClick"]))),128))]),_:1})]),default:n(()=>[a("div",{class:se(["rounded-lg border-1 w-full transition-all cursor-pointer flex items-center border-nc-border-gray-medium h-8 py-1 gap-2 px-4 py-2 h-[36px] shadow-default",{"!border-brand-500 !shadow-selected":e(Ie),"!hover:shadow-hover":!e(Ie)}]),"data-testid":"nc-dropdown-hook-operation"},[a("div",mf,p(e(gt)),1),o(te,{class:se([{"transform rotate-180":e(Ie)},"transition-all"]),style:{width:"12.5px",height:"12.5px","margin-right":"-6px"},icon:"ncChevronDown"},null,8,["class"])],2)]),_:1},8,["visible"])):_("",!0)])],2),e(De)?(l(),r("div",_f,[a("div",gf,[a("label",{class:"cursor-pointer flex items-center",onClick:g[11]||(g[11]=ke(ve=>e(f).condition=!e(f).condition,["prevent"]))},[o(Qt,{checked:!!e(f).condition,class:"nc-check-box-hook-condition"},{default:n(()=>g[32]||(g[32]=[a("span",{class:"!text-gray-700 font-semibold"}," Trigger only when conditions match ",-1)])),_:1,__:[32]},8,["checked"])]),e(f).condition?(l(),r("div",yf,[o(ae,{size:"xs",type:"secondary",class:"nc-btn-focus","data-testid":"add-filter",onClick:g[12]||(g[12]=ke(ve=>e(xe).addFilter(),["stop"]))},{default:n(()=>[a("div",hf,[(l(),c(we(("iconMap"in y?y.iconMap:e(Fe)).plus))),M(" "+p(y.$t("activity.addFilter")),1)])]),_:1}),o(ae,{class:"nc-btn-focus",type:"secondary",size:"xs","data-testid":"add-filter-group",onClick:g[13]||(g[13]=ke(ve=>e(xe).addFilterGroup(),["stop"]))},{default:n(()=>[a("div",bf,[(l(),c(we(("iconMap"in y?y.iconMap:e(Fe)).plus))),M(" "+p(y.$t("activity.addFilterGroup")),1)])]),_:1})])):_("",!0)]),a("div",{class:se(["mb-4",{"nc-filter-ref-wrapper":e(f).condition}])},[e(f).condition?(l(),c(wl,{key:0,ref_key:"filterRef",ref:xe,"hidden-add-new-filter":!0,class:"w-full !py-0","auto-save":!1,"show-loading":!1,"hook-id":e(f).id,"web-hook":!0,"action-btn-type":"secondary","onUpdate:filtersLength":g[14]||(g[14]=ve=>e(f).condition=ve>0)},null,8,["hook-id"])):_("",!0)],2),("isEeUI"in y?y.isEeUI:e(Gt))&&e(f).event==="after"&&((bt=e(f).operation)!=null&&bt.includes("update"))?(l(),r("div",wf,[o(cl,{"trigger-fields":e(f).trigger_fields,"onUpdate:triggerFields":g[15]||(g[15]=ve=>e(f).trigger_fields=ve),"trigger-field":e(f).trigger_field,"onUpdate:triggerField":g[16]||(g[16]=ve=>e(f).trigger_field=ve),columns:e(J)},null,8,["trigger-fields","trigger-field","columns"])])):_("",!0)])):_("",!0),a("div",xf,p(y.$t("general.action")),1),a("div",kf,[e(f).notification.type==="URL"?(l(),r("div",$f,[o(Re,{class:"w-1/3"},{default:n(()=>[o(Bt,{value:e(f).notification.payload.method,"onUpdate:value":g[17]||(g[17]=ve=>e(f).notification.payload.method=ve),size:"medium",class:"nc-select-hook-url-method","dropdown-class-name":"nc-dropdown-hook-notification-url-method"},{suffixIcon:n(()=>[o(te,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(),r(K,null,$e(be,(ve,el)=>o(yt,{key:el,value:ve.title},{default:n(()=>[a("div",Cf,[a("div",null,p(ve.title),1),e(f).notification.payload.method===ve.title?(l(),c(we(("iconMap"in y?y.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4 flex-none"})):_("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),o(Re,st({class:"w-2/3"},e(qe)["notification.payload.path"]),{default:n(()=>[a("div",Tf,[o(wt,{value:e(f).notification.payload.path,"onUpdate:value":g[18]||(g[18]=ve=>e(f).notification.payload.path=ve),size:"medium",placeholder:"http://example.com",class:"nc-text-field-hook-url-path nc-input-shadow h-9 !rounded-lg"},null,8,["value"]),e(We)?(l(),r("div",If,p(y.$t("msg.cyclicCallsWarning")),1)):_("",!0)])]),_:1},16)])):_("",!0)]),e(f).notification.type==="URL"?(l(),r("div",Sf,[o(me,{"active-key":e(Ae),"onUpdate:activeKey":g[22]||(g[22]=ve=>ie(Ae)?Ae.value=ve:null)},{default:n(()=>[o(Vt,{key:"params",tab:y.$t("title.parameter"),"force-render":""},{default:n(()=>[o(ol,{modelValue:e(f).notification.payload.parameters,"onUpdate:modelValue":g[19]||(g[19]=ve=>e(f).notification.payload.parameters=ve)},null,8,["modelValue"])]),_:1},8,["tab"]),o(Vt,{key:"headers",tab:y.$t("title.headers"),class:"nc-tab-headers"},{default:n(()=>[o(xl,{modelValue:e(f).notification.payload.headers,"onUpdate:modelValue":g[20]||(g[20]=ve=>e(f).notification.payload.headers=ve)},null,8,["modelValue"])]),_:1},8,["tab"]),e(ye)?(l(),c(Vt,{key:"body",tab:"Body"},{default:n(()=>[a("div",Af,[o(Pe,{modelValue:e(f).notification.payload.body,"onUpdate:modelValue":g[21]||(g[21]=ve=>e(f).notification.payload.body=ve),lang:"handlebars","disable-deep-compare":"",validate:!1,class:"min-h-60 max-h-80 !rounded-lg","monaco-config":{minimap:{enabled:!1},padding:{top:8,bottom:8},fontSize:14.5,overviewRulerBorder:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,lineDecorationsWidth:8,lineNumbersMinChars:0,roundedSelection:!1,selectOnLineNumbers:!1,scrollBeyondLastLine:!1,contextmenu:!1,glyphMargin:!1,folding:!1,bracketPairColorization:{enabled:!1},wordWrap:"on",scrollbar:{horizontal:"hidden",verticalScrollbarSize:6},wrappingStrategy:"advanced",renderLineHighlight:"none",tabSize:4,stickyScroll:{enabled:d.stickyScroll}}},null,8,["modelValue","monaco-config"])])]),_:1})):_("",!0)]),_:1},8,["active-key"])])):_("",!0)]),["Slack","Microsoft Teams","Discord","Mattermost"].includes(e(f).notification.type)?(l(),r("div",Of,[e(f).notification.type==="Slack"?(l(),r("div",Lf,[o(Re,Rl(Pl(e(qe)["notification.payload.channels"])),{default:n(()=>[o(It,{modelValue:e(f).notification.payload.channels,"onUpdate:modelValue":g[23]||(g[23]=ve=>e(f).notification.payload.channels=ve),"selected-channel-list":e(f).notification.payload.channels,"available-channel-list":e(Q),placeholder:y.$t("placeholder.selectSlackChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):_("",!0),e(f).notification.type==="Microsoft Teams"?(l(),r("div",Ef,[o(Re,Rl(Pl(e(qe)["notification.payload.channels"])),{default:n(()=>[o(It,{modelValue:e(f).notification.payload.channels,"onUpdate:modelValue":g[24]||(g[24]=ve=>e(f).notification.payload.channels=ve),"selected-channel-list":e(f).notification.payload.channels,"available-channel-list":e(Z),placeholder:y.$t("placeholder.selectTeamsChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):_("",!0),e(f).notification.type==="Discord"?(l(),r("div",Mf,[o(Re,Rl(Pl(e(qe)["notification.payload.channels"])),{default:n(()=>[o(It,{modelValue:e(f).notification.payload.channels,"onUpdate:modelValue":g[25]||(g[25]=ve=>e(f).notification.payload.channels=ve),"selected-channel-list":e(f).notification.payload.channels,"available-channel-list":e(z),placeholder:y.$t("placeholder.selectDiscordChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):_("",!0),e(f).notification.type==="Mattermost"?(l(),r("div",Df,[o(Re,Rl(Pl(e(qe)["notification.payload.channels"])),{default:n(()=>[o(It,{modelValue:e(f).notification.payload.channels,"onUpdate:modelValue":g[26]||(g[26]=ve=>e(f).notification.payload.channels=ve),"selected-channel-list":e(f).notification.payload.channels,"available-channel-list":e(le),placeholder:y.$t("placeholder.selectMattermostChannels")},null,8,["modelValue","selected-channel-list","available-channel-list","placeholder"])]),_:1},16)])):_("",!0)])):_("",!0),("isEeUI"in y?y.isEeUI:e(Gt))?(l(),r("div",Uf,[a("div",null,[a("div",{class:"w-full cursor-pointer flex items-center",onClick:ke(ft,["prevent"])},[o(Qt,{checked:!!e(f).notification.include_user,class:"nc-check-box-include-user"},{default:n(()=>[a("span",Rf,p(y.$t("labels.includeUser")),1)]),_:1},8,["checked"]),o(S,{class:"flex"},{title:n(()=>[M(p(y.$t("tooltip.includeUserHint")),1)]),default:n(()=>[o(te,{icon:"info",class:"text-gray-400 ml-1"})]),_:1})])])])):_("",!0),e(Oe)[e(f).notification.type]&&e(f).notification.payload?(l(),c(Re,{key:2},{default:n(()=>[a("div",Pf,[(l(!0),r(K,null,$e(e(Oe)[e(f).notification.type],(ve,el)=>(l(),r("div",{key:el},[ve.type==="LongText"?(l(),c(Re,st({key:0,ref_for:!0},e(qe)[`notification.payload.${ve.key}`]),{default:n(()=>[o(al,{value:e(f).notification.payload[ve.key],"onUpdate:value":Ml=>e(f).notification.payload[ve.key]=Ml,class:"!rounded-lg !min-h-[120px] nc-scrollbar-thin nc-input-shadow",placeholder:ve.label},null,8,["value","onUpdate:value","placeholder"])]),_:2},1040)):(l(),c(Re,st({key:1,ref_for:!0},e(qe)[`notification.payload.${ve.key}`]),{default:n(()=>[o(wt,{value:e(f).notification.payload[ve.key],"onUpdate:value":Ml=>e(f).notification.payload[ve.key]=Ml,class:"!rounded-lg nc-input-shadow !h-9",placeholder:ve.label},null,8,["value","onUpdate:value","placeholder"])]),_:2},1040))]))),128))])]),_:1})):_("",!0),a("div",null,[o(Ht),a("div",Ff,[o(ae,{type:"text",class:"mb-3",size:"small",onClick:g[27]||(g[27]=ve=>dt())},{default:n(()=>[a("div",Bf,[g[33]||(g[33]=M(" Sample Payload ")),o(te,{class:se(["transition-transform",{"transform rotate-180":e(he)}]),icon:"arrowDown"},null,8,["class"])])]),_:1})]),Ot(a("div",null,[o(Pe,{modelValue:e(fe),"onUpdate:modelValue":g[28]||(g[28]=ve=>ie(fe)?fe.value=ve:null),"read-only":"","monaco-config":{minimap:{enabled:!1},fontSize:14.5,overviewRulerBorder:!1,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,lineDecorationsWidth:12,lineNumbersMinChars:0,scrollBeyondLastLine:!1,renderLineHighlight:"none",lineNumbers:"off",glyphMargin:!1,folding:!1,bracketPairColorization:{enabled:!1},wordWrap:"on",scrollbar:{horizontal:"hidden",verticalScrollbarSize:6},wrappingStrategy:"advanced",tabSize:4,readOnly:!0},"monaco-custom-theme":{base:"vs",inherit:!0,rules:[{token:"key",foreground:"#B33771",fontStyle:"bold"},{token:"string",foreground:"#2B99CC",fontStyle:"semibold"},{token:"number",foreground:"#1FAB51",fontStyle:"semibold"},{token:"boolean",foreground:"#1FAB51",fontStyle:"semibold"},{token:"delimiter",foreground:"#15171A",fontStyle:"semibold"}],colors:{}},class:se(["transition-all border-1 rounded-lg",{"w-0 min-w-0":!e(he),"min-h-60 max-h-80":e(he)}]),style:{"box-shadow":"0px 0px 4px 0px rgba(0, 0, 0, 0.08), 0px 0px 4px 0px rgba(0, 0, 0, 0.08)"}},null,8,["modelValue","class"])],512),[[fs,e(he)]])])]}),_:1},8,["model"])])],512),a("div",Vf,[a("div",Nf,[a("h2",zf,p(y.$t("labels.supportDocs")),1),a("div",null,[(l(),r(K,null,$e(Me,(bt,ve)=>a("div",{key:ve,class:"flex items-center gap-1"},[a("div",jf,[o(te,{icon:"bookOpen",class:"flex-none w-4 h-4 text-gray-500"})]),o(dl,{href:bt.href,target:"_blank",rel:"noopener noreferrer",class:"!text-gray-500 text-sm !no-underline !hover:underline"},{default:n(()=>[M(p(bt.title),1)]),_:2},1032,["href"])])),64))])])])],64))])):e(G)==="log"?(l(),r("div",Wf,[o(un,{hook:y.hook},null,8,["hook"])])):_("",!0)]),_:1},8,["visible"])}}}),Gf=Object.assign(Qe(qf,[["__scopeId","data-v-0bee3c92"]]),{__name:"Webhook"}),Hf={class:"mb-2 text-gray-800 text-[13px] flex justify-between"},Kf={class:"flex rounded-lg"},Yf={class:"w-full flex justify-between items-center gap-2 px-2 py-2 rounded-md hover:bg-gray-100"},Jf={class:"flex w-full items-center gap-2"},Xf=Ue({__name:"Webhook",props:{modelValue:{},selectedWebhook:{}},emits:["update:modelValue","update:selectedWebhook"],setup(s,{emit:k}){const d=s,P=k,t=je(d,"selectedWebhook",P),i=je(d,"modelValue",P),{t:h}=Mt(),{isUIAllowed:u}=Wl(),w=B(!1),x=Fn(),{hooks:O}=St(x),A=Y(()=>O.value.filter(b=>{var H;return b.version==="v3"?(H=b.operation)==null?void 0:H.includes("trigger"):b.event==="manual"&&b.active})),D=B([{text:[`${h("general.manual")} ${h("general.trigger")}`,`${h("general.manual")} ${h("general.trigger")}`],value:["manual","trigger"]}]),{isWebhookCreateModalOpen:L}=_t(),m=B(!1),v=b=>{t.value=b.id?b:void 0,i.value.fk_webhook_id=b.id,m.value=!1,setTimeout(()=>{L.value=!1},500)},C=()=>{t.value=void 0,m.value=!0,L.value=!0},U=()=>{t.value&&(L.value=!0,m.value=!0)},$=b=>{i.value.fk_webhook_id=b.id,t.value=b,w.value=!1,m.value=!1};return nt(m,b=>{b||setTimeout(()=>{L.value=!1},500)}),(b,H)=>{const ne=go,q=Ye,j=Yd,N=ut,J=nl,oe=Pt,ce=it,f=Gf;return l(),r(K,null,[o(ce,null,{default:n(()=>[a("div",Hf,[M(p(b.$t("labels.webhook"))+" ",1),H[2]||(H[2]=a("a",{class:"font-medium",href:"https://nocodb.com/docs/product-docs/fields/field-types/custom-types/button#create-a-button-field",target:"_blank"}," Docs ",-1))]),a("div",Kf,[o(J,{visible:e(w),"onUpdate:visible":H[0]||(H[0]=ge=>ie(w)?w.value=ge:null),trigger:["click"]},{overlay:n(()=>{var ge;return[e(w)?(l(),c(j,{key:0,"is-parent-open":e(w),"search-input-placeholder":b.$t("placeholder.searchFields"),"option-config":{selectOptionEvent:["c:actions:webhook"],optionClassName:""},options:e(A),"selected-option-id":(ge=e(t))==null?void 0:ge.id,"disable-mascot":"",class:"max-h-72 max-w-85","filter-field":"title","show-selected-option":"",onSelected:$},_l({_:2},[e(u)("hookCreate")?{name:"bottom",fn:n(()=>[o(ne,{style:{margin:"4px 0"}}),a("div",{class:"flex items-center text-brand-500 text-sm cursor-pointer",onClick:C},[a("div",Yf,[M(p(b.$t("general.create"))+" "+p(b.$t("objects.webhook").toLowerCase())+" ",1),o(q,{icon:"plus",class:"flex-none"})])])]),key:"0"}:void 0]),1032,["is-parent-open","search-input-placeholder","options","selected-option-id"])):_("",!0)]}),default:n(()=>{var ge,ye;return[a("div",{class:se([{"nc-button-style-dropdown shadow-dropdown-open remove-right-shadow":e(w)},"nc-button-webhook-select border-r-0 flex items-center justify-center border-1 h-8 px-[8px] border-gray-300 !w-full transition-all cursor-pointer !rounded-l-lg"])},[a("div",Jf,[(l(),r("div",{key:(ge=e(t))==null?void 0:ge.id,class:"flex items-center overflow-x-clip truncate text-ellipsis w-full gap-1 text-gray-800"},[o(N,{class:se([{"text-gray-500":!((ye=e(t))!=null&&ye.title)},"truncate max-w-full"]),"show-on-truncate-only":""},{title:n(()=>{var Ae,_e;return[M(p((Ae=e(t))!=null&&Ae.title?(_e=e(t))==null?void 0:_e.title:b.$t("labels.selectAWebhook")),1)]}),default:n(()=>{var Ae,_e;return[M(" "+p((Ae=e(t))!=null&&Ae.title?(_e=e(t))==null?void 0:_e.title:b.$t("labels.selectAWebhook")),1)]}),_:1},8,["class"])])),o(q,{icon:"arrowDown",class:se([{"transform rotate-180":e(w)},"text-gray-500 transition-all transition-transform"])},null,8,["class"])])],2)]}),_:1},8,["visible"]),o(oe,{size:"small",type:"secondary",class:se(["!rounded-l-none border-l-[#d9d9d9] !hover:bg-white nc-button-style-dropdown",{"nc-button-style-dropdown shadow-dropdown-open remove-left-shadow":e(w)}]),onClick:U},{default:n(()=>[o(q,{class:se({"text-gray-400":!e(t),"text-gray-700":e(t)}),icon:"ncEdit"},null,8,["class"])]),_:1},8,["class"])])]),_:1}),e(m)?(l(),c(f,{key:0,value:e(m),"onUpdate:value":H[1]||(H[1]=ge=>ie(m)?m.value=ge:null),hook:e(t),"event-list":e(D),onClose:v},null,8,["value","hook","event-list"])):_("",!0)],64)}}}),Zf=Object.assign(Qe(Xf,[["__scopeId","data-v-2fef53a8"]]),{__name:"SmartsheetColumnButtonOptionsWebhook"}),Qf={};function ev(s,k){return l(),r("div")}const tv=Object.assign(Qe(Qf,[["render",ev]]),{__name:"SmartsheetColumnButtonOptionsScript"}),lv={class:"relative flex flex-col gap-4"},nv={class:"bg-white space-y-2 p-2 rounded-lg"},ov=["onClick"],av={class:"flex w-full items-center leading-5 justify-between gap-1"},sv={key:1,class:"text-sm flex items-center leading-5 text-gray-500"},iv={class:"bg-white w-80 space-y-3 h-70 overflow-y-auto rounded-lg"},rv={class:"!sticky top-0 flex gap-2 bg-white px-2 py-2"},uv={class:"text-[13px]"},cv={class:"grid px-3 auto-rows-max pb-2 nc-scrollbar-md gap-3 grid-cols-10"},dv={class:"flex gap-2 w-full capitalize text-gray-800 truncate items-center"},pv={class:"flex-1"},mv={key:0},fv=Ue({__name:"index",props:{value:{},fromTableExplorer:{type:Boolean}},emits:["update:value"],async setup(s,{emit:k}){var Oe,be,We,ct,Ke,qe,mt,Je,Ce,ee,R,De,Ee,Ge;let d,P;const t=s,i=k,h={...pt},u=je(t,"value",i),w=At(Et,B()),{t:x}=Mt(),{getMeta:O}=ul(),{isAiBetaFeaturesEnabled:A}=Ll(),{isEdit:D,setAdditionalValidations:L,validateInfos:m,sqlUi:v,column:C,isAiMode:U}=_t(),$=[W.QrCode,W.Barcode,W.Button],b=Fn(),{loadHooksList:H}=b,{hooks:ne}=St(b),q=pi(),{loadAutomations:j}=q,N=po(),{openedProject:J}=Ut(N);[d,P]=gs(()=>Promise.all([H(),j({baseId:J.value.id,force:!0})])),await d,P();const{activeBaseAutomations:oe}=St(q),ce=B(),f=B(),ge={isError:!1,message:"",position:{column:-1,row:-1}},ye=B(ge),Ae=Y(()=>D.value?!0:A.value);Y(()=>D.value?!0:A.value);const _e=Y(()=>[{label:x("labels.openUrl"),value:pt.Url},{label:x("labels.runWebHook"),value:pt.Webhook},...Ae.value?[{label:x("labels.generateFieldDataUsingAi"),value:pt.Ai,tooltip:x("tooltip.generateFieldDataUsingAiButtonOption")}]:[]]),Q=Y(()=>{var de,fe;return((fe=(de=w==null?void 0:w.value)==null?void 0:de.columns)==null?void 0:fe.filter(I=>!($.includes(I.uidt)||hn(I,w.value))))||[]}),Z={formula_raw:[{required:[pt.Url,pt.Ai].includes(u.value.type),validator:(de,fe)=>(async()=>{var I,G;if(u.value.type===pt.Url){if(!(fe!=null&&fe.trim()))throw new Error("Formula is required for URL Button");try{await _n({column:C.value,formula:fe,columns:Q.value,clientOrSqlUi:v.value,getMeta:O,trackPosition:!0}),ye.value={...ge}}catch(he){const Se=he instanceof en&&((I=he.extra)!=null&&I.key)?x(he.extra.key,he.extra):he.message;throw he instanceof en&&((G=he.extra)!=null&&G.position)?ye.value={isError:!0,message:Se,position:he.extra.position}:ye.value={...ge},new Error(he.message)}}else if(u.value.type===pt.Ai&&!(fe!=null&&fe.trim()))throw new Error("Prompt required for AI Button")})()}],fk_webhook_id:[{required:u.value.type===pt.Webhook,validator:(de,fe)=>new Promise((I,G)=>{u.value.type===pt.Webhook&&!fe&&G(new Error(x("general.required"))),I()})}],fk_script_id:[{required:u.value.type===pt.Script,validator:(de,fe)=>new Promise((I,G)=>{u.value.type===pt.Script&&!fe&&G(new Error(x("general.required"))),I()})}],color:[{validator:(de,fe)=>new Promise((I,G)=>{["brand","red","green","maroon","blue","orange","pink","purple","yellow","gray"].includes(fe)||G(new Error(x("msg.invalidColor"))),I()})}],theme:[{validator:(de,fe)=>new Promise((I,G)=>{["solid","light","text"].includes(fe)||G(new Error(x("msg.invalidTheme"))),I()})}],type:[{validator:(de,fe)=>new Promise((I,G)=>{Object.values(pt).includes(fe)||G(new Error(x("msg.invalidType"))),I()})}],label:[{validator:(de,fe)=>new Promise((I,G)=>{!(fe.length>0)&&!u.value.icon&&G(new Error(x("msg.invalidLabel"))),I()})}],output_column_ids:[{validator:(de,fe)=>new Promise((I,G)=>{u.value.type===pt.Ai&&!fe&&G(new Error("At least one output field is required for AI Button")),I()})}],fk_integration_id:[{validator:(de,fe)=>new Promise((I,G)=>{u.value.type===pt.Ai&&!fe&&G(new Error(x("title.aiIntegrationMissing"))),I()})}]};if(D.value){const de=u.value.colOptions;u.value.type=de==null?void 0:de.type,u.value.theme=de==null?void 0:de.theme,u.value.label=de==null?void 0:de.label,u.value.color=de==null?void 0:de.color,u.value.fk_webhook_id=de==null?void 0:de.fk_webhook_id,u.value.fk_script_id=de==null?void 0:de.fk_script_id,u.value.icon=de==null?void 0:de.icon,ce.value=ne.value.find(fe=>{var I;return fe.id===((I=u.value)==null?void 0:I.fk_webhook_id)}),f.value=oe.value.find(fe=>{var I;return fe.id===((I=u.value)==null?void 0:I.fk_script_id)}),u.value.type===pt.Ai&&(u.value.formula_raw=(de==null?void 0:de.formula_raw)||"",u.value.output_column_ids=(de==null?void 0:de.output_column_ids)||"",u.value.fk_integration_id=de==null?void 0:de.fk_integration_id)}else u.value.type=((Oe=u.value)==null?void 0:Oe.type)||((be=_e.value[0])==null?void 0:be.value),u.value.type===pt.Ai?(u.value.theme="light",u.value.label="Generate data",u.value.color="purple",u.value.icon="ncAutoAwesome",u.value.output_column_ids=((We=u.value)==null?void 0:We.output_column_ids)||""):(u.value.theme="solid",u.value.label="Button",u.value.color="brand"),u.value.formula_raw=((ct=u.value)==null?void 0:ct.formula_raw)||"";L({...Z}),(((Ke=u.value)==null?void 0:Ke.type)===pt.Url||((mt=(qe=C.value)==null?void 0:qe.colOptions)==null?void 0:mt.type)===pt.Url)&&((Ce=(Je=C.value)==null?void 0:Je.colOptions)!=null&&Ce.formula_raw?u.value.formula_raw=oo((R=(ee=C.value)==null?void 0:ee.colOptions)==null?void 0:R.formula,(De=w==null?void 0:w.value)==null?void 0:De.columns,(Ge=(Ee=C.value)==null?void 0:Ee.colOptions)==null?void 0:Ge.formula_raw)||"":u.value.formula_raw="");const z={solid:{brand:"bg-brand-500 text-white",red:"bg-red-600 text-white",green:"bg-green-600 text-white",maroon:"bg-maroon-600 text-white",blue:"bg-blue-600 text-white",orange:"bg-orange-600 text-white",pink:"bg-pink-600 text-white",purple:"bg-purple-500 text-white",yellow:"bg-yellow-600 text-white",gray:"bg-gray-600 text-white"},light:{brand:"bg-brand-200 text-gray-800",red:"bg-red-200 text-gray-800",green:"bg-green-200 text-gray-800",maroon:"bg-maroon-200 text-gray-800",blue:"bg-blue-200 text-gray-800",orange:"bg-orange-200 text-gray-800",pink:"bg-pink-200 text-gray-800",purple:"bg-purple-200 text-gray-800",yellow:"bg-yellow-200 text-gray-800",gray:"bg-gray-200"},text:{brand:"text-brand-500",red:"text-red-600",green:"text-green-600",maroon:"text-maroon-600",blue:"text-blue-600",orange:"text-orange-600",pink:"text-pink-600",purple:"text-purple-500",yellow:"text-yellow-600",gray:"text-gray-600"}},le=B(!1),pe=(de,fe)=>{u.value.theme=de,u.value.color=fe,le.value=!1},xe=B(!1),Ie=B(""),F=Y(()=>ys(Ie.value)),re=()=>{u.value.icon=null,xe.value=!1},Te=de=>{u.value.icon=de,xe.value=!1},Le=()=>{u.value.formula_raw=""};return(de,fe)=>{var ue,y,g,te;const I=ql,G=it,he=Hl,Se=Ye,dt=nl,et=Pt,Me=Gl,Xe=ut,He=Ct,ot=Lt,ft=Lo,gt=Zf,V=tv;return l(),r("div",lv,[o(Me,{gutter:8},{default:n(()=>[o(he,{span:12},{default:n(()=>[o(G,st(e(m).label,{class:"mt-4",label:de.$t("general.label")}),{default:n(()=>[o(I,{value:e(u).label,"onUpdate:value":fe[0]||(fe[0]=ae=>e(u).label=ae),class:se(["nc-column-label-input nc-input-shadow !rounded-lg",{"nc-ai-input":e(U)}]),placeholder:"Button"},null,8,["value","class"])]),_:1},16,["label"])]),_:1}),o(he,{span:6},{default:n(()=>[o(G,st({label:de.$t("general.style")},e(m).theme),{default:n(()=>[o(dt,{visible:e(le),"onUpdate:visible":fe[1]||(fe[1]=ae=>ie(le)?le.value=ae:null),class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",nv,[(l(!0),r(K,null,$e(Object.entries(z),([ae,S])=>(l(),r("div",{key:ae,class:"flex gap-2"},[(l(!0),r(K,null,$e(Object.entries(S),([Pe,Re])=>(l(),r("div",{key:Pe},[a("button",{class:se([{[Re]:!0,"!border-transparent":ae!=="text"},"border-1 border-gray-200 flex items-center justify-center rounded h-6 w-6"]),onClick:yt=>pe(ae,Pe)},[(l(),c(we(("iconMap"in de?de.iconMap:e(Fe)).cellText),{class:"w-3.5 h-3.5"}))],10,ov)]))),128))]))),128))])]),default:n(()=>[a("div",{class:se([{"nc-button-style-dropdown":e(le),"!border-nc-border-purple !shadow-selected-ai":e(le)&&e(U),"!border-brand-500 !shadow-selected":e(le)&&!e(U)},"flex items-center justify-between border-1 h-8 px-[11px] border-gray-300 !w-full transition-all cursor-pointer !rounded-lg"])},[a("div",{class:se([`${e(u).color??"brand"} ${e(u).theme??"solid"}`,"flex items-center justify-center nc-cell-button rounded-md h-6 w-6 gap-2"])},[(l(),c(we(("iconMap"in de?de.iconMap:e(Fe)).cellText),{class:"w-4 h-4"}))],2),o(Se,{icon:"arrowDown",class:"text-gray-500 !w-4 !h-4"})],2)]),_:1},8,["visible"])]),_:1},16,["label"])]),_:1}),o(he,{span:6},{default:n(()=>[o(G,st({label:de.$t("labels.icon")},e(m).icon),{default:n(()=>[o(dt,{visible:e(xe),"onUpdate:visible":fe[3]||(fe[3]=ae=>ie(xe)?xe.value=ae:null),class:"nc-color-picker-dropdown-trigger"},{overlay:n(()=>[a("div",iv,[a("div",rv,[o(I,{ref:"inputRef",value:e(Ie),"onUpdate:value":fe[2]||(fe[2]=ae=>ie(Ie)?Ie.value=ae:null),placeholder:de.$t("placeholder.searchIcons"),class:se(["nc-dropdown-search-unified-input z-10 nc-input-shadow",{"nc-ai-input":e(U)}])},{prefix:n(()=>[o(Se,{icon:"search",class:"nc-search-icon h-3.5 w-3.5 mr-1"})]),_:1},8,["value","placeholder","class"]),o(et,{size:"small",class:"!px-4",type:"text",onClick:re},{default:n(()=>[a("span",uv,p(de.$t("general.remove")),1)]),_:1})]),a("div",cv,[(l(!0),r(K,null,$e(e(F),({icon:ae,name:S},Pe)=>(l(),c(we(ae),{key:Pe,icon:ae,class:"w-6 hover:bg-gray-100 cursor-pointer rounded p-1 text-gray-700 h-6",onClick:Re=>Te(S)},null,8,["icon","onClick"]))),128))])])]),default:n(()=>[a("div",{class:se([{"nc-button-style-dropdown ":e(xe),"!border-nc-border-purple !shadow-selected-ai":e(xe)&&e(U),"!border-brand-500 !shadow-selected":e(xe)&&!e(U)},"flex items-center justify-center border-1 h-8 px-[11px] border-gray-300 !w-full transition-all cursor-pointer !rounded-lg"])},[a("div",av,[e(u).icon?(l(),c(Se,{key:0,icon:e(u).icon,class:"w-4 h-4 text-gray-700"},null,8,["icon"])):(l(),r("div",sv,p(de.$t("labels.selectIcon")),1)),o(Se,{icon:"arrowDown",class:"text-gray-500 !w-4 !h-4"})])],2)]),_:1},8,["visible"])]),_:1},16,["label"])]),_:1})]),_:1}),o(Me,{gutter:8},{default:n(()=>[o(he,{span:24},{default:n(()=>[o(G,st({label:de.$t("labels.onClick")},e(m).type),{default:n(()=>[o(ot,{value:e(u).type,"onUpdate:value":fe[4]||(fe[4]=ae=>e(u).type=ae),class:se(["w-52 nc-button-type-select nc-select-shadow",{"nc-ai-input":e(U)}]),"dropdown-class-name":"nc-dropdown-button-cell-type",onChange:Le},{suffixIcon:n(()=>[o(Se,{icon:"arrowDown",class:"text-gray-500"})]),default:n(()=>[(l(!0),r(K,null,$e(e(_e),(ae,S)=>(l(),c(He,{key:S,value:ae.value},{default:n(()=>[o(Xe,{disabled:!ae.tooltip,placement:"right",class:"w-full",title:ae.tooltip},{default:n(()=>[a("div",dv,[a("div",pv,p(ae.label),1),e(u).type===ae.value?(l(),c(we(("iconMap"in de?de.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):_("",!0)])]),_:2},1032,["disabled","title"])]),_:2},1032,["value"]))),128))]),_:1},8,["value","class"])]),_:1},16,["label"])]),_:1})]),_:1}),((ue=e(u))==null?void 0:ue.type)===h.Url?(l(),r("div",mv,[o(ft,{value:e(u).formula_raw,"onUpdate:value":fe[5]||(fe[5]=ae=>e(u).formula_raw=ae),"suggestion-height":"medium","editor-height":"50px","disabled-formulas":["URL()","URLENCODE()"],"disable-suggestion-headers":"","editor-error":e(ye),label:de.$t("labels.urlFormula"),error:((y=e(m).formula_raw)==null?void 0:y.validateStatus)==="error"},null,8,["value","editor-error","label","error"])])):_("",!0),((g=e(u))==null?void 0:g.type)===h.Webhook?(l(),c(gt,{key:1,"model-value":e(u),"onUpdate:modelValue":fe[6]||(fe[6]=ae=>ie(u)?u.value=ae:null),"selected-webhook":e(ce),"onUpdate:selectedWebhook":fe[7]||(fe[7]=ae=>ie(ce)?ce.value=ae:null)},null,8,["model-value","selected-webhook"])):_("",!0),((te=e(u))==null?void 0:te.type)===h.Script?(l(),c(V,{key:2,"model-value":e(u),"onUpdate:modelValue":fe[8]||(fe[8]=ae=>ie(u)?u.value=ae:null),"selected-script":e(f),"onUpdate:selectedScript":fe[9]||(fe[9]=ae=>ie(f)?f.value=ae:null)},null,8,["model-value","selected-script"])):_("",!0)])}}}),vv=Object.assign(Qe(fv,[["__scopeId","data-v-d57aaaec"]]),{__name:"SmartsheetColumnButtonOptions"}),_v=Ne(()=>Ve(()=>import("./DRA9KN5F.js").then(s=>s.oR),__vite__mapDeps([1,2]),import.meta.url).then(s=>s.default||s)),gv=Ne(()=>Ve(()=>import("./DzI8hkox.js"),__vite__mapDeps([109,1,2,12,110]),import.meta.url).then(s=>s.default||s)),yv=Ne(()=>Ve(()=>import("./CfTpfQ4B.js"),__vite__mapDeps([111,1,2,20,112]),import.meta.url).then(s=>s.default||s)),hv=Ne(()=>Ve(()=>import("./CDTi0oRk.js"),__vite__mapDeps([113,1,2,20,114]),import.meta.url).then(s=>s.default||s)),bv=Ne(()=>Ve(()=>import("./BALLsGq5.js").then(s=>s.V),__vite__mapDeps([60,1,2,61,62,63,64,5,6,65,66,67,68,69,23,70,71,12,11,17,72,20,13,14,10,48,53,31,52,30,54,73]),import.meta.url).then(s=>s.default||s)),wv=Ne(()=>Ve(()=>import("./B1qoNiTF.js").then(s=>s.C),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then(s=>s.default||s)),xv={class:"nc-list-item-wrapper group px-[1px] hover:bg-gray-50 border-y-1 border-gray-200 border-t-transparent w-full"},kv={class:"flex items-center gap-3"},$v={key:0},Cv={key:1,class:"h-11 w-11 !min-h-11 !min-w-11 !max-h-11 !max-w-11 !flex flex-row items-center !rounded-l-xl justify-center"},Tv={class:"flex-1 flex flex-col gap-1 justify-center overflow-hidden"},Iv={key:1,class:"flex ml-[-0.25rem] sm:flex-row xs:flex-col xs:mt-2 gap-4 min-h-5"},Sv={key:0,class:"flex flex-col gap-[-1]"},Av={class:"nc-link-record-cell flex w-full max-w-full"},Ov={key:1,class:"flex flex-row w-full max-w-72 h-5 pl-1 items-center justify-start"},Lv={class:"min-w-5 flex-none"},Ev=Ue({__name:"RecordItem",props:{row:{},columns:{},attachmentColumn:{},displayValueColumn:{},isLoading:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},displayValueClassName:{default:""}},setup(s){const k=s;qt(hs,B(!0)),qt(bs,B(1)),qt(Ln,B(!1)),qt(ws,B(!0)),qt(xs,B(!0));const{row:d,columns:P,isSelected:t,isLoading:i}=St(k);fi(d);const h=At(ks,B(!1)),{isMobileMode:u}=Ol(),{getPossibleAttachmentSrc:w}=$s(),x=Y(()=>{var m;return k.displayValueColumn||(P.value||[]).find(v=>(v==null?void 0:v.pv)??null)||((m=P.value||[])==null?void 0:m[0])}),O=Y(()=>{var m,v;return(m=x.value)!=null&&m.title?d.value.row[(v=x.value)==null?void 0:v.title]:null}),A=Y(()=>k.attachmentColumn||(P.value||[]).find(m=>Vl(m))),D=Y(()=>{var m;try{return(m=A.value)!=null&&m.title&&d.value.row[A.value.title]?typeof d.value.row[A.value.title]=="string"?JSON.parse(d.value.row[A.value.title]):d.value.row[A.value.title]:[]}catch{return[]}}),L=Y(()=>P.value.filter(m=>{var C;return!(m.id===((C=x.value)==null?void 0:C.id))&&!Kl(m)&&!Cs(m)&&!gl(m)&&!Ts(m)&&!Vl(m)}).sort((m,v)=>{var C,U;return(((C=m.meta)==null?void 0:C.defaultViewColOrder)??1/0)-(((U=v.meta)==null?void 0:U.defaultViewColOrder)??1/0)}).slice(0,u.value?1:3));return(m,v)=>{const C=_v,U=vi,$=Ye,b=gv,H=ut,ne=yv,q=hv,j=bv,N=wv,J=Is;return l(),r("div",xv,[o(J,{tabindex:"0",class:se(["nc-list-item !outline-none transition-all relative group-hover:bg-gray-50 cursor-auto",{"!bg-white":e(i),"!hover:bg-white":e(h)}]),"body-style":{padding:"6px 10px !important",borderRadius:0},hoverable:!1},{default:n(()=>[a("div",kv,[e(A)?(l(),r(K,{key:0},[e(D)&&e(D).length?(l(),r("div",$v,[o(U,{autoplay:"",class:"!w-11 !h-11 !max-h-11 !max-w-11"},{customPaging:n(()=>v[2]||(v[2]=[])),default:n(()=>[(l(!0),r(K,null,$e(e(D),(oe,ce)=>(l(),r(K,null,[("isImage"in m?m.isImage:e(mi))(oe.title,oe.mimetype??oe.type)?(l(),c(C,{key:`carousel-${oe.title}-${ce}`,class:"!w-11 !h-11 !max-h-11 !max-w-11 object-cover !rounded-l-xl",srcs:e(w)(oe,"tiny")},null,8,["srcs"])):_("",!0)],64))),256))]),_:1})])):(l(),r("div",Cv,[o($,{class:"w-full h-full !text-6xl !leading-10 !text-transparent rounded-lg",icon:"fileImage"})]))],64)):_("",!0),a("div",Tv,[e(x)&&e(O)?(l(),r("div",{key:0,class:se(["flex justify-start font-semibold text-brand-500 nc-display-value",m.displayValueClassName])},[o(H,{class:"truncate leading-[20px]","show-on-truncate-only":""},{title:n(()=>[o(b,{modelValue:e(O),"onUpdate:modelValue":v[0]||(v[0]=oe=>ie(O)?O.value=oe:null),column:e(x),class:"field-config-plain-cell-value"},null,8,["modelValue","column"])]),default:n(()=>[o(b,{modelValue:e(O),"onUpdate:modelValue":v[1]||(v[1]=oe=>ie(O)?O.value=oe:null),column:e(x),class:"field-config-plain-cell-value"},null,8,["modelValue","column"])]),_:1})],2)):_("",!0),e(L).length>0?(l(),r("div",Iv,[(l(!0),r(K,null,$e(e(L),oe=>(l(),r("div",{key:oe.id,class:"sm:w-1/3 sm:max-w-1/3 sm:overflow-hidden"},[("isRowEmpty"in m?m.isRowEmpty:e(ui))(e(d),oe)?(l(),r("div",Ov,"-")):(l(),r("div",Sv,[o(H,{class:"z-10 flex",placement:"bottomLeft","arrow-point-at-center":!1},{title:n(()=>[e(kt)(oe)?(l(),c(ne,{key:0,class:"text-gray-100 !text-sm nc-link-record-cell-tooltip",column:oe,"hide-menu":""},null,8,["column"])):(l(),c(q,{key:1,class:"text-gray-100 !text-sm nc-link-record-cell-tooltip",column:oe,"hide-menu":""},null,8,["column"]))]),default:n(()=>[a("div",Av,[e(kt)(oe)?(l(),c(j,{key:0,"model-value":e(d).row[oe.title],row:e(d),column:oe,class:"!h-auto"},null,8,["model-value","row","column"])):(l(),c(N,{key:1,"model-value":e(d).row[oe.title],column:oe,"edit-enabled":!1,"read-only":"",class:"!h-auto"},null,8,["model-value","column"]))])]),_:2},1024)]))]))),128))])):_("",!0)]),Al(m.$slots,"extraRight",{},()=>[a("div",Lv,[o(wo,null,{default:n(()=>[e(t)?(l(),c($,{key:0,icon:"circleCheckSolid",class:"flex-none text-primary w-5 h-5"})):_("",!0)]),_:1})])],!0)])]),_:3},8,["class"])])}}}),Mv=Object.assign(Qe(Ev,[["__scopeId","data-v-22af77b4"]]),{__name:"NcListRecordItem"}),Dv=Ne(()=>Ve(()=>import("./DzI8hkox.js"),__vite__mapDeps([109,1,2,12,110]),import.meta.url).then(s=>s.default||s)),Uv=Ne(()=>Ve(()=>import("./BALLsGq5.js").then(s=>s.V),__vite__mapDeps([60,1,2,61,62,63,64,5,6,65,66,67,68,69,23,70,71,12,11,17,72,20,13,14,10,48,53,31,52,30,54,73]),import.meta.url).then(s=>s.default||s)),Rv=Ne(()=>Ve(()=>import("./B1qoNiTF.js").then(s=>s.C),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then(s=>s.default||s)),Pv=Ne(()=>Ve(()=>import("./owbQkEXm.js"),__vite__mapDeps([28,1,2,29]),import.meta.url).then(s=>s.default||s)),Fv=Ne(()=>Ve(()=>import("./Bw607vNV.js").then(s=>s.R),__vite__mapDeps([16,1,2,17,11,10,12,13,14,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,4,5,6,7,8,9,15,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93]),import.meta.url).then(s=>s.default||s)),Bv={key:0,class:"relative flex flex-col gap-4"},Vv={class:"flex items-center justify-center gap-2"},Nv={class:"h-full flex flex-col"},zv={class:"w-full px-4 py-3 flex gap-2 border-b-1 border-nc-border-gray-medium"},jv={class:"flex-1 flex items-center gap-3 text-xl font-semibold"},Wv={class:"h-[calc(100%_-_58px)]"},qv={class:"h-full flex"},Gv={class:"h-full w-1/2 border-r-1 border-r-nc-border-gray-medium"},Hv={class:"border-b-1 border-b-nc-border-gray-medium py-2.5 w-full"},Kv={class:"flex items-center mx-auto px-6 w-full max-w-[568px]"},Yv={class:"text-base text-nc-content-gray font-bold flex-1"},Jv={class:"-my-1.5"},Xv={class:"nc-prompt-input-wrapper bg-nc-bg-gray-light rounded-lg w-full mt-2"},Zv={class:"rounded-b-lg flex items-center gap-2 p-1"},Qv={class:"flex flex-col gap-2"},e_={class:"flex items-center gap-2"},t_={class:"inline-flex items-center gap-2 flex-1 truncate"},l_={key:0,class:"flex flex-wrap gap-3 mt-3"},n_={class:"flex flex-row items-center gap-1 py-[2px] text-sm"},o_={class:"flex items-center p-0.5 mt-0.5"},a_={class:"flex flex-col gap-6 h-[calc(100%_-_45px)] nc-scrollbar-thin py-6"},s_={key:0,class:"nc-ai-button-config-right-section"},i_={class:"py-3 pl-3 pr-2 flex items-center gap-3 bg-nc-bg-red-light rounded-lg w-full"},r_={class:"text-sm text-nc-content-gray-subtle flex-1 max-w-[calc(100%_-_24px)]"},u_={class:"nc-ai-button-config-right-section"},c_={class:"flex-1 flex border-1 bg-white border-nc-border-gray-medium rounded-xl mt-2 w-full"},d_={class:"w-full text-sm text-nc-content-gray-subtle2 font-bold flex items-center gap-2.5 min-h-7"},p_={key:1,class:"flex-1 flex items-center gap-2"},m_={key:0,class:"min-w-[500px] max-w-[576px] min-h-[296px] relative flex flex-col items-center justify-center gap-2 min-h-25 text-nc-content-brand"},f_={key:0,class:"flex-1 flex text-nc-content-gray-muted text-small leading-[18px]"},v_={key:1,class:"flex flex-col gap-4 w-full"},__={class:"flex items-center gap-2 text-nc-content-gray-subtle2 mb-2"},g_={class:"flex flex-col gap-2 py-1 px-0.5"},y_={class:"flex gap-2"},h_={class:"flex gap-2"},b_={class:"flex gap-2"},w_={class:"flex items-center gap-2"},x_={class:"nc-ai-button-config-right-section"},k_={key:0,class:"flex-1 flex text-nc-content-gray-muted text-small leading-[18px]"},$_={key:1,class:"flex flex-col gap-4 w-full"},C_={class:"flex items-center gap-2 text-nc-content-gray-subtle2 mb-2"},T_={key:1},I_=`Enter prompt here...

 eg : Categorise this {Notes}`,S_=Ue({__name:"AiButtonOptions",props:{value:{},submitBtnLabel:{},saving:{type:Boolean}},emits:["update:value","navigateToIntegrations","onSubmit"],setup(s,{emit:k}){const d=s,P=k,t=je(d,"value",P),{submitBtnLabel:i,saving:h}=St(d),u=At(Et,B()),w=Cn(),{activeWorkspaceId:x}=Ut(w),{isAiButtonConfigModalOpen:O,isEdit:A,validateInfos:D,column:L,loadData:m,formattedData:v,disableSubmitBtn:C,tableExplorerColumns:U,fromTableExplorer:$}=_t(),{isAiBetaFeaturesEnabled:b,aiIntegrationAvailable:H,aiLoading:ne,aiError:q,generateRows:j}=Ll(),N=B(!1),J=B(!1),oe=B(!1),ce=Y(()=>{var ee;return t.value.title||Ss({formState:t.value,tableExplorerColumns:U==null?void 0:U.value,metaColumns:((ee=u.value)==null?void 0:ee.columns)||[]})}),ge=B({row:{},oldRow:{},rowMeta:{}}),ye=B(!1),Ae=B(!1),_e=B(!1),Q=Y(()=>{var ee,R,De,Ee;return((R=(ee=u.value)==null?void 0:ee.columns)==null?void 0:R.find(Ge=>Ge==null?void 0:Ge.pv))||((Ee=(De=u.value)==null?void 0:De.columns)==null?void 0:Ee[0])||null}),Z=Y(()=>(v.value||[]).map(ee=>{var Ee,Ge,de;const R=Co(e(ee.row),((Ee=u.value)==null?void 0:Ee.columns)||[]);return{label:(de=ee.row)==null?void 0:de[(Ge=Q.value)==null?void 0:Ge.title],value:R,row:ee}}).filter(ee=>!!(ee.label&&ee.value))),z=B(""),le=Y(()=>Z.value.find(ee=>ee.value===z.value)||{row:{row:{},oldRow:{},rowMeta:{new:!0}},label:"",value:""}),pe=Y(()=>{var ee;return(ee=u.value)!=null&&ee.columns?u.value.columns.filter(R=>{var De;return R.title&&!R.system&&![W.ID,W.Button,W.Links].includes(R.uidt)&&(A.value?((De=L.value)==null?void 0:De.id)!==R.id:!0)}):[]}),xe=Y(()=>pe.value.filter(ee=>{var R;return(R=t.value.formula_raw)==null?void 0:R.includes(`{${ee.title}}`)})),Ie=Y(()=>{var ee;return(ee=u.value)!=null&&ee.columns?u.value.columns.filter(R=>{var De;return!R.system&&!R.pk&&R.id!==((De=L.value)==null?void 0:De.id)&&![W.Attachment,W.Button,W.Links].includes(R.uidt)&&!Fl(R)}):[]}),F=Y({get:()=>{var R,De,Ee;return(De=(R=t.value)==null?void 0:R.output_column_ids)!=null&&De.length?((Ee=t.value.output_column_ids)==null?void 0:Ee.split(","))||[]:[]},set:ee=>{t.value.output_column_ids=ee.join(",")}}),re=async(ee=!1)=>{!v.value.length&&!_e.value&&(_e.value=!0,await m(void 0,!1),await Es(250),_e.value=!1),ee&&Z.value.length&&(z.value=Z.value[0].value)},Te=ee=>{F.value=F.value.filter(R=>R!==ee)},Le=ee=>ll(kt(ee)?hl:bl,{columnMeta:ee}),Oe=async()=>{var R;if(!z.value||!F.value.length)return;ye.value=!0;const ee=await j(u.value.id,{title:(R=t.value)==null?void 0:R.title,prompt_raw:t.value.formula_raw,fk_integration_id:t.value.fk_integration_id,uidt:W.Button,output_column_ids:F.value.join(",")},[z.value],!1);ee!=null&&ee.length&&(ge.value.row=ee[0],Ae.value=!0),ye.value=!1},be=B([]),We=()=>{be.value.includes("input")?be.value=[]:be.value=["input"]},ct=B(["output"]);qt(As,B(!0)),qt(Ln,B(!0)),nt(N,ee=>{ee?(O.value=!0,re(!0)):(setTimeout(()=>{O.value=!1},500),J.value=!1,oe.value=!1)}),nt(oe,ee=>{ee&&re()});const Ke=Y(()=>A.value?!0:b.value),qe=B(),mt=B(!1),Je=()=>(qe.value&&(qe.value.scrollTop>0?mt.value=!0:mt.value=!1),!1),Ce=()=>{Ae.value=!1,ge.value={row:{},oldRow:{},rowMeta:{}}};return nt([()=>F.value.length,()=>{var ee;return(ee=t.value.formula_raw)==null?void 0:ee.length}],()=>{!t.value.formula_raw||!F.value.length?C.value=!0:C.value=!1},{immediate:!0}),$t(()=>{q.value="",!t.value.formula_raw||!F.value.length?C.value=!0:C.value=!1}),uo(()=>{C.value=!1,q.value=""}),(ee,R)=>{const De=En,Ee=Ye,Ge=Pt,de=zo,fe=jo,I=it,G=rn,he=ut,Se=So,dt=fo,et=nl,Me=xo,Xe=nn,He=Dv,ot=wn,ft=Mv,gt=Uv,V=Rv,ue=Pv,y=Fv,g=gi,te=_i,ae=yn;return e(Ke)?(l(),r("div",Bv,[e(H)?e(q)?(l(),r(K,{key:1},[],64)):(l(),c(Ge,{key:2,type:"secondary",size:"small",theme:"ai",onClick:R[0]||(R[0]=ke(S=>N.value=!0,["stop"]))},{default:n(()=>[a("div",Vv,[o(Ee,{icon:"ncSettings",class:"text-[14px] !text-current"}),M(" "+p(ee.$t("labels.configureAiButton")),1)])]),_:1})):(l(),c(De,{key:0})),o(ae,{visible:e(N),"onUpdate:visible":R[23]||(R[23]=S=>ie(N)?N.value=S:null),class:"nc-ai-button-config-modal","show-separator":!1,size:"lg","wrap-class-name":"nc-ai-button-config-modal-wrapper","nc-modal-class-name":"!p-0"},{default:n(()=>[a("div",Nv,[a("div",zv,[a("div",jv,[o(Ee,{icon:"cellAiButton",class:"flex-none h-6 w-6"}),M(" "+p(e(ce)),1)]),o(Ge,{size:"small",type:"secondary",onClick:R[1]||(R[1]=ke(S=>("navigateTo"in ee?ee.navigateTo:e(Os))("/",{open:"navigateToBlankTargetOpenOption"in ee?ee.navigateToBlankTargetOpenOption:e(Ls)}),["stop"]))},{icon:n(()=>[o(Ee,{icon:"externalLink",class:"text-gray-600"})]),default:n(()=>[M(" "+p(ee.$t("activity.goToDocs")),1)]),_:1}),e($)?_("",!0):(l(),c(Ge,{key:0,size:"small",type:"primary",disabled:e(C)||e(h),label:e(i).label,"loading-label":e(i).loadingLabel,loading:e(h),onClick:R[2]||(R[2]=ke(S=>P("onSubmit"),["stop"]))},{loading:n(()=>[M(p(e(i).loadingLabel),1)]),default:n(()=>[M(p(e(i).label)+" ",1)]),_:1},8,["disabled","label","loading-label","loading"])),o(Ge,{size:"small",type:"text",onClick:R[3]||(R[3]=ke(S=>N.value=!1,["stop"]))},{default:n(()=>[o(Ee,{icon:"close",class:"text-gray-600"})]),_:1})]),a("div",Wv,[a("div",qv,[a("div",Gv,[a("div",Hv,[a("div",Kv,[a("div",Yv,p(ee.$t("general.configure")),1),a("div",Jv,[o(de,{"fk-integration-id":e(t).fk_integration_id,"onUpdate:fkIntegrationId":R[4]||(R[4]=S=>e(t).fk_integration_id=S),model:e(t).model,"onUpdate:model":R[5]||(R[5]=S=>e(t).model=S),randomness:e(t).randomness,"onUpdate:randomness":R[6]||(R[6]=S=>e(t).randomness=S),"workspace-id":e(x),"show-tooltip":!1,"is-edit-column":e(A),placement:"bottomRight"},{default:n(()=>[o(Ge,{size:"xs",theme:"ai",class:"!px-1",type:"text"},{default:n(()=>[o(Ee,{icon:"settings"})]),_:1})]),_:1},8,["fk-integration-id","model","randomness","workspace-id","is-edit-column"])])])]),o(Xe,{modelValue:e(t),"onUpdate:modelValue":R[12]||(R[12]=S=>ie(t)?t.value=S:null),"no-style":"",layout:"vertical",class:"nc-ai-button-config-left-section flex flex-col h-[calc(100%_-_45px)] nc-scrollbar-thin",onSubmit:R[13]||(R[13]=ke(()=>{},["prevent"]))},{default:n(()=>[o(I,st({class:"!my-0"},e(D).formula_raw),{default:n(()=>[R[25]||(R[25]=a("div",{class:"flex flex-col gap-2"},[a("div",{class:"font-bold"},"Input Prompt"),a("div",{class:"text-small leading-[18px] text-nc-content-gray-subtle2"}," Include at least one field in your prompt. Optionally, specify how the field's data should guide the AI's response and the format for the output. ")],-1)),a("div",Xv,[o(fe,{modelValue:e(t).formula_raw,"onUpdate:modelValue":R[7]||(R[7]=S=>e(t).formula_raw=S),options:e(pe),placeholder:I_,"prompt-field-tag-class-name":"!bg-nc-bg-gray-medium !text-nc-content-gray"},null,8,["modelValue","options"]),a("div",Zv,[o(Ee,{icon:"info",class:"!text-nc-content-purple-medium h-4 w-4"}),R[24]||(R[24]=a("span",{class:"text-xs text-nc-content-gray-subtle2"},[M("Mention fields using curly braces, e.g. "),a("span",{class:"text-nc-content-purple-dark"},"{Field name}"),M(".")],-1))])])]),_:1,__:[25]},16),o(I,st(e(D).output_column_ids,{class:"!mb-0 !mt-7"}),{default:n(()=>[a("div",Qv,[R[27]||(R[27]=a("div",{class:"font-bold"},"Choose Output Fields To Be Generated by AI",-1)),R[28]||(R[28]=a("div",{class:"text-small leading-[18px] text-nc-content-gray-subtle2"}," Choose the fields where the AI-generated data will be applied. ",-1)),o(et,{visible:e(J),"onUpdate:visible":R[11]||(R[11]=S=>ie(J)?J.value=S:null),placement:"bottomRight","overlay-class-name":"overflow-hidden"},{overlay:n(()=>[o(dt,{value:e(F),"onUpdate:value":R[9]||(R[9]=S=>ie(F)?F.value=S:null),open:e(J),"onUpdate:open":R[10]||(R[10]=S=>ie(J)?J.value=S:null),list:e(Ie),"search-input-placeholder":"Search","option-label-key":"title","option-value-key":"id","close-on-select":!1,class:"!w-auto","is-multi-select":"","show-search-always":"","container-class-name":"!max-h-[171px]"},{listItem:n(({option:S,isSelected:Pe})=>[o(G,{checked:Pe},null,8,["checked"]),a("div",t_,[(l(),c(we(Le(S)),{class:"!mx-0"})),o(he,{class:"truncate flex-1","show-on-truncate-only":""},{title:n(()=>[M(p(S==null?void 0:S.title),1)]),default:n(()=>[M(" "+p(S==null?void 0:S.title),1)]),_:2},1024)])]),headerExtraRight:n(()=>[o(Se,{border:!1,color:"brand"},{default:n(()=>{var S;return[M(p(e(F).length)+" "+p(ee.$t(`objects.${((S=e(F))==null?void 0:S.length)===1?"field":"fields"}`)),1)]}),_:1})]),_:1},8,["value","open","list"])]),default:n(()=>[o(Ge,{size:"small",type:"secondary",onClick:R[8]||(R[8]=ke(()=>{},["stop"]))},{default:n(()=>[a("div",e_,[o(Ee,{icon:"plus",class:"!text-current"}),R[26]||(R[26]=M(" Select fields "))])]),_:1})]),_:1},8,["visible"])]),e(Ie).length?(l(),r("div",l_,[(l(!0),r(K,null,$e(e(Ie),S=>(l(),r(K,null,[e(F).includes(S.id)?(l(),c(Me,{key:S.id,class:"nc-ai-button-output-field"},{default:n(()=>[a("div",n_,[(l(),c(we(Le(S)),{class:"!mx-0 !mr-1 opacity-80"})),o(he,{"show-on-truncate-only":"",class:"truncate max-w-[150px]"},{title:n(()=>[M(p(S.title),1)]),default:n(()=>[M(" "+p(S.title),1)]),_:2},1024),a("div",o_,[o(Ee,{icon:"close",class:"h-4 w-4 cursor-pointer opacity-60",onClick:Pe=>Te(S.id)},null,8,["onClick"])])])]),_:2},1024)):_("",!0)],64))),256))])):_("",!0)]),_:1},16)]),_:1},8,["modelValue"])]),a("div",{ref_key:"previewPanelDom",ref:qe,class:"h-full w-1/2 bg-[#FCF8FF] flex flex-col relative",onScrollPassive:Je},[R[40]||(R[40]=a("div",{class:"border-b-1 border-b-nc-border-gray-medium py-2.5 w-full"},[a("div",{class:"flex items-center mx-auto px-6 w-full max-w-[568px]"},[a("div",{class:"text-base text-nc-content-gray font-bold flex-1"},"Test Data Generation")])],-1)),a("div",a_,[e(q)?(l(),r("div",s_,[a("div",i_,[o(Ee,{icon:"ncInfoSolid",class:"flex-none !text-nc-content-red-dark w-4 h-4"}),a("div",r_,[o(he,{class:"truncate","show-on-truncate-only":""},{title:n(()=>[M(p(e(q)),1)]),default:n(()=>[M(" "+p(e(q)),1)]),_:1})])])])):_("",!0),a("div",u_,[R[31]||(R[31]=a("div",{class:"px-3 py-1 text-nc-content-gray-subtle2 text-sm"},"Input fields",-1)),a("div",c_,[o(te,{"active-key":e(be),"onUpdate:activeKey":R[21]||(R[21]=S=>ie(be)?be.value=S:null),ghost:"",class:"flex-1 nc-ai-button-config-right-collapse nc-collapse-input w-full"},{expandIcon:n(()=>R[29]||(R[29]=[])),default:n(()=>[(l(),c(g,{key:"input",collapsible:"disabled"},{header:n(()=>[a("div",{class:se(["flex w-full p-2",{"border-b-1 border-nc-border-gray-medium":e(be).includes("input")}])},[a("div",d_,[o(Ge,{"icon-only":"",type:"text",size:"xs",class:"!px-1",onClick:R[14]||(R[14]=ke(S=>We(),["stop"]))},{icon:n(()=>[o(Ee,{icon:e(be).includes("input")?"eye":"eyeSlash"},null,8,["icon"])]),_:1}),o(et,{visible:e(oe),"onUpdate:visible":R[20]||(R[20]=S=>ie(oe)?oe.value=S:null),placement:"bottom","overlay-class-name":"overflow-hidden"},{overlay:n(()=>[e(_e)?(l(),r("div",m_,[o(ot,{size:"large",class:"flex-none"}),R[30]||(R[30]=M(" Loading records "))])):(l(),c(dt,{key:1,value:e(z),"onUpdate:value":[R[18]||(R[18]=S=>ie(z)?z.value=S:null),Ce],open:e(oe),"onUpdate:open":R[19]||(R[19]=S=>ie(oe)?oe.value=S:null),list:e(Z),"show-search-always":"","search-input-placeholder":"Search records","item-height":60,class:"!w-auto min-w-[550px] max-w-[550px]","container-class-name":"!px-0 !pb-0","item-class-name":"!rounded-none !p-0 !bg-none !hover:bg-none"},{listItem:n(({option:S,isSelected:Pe})=>{var Re;return[o(ft,{row:S.row||{},columns:((Re=e(u))==null?void 0:Re.columns)||[],"is-selected":Pe,class:"!cursor-pointer","display-value-class-name":"!text-nc-content-gray"},null,8,["row","columns","is-selected"])]}),_:1},8,["value","open","list"]))]),default:n(()=>[o(Ge,{size:"xs",type:"text",class:se(["flex-1 children:children:w-full !font-bold !text-sm",{"!text-gray-900 !bg-gray-100":e(oe)}]),onClick:R[17]||(R[17]=ke(()=>{},["stop"]))},{default:n(()=>[e(z)&&e(Q)?(l(),c(he,{key:0,class:"w-full text-left truncate !leading-6","show-on-truncate-only":""},{title:n(()=>[o(He,{modelValue:e(le).row.row[e(Q).title],"onUpdate:modelValue":R[15]||(R[15]=S=>e(le).row.row[e(Q).title]=S),column:e(Q),class:"!leading-6"},null,8,["modelValue","column"])]),default:n(()=>[o(He,{modelValue:e(le).row.row[e(Q).title],"onUpdate:modelValue":R[16]||(R[16]=S=>e(le).row.row[e(Q).title]=S),column:e(Q),class:"!leading-6"},null,8,["modelValue","column"])]),_:1})):(l(),r("div",p_,"- Select Record -")),e(_e)&&!e(oe)?(l(),c(ot,{key:2,size:"regular"})):(l(),c(Ee,{key:3,icon:"chevronDown",class:se(["!text-current opacity-70 flex-none transform transition-transform duration-250 w-4 h-4 ml-1",{"!rotate-180":e(oe)}])},null,8,["class"]))]),_:1},8,["class"])]),_:1},8,["visible"])])],2)]),default:n(()=>[e(xe).length?(l(),r("div",v_,[(l(),c(y,{key:e(z),row:e(le).row},{default:n(()=>[(l(!0),r(K,null,$e(e(xe),S=>(l(),r(K,null,[S.title?(l(),c(I,{key:`${S.id}-${e(ye)}`,name:S.title,class:"!my-0 nc-input-required-error"},{default:n(()=>[a("div",__,[(l(),c(we(Le(S)),{class:"!mx-0"})),o(he,{class:"truncate flex-1","show-on-truncate-only":""},{title:n(()=>[M(p(S==null?void 0:S.title),1)]),default:n(()=>[M(" "+p(S==null?void 0:S.title),1)]),_:2},1024)]),o(ue,{class:se(["relative flex items-center min-h-8 children:h-full bg-nc-bg-gray-extralight max-w-full",{"!select-text nc-system-field":("isReadOnlyVirtualCell"in ee?ee.isReadOnlyVirtualCell:e(Fl))(S),"!select-text nc-readonly-div-data-cell":!("isReadOnlyVirtualCell"in ee?ee.isReadOnlyVirtualCell:e(Fl))(S)}])},{default:n(()=>{var Pe,Re,yt,ht,vt,Tt,Ht,Zt;return[e(kt)(S)?(l(),c(gt,{key:0,"model-value":(yt=(Re=(Pe=e(le))==null?void 0:Pe.row)==null?void 0:Re.row)==null?void 0:yt[S.title],class:se(["mt-0 nc-input nc-cell",[`nc-form-input-${(ht=S.title)==null?void 0:ht.replaceAll(" ","")}`,{readonly:S==null?void 0:S.read_only}]]),column:S,"read-only":!0},null,8,["model-value","class","column"])):(l(),c(V,{key:1,"model-value":(Ht=(Tt=(vt=e(le))==null?void 0:vt.row)==null?void 0:Tt.row)==null?void 0:Ht[S.title],class:se(["nc-input truncate",[`nc-form-input-${(Zt=S.title)==null?void 0:Zt.replaceAll(" ","")}`,{readonly:S==null?void 0:S.read_only}]]),column:S,"edit-enabled":!0,"read-only":!0},null,8,["model-value","class","column"]))]}),_:2},1032,["class"])]),_:2},1032,["name"])):_("",!0)],64))),256))]),_:1},8,["row"]))])):(l(),r("div",f_," No input fields selected "))]),_:1}))]),_:1},8,["active-key"])])]),a("div",{class:se(["flex justify-center nc-ai-button-test-generate-wrapper",{"text-nc-border-gray-dark":!(e(z)&&e(F).length&&e(xe).length),"text-nc-content-purple-dark":!!(e(z)&&e(F).length&&e(xe).length)}])},[R[36]||(R[36]=a("div",{class:"h-2.5 w-2.5 flex-none absolute -top-[30px] border-1 border-current rounded-full bg-current"},null,-1)),o(he,{disabled:!!(e(z)&&e(F).length&&e(xe).length)},{title:n(()=>[a("div",g_,[R[35]||(R[35]=a("div",{class:"text-[10px] leading-[14px] text-gray-300 uppercase mb-1"},"Preview checklist",-1)),a("div",y_,[a("div",{class:se(["h-4 w-4 rounded-full grid place-items-center children:h-3.5 children:w-3.5 children:flex-none",e(xe).length?"bg-nc-bg-green-dark text-nc-content-green-dark":"bg-nc-bg-red-dark text-nc-content-red-dark"])},[o(Ee,{icon:e(xe).length?"check":"ncX"},null,8,["icon"])],2),R[32]||(R[32]=a("div",null,"Use at least 1 Field in your Input prompt",-1))]),a("div",h_,[a("div",{class:se(["h-4 w-4 rounded-full grid place-items-center children:h-3.5 children:w-3.5 children:flex-none",e(F).length?"bg-nc-bg-green-dark text-nc-content-green-dark":"bg-nc-bg-red-dark text-nc-content-red-dark"])},[o(Ee,{icon:e(F).length?"check":"ncX"},null,8,["icon"])],2),R[33]||(R[33]=a("div",null,"Choose at least 1 Output Field",-1))]),a("div",b_,[a("div",{class:se(["h-4 w-4 rounded-full grid place-items-center children:h-3.5 children:w-3.5 children:flex-none",e(z)?"bg-nc-bg-green-dark text-nc-content-green-dark":"bg-nc-bg-red-dark text-nc-content-red-dark"])},[o(Ee,{icon:e(z)?"check":"ncX"},null,8,["icon"])],2),R[34]||(R[34]=a("div",null,"Select sample record",-1))])])]),default:n(()=>[o(Ge,{size:"small",theme:"ai",type:"primary",class:"nc-ai-button-test-generate",disabled:e(ne)||!e(z)||!e(F).length||!e(xe).length,loading:e(ne)&&e(ye),onClick:ke(Oe,["stop"])},{icon:n(()=>[o(Ee,{icon:"ncAutoAwesome",class:"h-4 w-4"})]),loadingIcon:n(()=>[o(ot,{class:"!text-current",size:"regular"})]),default:n(()=>[a("div",w_,p(e(ne)&&e(ye)?e(Ae)?"Re-generating data":"Generating data":e(Ae)?"Re-generate data":"Generate data"),1)]),_:1},8,["disabled","loading"])]),_:1},8,["disabled"]),R[37]||(R[37]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",class:"absolute -bottom-[24px] z-10"},[a("path",{d:"M5.86603 7.5C5.48113 8.16667 4.51887 8.16667 4.13397 7.5L0.669873 1.5C0.284973 0.833334 0.766099 0 1.5359 0H8.4641C9.2339 0 9.71503 0.833333 9.33013 1.5L5.86603 7.5Z",fill:"currentColor"})],-1))],2),a("div",x_,[a("div",{class:se(["flex-1 flex border-1 bg-white border-nc-border-gray-medium rounded-xl w-full",{"nc-is-already-generated":e(Ae)}])},[o(te,{"active-key":e(ct),"onUpdate:activeKey":R[22]||(R[22]=S=>ie(ct)?ct.value=S:null),ghost:"",class:"flex-1 nc-ai-button-config-right-collapse nc-collapse-output w-full"},{expandIcon:n(()=>R[38]||(R[38]=[])),default:n(()=>[(l(),c(g,{key:"output",collapsible:"disabled"},{header:n(()=>R[39]||(R[39]=[])),default:n(()=>[e(F).length?(l(),r("div",$_,[o(y,{row:e(ge)},{default:n(()=>[(l(!0),r(K,null,$e(e(Ie),S=>(l(),r(K,null,[S.title&&e(F).includes(S.id)?(l(),c(I,{key:S.id,name:S.title,class:"!my-0 nc-input-required-error"},{default:n(()=>[a("div",C_,[(l(),c(we(Le(S)),{class:"!mx-0"})),o(he,{class:"truncate flex-1","show-on-truncate-only":""},{title:n(()=>[M(p(S==null?void 0:S.title),1)]),default:n(()=>[M(" "+p(S==null?void 0:S.title),1)]),_:2},1024)]),o(ue,{class:se(["relative min-h-8 flex items-center children:h-full max-w-full",{"!select-text nc-system-field":("isReadOnlyVirtualCell"in ee?ee.isReadOnlyVirtualCell:e(Fl))(S),"!select-text nc-readonly-div-data-cell":!("isReadOnlyVirtualCell"in ee?ee.isReadOnlyVirtualCell:e(Fl))(S),"bg-nc-bg-gray-extralight":!e(Ae),"bg-nc-bg-purple-light":e(Ae)}])},{default:n(()=>{var Pe,Re;return[e(kt)(S)?(l(),c(gt,{key:0,"model-value":e(ge).row[S.title],class:se(["mt-0 nc-input nc-cell",[`nc-form-input-${(Pe=S.title)==null?void 0:Pe.replaceAll(" ","")}`,{readonly:S==null?void 0:S.read_only}]]),column:S,"read-only":!0},null,8,["model-value","class","column"])):(l(),c(V,{key:1,modelValue:e(ge).row[S.title],"onUpdate:modelValue":yt=>e(ge).row[S.title]=yt,class:se(["nc-input truncate",[`nc-form-input-${(Re=S.title)==null?void 0:Re.replaceAll(" ","")}`,{readonly:S==null?void 0:S.read_only}]]),column:S,"edit-enabled":!0,"read-only":!0},null,8,["modelValue","onUpdate:modelValue","class","column"]))]}),_:2},1032,["class"])]),_:2},1032,["name"])):_("",!0)],64))),256))]),_:1},8,["row"])])):(l(),r("div",k_," No output fields selected "))]),_:1}))]),_:1},8,["active-key"])],2)])])],544)])])])]),_:1},8,["visible"])])):(l(),r("div",T_))}}}),A_=Object.assign(Qe(S_,[["__scopeId","data-v-91b395b6"]]),{__name:"SmartsheetColumnAiButtonOptions"}),O_={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function L_(s,k){return l(),r("svg",O_,k[0]||(k[0]=[a("path",{fill:"currentColor",d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m1 5h-2v4H7v2h4v4h2v-4h4v-2h-4z"},null,-1)]))}const E_=on({name:"mdi-plus-circle-outline",render:L_}),M_={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function D_(s,k){return l(),r("svg",M_,k[0]||(k[0]=[a("path",{fill:"currentColor",d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2M7 13h10v-2H7"},null,-1)]))}const U_=on({name:"mdi-minus-circle-outline",render:D_}),R_={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function P_(s,k){return l(),r("svg",R_,k[0]||(k[0]=[a("path",{fill:"currentColor",d:"M10 7v2H9v6h1v2H6v-2h1V9H6V7zm6 0a2 2 0 0 1 2 2v6c0 1.11-.89 2-2 2h-4V7m4 2h-2v6h2z"},null,-1)]))}const F_=on({name:"mdi-identifier",render:P_}),B_=Ne(()=>Ve(()=>import("./mKyOPxA7.js"),__vite__mapDeps([115,1,2,86,87,88,89,17,11,20,12,90,116]),import.meta.url).then(s=>s.default||s)),V_=Ne(()=>Ve(()=>import("./CgKG2xON.js"),__vite__mapDeps([117,1,2,34,35,10,11,12,13,14,86,87,88,89,17,20,90]),import.meta.url).then(s=>s.default||s)),N_=Ne(()=>Ve(()=>import("./Dfq_SHGC.js"),__vite__mapDeps([118,1,2,86,87,88,89,17,11,20,12,90,119,120,121,122,123]),import.meta.url).then(s=>s.default||s)),z_=Ne(()=>Ve(()=>import("./9etkoRoP.js"),__vite__mapDeps([124,1,2,86,87,88,89,17,11,20,12,90]),import.meta.url).then(s=>s.default||s)),j_={class:"flex items-center gap-3"},W_={class:"flex-1 text-base font-bold text-nc-content-gray"},q_={key:0,class:"flex items-center gap-3 py-2"},G_={class:"text-sm text-nc-content-gray-subtle flex-1"},H_={class:"px-5 pt-4 pb-2"},K_={key:0,class:"w-full flex items-center gap-3"},Y_={key:1},J_={class:"text-nc-content-purple-light text-sm h-7 flex items-center gap-2"},X_={class:"nc-animate-dots"},Z_={key:2,class:"flex gap-3 items-start"},Q_={class:"flex-1 flex gap-2 flex-wrap"},eg={class:"w-[150px]"},tg={class:"flex flex-row items-center gap-2 py-[3px] text-small leading-[18px]"},lg={key:1,class:"text-nc-content-gray-subtle2"},ng={class:"flex items-center gap-1"},og={class:"px-5 pt-4 pb-2 flex flex-col gap-4"},ag={class:"relative"},sg={key:0,class:"w-full flex items-center gap-3"},ig={key:1,class:"flex flex-col gap-3"},rg={class:"flex gap-2 flex-wrap"},ug={class:"w-[150px]"},cg={class:"flex flex-row items-center gap-2 py-[3px] text-small leading-[18px]"},dg={key:1,class:"text-nc-content-gray-subtle2"},pg={key:2,class:"w-full p-4 flex items-start gap-4 border-1 border-nc-border-gray-medium rounded-lg"},mg={class:"flex flex-col gap-1"},fg={class:"text-nc-content-gray-muted text-sm"},vg={class:"flex gap-x-2 justify-end"},_g={class:"flex flex-grow px-2 py-1 items-center rounded-md bg-gray-100 focus:bg-gray-100 outline-none",style:{"outline-style":"solid","outline-width":"thin"}},gg=["disabled","placeholder"],yg={class:"flex items-center gap-1 empty:hidden"},hg={class:"flex-1 flex gap-2 items-center max-w-[calc(100%_-_24px)]"},bg={key:0,class:"flex-1 flex"},wg={key:1,class:"!text-xs !text-gray-300"},xg={key:2,class:"nc-new-field-badge text-sm text-nc-content-purple-dark bg-purple-50 px-2 rounded-md font-normal"},kg={class:"flex gap-3 text-gray-800 h-7 mb-1 items-center justify-between"},$g={class:"text-[13px]"},Cg={key:0,class:"flex items-center gap-1"},Tg={class:"text-sm text-gray-800"},Ig={class:"nc-column-options-wrapper flex flex-col gap-4"},Sg={key:2,class:"flex gap-1"},Ag={key:0,class:"text-xs text-gray-400 flex items-center justify-end"},Og={key:0,class:"overflow-hidden"},Lg={class:"flex gap-3 text-gray-800 h-7 mb-1 items-center justify-between"},Eg={class:"text-[13px]"},Mg={class:"flex !text-gray-700 items-center gap-2"},Dg={class:"first-letter:capitalize"},Ug={class:"flex !text-gray-700 items-center gap-2"},Rg={class:"first-letter:capitalize"},Pg={key:1},Fg=Ue({__name:"EditOrAdd",props:{preload:{},columnPosition:{},embedMode:{type:Boolean},columnLabel:{},hideTitle:{type:Boolean},hideType:{type:Boolean},hideAdditionalOptions:{type:Boolean},fromTableExplorer:{type:Boolean},editDescription:{type:Boolean},readonly:{type:Boolean},disableTitleFocus:{type:Boolean}},emits:["submit","cancel","mounted","add","update"],setup(s,{emit:k}){const d=s,P=k,{formState:t,isWebhookCreateModalOpen:i,generateNewColumnMeta:h,addOrUpdate:u,onAlter:w,onUidtOrIdTypeChange:x,validateInfos:O,isEdit:A,isSystem:D,disableSubmitBtn:L,column:m,isAiMode:v,defaultFormState:C}=_t(),{isAiFeaturesEnabled:U,isAiBetaFeaturesEnabled:$,aiIntegrationAvailable:b,aiLoading:H,aiError:ne}=Ll(),{aiMode:q,aiModeStep:j,predicted:N,activeTabPredictedFields:J,selected:oe,activeTabSelectedFields:ce,activeTabPredictHistory:f,calledFunction:ge,prompt:ye,oldPrompt:Ae,isPromtAlreadyGenerated:_e,maxSelectionCount:Q,activeAiTab:Z,isPredictFromPromptLoading:z,isFormulaPredictionMode:le,activeSelectedField:pe,failedToSaveFields:xe,onInit:Ie,toggleAiMode:F,disableAiMode:re,predictMore:Te,predictRefresh:Le,predictFromPrompt:Oe,handleRefreshOnError:be,saveFields:We,onToggleTag:ct}=ko(B(!1)),{clone:Ke}=Ms();ho(()=>{d.fromTableExplorer||A.value||Ie()});const qe=An(d,"editDescription"),{getMeta:mt}=ul(),{t:Je}=Mt(),{isMetaReadOnly:Ce}=Wl(),{eventBus:ee}=yi(),R=Y(()=>d.columnLabel||Je("objects.field")),{$e:De}=yl(),{appInfo:Ee}=Ol(),{isFeatureEnabled:Ge}=mo(),de=Cn(),{openedViewsTab:fe}=Ut(tn()),I=At(Et,B()),G=At(Ln,B(!1)),he=At(Ds,B(!1)),Se=Y(()=>d.readonly),{isMysql:dt,isDatabricks:et,isXcdbBase:Me}=El(),Xe=At(Us),He=B(!1),ot=B(!1),ft=B(!1),gt=B(!0),V=Y({get:()=>(Xn(t.value.cdf)&&!ft.value&&(ft.value=!0),Xn(t.value.cdf)||ft.value),set:E=>{ft.value=E}}),ue=[W.LinkToAnotherRecord,W.Lookup,W.Rollup,W.Links,W.CreatedTime,W.LastModifiedTime,W.CreatedBy,W.LastModifiedBy,W.QrCode,W.Barcode,W.Button],y=B(!1),g=E=>Ee.value.ee?Ge(ln.GEODATA_COLUMN)||!E.name.includes(W.GeoData):!0,te=B(!1),ae=E=>[W.CreatedBy,W.CreatedTime,W.LastModifiedBy,W.LastModifiedTime].includes(E.name),S=E=>{var $l,Ql,zt;if(E.name===(($l=m==null?void 0:m.value)==null?void 0:$l.uidt))return!0;const T=!ae(E)||t.value.uidt===E.name||!A.value,tt=g(E)&&(!A.value||!E.virtual||E.name===t.value.uidt),Be=E.name===W.SpecificDBType&&Me((Ql=I.value)==null?void 0:Ql.source_id),lt=!E.deprecated||te.value,Ze=[pn,mn].includes(E.name)?$.value&&!A.value:!0,Kt=G.value?!qs.includes(E.name):!0,Zl=E.name===W.LinkToAnotherRecord?Ge(ln.LINK_TO_ANOTHER_RECORD)&&!A.value:!0;let Dl=!0;return((zt=m==null?void 0:m.value)==null?void 0:zt.uidt)===W.Formula&&(Dl=[W.SingleLineText].includes(E.name)),T&&tt&&!Be&&lt&&Kt&&Ze&&Zl&&Dl},Pe=B({}),Re=B(null),yt=Y(()=>{var T,tt;const E=[...Rs.filter(S),...!A.value&&((tt=(T=I==null?void 0:I.value)==null?void 0:T.columns)!=null&&tt.every(Be=>!Be.pk))?[{name:W.ID,icon:F_,virtual:0}]:[]];return Ce.value&&E.sort((Be,lt)=>{const Ze=Il.includes(Be.name),Kt=Il.includes(lt.name);return Ze&&!Kt?-1:!Ze&&Kt?1:0}),Re.value&&(E.sort((Be,lt)=>Be.name===Re.value?-1:lt.name===Re.value?1:0),Re.value in Pe.value||(Pe.value[Re.value]="magic")),A.value?E.map(Be=>{var Ze,Kt;if(!A.value)return Be;const lt=!!((Ze=m.value)!=null&&Ze.pv)&&((Kt=m.value)==null?void 0:Kt.uidt)!==Be.name&&!Ps({uidt:Be.name});return{...Be,disabled:lt,tooltip:lt&&Wt[Be.name]?`${Wt[Be.name]} field cannot be used as display value field`:""}}):E}),ht=B(),vt=B(!1),Tt=jl(()=>{d.fromTableExplorer||!ht.value||q.value||(ht.value.clientHeight<ht.value.scrollHeight?vt.value=!0:vt.value=!1)},500),Ht=(E,T=!1)=>{let tt;T&&!A.value&&q.value&&Ie(),E===mn?(t.value.uidt=W.Button,tt={type:pt.Ai}):E===pn?(t.value.uidt=W.LongText,tt={meta:{[gn]:!0}}):t.value.uidt=E,x(tt),tl(()=>{Tt()})},Zt=async()=>{var E;await mt((E=I.value)==null?void 0:E.id,!0),ee.emit(Ks.FIELD_RELOAD),he.value||Xe==null||Xe.trigger({fieldAdd:!0})},at=B(!1),Qt=B(!1),wl=async()=>{if(Se.value)return;let E,T;at.value=!0,q.value?(E=await We(Zt),!E&&!Hs(ce.value,pe.value,"ai_temp_id")&&kl()):E=await u(async tt=>{d.columnPosition&&(T=tt),Zt()},d.columnPosition),at.value=!1,E&&(setTimeout(()=>{He.value=!1},500),P("submit",T),G.value&&De("a:form-view:add-new-field"))};async function cl(){var E;if(!Se.value)if(A.value&&t.value.uidt!==((E=m.value)==null?void 0:E.uidt)){Qt.value=!0;const{close:T}=Gs(Si,{visible:Qt,"onUpdate:visible":tt=>Qt.value=tt,saving:at,onSubmit:async()=>{T(),await wl()}})}else await wl()}const Bt=B();In(()=>{Bt.value&&t.value&&!Se.value&&setTimeout(()=>{var E,T,tt;(document.activeElement===document.body||document.activeElement===null||["BUTTON","DIV"].includes((E=document.activeElement)==null?void 0:E.tagName))&&!d.disableTitleFocus&&((T=Bt.value)==null||T.focus(),(tt=Bt.value)==null||tt.select())},300),He.value=!1});const wt=B(!1),ol=B(),Vt=()=>{t.value.description="",wt.value=!1};$t(()=>{var E,T,tt;if(((T=(E=m.value)==null?void 0:E.description)!=null&&T.length||qe.value)&&(wt.value=!0),A.value?t.value.pk?(Rt.info(Je("msg.info.editingPKnotSupported")),P("cancel")):Kl(t.value)&&!Fs(t.value)&&(Rt.info(Je("msg.info.editingSystemKeyNotSupported")),P("cancel")):h(!0),d.preload){const{colOptions:Be,...lt}=d.preload;if(t.value={...t.value,...lt},Be){const Ze=t.value.meta||{};x(),t.value={...t.value,colOptions:{...Be},meta:Ze}}}else t.value.filters=void 0;t.value&&!t.value.column_name&&!gl(t.value)&&(t.value.column_name=(tt=t.value)==null?void 0:tt.title),tl(()=>{var Be;ot.value=!0,P("mounted"),Tt(),A.value||(Be=t.value)!=null&&Be.temp_id||P("add",t.value),G.value&&!d.fromTableExplorer&&!wt.value?setTimeout(()=>{var lt,Ze;(lt=Bt.value)==null||lt.focus(),(Ze=Bt.value)==null||Ze.select()},100):d.editDescription&&setTimeout(()=>{var lt;(lt=ol.value)==null||lt.focus()},100)})});const xl=E=>{y.value||i.value||E.key==="Escape"&&P("cancel")},me=Y(()=>fe.value==="field"),It=E=>{E?y.value=E:(gt.value=!0,setTimeout(()=>{y.value=E},100))},al=()=>{gt.value&&(gt.value=!1)};nt(t,()=>{if(ot.value){if(d.fromTableExplorer)P("update",t.value);else if(pe.value===t.value.ai_temp_id){const E=N.value.find(T=>T.ai_temp_id===pe.value);if(!E)return;E.formState=Ke(t.value)}}},{deep:!0});const Nt=Y(()=>{const E=`${Je("general.create")} ${ce.value.length>1?`${ce.value.length} ${Je("objects.fields")}`:Je("objects.field")}`;return{label:q.value?E:`${A.value&&!d.columnLabel?Je("general.update"):Je("general.save")} ${R.value}`,loadingLabel:q.value?E:`${A.value&&!d.columnLabel?Je("general.updating"):Je("general.saving")} ${R.value}`}}),dl=B({}),un=(E,T)=>(delete dl.value[T.value],zl([T.value,...Wt[T.value]?[Wt[T.value]]:[]],E)?!0:zl([...to[T.value]||[]],E,tt=>{tt&&(dl.value[T.value]=`Matched by keyword: ${tt}`)})),Jl=()=>{wt.value?wt.value=!1:(wt.value=!0,setTimeout(()=>{var E;(E=ol.value)==null||E.focus()},100)),tl(()=>{Tt()})},pl=Y(()=>{var E;return!(Ce.value&&!Il.includes((E=t.value)==null?void 0:E.uidt)&&!kt(t.value))}),ve=jl(async()=>{},500),el=()=>{P("cancel"),de.navigateToIntegrations(void 0,void 0,{categories:"ai"})},Ml=()=>{t.value={...C},F(void 0,!0)},qo=()=>{pe.value=null,t.value={...C},wt.value=!1,re()};function kl(E=void 0){var T,tt;if(!E&&ce.value.length&&(E=ce.value[ce.value.length-1]),!E){pe.value=null,t.value={title:"",description:""},wt.value=!1;return}pe.value=E.ai_temp_id,t.value.uidt=((T=E.formState)==null?void 0:T.uidt)||E.type,wt.value=!!((tt=E.formState)!=null&&tt.description),x(E.formState)}const Xl=(E,T=!1)=>{at.value||(T?(ct(E),kl(E.selected?E:void 0)):kl(E))},Bn=E=>E===W.Button&&t.value.uidt===W.Button&&t.value.type===pt.Ai,Go=E=>E===W.LongText&&co(t.value),Vn=B();nt(Z,E=>{E===Bs.PROMPT&&tl(()=>{var T;(T=Vn.value)==null||T.focus()}),kl()});const Nn=Y(()=>t.value.uidt===W.Lookup||t.value.uidt===W.Rollup),Ho=Y(()=>{var E,T;return Nn.value&&!!((T=Xt((E=t.value)==null?void 0:E.meta))!=null&&T.enableConditions)});return(E,T)=>{const tt=Vs,Be=Ye,lt=ut,Ze=Pt,Kt=wn,Zl=rn,Dl=xo,$l=xn,Ql=Ns,zt=it,Ko=ql,Yo=Fi,Jo=Ct,Xo=Lt,Zo=pu,Qo=gu,ea=Cu,ta=Do,la=tc,na=oc,oa=Po,aa=No,sa=Tc,ia=Vo,ra=Fo,ua=Oc,ca=Uo,da=Bo,pa=Zc,ma=Md,fa=Ro,va=Pd,_a=zd,ga=Js,ya=vv,ha=A_,zn=Ft,ba=B_,wa=V_,xa=N_,ka=z_,$a=nn,Ca=Yl("e");return e(Qt)?_("",!0):(l(),r("div",{key:0,ref_key:"editOrAddRef",ref:ht,class:se(["overflow-auto nc-scrollbar-md",{"bg-white max-h-[max(80vh,500px)]":!d.fromTableExplorer,"w-[416px]":!d.embedMode,"!w-[600px]":e(gl)(e(t).uidt),"!min-w-[560px]":e(Ho),"min-w-[500px] !w-full":e(gl)(e(t).uidt)||e(Nn),"shadow-lg shadow-gray-300 border-1 border-gray-200 rounded-2xl p-5":!E.embedMode,"nc-ai-mode":e(v),"h-full":d.fromTableExplorer,"!bg-nc-bg-gray-extralight":e(q)&&e(t).uidt&&!d.fromTableExplorer,"!pb-0":!E.embedMode&&!e(q)&&e(t).uidt}]),onKeydown:xl,onClick:T[52]||(T[52]=ke(()=>{},["stop"])),onScroll:T[53]||(T[53]=(...Cl)=>e(Tt)&&e(Tt)(...Cl))},[o($a,{modelValue:e(t),"onUpdate:modelValue":T[51]||(T[51]=Cl=>ie(t)?t.value=Cl:null),"no-style":"",name:"column-create-or-edit",layout:"vertical","data-testid":"add-or-edit-column",class:"flex flex-col gap-4 h-full"},{default:n(()=>{var Cl,jn,Wn;return[!e(A)&&!d.fromTableExplorer&&(e(q)||!e(t).uidt)?(l(),r(K,{key:0},[a("div",{class:se(["flex flex-col gap-4",{"bg-white -mx-5 -mt-5 px-5 pt-5":e(q)}])},[a("div",j_,[a("div",W_,p(E.$t("general.new"))+" "+p(E.$t("objects.field")),1),e(U)?(l(),c(tt,{key:0,"ai-mode":e(q),"ai-loading":e(H),"off-tooltip":`Auto suggest fields for ${((Cl=e(I))==null?void 0:Cl.title)||"the current table"}`,onClick:T[0]||(T[0]=X=>e(q)?qo():Ml())},null,8,["ai-mode","ai-loading","off-tooltip"])):_("",!0)]),e(q)?(l(),r(K,{key:0},[e(b)?(l(),c(Ql,{key:1,"active-tab":e(Z),"onUpdate:activeTab":T[5]||(T[5]=X=>ie(Z)?Z.value=X:null),class:"!-mx-5"},{AutoSuggestedContent:n(()=>{var X;return[a("div",H_,[e(ne)?(l(),r("div",K_,[o(Be,{icon:"ncInfoSolid",class:"flex-none !text-nc-content-red-dark w-4 h-4"}),o(lt,{class:"truncate flex-1 text-sm text-nc-content-gray-subtle","show-on-truncate-only":""},{title:n(()=>[M(p(e(ne)),1)]),default:n(()=>[M(" "+p(e(ne)),1)]),_:1}),o(Ze,{size:"small",type:"text",class:"!text-nc-content-brand",onClick:ke(e(be),["stop"])},{default:n(()=>[M(p(E.$t("general.refresh")),1)]),_:1},8,["onClick"])])):e(j)==="init"?(l(),r("div",Y_,[a("div",J_,[o(Kt,{size:"regular",class:"!text-nc-content-purple-dark"}),a("div",X_,"Auto suggesting fields for "+p((X=e(I))==null?void 0:X.title),1)])])):e(j)==="pick"?(l(),r("div",Z_,[a("div",Q_,[e(J).length?(l(!0),r(K,{key:0},$e(e(J),rt=>(l(),c(lt,{key:rt.title,disabled:e(oe).length<e(Q)||rt.selected},{title:n(()=>[a("div",eg,"You can only select "+p(e(Q))+" fields to create at a time.",1)]),default:n(()=>[o(Dl,{class:se(["nc-ai-suggested-tag",{"nc-disabled":e(at)||!rt.selected&&e(oe).length>=e(Q),"nc-selected":rt.selected,"nc-bg-selected":e(pe)===rt.ai_temp_id}]),disabled:e(oe).length>=e(Q),onClick:ml=>Xl(rt)},{default:n(()=>{var ml;return[a("div",tg,[o(Zl,{checked:rt.selected,theme:"ai",class:"!-mr-0.5",disabled:e(at)||!rt.selected&&e(oe).length>=e(Q),onClick:ke(ze=>Xl(rt,!0),["stop"])},null,8,["checked","disabled","onClick"]),e(le)||rt!=null&&rt.type?(l(),c(we(("getUIDTIcon"in E?E.getUIDTIcon:e(Nl))(e(le)?e(W).Formula:rt.type)),{key:0,class:se(["flex-none w-3.5 h-3.5",{"opacity-60":e(at)||!rt.selected&&e(oe).length>=e(Q)}])},null,8,["class"])):_("",!0),a("div",null,p(((ml=rt.formState)==null?void 0:ml.title)||rt.title),1)])]}),_:2},1032,["class","disabled","onClick"])]),_:2},1032,["disabled"]))),128)):(l(),r("div",lg,p(E.$t("labels.noData")),1))]),a("div",ng,[(e(f).length<e(ce).length?e(f).length+e(ce).length<10:e(f).length<10)?(l(),c(lt,{key:0,title:"Suggest more",placement:"top"},{default:n(()=>[o(Ze,{size:"xs",class:"!px-1",type:"text",theme:"ai",loading:e(H)&&e(ge)==="predictMore","icon-only":"",disabled:e(at),onClick:e(Te)},{icon:n(()=>[o(Be,{icon:"ncPlusAi",class:"!text-current"})]),_:1},8,["loading","disabled","onClick"])]),_:1})):_("",!0),o(lt,{title:"Clear all and Re-suggest",placement:"top"},{default:n(()=>[o(Ze,{size:"xs",class:"!px-1",type:"text",theme:"ai",disabled:e(at),loading:e(H)&&e(ge)==="predictRefresh",onClick:T[1]||(T[1]=rt=>e(Le)(kl))},{loadingIcon:n(()=>T[54]||(T[54]=[a("template",null,null,-1)])),default:n(()=>[o(Be,{icon:"refresh",class:se(["!text-current",{"animate-infinite animate-spin":e(H)&&e(ge)==="predictRefresh"}])},null,8,["class"])]),_:1},8,["disabled","loading"])]),_:1})])])):_("",!0)])]}),PromptContent:n(()=>[a("div",og,[a("div",ag,[o($l,{ref_key:"aiPromptInputRef",ref:Vn,value:e(ye),"onUpdate:value":T[2]||(T[2]=X=>ie(ye)?ye.value=X:null),disabled:e(at),placeholder:"Enter your prompt to get field suggestions..",class:"nc-ai-input nc-input-shadow !px-3 !pt-2 !pb-3 !text-sm !min-h-[68px] !rounded-lg",onKeydown:T[3]||(T[3]=xt(ke(()=>{},["stop"]),["enter"]))},null,8,["value","disabled"]),o(Ze,{size:"xs",type:"primary",theme:"ai",class:"!px-1 !absolute bottom-2 right-2",disabled:!e(ye).trim()||e(z)||!!e(ye).trim()&&e(ye).trim()===e(Ae).trim()||e(at),loading:e(z),"icon-only":"",onClick:T[4]||(T[4]=X=>e(Oe)(kl))},{loadingIcon:n(()=>[o(Kt,{class:"!text-purple-700",size:"medium"})]),icon:n(()=>[o(Be,{icon:"send",class:"flex-none h-4 w-4"})]),_:1},8,["disabled","loading"])]),e(ne)?(l(),r("div",sg,[o(Be,{icon:"ncInfoSolid",class:"flex-none !text-nc-content-red-dark w-4 h-4"}),o(lt,{class:"truncate flex-1 text-sm text-nc-content-gray-subtle","show-on-truncate-only":""},{title:n(()=>[M(p(e(ne)),1)]),default:n(()=>[M(" "+p(e(ne)),1)]),_:1}),o(Ze,{size:"small",type:"text",class:"!text-nc-content-brand",onClick:ke(e(be),["stop"])},{default:n(()=>[M(p(E.$t("general.refresh")),1)]),_:1},8,["onClick"])])):e(_e)?(l(),r("div",ig,[T[55]||(T[55]=a("div",{class:"text-nc-content-purple-dark font-semibold text-xs"},"Generated Field(s)",-1)),a("div",rg,[e(J).length?(l(!0),r(K,{key:0},$e(e(J),X=>(l(),c(lt,{key:X.title,disabled:e(oe).length<e(Q)||X.selected},{title:n(()=>[a("div",ug,"You can only select "+p(e(Q))+" fields to create at a time.",1)]),default:n(()=>[o(Dl,{class:se(["nc-ai-suggested-tag",{"nc-disabled":e(at)||!X.selected&&e(oe).length>=e(Q),"nc-selected":X.selected,"nc-bg-selected":e(pe)===X.ai_temp_id}]),disabled:e(oe).length>=e(Q),onClick:rt=>Xl(X)},{default:n(()=>{var rt;return[a("div",cg,[o(Zl,{checked:X.selected,theme:"ai",class:"!-mr-0.5",disabled:e(at)||!X.selected&&e(oe).length>=e(Q),onClick:ke(ml=>Xl(X,!0),["stop"])},null,8,["checked","disabled","onClick"]),e(le)||X!=null&&X.type?(l(),c(we(("getUIDTIcon"in E?E.getUIDTIcon:e(Nl))(e(le)?e(W).Formula:X.type)),{key:0,class:se(["flex-none w-3.5 h-3.5",{"opacity-60":e(at)||!X.selected&&e(oe).length>=e(Q)}])},null,8,["class"])):_("",!0),a("div",null,p(((rt=X.formState)==null?void 0:rt.title)||X.title),1)])]}),_:2},1032,["class","disabled","onClick"])]),_:2},1032,["disabled"]))),128)):(l(),r("div",dg,p(E.$t("labels.noData")),1))])])):_("",!0)])]),_:1},8,["active-tab"])):(l(),r("div",q_,[o(Be,{icon:"alertTriangleSolid",class:"!text-nc-content-orange-medium w-4 h-4"}),a("div",G_,p(E.$t("title.noAiIntegrationAvailable"))+" "+p(E.$t("objects.field")),1)])),e(xe)?(l(),r("div",pg,[o(Be,{icon:"ncInfoSolid",class:"flex-none text-nc-content-red-dark"}),a("div",mg,[T[56]||(T[56]=a("div",{class:"text-nc-content-gray text-base font-bold"},"Failed to add fields",-1)),a("div",fg," NocoDB was unable to add "+p(e(N).length)+" fields to the table. Please retry adding the fields. ",1)]),o(Ze,{size:"xsmall",type:"text",class:"!px-1",onClick:T[6]||(T[6]=ke(X=>xe.value=!1,["stop"]))},{default:n(()=>[o(Be,{icon:"close",class:"text-gray-600"})]),_:1})])):_("",!0)],64)):_("",!0)],2),e(q)?(l(),r("div",{key:0,class:se(["sticky -top-5 z-100 bg-white -mx-5 -mt-5 pt-5 px-5",{"pb-5 border-b-1 border-b-nc-border-gray-medium":e(t).uidt}])},[o(zt,null,{default:n(()=>[a("div",vg,[o(Ze,{size:"small","html-type":"button",type:"secondary",disabled:e(at),onClick:T[7]||(T[7]=X=>P("cancel"))},{default:n(()=>[M(p(E.$t("general.cancel")),1)]),_:1},8,["disabled"]),e(b)?Ot((l(),c(Ze,{key:0,"html-type":"submit",type:"primary",theme:"ai",loading:e(at),disabled:e(L)||e(at),size:"small",label:e(Nt).label,"loading-label":e(Nt).loadingLabel,"data-testid":"nc-field-modal-submit-btn",onClick:ke(cl,["prevent"])},{icon:n(()=>[o(Be,{icon:"ncAutoAwesome"})]),loading:n(()=>[M(p(e(Nt).loadingLabel),1)]),default:n(()=>[M(" "+p(e(Nt).label)+" ",1)]),_:1},8,["loading","disabled","label","loading-label"])),[[Ca,["a:column:ai:add"]]]):(l(),c(Ze,{key:1,type:"primary",size:"small",onClick:el},{default:n(()=>T[57]||(T[57]=[M(" Add AI integration ")])),_:1,__:[57]}))])]),_:1})],2)):_("",!0)],64)):_("",!0),e(me)?(l(),c(zt,st({key:1},e(O).title,{class:"flex"}),{default:n(()=>[a("div",_g,[Ot(a("input",{ref_key:"antInput",ref:Bt,"onUpdate:modelValue":T[8]||(T[8]=X=>e(t).title=X),disabled:e(Se)||!e(pl)||e(D),placeholder:`${E.$t("objects.field")} ${E.$t("general.name").toLowerCase()} ${e(A)?"":E.$t("labels.optional")}`,class:se(["flex flex-grow nc-fields-input nc-input-shadow text-sm font-semibold outline-none bg-inherit min-h-6",{"nc-ai-input":e(v)}]),contenteditable:!0,onChange:T[9]||(T[9]=(...X)=>e(ve)&&e(ve)(...X)),onInput:T[10]||(T[10]=X=>e(t).userHasChangedTitle=!0)},null,42,gg),[[bo,e(t).title]])])]),_:1},16)):_("",!0),!d.hideTitle&&!e(me)&&(!e(q)||e(t).uidt)?(l(),c(zt,st({key:2},e(O).title,{required:!1,class:"!mb-0"}),{default:n(()=>[o(Ko,{ref_key:"antInput",ref:Bt,value:e(t).title,"onUpdate:value":T[11]||(T[11]=X=>e(t).title=X),class:se(["nc-column-name-input nc-input-shadow !rounded-lg",{"nc-ai-input":e(v)}]),placeholder:`${E.$t("objects.field")} ${E.$t("general.name").toLowerCase()} ${e(A)?"":E.$t("labels.optional")}`,disabled:e(he)||e(Se)||!e(pl),onChange:e(ve),onInput:T[12]||(T[12]=X=>e(w)(8))},null,8,["value","class","placeholder","disabled","onChange"])]),_:1},16)):_("",!0),a("div",yg,[!d.hideType&&!e(t).uidt?(l(),r(K,{key:0},[e(q)&&!d.fromTableExplorer?_("",!0):(l(),c(Yo,{key:0,options:e(yt),"extra-icons":e(Pe),onSelected:T[13]||(T[13]=X=>Ht(X,!0))},null,8,["options","extra-icons"]))],64)):d.hideType?_("",!0):(l(),c(zt,{key:1,class:"flex-1",onKeydown:[xt(ke(al,["stop"]),["up"]),xt(ke(al,["stop"]),["down"])]},{default:n(()=>{var X;return[o(lt,{disabled:!(!e(A)&&e(t).uidt&&((X=e(t))!=null&&X.ai_temp_id))},{title:n(()=>T[58]||(T[58]=[M(" You cannot edit field types of AI-generated fields. Edits can be made after the field is created.")])),default:n(()=>{var rt,ml;return[o(Xo,{open:e(y),"onUpdate:open":T[14]||(T[14]=ze=>ie(y)?y.value=ze:null),value:e(t).uidt,"onUpdate:value":T[15]||(T[15]=ze=>e(t).uidt=ze),"show-search":"",class:se(["nc-column-type-input nc-select-shadow !rounded-lg",{"nc-ai-input":e(v),"!pointer-events-none !cursor-not-allowed":!e(A)&&e(t).uidt&&!!((rt=e(t))!=null&&rt.ai_temp_id)}]),disabled:e(A)&&e(Ce)&&!e(Il).includes(e(t).uidt)||e(he)||e(Se)||e(A)&&!!ue.includes((ml=e(m))==null?void 0:ml.uidt)||e(A)&&!e(pl)||e(D),"dropdown-class-name":"nc-dropdown-column-type border-1 !rounded-lg border-gray-200","filter-option":un,onDropdownVisibleChange:It,onChange:T[16]||(T[16]=ze=>Ht(ze)),onDblclick:T[17]||(T[17]=ze=>te.value=!e(te))},{suffixIcon:n(()=>[o(Be,{icon:"arrowDown",class:"text-gray-700"})]),default:n(()=>[(l(!0),r(K,null,$e(e(yt),ze=>(l(),c(Jo,st({key:ze.name,value:ze.name,disabled:e(Ce)&&!e(Il).includes(ze.name)||ze.disabled},{ref_for:!0},e(O).uidt,{class:{"ant-select-item-option-active-selected":e(gt)&&e(t).uidt===ze.name,"!text-nc-content-purple-dark":["AIPrompt"in E?E.AIPrompt:e(pn),"AIButton"in E?E.AIButton:e(mn)].includes(ze.name)},onMouseover:al}),{default:n(()=>[o(lt,{class:"w-full flex gap-2 items-center justify-between",placement:"right",disabled:!(ze!=null&&ze.tooltip),attrs:{"data-testid":ze.name}},{title:n(()=>[M(p(ze==null?void 0:ze.tooltip),1)]),default:n(()=>[a("div",hg,[(l(),c(we(Bn(ze.name)&&!e(y)?("iconMap"in E?E.iconMap:e(Fe)).cellAiButton:Go(ze.name)&&!e(y)?("iconMap"in E?E.iconMap:e(Fe)).cellAi:ze.icon),{class:"nc-field-type-icon w-4 h-4 !opacity-90 text-current"})),a("div",{class:se({"flex-1":!e(dl)[ze.name]})},p(e(Wt)[ze.name]),3),e(dl)[ze.name]?(l(),r("div",bg,[o(lt,{title:e(dl)[ze.name],class:"flex cursor-help"},{default:n(()=>[o(Be,{icon:"info",class:"flex-none h-3.5 w-3.5 text-nc-content-gray-muted"})]),_:2},1032,["title"])])):_("",!0),ze.deprecated?(l(),r("span",wg,"("+p(E.$t("general.deprecated"))+")",1)):_("",!0),ze.isNew||Bn(ze.name)&&!e(y)?(l(),r("span",xg,p(E.$t("general.new")),1)):_("",!0)]),e(t).uidt===ze.name?(l(),c(we(("iconMap"in E?E.iconMap:e(Fe)).check),{key:0,id:"nc-selected-item-icon",class:se(["w-4 h-4",{"text-primary":!e(v),"text-nc-content-purple-medium":e(v)}])},null,8,["class"])):_("",!0)]),_:2},1032,["disabled","attrs"])]),_:2},1040,["value","disabled","class"]))),128))]),_:1},8,["open","value","class","disabled"])]}),_:1},8,["disabled"])]}),_:1},8,["onKeydown"]))]),e(wt)&&e(q)?(l(),c(zt,{key:3},{default:n(()=>[a("div",kg,[a("span",$g,p(E.$t("labels.description")),1),o(Ze,{type:"text",class:"!h-6 !w-5",size:"xsmall",onClick:Vt},{default:n(()=>[o(Be,{icon:"delete",class:"text-gray-700 w-3.5 h-3.5"})]),_:1})]),o($l,{ref_key:"descInputEl",ref:ol,value:e(t).description,"onUpdate:value":T[18]||(T[18]=X=>e(t).description=X),class:se([{"!min-h-[200px]":d.fromTableExplorer,"h-[150px] !min-h-[100px]":!d.fromTableExplorer,"nc-ai-input":e(v)},"nc-input-sm nc-input-text-area nc-input-shadow !text-gray-800 px-3 !max-h-[300px]"]),"hide-details":"","data-testid":"create-field-description-input",placeholder:E.$t("msg.info.enterFieldDescription")},null,8,["value","class","placeholder"])]),_:1})):_("",!0),!e(Se)&&e(t).uidt?(l(),r(K,{key:4},[e(t).uidt===e(W).Formula?(l(),c(Zo,{key:0,value:e(t),"onUpdate:value":T[19]||(T[19]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).QrCode?(l(),c(Qo,{key:1,modelValue:e(t),"onUpdate:modelValue":T[20]||(T[20]=X=>ie(t)?t.value=X:null)},null,8,["modelValue"])):_("",!0),e(t).uidt===e(W).Barcode?(l(),c(ea,{key:2,modelValue:e(t),"onUpdate:modelValue":T[21]||(T[21]=X=>ie(t)?t.value=X:null)},null,8,["modelValue"])):_("",!0),e(t).uidt===e(W).Currency?(l(),c(ta,{key:3,value:e(t),"onUpdate:value":T[22]||(T[22]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).LongText?(l(),c(la,{key:4,modelValue:e(t),"onUpdate:modelValue":T[23]||(T[23]=X=>ie(t)?t.value=X:null),onNavigateToIntegrations:el},null,8,["modelValue"])):_("",!0),e(t).uidt===e(W).Duration?(l(),c(na,{key:5,value:e(t),"onUpdate:value":T[24]||(T[24]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).Rating?(l(),c(oa,{key:6,value:e(t),"onUpdate:value":T[25]||(T[25]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).Checkbox?(l(),c(aa,{key:7,value:e(t),"onUpdate:value":T[26]||(T[26]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).Lookup?(l(),c(sa,{key:8,value:e(t),"onUpdate:value":T[27]||(T[27]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).Date?(l(),c(ia,{key:9,value:e(t),"onUpdate:value":T[28]||(T[28]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).Time?(l(),c(ra,{key:10,value:e(t),"onUpdate:value":T[29]||(T[29]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).Number?(l(),c(ua,{key:11,value:e(t),"onUpdate:value":T[30]||(T[30]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).Decimal?(l(),c(ca,{key:12,value:e(t),"onUpdate:value":T[31]||(T[31]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),[e(W).DateTime,e(W).CreatedTime,e(W).LastModifiedTime].includes(e(t).uidt)?(l(),c(da,{key:13,value:e(t),"onUpdate:value":T[32]||(T[32]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).Rollup?(l(),c(pa,{key:14,value:e(t),"onUpdate:value":T[33]||(T[33]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).LinkToAnotherRecord||e(t).uidt===e(W).Links?(l(),c(ma,{key:`${e(t).uidt}-${e(t).id||"new"}`,value:e(t),"onUpdate:value":T[34]||(T[34]=X=>ie(t)?t.value=X:null),"is-edit":e(A)},null,8,["value","is-edit"])):_("",!0),e(t).uidt===e(W).Percent?(l(),c(fa,{key:16,value:e(t),"onUpdate:value":T[35]||(T[35]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt===e(W).SpecificDBType?(l(),c(va,{key:17})):_("",!0),e(t).uidt===e(W).User?(l(),c(_a,{key:18,value:e(t),"onUpdate:value":T[36]||(T[36]=X=>ie(t)?t.value=X:null),"is-edit":e(A)},null,8,["value","is-edit"])):_("",!0),e(t).uidt===e(W).SingleSelect||e(t).uidt===e(W).MultiSelect?(l(),c(ga,{key:19,value:e(t),"onUpdate:value":T[37]||(T[37]=X=>ie(t)?t.value=X:null),"from-table-explorer":d.fromTableExplorer||!1},null,8,["value","from-table-explorer"])):_("",!0),e(t).uidt===e(W).Button?(l(),c(ya,{key:20,value:e(t),"onUpdate:value":T[38]||(T[38]=X=>ie(t)?t.value=X:null),"from-table-explorer":d.fromTableExplorer||!1,onNavigateToIntegrations:el},null,8,["value","from-table-explorer"])):_("",!0),e(t).uidt===e(W).Button&&((jn=e(t))==null?void 0:jn.type)===e(pt).Ai?(l(),c(ha,{key:21,value:e(t),"onUpdate:value":T[39]||(T[39]=X=>ie(t)?t.value=X:null),"submit-btn-label":e(Nt),saving:e(at),onNavigateToIntegrations:el,onOnSubmit:cl},null,8,["value","submit-btn-label","saving"])):_("",!0)],64)):_("",!0),e(t).uidt?(l(),r(K,{key:5},[e(t).meta&&("columnToValidate"in E?E.columnToValidate:e(zs)).includes(e(t).uidt)?(l(),r("div",Cg,[o(zn,{checked:e(t).meta.validate,"onUpdate:checked":T[40]||(T[40]=X=>e(t).meta.validate=X),size:"small",class:"nc-switch"},{default:n(()=>[a("div",Tg,p(`${E.$t("msg.acceptOnlyValid",{type:e(t).uidt===e(W).URL?`${e(Wt)[e(t).uidt]}s`:`${e(Wt)[e(t).uidt]}s`.toLowerCase()})}`),1)]),_:1},8,["checked"])])):_("",!0),!e(Se)&&e(pl)?(l(),r(K,{key:1},[a("div",Ig,[("isTextArea"in E?E.isTextArea:e(Zn))(e(t))&&((Wn=e(t).meta)!=null&&Wn.richMode)?(l(),c(ba,{key:0,value:e(t),"onUpdate:value":T[41]||(T[41]=X=>ie(t)?t.value=X:null),"is-visible-default-value-input":e(V),"onUpdate:isVisibleDefaultValueInput":T[42]||(T[42]=X=>ie(V)?V.value=X:null)},null,8,["value","is-visible-default-value-input"])):!e(kt)(e(t))&&!("isAttachment"in E?E.isAttachment:e(Vl))(e(t))&&!(e(dt)(e(I).source_id)&&(("isJSON"in E?E.isJSON:e(js))(e(t))||("isTextArea"in E?E.isTextArea:e(Zn))(e(t))))&&!(e(et)(e(I).source_id)&&e(t).unique)&&!("isAI"in E?E.isAI:e(Ws))(e(t))?(l(),c(wa,{key:1,value:e(t),"onUpdate:value":T[43]||(T[43]=X=>ie(t)?t.value=X:null),"is-visible-default-value-input":e(V),"onUpdate:isVisibleDefaultValueInput":T[44]||(T[44]=X=>ie(V)?V.value=X:null)},null,8,["value","is-visible-default-value-input"])):_("",!0),e(et)(e(I).source_id)&&!e(t).cdf&&![e(W).MultiSelect,e(W).Checkbox,e(W).Rating,e(W).Attachment,e(W).Lookup,e(W).Rollup,e(W).Formula,e(W).Barcode,e(W).QrCode,e(W).CreatedTime,e(W).LastModifiedTime,e(W).CreatedBy,e(W).LastModifiedBy].includes(e(t).uidt)?(l(),r("div",Sg,[o(zn,{checked:e(t).unique,"onUpdate:checked":T[45]||(T[45]=X=>e(t).unique=X),size:"small",class:"nc-switch"},{default:n(()=>T[59]||(T[59]=[a("div",{class:"text-sm text-gray-800"},"Set as Unique",-1)])),_:1,__:[59]},8,["checked"])])):_("",!0)]),!d.hideAdditionalOptions&&!e(kt)(e(t).uidt)&&!(!e(Ee).ee&&("isAttachment"in E?E.isAttachment:e(Vl))(e(t)))&&(!e(Ee).ee||e(Ee).ee&&!e(Me)(e(I).source_id)&&e(t).uidt===e(W).SpecificDBType)?(l(),r("div",Ag,[a("div",{class:"nc-more-options flex items-center gap-1 cursor-pointer select-none",onClick:T[46]||(T[46]=X=>He.value=!e(He))},[M(p(e(He)?E.$t("general.hideAll"):E.$t("general.showMore"))+" ",1),(l(),c(we(e(He)?e(U_):e(E_))))])])):_("",!0),o(wo,{name:"layout",mode:"out-in"},{default:n(()=>[e(He)?(l(),r("div",Og,[e(Ee).ee&&("isAttachment"in E?E.isAttachment:e(Vl))(e(t))?(l(),c(xa,{key:0,value:e(t),"onUpdate:value":T[47]||(T[47]=X=>ie(t)?t.value=X:null)},null,8,["value"])):_("",!0),e(t).uidt!==e(W).Attachment?(l(),c(ka,{key:1,value:e(t),"onUpdate:value":T[48]||(T[48]=X=>ie(t)?t.value=X:null),"advanced-db-options":e(He)||e(t).uidt===e(W).SpecificDBType},null,8,["value","advanced-db-options"])):_("",!0)])):_("",!0)]),_:1})],64)):_("",!0),e(wt)&&!e(q)?(l(),c(zt,{key:2,class:se({"!pb-4":E.embedMode})},{default:n(()=>[a("div",Lg,[a("span",Eg,p(E.$t("labels.description")),1),o(Ze,{type:"text",class:"!h-6 !w-5",size:"xsmall",onClick:Vt},{default:n(()=>[o(Be,{icon:"delete",class:"text-gray-700 w-3.5 h-3.5"})]),_:1})]),o($l,{ref_key:"descInputEl",ref:ol,value:e(t).description,"onUpdate:value":T[49]||(T[49]=X=>e(t).description=X),class:se([{"!min-h-[200px]":d.fromTableExplorer,"h-[150px] !min-h-[100px]":!d.fromTableExplorer,"nc-ai-input":e(v)},"nc-input-sm nc-input-text-area nc-input-shadow !text-gray-800 px-3 !max-h-[300px]"]),"hide-details":"","data-testid":"create-field-description-input",placeholder:E.$t("msg.info.enterFieldDescription")},null,8,["value","class","placeholder"])]),_:1},8,["class"])):_("",!0),d.fromTableExplorer||e(q)?(l(),r(K,{key:3},[e(wt)?_("",!0):(l(),c(zt,{key:0,class:se({"!pb-4":E.embedMode})},{default:n(()=>[e(D)?_("",!0):(l(),c(Ze,{key:0,size:"small",type:"text",onClick:ke(Jl,["stop"])},{default:n(()=>[a("div",Mg,[o(Be,{icon:"plus",class:"h-4 w-4"}),a("span",Dg,p(E.$t("labels.addDescription").toLowerCase()),1)])]),_:1}))]),_:1},8,["class"]))],64)):(l(),r("div",{key:4,class:se(["flex items-center justify-between gap-2 empty:hidden sticky bottom-0 z-10 bg-white px-5 pb-5 -mx-5",{"border-t-1 border-nc-border-gray-medium pt-3":e(vt)}])},[!e(wt)&&!e(D)?(l(),c(Ze,{key:0,size:"small",type:"text",onClick:ke(Jl,["stop"])},{default:n(()=>[a("div",Ug,[o(Be,{icon:"plus",class:"h-4 w-4"}),a("span",Rg,p(E.$t("labels.addDescription").toLowerCase()),1)])]),_:1})):e(q)?_("",!0):(l(),r("div",Pg)),e(q)?_("",!0):(l(),c(zt,{key:2},{default:n(()=>[a("div",{class:se(["flex gap-x-2 justify-end",{"justify-end":!d.embedMode}])},[o(Ze,{size:"small","html-type":"button",type:"secondary",disabled:e(at),onClick:T[50]||(T[50]=X=>P("cancel"))},{default:n(()=>[M(p(E.$t("general.cancel")),1)]),_:1},8,["disabled"]),o(Ze,{"html-type":"submit",type:"primary",theme:e(v)?"ai":"default",loading:e(at),disabled:!e(t).uidt||e(L)||e(at),size:"small",label:e(Nt).label,"loading-label":e(Nt).loadingLabel,"data-testid":"nc-field-modal-submit-btn",onClick:ke(cl,["prevent"])},{loading:n(()=>[M(p(e(Nt).loadingLabel),1)]),default:n(()=>[M(p(e(Nt).label)+" ",1)]),_:1},8,["theme","loading","disabled","label","loading-label"])],2)]),_:1}))],2))],64)):_("",!0)]}),_:1},8,["modelValue"])],34))}}}),Bg=Object.assign(Qe(Fg,[["__scopeId","data-v-8bc7a501"]]),{__name:"SmartsheetColumnEditOrAdd"}),Vg=Ue({__name:"EditOrAddProvider",props:{column:{},columnPosition:{},preload:{},tableExplorerColumns:{},editDescription:{type:Boolean},fromTableExplorer:{type:Boolean},isColumnValid:{type:Function},disableTitleFocus:{type:Boolean}},emits:["submit","cancel","mounted"],setup(s,{expose:k,emit:d}){const P=s,t=d,i=At(Et,B()),{column:h,preload:u,tableExplorerColumns:w,fromTableExplorer:x,isColumnValid:O,editDescription:A}=St(P),{isSaving:D}=Xs(i,h,w,x,O),{isWebhookCreateModalOpen:L,isAiButtonConfigModalOpen:m}=_t();return k({shouldKeepModalOpen:()=>D.value||L.value||m.value}),(C,U)=>{const $=Bg;return l(),c($,{preload:e(u),"column-position":P.columnPosition,"edit-description":e(A),"from-table-explorer":P.fromTableExplorer||!1,"disable-title-focus":C.disableTitleFocus,onSubmit:U[0]||(U[0]=b=>t("submit",b)),onCancel:U[1]||(U[1]=b=>t("cancel")),onMounted:U[2]||(U[2]=b=>t("mounted"))},null,8,["preload","column-position","edit-description","from-table-explorer","disable-title-focus"])}}}),Ng=Object.assign(Vg,{__name:"SmartsheetColumnEditOrAddProvider"}),vy=Object.freeze(Object.defineProperty({__proto__:null,default:Ng},Symbol.toStringTag,{value:"Module"}));export{vy as E,pp as U,Ng as _,zm as a,Gf as b,$p as c,sc as g,Fn as u};
