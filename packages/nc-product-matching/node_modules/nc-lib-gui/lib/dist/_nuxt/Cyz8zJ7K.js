import{e as L,T as U,bk as E,ge as P,r as g,n as D,b1 as c,c as f,o as w,b as t,a as d,w as o,d as u,M as T,t as m,X as B,L as a,a0 as $,cU as M,by as F,K,N as j,ag as z,Q as G,P as O,an as q,eQ as H,eR as Q,a4 as W}from"./DRA9KN5F.js";const b=""+new URL("grid.DUgR9AKo.png",import.meta.url).href,X=""+new URL("gallery.Cd9ckno3.png",import.meta.url).href,J=""+new URL("kanban.C7eL09OH.png",import.meta.url).href,Y=""+new URL("calendar.XdsCSkJk.png",import.meta.url).href,Z={class:"flex flex-col gap-5"},ee={class:"flex flex-row items-center gap-x-2 text-base font-weight-700 text-gray-800"},se={key:0,class:"mb-2 text-sm text-red-500"},ae={class:"flex flex-row justify-end gap-x-2"},te=["src"],oe=L({__name:"AskPassword",props:{modelValue:{type:Boolean},viewType:{}},emits:["update:modelValue"],setup(v,{emit:h}){const p=v,n=U(p,"modelValue",h),y=E(),{loadSharedView:x}=P(),r=g({password:void 0}),l=g(null),_=async()=>{try{await x(y.params.viewId,r.value.password),n.value=!1}catch(e){const s=await H(e);console.error(s.message),s.error===Q.INVALID_SHARED_VIEW_PASSWORD?l.value=s.message:W.error(s.message)}},k=e=>{var s;return e&&((s=e==null?void 0:e.focus)==null?void 0:s.call(e))},R=D(()=>{switch(p.viewType){case c.GRID:return b;case c.GALLERY:return X;case c.KANBAN:return J;case c.CALENDAR:return Y;default:return b}});return(e,s)=>{const V=T,I=M,N=$,A=B,S=j,C=O;return w(),f(q,null,[t(C,{visible:a(n),"onUpdate:visible":s[2]||(s[2]=i=>G(n)?n.value=i:null),c:"",size:"small",class:z({active:a(n)}),"mask-closable":!1,"mask-style":{backgroundColor:"rgba(255, 255, 255, 0.64)",backdropFilter:"blur(8px)"}},{default:o(()=>[d("div",Z,[d("div",ee,[t(V,{icon:"ncKey",class:"!text-base w-5 h-5"}),u(" "+m(e.$t("msg.thisSharedViewIsProtected")),1)]),t(A,{ref:"formRef",model:a(r),name:"create-new-table-form",onFinish:_},{default:o(()=>[t(N,{name:"password",rules:[{required:!0,message:e.$t("msg.error.signUpRules.passwdRequired")}],class:"!mb-0"},{default:o(()=>[t(I,{ref:k,value:a(r).password,"onUpdate:value":s[0]||(s[0]=i=>a(r).password=i),class:"!rounded-lg !text-small","hide-details":"",placeholder:e.$t("msg.enterPassword"),onInput:s[1]||(s[1]=i=>l.value=null)},null,8,["value","placeholder"]),t(F,{name:"layout"},{default:o(()=>[a(l)?(w(),f("div",se,m(a(l)),1)):K("",!0)]),_:1})]),_:1},8,["rules"])]),_:1},8,["model"]),d("div",ae,[t(S,{disabled:!a(r).password,type:"primary",size:"small","html-type":"submit",class:"!px-2","data-testid":"nc-shared-view-password-submit-btn",onClick:_},{loading:o(()=>[u(m(e.$t("msg.verifyingPassword")),1)]),default:o(()=>[u(m(e.$t("objects.view"))+" ",1)]),_:1},8,["disabled"])])])]),_:1},8,["visible","class"]),d("img",{alt:"view image",src:a(R),class:"fixed inset-0 w-full h-full"},null,8,te)],64)}}}),le=Object.assign(oe,{__name:"SharedViewAskPassword"});export{le as default};
