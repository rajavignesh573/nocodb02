const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WDYzPv8C.js","./Caszp1mx.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./BMufqs0w.js","./Overlay.CpKx7Pnx.css","./KAvfy7MV.js","./View.ChgPETCw.css","./uosXAa0K.js","./BaxyS14b.js","./EmojiPicker.BKv0qZ9h.css","./mHhFSiUY.js","./C_gbauhL.js","./XIQ6oBQW.js"])))=>i.map(i=>d[i]);
import{_ as it,I as p,o as t,e as Me,J as Xe,f as Je,r as D,n as Y,c as x,K as k,L as e,a as l,b as s,M as ze,N as ct,O as Ve,w as i,P as Fs,Q as ge,d as q,t as m,R as ia,S as Et,T as mt,U as qe,V as Ze,W as hs,X as us,Y as Is,Z as Gs,$ as yt,a0 as ra,a1 as ca,a2 as da,a3 as Tt,a4 as Be,a5 as Ke,a6 as es,a7 as tt,a8 as ue,a9 as ts,aa as ft,ab as Bt,ac as vt,ad as _e,ae as Ws,af as ua,ag as Q,ah as We,ai as kt,aj as $s,ak as ss,al as $t,am as nt,an as Se,ao as bt,ap as Lt,aq as ms,ar as Nt,as as lt,g as as,at as pa,au as ma,av as jt,aw as Ds,ax as pt,G as Ye,ay as ht,az as Os,aA as Ut,aB as va,aC as ba,j as Ge,y as Pt,aD as fa,aE as _a,aF as Mt,aG as He,aH as Rt,aI as ya,aJ as ga,aK as Es,aL as wa,aM as xa,u as vs,aN as os,aO as ka,aP as Bs,aQ as bs,aR as $a,aS as ha,aT as Ia,aU as Ct,aV as Da,aW as Ca,aX as ns,aY as ls,aZ as Hs,a_ as is,a$ as Ta,b0 as Cs,b1 as Ue,b2 as Ks,b3 as Ts,b4 as qs,b5 as ja,b6 as Zt,b7 as ot,b8 as Sa,b9 as ps,ba as Va,bb as Ot,bc as Pa,bd as Ma,be as Xt,bf as Oa,bg as Ea,bh as js,bi as Ba,bj as Ls,bk as La,bl as Js,bm as Na,bn as Ua,bo as Ns,bp as Ra,bq as ks,br as Aa,bs as za,bt as Qs,bu as Us,bv as Rs,bw as Fa,bx as Ga,by as Wa,bz as Ha,bA as As,bB as Ka,bC as qa,bD as Ja,bE as Qa,bF as Ya,bG as Za,bH as Xa,bI as eo}from"./DRA9KN5F.js";import{_ as Ss}from"./C_gbauhL.js";import{_ as Ys,i as Zs,a as to}from"./CLLfXqHD.js";import{_ as so,a as ao,b as oo}from"./BiJx_glt.js";import{_ as At}from"./gByPF8bR.js";import{u as Vs}from"./mXY_vhPu.js";import{S as Xs}from"./DlXIlcns.js";import"./CNwEZGnv.js";import{S as no}from"./Ce4xoeky.js";import{r as lo,a as io}from"./DGFEr0h-.js";import ro from"./Caszp1mx.js";import{_ as St}from"./C2UaKEE0.js";import{_ as co,a as uo}from"./ghxJ1J6L.js";import{_ as po}from"./C3FZdmXk.js";import{_ as zt}from"./C_VN1MCC.js";import{_ as ea}from"./EcM5l_HA.js";import{_ as mo}from"./CJAyvGKH.js";import ta from"./CHRPOXXy.js";import{u as vo}from"./629XNRmr.js";import{_ as bo}from"./CRQxmmPY.js";import{S as sa}from"./C83syoBY.js";import{_ as fo}from"./CsX17Y_h.js";import{u as _o}from"./By5RWL3d.js";import{_ as yo}from"./CBhmoxRW.js";import{c as go}from"./CN7ac-4_.js";import{_ as wo}from"./BDeDEfXY.js";import{C as xo,_ as ko}from"./-iDxnmJF.js";import{D as $o}from"./D7OHpRdS.js";import{u as aa}from"./CEeEofqN.js";import"./KAvfy7MV.js";import"./DWLi1ZcL.js";import"./DkDj6Z7Z.js";import"./C_-gdvC5.js";import"./CI3EriLB.js";import"./DP83Cqnl.js";import"./BVqTF1QK.js";import"./BMufqs0w.js";import"./0J_Jm9qQ.js";import"./BYKJ-MHf.js";import"./lL-0_K96.js";import"./phJnKPvr.js";import"./CkpISeXq.js";import"./BCBMEREK.js";import"./DvtLu3FC.js";const ho={};function Io(L,F){const u=Ss;return t(),p(u)}const Do=Object.assign(it(ho,[["render",Io]]),{__name:"PaymentUpgradeSidebarBanner"}),Co=""+new URL("giftCard.2B6TXtv7.svg",import.meta.url).href,To={class:"wrapper"},jo={class:"header"},So={key:0,class:"img-wrapper"},Vo={class:"flex justify-end mt-7 gap-x-2"},Po=Me({__name:"Gift",setup(L){const{appInfo:F,giftBannerDismissedCount:u,user:o}=Xe(),{$e:a}=Je(),$=D(!0),U=D(!1),_=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)<780,R=Y(()=>{var f,g;return((f=o.value)==null?void 0:f.email)&&!/^[a-zA-Z0-9._%+-]+@(gmail|yahoo|hotmail|outlook|aol|icloud|qq|163|126|sina|nocodb)(\.com)?$/i.test((g=o.value)==null?void 0:g.email)&&(!u.value||u.value<5)});u.value?setTimeout(()=>{$.value=!1},u.value*6e4):$.value=!1;const V=()=>{var f;u.value++,a("a:claim:gift:coupon"),window.open((f=F.value)==null?void 0:f.giftUrl,"_blank","noopener,noreferrer")},n=()=>{!u.value||u.value<4?U.value=!0:($.value=!0,u.value++)},b=()=>{$.value=!0,u.value=5,U.value=!1},r=()=>{$.value=!0,u.value++,U.value=!1};return(f,g)=>{const G=ze,w=ct,v=Fs;return e(R)&&!e($)&&e(F).giftUrl?(t(),x("div",{key:0,class:"container",onClick:V},[l("div",To,[l("div",jo,[s(G,{class:"icon",icon:"gift",size:"xlarge"}),g[1]||(g[1]=l("h4",null,"Gifts Unlocked!",-1))]),g[2]||(g[2]=l("div",{class:"body"},"We are giving away $25 worth of amazon coupons to our pro open source users!",-1))]),!_&&!e(u)?(t(),x("div",So,g[3]||(g[3]=[l("img",{src:Co},null,-1)]))):k("",!0),s(w,{type:"text",size:"small",class:"close-icon",onClick:Ve(n,["stop"])},{default:i(()=>[s(G,{icon:"close",size:"xlarge"})]),_:1}),s(v,{visible:e(U),"onUpdate:visible":g[0]||(g[0]=I=>ge(U)?U.value=I:null),size:"small"},{default:i(()=>[l("div",null,[g[6]||(g[6]=l("div",{class:"mt-1 text-sm"},"Do you want to remind later on your next visit?",-1)),l("div",Vo,[s(w,{type:"secondary",size:"small",onClick:b},{default:i(()=>g[4]||(g[4]=[q(" Donâ€™t show again ")])),_:1,__:[4]}),s(w,{type:"primary",size:"small",onClick:r},{default:i(()=>g[5]||(g[5]=[q(" Yes ")])),_:1,__:[5]})])])]),_:1},8,["visible"])])):k("",!0)}}}),Mo=Object.assign(it(Po,[["__scopeId","data-v-7343edb1"]]),{__name:"GeneralGift"}),Oo={};function Eo(L,F){const u=Ss;return t(),p(u)}const Bo=Object.assign(it(Oo,[["render",Eo]]),{__name:"DashboardSidebarBeforeUserInfo"}),Lo={class:"flex items-center text-xs text-gray-400 px-3 py-1"},No=Me({__name:"Version",setup(L){const{appInfo:F}=Xe();return(u,o)=>(t(),x("div",null,[l("div",Lo,[l("span",null,"Version "+m(e(F).version),1)])]))}}),Uo=Object.assign(No,{__name:"DashboardSidebarVersion"}),Ro={class:"flex flex-row items-center gap-x-2 text-base"},Ao={class:"text-base font-semibold text-gray-800"},zo={class:"mt-1"},Fo={class:"flex flex-row justify-end gap-x-2 mt-5"},Go=Me({__name:"DescriptionUpdate",props:{modelValue:{type:Boolean},tableMeta:{},sourceId:{}},emits:["update:modelValue","updated"],setup(L,{emit:F}){const u=ia(L,["tableMeta"]),o=F,{$e:a,$api:$}=Je(),{setMeta:U}=Et(),_=mt(u,"modelValue",o),{loadProjectTables:R}=qe(),V=Ze(),{loadTables:n}=V,{addUndo:b,defineProjectScope:r}=hs(),f=D(),g=D(!1),G=us.useForm,w=Is({description:""}),v=Y(()=>({description:[{validator:(O,h)=>new Promise((S,T)=>{S()})}]})),{validateInfos:I}=G(w,v);Gs(()=>{var O;(O=L.tableMeta)!=null&&O.description&&(w.description=`${L.tableMeta.description}`),yt(()=>{var S;const h=(S=f.value)==null?void 0:S.$el;h&&(h.setSelectionRange(0,w.description.length),h.focus())})},{flush:"post"});const j=async(O=!1)=>{if(L.tableMeta){w.description&&(w.description=w.description.trim()),g.value=!0;try{await $.dbTable.update(L.tableMeta.id,{base_id:L.tableMeta.base_id,description:w.description}),_.value=!1,await R(L.tableMeta.base_id,!0),O||b({redo:{fn:S=>{w.description=S,j(!0,!0)},args:[w.description]},undo:{fn:S=>{w.description=S,j(!0,!0)},args:[L.tableMeta.description]},scope:r({model:L.tableMeta})}),await n();const h=await $.dbTable.read(L.tableMeta.id);await U(h),a("a:table:description:update"),_.value=!1}catch(h){Be.error(await Ke(h))}g.value=!1}};return(O,h)=>{const S=ze,T=da,z=ra,K=us,oe=ct,J=Fs;return t(),p(J,{visible:e(_),"onUpdate:visible":h[4]||(h[4]=Z=>ge(_)?_.value=Z:null),size:"small","show-separator":!1},{header:i(()=>{var Z,E;return[l("div",Ro,[s(S,{icon:"table",class:"w-5 h-5 text-gray-600"}),l("span",Ao,m(((Z=O.tableMeta)==null?void 0:Z.title)??((E=O.tableMeta)==null?void 0:E.table_name)),1)])]}),default:i(()=>{var Z,E,W,ve;return[l("div",zo,[s(K,{layout:"vertical",model:e(w),name:"create-new-table-form"},{default:i(()=>[s(z,ca({label:O.$t("labels.description")},e(I).description),{default:i(()=>[s(T,{ref_key:"inputEl",ref:f,value:e(w).description,"onUpdate:value":h[0]||(h[0]=X=>e(w).description=X),class:"nc-input-sm !py-2 nc-text-area nc-input-shadow","hide-details":"",size:"small",placeholder:O.$t("msg.info.enterTableDescription"),onKeydown:h[1]||(h[1]=Tt(Ve(()=>j(),["exact"]),["enter"]))},null,8,["value","placeholder"])]),_:1},16,["label"])]),_:1},8,["model"]),l("div",Fo,[s(oe,{type:"secondary",size:"small",onClick:h[2]||(h[2]=X=>_.value=!1)},{default:i(()=>[q(m(O.$t("general.cancel")),1)]),_:1}),s(oe,{key:"submit",type:"primary",size:"small",disabled:((E=(Z=e(I))==null?void 0:Z.description)==null?void 0:E.validateStatus)==="error"||((W=e(w).description)==null?void 0:W.trim())===((ve=O.tableMeta)==null?void 0:ve.description),loading:e(g),onClick:h[3]||(h[3]=()=>j())},{default:i(()=>[q(m(O.$t("general.save")),1)]),_:1},8,["disabled","loading"])])])]}),_:1},8,["visible"])}}}),Wo=Object.assign(it(Go,[["__scopeId","data-v-16348511"]]),{__name:"DlgTableDescriptionUpdate"}),Ho={class:"mt-5 flex gap-3 flex-col"},Ko={class:"flex flex-row gap-x-2 mt-5 justify-end"},qo=Me({__name:"Duplicate",props:{modelValue:{type:Boolean},table:{}},emits:["update:modelValue"],setup(L,{emit:F}){const u=L,o=F,{api:a}=es(),$=mt(u,"modelValue",o),{$e:U,$poller:_}=Je(),R=tt(),{createProject:V}=R,{openTable:n}=qe(),b=Ze(),{loadTables:r}=b,{tables:f}=ue(b),{getMeta:g}=Et(),{t:G}=ts(),{activeTable:w}=ue(qe()),{refreshCommandPalette:v}=ft(),I=D({includeData:!0,includeViews:!0,includeHooks:!0}),j=Y(()=>{const{includeData:T,includeViews:z,includeHooks:K}=I.value;return{excludeData:!T,excludeViews:!z,excludeHooks:!K}}),O=D(!1),h=async()=>{try{O.value=!0;const T=await a.dbTable.duplicate(u.table.base_id,u.table.id,{options:j.value});_.subscribe({id:T.id},async z=>{var K;if(z.status!=="close")if(z.status===kt.COMPLETED){const oe=await g(u.table.id);if(oe){for(const Z of oe.columns||[])if([$s.Links,$s.LinkToAnotherRecord].includes(Z.uidt)&&Z&&Z.colOptions){const E=(K=Z.colOptions)==null?void 0:K.fk_related_model_id;E&&await g(E,!0)}}await r(),v();const J=f.value.find(Z=>{var E,W;return Z.id===((W=(E=z==null?void 0:z.data)==null?void 0:E.result)==null?void 0:W.id)});n(J),O.value=!1,$.value=!1}else z.status===kt.FAILED&&(Be.error(G("msg.error.failedToDuplicateTable")),await r(),O.value=!1,$.value=!1)}),U("a:table:duplicate")}catch(T){Be.error(await Ke(T)),O.value=!1,$.value=!1}};Bt("Enter",()=>{$.value&&h()});const S=D(!1);return(T,z)=>{const K=Ws,oe=ct,J=At,Z=vt("e");return t(),p(J,{visible:e($),"onUpdate:visible":z[5]||(z[5]=E=>ge($)?$.value=E:null),class:Q([{active:e($)},"!w-[30rem]"]),"mask-closable":!e(O),keyboard:!e(O),centered:"","wrap-class-name":"nc-modal-table-duplicate","mask-style":{"background-color":"rgba(0, 0, 0, 0.08)"},footer:null,onKeydown:z[6]||(z[6]=Tt(E=>$.value=!1,["esc"]))},{default:i(()=>[l("div",null,[l("div",{class:"text-base text-nc-content-gray-emphasis leading-6 font-bold self-center",onDblclick:z[0]||(z[0]=E=>S.value=!e(S))},m(T.$t("general.duplicate"))+" "+m(T.$t("objects.table"))+' "'+m(T.table.title)+'" ',33),l("div",Ho,[l("div",{class:"flex gap-3 cursor-pointer leading-5 text-nc-content-gray font-medium items-center",onClick:z[1]||(z[1]=E=>e(I).includeData=!e(I).includeData)},[s(K,{checked:e(I).includeData},null,8,["checked"]),q(" "+m(T.$t("labels.includeRecords")),1)]),l("div",{class:"flex gap-3 cursor-pointer leading-5 text-nc-content-gray font-medium items-center",onClick:z[2]||(z[2]=E=>e(I).includeViews=!e(I).includeViews)},[s(K,{checked:e(I).includeViews},null,8,["checked"]),q(" "+m(T.$t("labels.includeView")),1)]),_e(l("div",{class:"flex gap-3 cursor-pointer leading-5 text-nc-content-gray font-medium items-center",onClick:z[3]||(z[3]=E=>e(I).includeHooks=!e(I).includeHooks)},[s(K,{checked:e(I).includeHooks},null,8,["checked"]),q(" "+m(T.$t("labels.includeWebhook")),1)],512),[[ua,e(S)]])]),l("div",{class:Q([{"mb-5":"isEeUI"in T?T.isEeUI:e(We)},"mt-5 text-nc-content-gray-subtle2 font-medium"])},m(T.$t("labels.tableDuplicateMessage")),3)]),l("div",Ko,[e(O)?k("",!0):(t(),p(oe,{key:"back",type:"secondary",size:"small",onClick:z[4]||(z[4]=E=>$.value=!1)},{default:i(()=>[q(m(T.$t("general.cancel")),1)]),_:1})),_e((t(),p(oe,{key:"submit",type:"primary",size:"small",loading:e(O),onClick:h},{default:i(()=>z[7]||(z[7]=[q(" Duplicate Table ")])),_:1,__:[7]},8,["loading"])),[[Z,["a:table:duplicate"]]])])]),_:1},8,["visible","class","mask-closable","keyboard"])}}}),Jo=Object.assign(qo,{__name:"DlgTableDuplicate"}),Qo=["data-workspace-title"],Yo={class:"nc-sidebar-header-content text-subHeading2 truncate"},Zo={class:"flex items-center text-inherit"},Xo=Me({__name:"HeaderWrapper",props:{isLoading:{type:Boolean}},setup(L){const F=L,{isLoading:u}=ss(F),o=$t(),{isLeftSidebarOpen:a}=ue(Vs()),{activeWorkspace:$,isWorkspacesLoading:U}=ue(o),{showProjectList:_}=ue(tt()),{activeViewTitleOrId:R}=ue(nt()),{activeTableId:V}=ue(qe()),{isMobileMode:n}=Xe(),b=Y(()=>!(n.value&&!R.value&&!V.value));return(r,f)=>{var j;const g=ze,G=ct,w=Lt,v=Xs,I=vt("e");return t(),x("div",{class:Q(["nc-sidebar-header",e(_)?"nc-project-list":"nc-active-project"]),"data-workspace-title":(j=e($))==null?void 0:j.title},[!e(U)&&!e(u)?(t(),x(Se,{key:0},[l("div",Yo,[bt(r.$slots,"default",{},()=>[f[1]||(f[1]=q(" Bases "))],!0)]),s(w,{class:Q(["flex",{"!opacity-100":!e(a)}]),placement:"bottom","hide-on-click":""},{title:i(()=>[q(m(e(a)?`${r.$t("title.hideSidebar")}`:`${r.$t("title.showSidebar")}`),1)]),default:i(()=>[e(b)?_e((t(),p(G,{key:0,type:e(n)?"secondary":"text",size:e(n)?"medium":"small",class:"nc-sidebar-left-toggle-icon !text-nc-content-gray-subtle !hover:text-nc-content-gray !xs:h-10.5 !xs:max-h-10.5 !xs:max-w-10.5 !md:hover:bg-nc-bg-gray-medium !rounded-md",onClick:f[0]||(f[0]=O=>a.value=!e(a))},{default:i(()=>[l("div",Zo,[e(n)?(t(),p(g,{key:0,icon:"close"})):(t(),p(g,{key:1,icon:"doubleLeftArrow",class:Q(["duration-150 transition-all !text-lg -mt-0.5 !text-nc-content-gray-muted bg-opacity-50",{"transform rotate-180":!e(a)}])},null,8,["class"]))])]),_:1},8,["type","size"])),[[I,["c:leftSidebar:hideToggle"]]]):k("",!0)]),_:1},8,["class"])],64)):(t(),x(Se,{key:1},[s(v,{active:!0,class:"!flex-1 !h-7 !rounded overflow-hidden"}),s(v,{active:!0,class:"!w-7 !h-7 !rounded overflow-hidden"})],64))],10,Qo)}}}),Ps=Object.assign(it(Xo,[["__scopeId","data-v-040be80d"]]),{__name:"DashboardSidebarHeaderWrapper"}),en={},tn={class:"nc-treeview-loading absolute w-full h-full top-0 left-0 z-5"},sn={class:"w-full"},an={class:"flex-1 flex"},on={class:"nc-project-home-section !px-2"},nn={class:"h-11 flex items-center"},ln={class:"nc-project-home-section !px-2 mt-1"},rn={class:"flex w-1/2"},cn={class:"flex flex-col gap-4 mt-3"};function dn(L,F){const u=Xs,o=Ps,a=no;return t(),x("div",tn,[l("div",sn,[s(o,null,{default:i(()=>[l("div",an,[s(u,{active:"",class:"flex-1 children:rounded-md h-7"})])]),_:1}),l("div",on,[l("div",nn,[s(u,{active:"",size:"small",class:"flex-1 children:rounded-md h-7"})])]),l("div",ln,[l("div",rn,[s(u,{active:"",size:"small",class:"children:rounded-md h-5 flex-1"})]),l("div",cn,[(t(),x(Se,null,ms(5,$=>l("div",{key:$,class:"flex items-center gap-3"},[s(a,{active:"",shape:"square",class:"!h-5 !w-5 !children:rounded-md !children:w-5 !children:h-5"}),s(u,{active:"",size:"small",class:"flex-1 children:rounded-md h-5"})])),64))])])])])}const un=Object.assign(it(en,[["render",dn]]),{__name:"DashboardTreeViewProjectListSkeleton"}),pn=Me({__name:"SearchInput",props:{value:{},isLoading:{type:Boolean}},emits:["update:value"],setup(L,{emit:F}){const u=L,a=mt(u,"value",F),{isLoading:$}=ss(u),{t:U}=ts(),_=D(),R=Y(()=>$.value?`${U("general.search")}...`:`${U("activity.searchProject").charAt(0).toUpperCase()}${U("activity.searchProject").slice(1).toLowerCase()}`),V=n=>{var b;n.altKey&&(n.code==="KeyB"||n.code==="KeyD")?(n.preventDefault(),(b=_.value.input)==null||b.blur()):n.stopPropagation()};return(n,b)=>{const r=ze,f=Nt;return t(),p(f,{ref_key:"inputRef",ref:_,value:e(a),"onUpdate:value":b[0]||(b[0]=g=>ge(a)?a.value=g:null),type:"text",class:"nc-base-search-input nc-input-border-on-value nc-input-shadow !h-8 !px-2.5 !py-1 !rounded-lg",placeholder:e(R),"allow-clear":"",readonly:e($),onKeydown:V},{prefix:i(()=>[s(r,{icon:"search",class:"mr-1 h-4 w-4 text-gray-500 group-hover:text-black"})]),_:1},8,["value","placeholder","readonly"])}}}),mn=Object.assign(pn,{__name:"DashboardTreeViewProjectSearchInput"}),vn={class:"flex items-center gap-2 w-full"},bn={class:"flex flex-1"},fn={class:"px-1 flex-none text-bodySmBold !leading-[18px] text-nc-content-gray-subtle bg-nc-bg-gray-medium rounded"},_n=Me({__name:"CreateProjectBtn",props:{activeWorkspaceId:{},modal:{type:Boolean},type:{},isOpen:{type:Boolean},size:{},centered:{type:Boolean}},setup(L){const F=L,{isUIAllowed:u}=lt(),{orgRoles:o,workspaceRoles:a}=lt(),$=Ze(),{isSharedBase:U}=ue($),_=$t(),{activeWorkspaceId:R}=ue(_),V=D(!1),n=Y(()=>F.size||"small"),b=Y(()=>F.centered??!0);return(r,f)=>{const g=Ys,G=ct,w=vt("e");return e(u)("baseCreate",{roles:e(a)??e(o)})&&!e(U)?_e((t(),p(G,{key:0,type:"text",size:e(n),centered:e(b),"full-width":"",onClick:f[1]||(f[1]=v=>V.value=!0)},{default:i(()=>[bt(r.$slots,"default",{},()=>[l("div",vn,[f[2]||(f[2]=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[l("rect",{width:"16",height:"16",rx:"8",fill:"#D6E0FF"}),l("path",{d:"M8 4V12",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M4 8H12",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("div",bn,m(r.$t("title.createBase")),1),l("div",fn,m(("renderAltOrOptlKey"in r?r.renderAltOrOptlKey:e(lo))(!0))+" D ",1)])]),s(g,{modelValue:e(V),"onUpdate:modelValue":f[0]||(f[0]=v=>ge(V)?V.value=v:null)},null,8,["modelValue"])]),_:3},8,["size","centered"])),[[w,["c:base:create"]]]):k("",!0)}}}),yn=Object.assign(_n,{__name:"WorkspaceCreateProjectBtn"}),gn={class:"flex flex-col h-[80vh]"},wn={class:"flex flex-row pt-3 pb-2 px-4 justify-between items-center w-full"},xn={class:"select-none text-lg font-bold"},kn={class:"h-full"},$n=Me({__name:"Erd",props:{baseId:{},sourceId:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(L,{emit:F}){const u=L,a=mt(u,"modelValue",F),$=Y(()=>u.sourceId),{openedProject:U}=ue(tt()),{baseTables:_}=ue(qe()),{loadProjectTables:R}=qe(),V=D(!0),{getMeta:n}=Et(),b=Y(()=>{var r;return u.baseId||((r=U.value)==null?void 0:r.id)});return as(async()=>{if(b.value&&_.value.get(b.value))return V.value=!1;try{await R(b.value),await Promise.all(_.value.get(b.value).map(async r=>{await n(r.id,!1,!1,b.value)}))}catch(r){console.error(r)}finally{V.value=!1}}),(r,f)=>{const g=ma,G=pa,w=ro,v=At;return t(),p(v,{visible:e(a),"onUpdate:visible":f[1]||(f[1]=I=>ge(a)?a.value=I:null),size:"large"},{default:i(()=>{var I;return[l("div",gn,[l("div",wn,[l("span",xn,m(r.$t("title.erdView"))+": "+m((I=e(U))==null?void 0:I.title),1),s(G,{type:"text",class:"!rounded-md mr-1 -mt-1.5",onClick:f[0]||(f[0]=j=>a.value=!1)},{icon:i(()=>[s(g,{"data-testid":"nc-root-user-invite-modal-close",class:"flex mx-auto"})]),_:1})]),l("div",kn,[e(V)?k("",!0):(t(),p(w,{key:0,"source-id":e($),"base-id":e(b),"show-all-columns":!1},null,8,["source-id","base-id"]))])])]}),_:1},8,["visible"])}}}),oa=Object.assign($n,{__name:"DlgBaseErd"}),hn={class:"ml-0.5"},In=Me({__name:"BaseOptions",props:{source:{},base:{},variant:{default:"small"},titleClass:{default:""},submenuClass:{default:""},showLabel:{type:Boolean,default:!1},showNocoDbImport:{type:Boolean,default:!1},popupOffset:{},showSourceSelector:{type:Boolean,default:!0}},setup(L){const F=L,u=jt(F,"source"),o=jt(F,"base"),{isUIAllowed:a}=lt(),$=Y(()=>o.value.project_role||o.value.workspace_role),{$e:U}=Je();function _(V,n){if(!V||!n)return;U("a:actions:import-airtable");const b=D(!0),{close:r}=pt(co,{modelValue:b,baseId:V,sourceId:n,showSourceSelector:F.showSourceSelector,"onUpdate:modelValue":f});function f(){b.value=!1,r(1e3)}}function R(V){var f;if(!((f=u.value)!=null&&f.id)||!u.value.base_id)return;U(`a:actions:import-${V}`);const n=D(!0),{close:b}=pt(uo,{modelValue:n,importType:V,baseId:u.value.base_id,sourceId:u.value.id,showSourceSelector:F.showSourceSelector,"onUpdate:modelValue":r});function r(){n.value=!1,b(1e3)}}return(V,n)=>{const b=ze,r=St,f=po,g=vt("e");return t(),p(f,{class:Q(["py-0",V.submenuClass]),"data-testid":"nc-sidebar-base-import",variant:V.variant,"title-class":V.titleClass,"popup-offset":V.popupOffset},Ds({title:i(()=>[bt(V.$slots,"title",{},()=>[s(b,{icon:"download",class:"opacity-80"}),q(" "+m(V.$t("labels.importData")),1)])]),default:i(()=>[bt(V.$slots,"label"),e(a)("airtableImport",{roles:e($),source:e(u)})?_e((t(),p(r,{key:"quick-import-airtable",onClick:n[0]||(n[0]=G=>_(e(u).base_id,e(u).id))},{default:i(()=>[s(b,{icon:"airtable",class:"max-w-3.75"}),l("div",hn,m(V.$t("labels.airtableBase")),1)]),_:1})),[[g,["c:import:airtable"]]]):k("",!0),e(a)("csvImport",{roles:e($),source:e(u)})?_e((t(),p(r,{key:"quick-import-csv",onClick:n[1]||(n[1]=G=>R("csv"))},{default:i(()=>[s(b,{icon:"ncFileTypeCsvSmall",class:"w-4 h-4"}),q(" "+m(V.$t("labels.csvFile")),1)]),_:1})),[[g,["c:import:csv"]]]):k("",!0),e(a)("jsonImport",{roles:e($),source:e(u)})?_e((t(),p(r,{key:"quick-import-json",onClick:n[2]||(n[2]=G=>R("json"))},{default:i(()=>[s(b,{icon:"ncFileTypeJson",class:"h-4"}),q(" "+m(V.$t("labels.jsonFile")),1)]),_:1})),[[g,["c:import:json"]]]):k("",!0),e(a)("excelImport",{roles:e($),source:e(u)})?_e((t(),p(r,{key:"quick-import-excel",onClick:n[3]||(n[3]=G=>R("excel"))},{default:i(()=>[s(b,{icon:"ncFileTypeExcel",class:"w-4 h-4"}),q(" "+m(V.$t("labels.microsoftExcel")),1)]),_:1})),[[g,["c:import:excel"]]]):k("",!0)]),_:2},[V.$slots.expandIcon?{name:"expandIcon",fn:i(()=>[bt(V.$slots,"expandIcon")]),key:"0"}:void 0]),1032,["class","variant","title-class","popup-offset"])}}}),Ms=Object.assign(In,{__name:"DashboardTreeViewBaseOptions"}),Dn={class:"flex gap-2 items-center"},Cn={class:"flex gap-2 items-center"},Tn={class:"flex gap-2 items-center"},jn={class:"flex gap-2 items-center"},Sn={class:"flex gap-2 items-center"},Vn={class:"flex gap-2 items-center"},Pn=Me({__name:"ActionMenu",props:{showBaseOption:{type:Function},dataReflectionState:{},dataReflectionText:{}},emits:["clickMenu","rename","openErdView","duplicateProject","openBaseSettings","copyProjectInfo","delete"],setup(L,{emit:F}){const u=L,o=F,a=Ye(ht),{appInfo:$}=Xe(),{orgRoles:U,isUIAllowed:_}=lt(),R=Y(()=>a.value.project_role||a.value.workspace_role),V=Y(()=>{var n,b,r,f;return{rename:_("baseRename"),baseDuplicate:_("baseDuplicate",{roles:[Os(U.value),R.value].join()}),baseOptions:(((r=(b=(n=a.value)==null?void 0:n.sources)==null?void 0:b[0])==null?void 0:r.enabled)||(((f=a.value)==null?void 0:f.sources)||[]).length>1)&&u.showBaseOption(a.value.sources[0]),baseDelete:_("baseDelete",{roles:[Os(U.value),R.value].join()})}});return(n,b)=>{const r=ze,f=St,g=Ut,G=Ms,w=zt,v=vt("e");return t(),p(w,{class:"nc-scrollbar-md !min-w-50",style:{maxHeight:"70vh",overflow:"overlay"},"data-testid":`nc-sidebar-base-${e(a).title}-options`,variant:"small",onClick:b[8]||(b[8]=I=>o("clickMenu"))},{default:i(()=>{var I,j,O;return[e(_)("baseRename")?(t(),p(f,{key:0,"data-testid":"nc-sidebar-project-rename",onClick:b[0]||(b[0]=h=>o("rename"))},{default:i(()=>[_e((t(),x("div",Dn,[s(r,{icon:"rename"}),q(" "+m(n.$t("general.rename")),1)])),[[v,["c:base:rename"]]])]),_:1})):k("",!0),e(V).baseDuplicate?(t(),p(f,{key:1,"data-testid":"nc-sidebar-base-duplicate",onClick:b[1]||(b[1]=h=>o("duplicateProject",e(a)))},{default:i(()=>[_e((t(),x("div",Cn,[s(r,{icon:"duplicate"}),q(" "+m(n.$t("general.duplicate")),1)])),[[v,["c:base:duplicate"]]])]),_:1})):k("",!0),["baseDuplicate","baseRename"].some(h=>e(_)(h))?(t(),p(g,{key:2})):k("",!0),("isEeUI"in n?n.isEeUI:e(We))?k("",!0):(t(),p(f,{key:"copy","data-testid":"nc-sidebar-base-copy-base-info",onClick:b[2]||(b[2]=Ve(h=>o("copyProjectInfo"),["stop"]))},{default:i(()=>[_e((t(),x("div",Tn,[s(r,{icon:"copy"}),q(" "+m(n.$t("activity.account.projInfo")),1)])),[[v,["c:base:copy-proj-info"]]])]),_:1})),(O=(j=(I=e(a))==null?void 0:I.sources)==null?void 0:j[0])!=null&&O.enabled?(t(),p(f,{key:"erd","data-testid":"nc-sidebar-base-relations",onClick:b[3]||(b[3]=h=>{var S,T;return o("openErdView",(T=(S=e(a))==null?void 0:S.sources)==null?void 0:T[0])})},{default:i(()=>[_e((t(),x("div",jn,[s(r,{icon:"ncErd"}),q(" "+m(n.$t("title.relations")),1)])),[[v,["c:base:erd"]]])]),_:1})):k("",!0),e(_)("apiDocs")?_e((t(),p(f,{key:"api","data-testid":"nc-sidebar-base-rest-apis",onClick:b[4]||(b[4]=Ve(h=>("openLink"in n?n.openLink:e(va))(`/api/v2/meta/bases/${e(a).id}/swagger`,e($).ncSiteUrl),["stop"]))},{default:i(()=>[s(r,{icon:"ncCode",class:"opacity-80 !max-w-3.9"}),q(" "+m(n.$t("activity.account.swagger")),1)]),_:1})),[[v,["e:api-docs"]]]):k("",!0),e(V).baseOptions?(t(),x(Se,{key:6},[s(g),s(G,{base:e(a),"onUpdate:base":b[5]||(b[5]=h=>ge(a)?a.value=h:null),source:e(a).sources[0]},null,8,["base","source"])],64)):k("",!0),["baseMiscSettings","baseDelete"].some(h=>e(_)(h))?(t(),p(g,{key:7})):k("",!0),e(_)("baseMiscSettings")?(t(),p(f,{key:"teamAndSettings","data-testid":"nc-sidebar-base-settings",class:"nc-sidebar-base-base-settings",onClick:b[6]||(b[6]=h=>o("openBaseSettings",e(a).id))},{default:i(()=>[_e((t(),x("div",Sn,[s(r,{icon:"settings"}),q(" "+m(n.$t("activity.settings")),1)])),[[v,["c:base:settings"]]])]),_:1})):k("",!0),e(V).baseDelete?(t(),p(f,{key:9,"data-testid":"nc-sidebar-base-delete",danger:"",onClick:b[7]||(b[7]=h=>o("delete"))},{default:i(()=>[l("div",Vn,[s(r,{icon:"delete",class:"w-4"}),q(" "+m(n.$t("general.delete")),1)])]),_:1})):k("",!0)]}),_:1},8,["data-testid"])}}}),Mn=Object.assign(Pn,{__name:"DashboardTreeViewProjectActionMenu"}),On={key:0,class:"flex flex-row items-center py-2.25 px-2.5 bg-gray-50 rounded-lg text-gray-700"},En={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},Bn=Me({__name:"Delete",props:{visible:{type:Boolean},tableId:{},baseId:{}},emits:["update:visible"],setup(L,{emit:F}){const u=L,a=mt(u,"visible",F),{$e:$,$api:U}=Je(),{getMeta:_,removeMeta:R}=Et(),{loadTables:V,baseUrl:n,isXcdbBase:b}=Ze(),{refreshCommandPalette:r}=ft(),{removeFromRecentViews:f}=nt(),{baseTables:g,activeTable:G}=ue(qe()),{openTable:w}=qe(),v=Y(()=>g.value.get(u.baseId)??[]),I=Y(()=>v.value.find(h=>h.id===u.tableId)),j=D(!1),O=async()=>{var T,z,K,oe,J,Z;if(!I.value)return;const h=JSON.parse(JSON.stringify(I.value)),S=(T=G.value)==null?void 0:T.id;j.value=!0;try{const E=await _(h.id,!0),W=(z=E==null?void 0:E.columns)==null?void 0:z.filter(X=>X.uidt===$s.LinkToAnotherRecord&&!ba(X));if(W!=null&&W.length&&!b(h.source_id)){const X=await Promise.all(W.map(async(ie,ne)=>{var $e;const he=await _(($e=ie==null?void 0:ie.colOptions)==null?void 0:$e.fk_related_model_id);return`${ne+1}. ${ie.title} is a LinkToAnotherRecord of ${he&&he.title||ie.title}`}));Be.info(Ge("div",{innerHTML:`<div style="padding:10px 4px">Unable to delete tables because of the following.
              <br><br>${X.join("<br>")}<br><br>
              Delete them & try again</div>`}));return}if(await U.dbTable.delete(h.id),await V(),f({baseId:u.baseId,tableId:h.id}),R(h.id),r(),$("a:table:delete"),S===h.id){const X=v.value.filter(ie=>ie.source_id===h.source_id);X.length===0?await Pt(n({id:u.baseId,type:"database"})):await w(X[0])}else if((K=G.value)!=null&&K.id){const X=await _((oe=G.value)==null?void 0:oe.id);X&&((J=X.columns)!=null&&J.find(ie=>fa(ie)))&&await _((Z=G.value)==null?void 0:Z.id,!0)}const ve=v.value.findIndex(X=>X.id===h.id);ve>-1&&v.value.splice(ve,1),a.value=!1}catch(E){Be.error(await Ke(E))}finally{j.value=!1}};return(h,S)=>{const T=mo,z=ta;return t(),p(z,{visible:e(a),"onUpdate:visible":S[0]||(S[0]=K=>ge(a)?a.value=K:null),"entity-name":h.$t("objects.table"),"on-delete":O},{"entity-preview":i(()=>[e(I)?(t(),x("div",On,[s(T,{meta:e(I),class:"nc-view-icon"},null,8,["meta"]),l("div",En,m(e(I).title),1)])):k("",!0)]),_:1},8,["visible","entity-name"])}}}),na=Object.assign(Bn,{__name:"DlgTableDelete"}),Ln={key:0,class:"flex flex-row items-center py-2 px-2.25 bg-gray-50 rounded-lg text-gray-700"},Nn={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-1.75",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},Un=Me({__name:"Delete",props:{visible:{type:Boolean},baseId:{}},emits:["update:visible"],setup(L,{emit:F}){const u=L,a=mt(u,"visible",F),$=tt(),{deleteProject:U,navigateToFirstProjectOrHome:_}=$,{bases:R}=ue($),{removeFromRecentViews:V}=nt(),{refreshCommandPalette:n}=ft(),b=Y(()=>R.value.get(u.baseId)),r=D(!1),f=async()=>{if(!b.value)return;const g=JSON.parse(JSON.stringify(b.value));r.value=!0;try{await U(g.id),n(),a.value=!1,g.id===$.activeProjectId&&await _()}catch(G){Be.error(await Ke(G))}finally{r.value=!1,V({baseId:g.id})}};return(g,G)=>{const w=_a,v=ta;return t(),p(v,{visible:e(a),"onUpdate:visible":G[0]||(G[0]=I=>ge(a)?a.value=I:null),"entity-name":g.$t("objects.project"),"on-delete":f},{"entity-preview":i(()=>[e(b)?(t(),x("div",Ln,[s(w,{color:("parseProp"in g?g.parseProp:e(Mt))(e(b).meta).iconColor,type:e(b).type,class:"nc-view-icon w-6 h-6 mx-1"},null,8,["color","type"]),l("div",Nn,m(e(b).title),1)])):k("",!0)]),_:1},8,["visible","entity-name"])}}}),Rn=Object.assign(Un,{__name:"DlgBaseDelete"}),An={key:1,class:"flex items-center gap-2"},zn={class:"text-nc-content-gray-emphasis font-semibold"},Fn={key:2,class:"flex items-center gap-2"},Gn={class:"text-nc-content-gray-emphasis font-semibold"},Wn={class:"mt-5 flex gap-3 flex-col"},Hn={key:0,class:"mb-5"},Kn={class:"text-nc-content-gray font-medium leading-5"},qn={class:"flex-1 capitalize truncate"},Jn={class:"flex gap-2 items-center"},Qn={key:0,class:"text-nc-content-gray-muted leading-4.5 text-xs"},Yn={class:"text-nc-content-gray-muted text-[13px] px-3 pt-2.5 pb-1.5 font-medium leading-5"},Zn=["onClick"],Xn={class:"flex-1 text-[13px] truncate font-semibold leading-5 capitalize w-full"},el={class:"flex items-center gap-2"},tl={key:0,class:"text-nc-content-gray-muted leading-4.5 text-xs"},sl={key:1,class:"text-nc-content-gray-emphasis my-5 font-medium"},al={class:"font-bold leading-5"},ol={key:2,class:"text-nc-content-gray-emphasis my-5 font-medium"},nl={class:"flex flex-row gap-x-2 justify-end"},ll=Me({__name:"Duplicate",props:{modelValue:{type:Boolean},base:{}},emits:["update:modelValue"],setup(L,{emit:F}){const u=L,a=mt(u,"modelValue",F),{navigateToProject:$}=Xe(),{refreshCommandPalette:U}=ft(),{isDashboardEnabled:_}=ue(vo()),{api:R}=es(),{$e:V,$poller:n}=Je(),b=tt(),{workspacesList:r,activeWorkspace:f}=$t(),{loadProjects:g,createProject:G}=b,w=D({includeData:!0,includeViews:!0,includeHooks:!0,includeComments:!0,includeScripts:!0,includeDashboards:_.value}),v=D(f),I=D(),j=D("pending"),O=D(!1),h=D(!1),S=Y(()=>{const{includeData:E,includeViews:W,includeHooks:ve,includeComments:X,includeScripts:ie}=w.value;return{excludeData:!E,excludeViews:!W,excludeHooks:!ve,excludeComments:!X,excludeScripts:!ie}}),T=Y(()=>[]),z=Y(()=>j.value==="loading"),K=D(),oe=async()=>{var E;try{j.value="loading";const W=Es[Math.floor(Math.random()*1e3)%Es.length],X=wa(W).complement(),ie=await R.base.duplicate(u.base.id,{options:S.value,base:{fk_workspace_id:We?(E=v.value)!=null&&E.id?v.value.id:u.base.fk_workspace_id:null,type:u.base.type,color:W,meta:JSON.stringify({theme:{primaryColor:W,accentColor:X.toHex8String()},iconColor:Mt(u.base.meta).iconColor})}});n.subscribe({id:ie.id},async ne=>{var he,$e,ke;if(ne.status!=="close")if(ne.status===kt.COMPLETED){const H=await g("workspace",(he=v==null?void 0:v.value)==null?void 0:he.id);K.value=H.find(N=>N.id===ie.base_id),j.value="success",U()}else ne.status===kt.FAILED&&(j.value="error",I.value=((ke=($e=ne==null?void 0:ne.data)==null?void 0:$e.error)==null?void 0:ke.message)||"Some error occurred",await g("workspace"),U())}),V("a:base:duplicate")}catch(W){Be.error(await Ke(W)),I.value=await Ke(W),j.value="error",a.value=!1}},J=E=>{v.value=E,h.value=!1},Z=()=>{switch(j.value){case"pending":{oe();break}case"error":{K.value=null,I.value=null,j.value="pending";break}case"success":{const E=K.value;$({workspaceId:void 0,baseId:E.id,type:E.type}),a.value=!1;break}}};return He(a,E=>{E||(j.value="pending")}),Bt("Enter",()=>{a.value&&oe()}),(E,W)=>{const ve=ze,X=Ws,ie=Ut,ne=ya,he=ga,$e=Rt,ke=ct,H=At,N=vt("e");return E.base?(t(),p(H,{key:0,visible:e(a),"onUpdate:visible":W[9]||(W[9]=te=>ge(a)?a.value=te:null),"mask-style":{"background-color":"rgba(0, 0, 0, 0.08)"},"mask-closable":!e(z),keyboard:!e(z),class:"!w-[30rem]","wrap-class-name":"nc-modal-base-duplicate"},{default:i(()=>[l("div",null,[l("div",{class:"text-base text-nc-content-gray-emphasis leading-6 font-bold self-center",onDblclick:W[0]||(W[0]=te=>O.value=!e(O))},[["pending","loading"].includes(e(j))?(t(),x(Se,{key:0},[q(m(E.$t("labels.duplicateBaseBaseTitle",{baseTitle:E.base.title})),1)],64)):e(j)==="success"?(t(),x("div",An,[s(ve,{class:"text-white w-6 h-6",icon:"checkFill"}),l("div",zn,m(E.$t("labels.duplicateBaseSuccessfull")),1)])):e(j)==="error"?(t(),x("div",Fn,[s(ve,{icon:"ncInfoSolid",class:"flex-none !text-nc-content-red-dark w-6 h-6"}),l("div",Gn,m(E.$t("labels.duplicateBaseFailed")),1)])):k("",!0)],32),["pending","loading"].includes(e(j))?(t(),x(Se,{key:0},[l("div",Wn,[l("div",{class:"flex gap-3 cursor-pointer leading-5 text-nc-content-gray font-medium items-center",onClick:W[1]||(W[1]=te=>e(w).includeData=!e(w).includeData)},[s(X,{checked:e(w).includeData},null,8,["checked"]),q(" "+m(E.$t("labels.includeRecords")),1)]),e(O)?(t(),x(Se,{key:0},[l("div",{class:"flex gap-3 cursor-pointer leading-5 text-nc-content-gray font-medium items-center",onClick:W[2]||(W[2]=te=>e(w).includeViews=!e(w).includeViews)},[s(X,{checked:e(w).includeViews},null,8,["checked"]),q(" "+m(E.$t("labels.includeView")),1)]),l("div",{class:"flex gap-3 cursor-pointer leading-5 text-nc-content-gray font-medium items-center",onClick:W[3]||(W[3]=te=>e(w).includeHooks=!e(w).includeHooks)},[s(X,{checked:e(w).includeHooks},null,8,["checked"]),q(" "+m(E.$t("labels.includeWebhook")),1)])],64)):k("",!0),l("div",{class:"flex gap-3 cursor-pointer leading-5 text-nc-content-gray font-medium items-center",onClick:W[4]||(W[4]=te=>e(w).includeComments=!e(w).includeComments)},[s(X,{checked:e(w).includeComments},null,8,["checked"]),q(" "+m(E.$t("labels.includeComments")),1)]),("isEeUI"in E?E.isEeUI:e(We))?(t(),x("div",{key:1,class:"flex gap-3 cursor-pointer leading-5 text-nc-content-gray font-medium items-center",onClick:W[5]||(W[5]=te=>e(w).includeScripts=!e(w).includeScripts)},[s(X,{checked:e(w).includeScripts},null,8,["checked"]),q(" "+m(E.$t("labels.includeScripts")),1)])):k("",!0),e(_)&&("isEeUI"in E?E.isEeUI:e(We))?(t(),x("div",{key:2,class:"flex gap-3 cursor-pointer leading-5 text-nc-content-gray font-medium items-center",onClick:W[6]||(W[6]=te=>e(w).includeDashboards=!e(w).includeDashboards)},[s(X,{checked:e(w).includeDashboards},null,8,["checked"]),q(" "+m(E.$t("labels.includeDashboards")),1)])):k("",!0)]),l("div",{class:Q([{"mb-5":!("isEeUI"in E?E.isEeUI:e(We))},"mt-5 text-nc-content-gray-subtle2 font-medium"])},m(E.$t("labels.baseDuplicateMessage")),3),("isEeUI"in E?E.isEeUI:e(We))?(t(),x("div",Hn,[s(ie,{"divider-class":"!my-5"}),l("div",Kn,[q(m(E.$t("labels.workspace"))+" ",1),s($e,{visible:e(h),"onUpdate:visible":W[7]||(W[7]=te=>ge(h)?h.value=te:null),class:"mt-2"},{overlay:i(()=>[s(he,{value:e(v),"item-height":28,"close-on-select":"",class:"nc-base-workspace-selection","min-items-for-search":6,"container-class-name":"w-full",list:e(T),"option-label-key":"title"},{listHeader:i(()=>[l("div",Yn,m(E.$t("labels.duplicateBaseMessage")),1),s(ie)]),listItem:i(({option:te})=>{var ce,we;return[l("div",{class:"flex gap-2 w-full items-center",onClick:c=>J(te)},[s(ne,{workspace:te,size:"small"},null,8,["workspace"]),l("div",Xn,m(te.title),1),l("div",el,[((ce=e(f))==null?void 0:ce.id)===te.id?(t(),x("div",tl,m(E.$t("labels.currentWorkspace")),1)):k("",!0),te.id===((we=e(v))==null?void 0:we.id)?(t(),p(ve,{key:1,class:"text-brand-500 w-4 h-4",icon:"ncCheck"})):k("",!0)])],8,Zn)]}),_:1},8,["value","list"])]),default:i(()=>{var te,ce,we;return[l("div",{class:Q(["rounded-lg border-1 transition-all cursor-pointer flex items-center border-nc-border-gray-medium h-8 py-1 gap-2 px-3",{"!border-brand-500 !shadow-selected":e(h)}]),style:{"box-shadow":"0px 0px 4px 0px rgba(0, 0, 0, 0.08)"}},[s(ne,{size:"small",workspace:e(v)},null,8,["workspace"]),l("div",qn,m((te=e(v))==null?void 0:te.title),1),l("div",Jn,[((ce=e(f))==null?void 0:ce.id)===((we=e(v))==null?void 0:we.id)?(t(),x("div",Qn,m(E.$t("labels.currentWorkspace")),1)):k("",!0),s(ve,{class:Q([{"transform rotate-180":e(h)},"text-nc-content-gray transition-all w-4 h-4"]),icon:"ncChevronDown"},null,8,["class"])])],2)]}),_:1},8,["visible"])])])):k("",!0)],64)):e(j)==="success"?(t(),x("div",sl,[W[10]||(W[10]=q(" Base ")),l("span",al,'"'+m(E.base.title)+'"',1),W[11]||(W[11]=q(" has finished duplication. "))])):e(j)==="error"?(t(),x("div",ol,m(E.$t("labels.errorMessage"))+" "+m(e(I)),1)):k("",!0)]),l("div",nl,[e(z)?k("",!0):(t(),p(ke,{key:"back",type:"secondary",size:"small",onClick:W[8]||(W[8]=te=>a.value=!1)},{default:i(()=>[q(m(E.$t("general.cancel")),1)]),_:1})),_e((t(),p(ke,{key:"submit",size:"small",loading:e(z),disabled:e(z),onClick:Z},{default:i(()=>[e(j)==="pending"?(t(),x(Se,{key:0},[q(m(E.$t("general.duplicate"))+" "+m(E.$t("objects.project")),1)],64)):e(j)==="loading"?(t(),x(Se,{key:1},[q(" Duplicating "+m(E.$t("objects.project")),1)],64)):e(j)==="success"?(t(),x(Se,{key:2},[q(m(E.$t("labels.goToBase")),1)],64)):e(j)==="error"?(t(),x(Se,{key:3},[q(m(E.$t("labels.tryAgain")),1)],64)):k("",!0)]),_:1},8,["loading","disabled"])),[[N,["a:base:duplicate"]]])])]),_:1},8,["visible","mask-closable","keyboard"])):k("",!0)}}}),il=Object.assign(it(ll,[["__scopeId","data-v-a8ecfb75"]]),{__name:"DlgBaseDuplicate"}),rl=ns(()=>is(()=>import("./WDYzPv8C.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url).then(L=>L.default||L)),cl=["data-testid","data-base-id"],dl={class:"flex flex-col gap-3"},ul={class:"text-small leading-[18px] mb-1"},pl={key:0},ml={class:"text-[10px] leading-[14px] text-gray-300 uppercase mb-1"},vl=["data-id","data-testid"],bl={class:"flex items-center select-none w-6 h-full"},fl={key:1},_l={class:"nc-base-option-item flex gap-2 items-center"},yl={class:"nc-base-option-item flex gap-2 items-center"},gl={class:"nc-base-option-item flex gap-2 items-center"},wl={class:"h-[80vh]"},xl=Me({__name:"ProjectNode",props:{isProjectHeader:{type:Boolean}},setup(L,{expose:F}){const u=L,{isProjectHeader:o}=ss(u),a=Ge(xa,{class:"!text-gray-400",style:{fontSize:"0.85rem"},spin:!0}),U=vs().currentRoute,{isSharedBase:_}=ue(Ze()),{setMenuContext:R,duplicateTable:V,contextMenuTarget:n,tableRenameId:b}=Ye(os),r=Ye(ht),f=tt(),{isMobileMode:g,user:G}=Xe(),{createProject:w,updateProject:v,getProjectMetaInfo:I}=f,{bases:j,basesUser:O,showProjectList:h}=ue(f),S=Y(()=>{var y;return(O.value.get((y=r.value)==null?void 0:y.id)||[]).map(d=>({...d,base_roles:d.roles,roles:d.roles??(d.workspace_roles?ka[d.workspace_roles]??Bs.NO_ACCESS:Bs.NO_ACCESS)}))}),T=Y(()=>{var y;return(y=S.value.find(d=>{var se;return d.id===((se=G.value)==null?void 0:se.id)}))==null?void 0:y.roles}),{loadProjectTables:z,openTableCreateDialog:K}=qe(),{activeTable:oe}=ue(qe()),{isUIAllowed:J}=lt(),{meta:Z,control:E}=bs(),{refreshCommandPalette:W}=ft(),ve=D(!1),X=D(""),ie=D(""),ne=D(!1),{t:he}=ts(),$e=D(),ke=Y(()=>r.value.project_role||r.value.workspace_role),{activeProjectId:H}=ue(tt()),{baseUrl:N}=Ze(),{$e:te}=Je(),ce=D(!1),we=D(!1),c=D({}),P=D([]),re=D(!1),le=D(!1),{refreshViewTabTitle:ye}=nt(),de=Y(()=>{var se;const y=String((se=U.value)==null?void 0:se.name).split("baseId-index-index");if(y.length<=1)return!1;const d=y[y.length-1];return d.split("-").length===2||d.split("-").length===1}),xe=y=>["airtableImport","csvImport","jsonImport","excelImport"].some(d=>J(d,{source:y})),Ie=(y=!1)=>{y&&(we.value=!1),!(!J("baseRename")||we.value)&&(ve.value=!0,X.value=r.value.title,yt(()=>{var d,se;(d=$e.value)==null||d.focus(),(se=$e.value)==null||se.select()}))},C=async()=>{if(X.value&&(X.value=X.value.trim()),!X.value){ve.value=!1,X.value="";return}try{await v(r.value.id,{title:X.value}),ve.value=!1,X.value="",te("a:base:rename"),ye==null||ye()}catch(y){Be.error(await Ke(y))}},{copy:A}=$a(!0),ae=async()=>{try{await A(Object.entries(await I(r.value.id)).map(([y,d])=>`${y}: **${d}**`).join(`
`))&&Be.info(he("msg.info.copiedToClipboard"))}catch(y){console.error(y),Be.error(y.message)}},pe=async(y,d)=>{try{const se={...Mt(d.meta),iconColor:y};f.updateProject(d.id,{meta:JSON.stringify(se)}),te("a:base:icon:color:navdraw",{iconColor:y})}catch(se){Be.error(await Ke(se))}finally{W()}};function be(y,d=!0){var Ae,at;let se=(Ae=r.value.sources)==null?void 0:Ae[0].id;K({baseId:(at=r.value)==null?void 0:at.id,sourceId:se,showSourceSelector:d,onCloseCallback:()=>{r.value.isExpanded=!0,(!P.value||!P.value.includes(`collapse-${se}`))&&P.value.push(`collapse-${se}`)}})}const De=D(!1);async function Pe(y=!0){if(De.value)return;De.value=!0,f.isProjectPopulated(r.value.id)||z(r.value.id);try{be(void 0,y)}finally{De.value=!1}}const Ce=async(y,d,se)=>{if(!y||o.value)return;d&&se&&(d=!1,se=!1);const Ae=ls()?Z.value:E.value;if(!Ae&&H.value===y.id){h.value=!1;return}if(!se&&!Ae&&te("c:base:open"),se=g.value||se,Ae&&!d){await Pt(`${Ae?"#":""}${N({id:y.id,type:"database",isSharedBase:_.value})}`,Ae?{open:Hs}:void 0);return}se?y.isExpanded=!y.isExpanded:y.isExpanded=!0;const at=f.isProjectPopulated(y.id);if(at||(y.isLoading=!0),d||await Pt(N({id:y.id,type:"database",isSharedBase:_.value})),at||await z(y.id),!at){y.isLoading=!1;const gt=j.value.get(y.id);gt.isLoading=!1}h.value=!1};function Te(y){te("c:project:relation");const d=D(!0),{close:se}=pt(oa,{modelValue:d,sourceId:y.id,"onUpdate:modelValue":()=>Ae(),baseId:r.value.id});function Ae(){d.value=!1,se(1e3)}}const Ee=Y(()=>{var y,d;if(n.type==="source")return n.value;if(n.type==="table"){const se=(d=(y=r.value)==null?void 0:y.sources)==null?void 0:d.find(Ae=>Ae.id===n.value.source_id);if(se)return se}return null});He(()=>{var y;return(y=oe.value)==null?void 0:y.id},async()=>{if(!oe.value)return;const y=oe.value.source_id;y&&(P.value.includes(`collapse-${y}`)||P.value.push(`collapse-${y}`))},{immediate:!0}),Bt("Escape",()=>{ce.value&&(ce.value=!1),we.value&&(we.value=!1);for(const y of Object.keys(c.value))c.value[y]=!1});const Oe=D(!1),Le=D(),fe=y=>{Le.value=y,Oe.value=!0},Ne=()=>{re.value=!0,te("c:table:delete")},ee=()=>{le.value=!0,te("c:project:delete")},st=y=>{var d;return(d=r.value.sources)==null?void 0:d.find(se=>se.id===y)},rt=D();He(()=>{var y;return rt.value&&H.value===((y=r.value)==null?void 0:y.id)},async y=>{var d;y&&(await yt(),(d=rt.value)==null||d.scrollIntoView({behavior:"smooth",block:"nearest"}))},{immediate:!0});const et=async y=>{await Pt(`/nc/${y}?page=base-settings`)},Re=D(!0),M=Y(()=>_.value||!n.value?!1:n.type==="table"),B=()=>{ce.value=!1,we.value=!1};return F({enableEditMode:Ie,addNewProjectChildEntity:Pe,isAddNewProjectChildEntityLoading:De}),(y,d)=>{var Gt,Wt,Ht,Kt,qt;const se=ze,Ae=ha,at=Ia,gt=Nt,Fe=Lt,It=ct,rs=Mn,cs=Rt,_t=ea,Dt=Ut,Ft=St,fs=zt,_s=na,ys=Rn,gs=il,ws=rl,xs=At,Qe=vt("e");return t(),x(Se,null,[s(cs,{trigger:[e(o)?"click":"contextmenu"],"overlay-class-name":"nc-dropdown-tree-view-context-menu",disabled:e(o)?e(ve)||e(_)||!!e(g):void 0},Ds({default:i(()=>[l("div",{ref_key:"labelEl",ref:rt,class:Q(["nc-base-sub-menu rounded-md",{active:e(r).isExpanded}]),"data-testid":`nc-sidebar-base-${e(r).title}`,"data-base-id":e(r).id},[s(Fe,{"tooltip-style":{width:"300px",zIndex:"1049"},"overlay-inner-style":{width:"300px"},trigger:"hover",placement:e(o)?"rightTop":"right","hide-on-click":"",disabled:e(ve)||e(ce)||e(De)||!e(Re)||!e(S).length||e(we)||!!e(g)},{title:i(()=>[l("div",dl,[l("div",ul,m(e(r).title),1),e(T)?(t(),x("div",pl,[l("div",ml,m(y.$t("title.yourBaseRole")),1),l("div",{class:Q(["text-xs font-medium flex items-start gap-2 flex items-center gap-1",{"text-purple-200":e(Ct)[e(T)]==="purple","text-blue-200":e(Ct)[e(T)]==="blue","text-green-200":e(Ct)[e(T)]==="green","text-orange-200":e(Ct)[e(T)]==="orange","text-yellow-200":e(Ct)[e(T)]==="yellow","text-red-200":e(Ct)[e(T)]==="red","text-maroon-200":e(Ct)[e(T)]==="maroon"}])},[s(se,{icon:e(Da)[e(T)],class:"w-4 h-4"},null,8,["icon"]),q(" "+m(y.$t(`objects.roleType.${e(Ca)[e(T)]}`)),1)],2)])):k("",!0)])]),default:i(()=>{var me,dt,wt,xt,ut,Vt,Jt,Qt,ds,Yt;return[l("div",{class:Q(["flex items-center gap-0.75",{"py-0.5 cursor-pointer":!e(o)}]),onContextmenu:d[24]||(d[24]=je=>e(R)("base",e(r)))},[l("div",{ref:"baseNodeRefs",class:Q([{"nc-project-header":e(o),"text-subHeading2 gap-2 hover:bg-nc-bg-gray-medium h-8 cursor-pointer px-1 max-w-full":e(o),"flex-grow w-full":e(o)&&e(ve),"bg-nc-bg-gray-medium":e(o)&&e(we),"h-7 pr-1 pl-2.5 xs:pl-0 flex-grow w-full":!e(o),"bg-primary-selected active":e(H)===e(r).id&&e(de)&&!e(g)&&!e(o),"hover:bg-gray-200":!(e(H)===e(r).id&&e(de))&&!e(o)},"nc-sidebar-node base-title-node flex-grow rounded-md group flex items-center w-full"]),"data-id":e(r).id,"data-testid":`nc-sidebar-base-title-${e(r).title}`},[l("div",{class:Q(["flex items-center",{"mr-1":!e(o)}]),onClick:d[1]||(d[1]=je=>Ce(e(r))),onMouseenter:d[2]||(d[2]=je=>Re.value=!1),onMouseleave:d[3]||(d[3]=je=>Re.value=!0)},[l("div",bl,[e(r).isLoading?(t(),p(Ae,{key:0,class:"!ml-1.25 !flex !flex-row !items-center !my-0.5 w-8",indicator:e(a)},null,8,["indicator"])):(t(),x("div",fl,[(t(),p(at,{key:`${e(r).id}_${("parseProp"in y?y.parseProp:e(Mt))(e(r).meta).iconColor}`,type:(me=e(r))==null?void 0:me.type,"model-value":("parseProp"in y?y.parseProp:e(Mt))(e(r).meta).iconColor,size:"small","icon-class":e(o)?"h-6 w-6":"",readonly:((dt=e(r))==null?void 0:dt.type)&&((wt=e(r))==null?void 0:wt.type)!=="database"||!e(J)("baseRename")||e(we),"onUpdate:modelValue":d[0]||(d[0]=je=>pe(je,e(r)))},null,8,["type","model-value","icon-class","readonly"]))]))])],34),e(ve)?(t(),p(gt,{key:0,ref_key:"input",ref:$e,value:e(X),"onUpdate:value":d[4]||(d[4]=je=>ge(X)?X.value=je:null),class:Q(["capitalize !bg-transparent !flex-1 mr-4 !rounded-md !pr-1.5 !h-6 animate-sidebar-node-input-padding",e(H)===e(r).id&&e(de)&&!e(o)?"!text-brand-600 !font-semibold":"!text-gray-700"]),style:{fontWeight:"inherit"},onClick:d[5]||(d[5]=Ve(()=>{},["stop"])),onKeyup:[Tt(C,["enter"]),Tt(C,["esc"])],onBlur:C,onKeydown:d[6]||(d[6]=Ve(()=>{},["stop"]))},null,8,["value","class"])):(t(),p(Fe,{key:1,disabled:!!e(S).length,class:Q(["nc-sidebar-node-title capitalize text-ellipsis overflow-hidden select-none flex-1",[e(H)===e(r).id&&e(de)&&!e(o)?"text-brand-600 font-semibold":"text-gray-700",{"flex-1":!e(o)}]]),style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"},"show-on-truncate-only":"",onClick:d[8]||(d[8]=je=>Ce(e(r)))},{title:i(()=>[q(m(e(r).title),1)]),default:i(()=>[l("span",{onDblclick:d[7]||(d[7]=Ve(je=>Ie(),["stop"]))},m(e(r).title),33)]),_:1},8,["disabled","class"])),e(ve)?k("",!0):(t(),x(Se,{key:2},[e(o)?(t(),x(Se,{key:0},[e(g)?k("",!0):(t(),p(se,{key:0,icon:"chevronDown",class:"flex-none text-nc-content-gray-muted"}))],64)):(t(),x(Se,{key:1},[e(_)?k("",!0):(t(),p(cs,{key:0,visible:e(ce),"onUpdate:visible":d[17]||(d[17]=je=>ge(ce)?ce.value=je:null),trigger:["click"]},{overlay:i(()=>[s(rs,{"show-base-option":je=>xe(je),onClickMenu:B,onRename:d[12]||(d[12]=je=>Ie()),onDuplicateProject:d[13]||(d[13]=je=>fe(je)),onCopyProjectInfo:d[14]||(d[14]=je=>ae()),onOpenErdView:d[15]||(d[15]=je=>Te(je)),onOpenBaseSettings:d[16]||(d[16]=je=>et(je)),onDelete:ee},null,8,["show-base-option"])]),default:i(()=>[_e((t(),p(It,{class:Q(["nc-sidebar-node-btn",{"!text-black !opacity-100 !inline-block":e(ce)}]),"data-testid":"nc-sidebar-context-menu",type:"text",size:e(o)?"small":"xxsmall",onClick:d[9]||(d[9]=Ve(()=>{},["stop"])),onMouseenter:d[10]||(d[10]=je=>Re.value=!1),onMouseleave:d[11]||(d[11]=je=>Re.value=!0)},{default:i(()=>[s(se,{icon:e(o)?"threeDotVertical":"threeDotHorizontal",class:Q(["text-xl w-4.75",{"text-nc-content-gray-subtle":e(o)}])},null,8,["icon","class"])]),_:1},8,["class","size"])),[[Qe,["c:base:options"]]])]),_:1},8,["visible"])),e(J)("tableCreate",{roles:e(ke),source:(ut=(xt=e(r))==null?void 0:xt.sources)==null?void 0:ut[0]})?_e((t(),p(It,{key:1,disabled:!((Qt=(Jt=(Vt=e(r))==null?void 0:Vt.sources)==null?void 0:Jt[0])!=null&&Qt.enabled)&&((Yt=(ds=e(r))==null?void 0:ds.sources)==null?void 0:Yt.length)===1,class:Q(["nc-sidebar-node-btn",{"!text-black !inline-block !opacity-100":e(De),"!inline-block !opacity-100":e(ce)}]),size:"xxsmall",type:"text","data-testid":"nc-sidebar-add-base-entity",loading:e(De),onClick:d[18]||(d[18]=Ve(je=>Pe(),["stop"])),onMouseenter:d[19]||(d[19]=je=>Re.value=!1),onMouseleave:d[20]||(d[20]=je=>Re.value=!0)},{default:i(()=>[s(Fe,{title:y.$t("activity.createTable"),"hide-on-click":""},{default:i(()=>[s(se,{icon:"plus",class:"text-xl leading-5",style:{"-webkit-text-stroke":"0.15px"}})]),_:1},8,["title"])]),_:1},8,["disabled","class","loading"])),[[Qe,["c:base:create-table"]]]):k("",!0),s(It,{type:"text",size:"xxsmall",class:Q(["nc-sidebar-node-btn nc-sidebar-expand !xs:opacity-100 !mr-0 mt-0.5",{"!opacity-100":e(ce)}]),onClick:d[21]||(d[21]=je=>Ce(e(r),!0,!0)),onMouseenter:d[22]||(d[22]=je=>Re.value=!1),onMouseleave:d[23]||(d[23]=je=>Re.value=!0)},{default:i(()=>[s(se,{icon:"chevronRight",class:"group-hover:visible cursor-pointer transform transition-transform duration-200 text-[20px]"})]),_:1},8,["class"])],64))],64))],10,vl)],34)]}),_:1},8,["placement","disabled"])],10,cl)]),_:2},[e(M)||e(o)?{name:"overlay",fn:i(()=>[e(o)?(t(),p(rs,{key:0,"show-base-option":me=>xe(me),onClickMenu:B,onRename:d[25]||(d[25]=me=>Ie(!0)),onDuplicateProject:d[26]||(d[26]=me=>fe(me)),onCopyProjectInfo:d[27]||(d[27]=me=>ae()),onOpenErdView:d[28]||(d[28]=me=>Te(me)),onOpenBaseSettings:d[29]||(d[29]=me=>et(me)),onDelete:ee},null,8,["show-base-option"])):(t(),p(fs,{key:1,class:Q(["!py-0 rounded text-sm",{"!min-w-62.5":e(n).type==="table","!min-w-50":e(n).type!=="table"}]),variant:"small"},{default:i(()=>{var me,dt,wt,xt,ut,Vt,Jt,Qt;return[e(n).type==="base"&&e(r).type==="database"?(t(),x(Se,{key:0},[],64)):e(n).type==="source"?(t(),x(Se,{key:1},[],64)):e(n).type==="table"?(t(),x(Se,{key:2},[e(n).value?(t(),p(_t,{key:0,id:e(n).value.id,tooltip:y.$t("labels.clickToCopyTableID"),label:y.$t("labels.tableIdColon",{tableId:(me=e(n).value)==null?void 0:me.id})},null,8,["id","tooltip","label"])):k("",!0),e(J)("tableRename",{source:st((dt=e(n).value)==null?void 0:dt.source_id)})||e(J)("tableDelete",{source:st((wt=e(n).value)==null?void 0:wt.source_id)})?(t(),x(Se,{key:1},[s(Dt),e(J)("tableRename",{source:st((xt=e(n).value)==null?void 0:xt.source_id)})?(t(),p(Ft,{key:0,onClick:d[30]||(d[30]=ds=>{var Yt,je;return b.value=`${(Yt=e(n).value)==null?void 0:Yt.id}:${(je=e(n).value)==null?void 0:je.source_id}`})},{default:i(()=>[_e((t(),x("div",_l,[s(se,{icon:"rename"}),q(" "+m(y.$t("general.rename"))+" "+m(y.$t("objects.table")),1)])),[[Qe,["c:table:rename"]]])]),_:1})):k("",!0),e(J)("tableDuplicate",{source:st((ut=e(n).value)==null?void 0:ut.source_id)})&&((Vt=e(Ee))!=null&&Vt.is_meta||(Jt=e(Ee))!=null&&Jt.is_local)?(t(),p(Ft,{key:1,onClick:d[31]||(d[31]=ds=>e(V)(e(n).value))},{default:i(()=>[_e((t(),x("div",yl,[s(se,{icon:"duplicate"}),q(" "+m(y.$t("general.duplicate"))+" "+m(y.$t("objects.table")),1)])),[[Qe,["c:table:duplicate"]]])]),_:1})):k("",!0),s(Dt),e(J)("tableDelete",{source:st((Qt=e(n).value)==null?void 0:Qt.source_id)})?(t(),p(Ft,{key:2,danger:"",onClick:Ne},{default:i(()=>[l("div",gl,[s(se,{icon:"delete"}),q(" "+m(y.$t("general.delete"))+" "+m(y.$t("objects.table")),1)])]),_:1})):k("",!0)],64)):k("",!0)],64)):k("",!0)]}),_:1},8,["class"]))]),key:"0"}:void 0]),1032,["trigger","disabled"]),(Gt=e(n).value)!=null&&Gt.id&&((Wt=e(r))!=null&&Wt.id)?(t(),p(_s,{key:0,visible:e(re),"onUpdate:visible":d[32]||(d[32]=me=>ge(re)?re.value=me:null),"table-id":(Ht=e(n).value)==null?void 0:Ht.id,"base-id":(Kt=e(r))==null?void 0:Kt.id},null,8,["visible","table-id","base-id"])):k("",!0),s(ys,{visible:e(le),"onUpdate:visible":d[33]||(d[33]=me=>ge(le)?le.value=me:null),"base-id":(qt=e(r))==null?void 0:qt.id},null,8,["visible","base-id"]),e(Le)?(t(),p(gs,{key:1,modelValue:e(Oe),"onUpdate:modelValue":d[34]||(d[34]=me=>ge(Oe)?Oe.value=me:null),base:e(Le)},null,8,["modelValue","base"])):k("",!0),s(xs,{visible:e(ne),"onUpdate:visible":d[35]||(d[35]=me=>ge(ne)?ne.value=me:null),size:"large"},{default:i(()=>{var me;return[l("div",wl,[s(ws,{"base-id":(me=e(r))==null?void 0:me.id,"source-id":e(ie)},null,8,["base-id","source-id"])])]}),_:1},8,["visible"])],64)}}}),la=Object.assign(it(xl,[["__scopeId","data-v-692631c9"]]),{__name:"DashboardTreeViewProjectNode"}),kl={key:0,class:"px-2 h-11 flex items-center"},$l={class:"px-1 text-bodySmBold text-nc-content-gray-subtle bg-nc-bg-gray-medium rounded"},hl=Me({__name:"SearchInput",props:{isLoading:{type:Boolean}},setup(L){const F=L,{isLoading:u}=ss(F),{baseHomeSearchQuery:o}=ue(tt()),{isSharedBase:a}=ue(Ze()),{commandPalette:$}=ft(),{isMobileMode:U}=Xe(),_=()=>{var R;u.value||(R=$.value)==null||R.open()};return(R,V)=>{const n=ze,b=Nt;return!e(U)&&!e(a)?(t(),x("div",kl,[l("div",{class:"w-full",onClick:_},[s(b,{value:e(o),"onUpdate:value":V[0]||(V[0]=r=>ge(o)?o.value=r:null),type:"text",class:"nc-input-border-on-value nc-input-shadow !h-8 !pl-2.5 !pr-2 !py-1 !rounded-lg",placeholder:"Quick search...","allow-clear":"",readonly:"",onKeydown:V[1]||(V[1]=Ve(()=>{},["stop"]))},{prefix:i(()=>[s(n,{icon:"search",class:"mr-1 h-4 w-4 text-nc-content-gray-muted group-hover:text-nc-content-gray-extreme"})]),suffix:i(()=>[l("div",$l,m(("renderCmdOrCtrlKey"in R?R.renderCmdOrCtrlKey:e(io))(!0))+" K ",1)]),_:1},8,["value"])])])):k("",!0)}}}),Il=Object.assign(hl,{__name:"DashboardTreeViewProjectHomeSearchInput"}),Dl={class:"w-full flex items-center"},Cl={class:"flex-1 flex items-center gap-2 cursor-pointer"},Tl={class:"w-8 h-8 flex items-center justify-center rounded-lg cursor-pointer group-hover:text-nc-content-brand"},jl={class:"normal-case min-w-[180px]"},Sl=Me({__name:"CreateNewMenu",props:{visible:{type:Boolean}},emits:["@update:visible","newTable"],setup(L,{emit:F}){const u=L,o=F,a=mt(u,"visible",o),$=Ye(ht),U=Y(()=>{var V;return(V=$.value.sources)==null?void 0:V[0]}),{isUIAllowed:_}=lt(),R=V=>(V.enabled||($.value.sources||[]).length>1)&&["airtableImport","csvImport","jsonImport","excelImport"].some(n=>_(n,{source:V}));return(V,n)=>{const b=ze,r=bo,f=Ms,g=St,G=zt;return t(),p(G,{variant:"large","data-testid":"nc-home-create-new-menu",onClick:n[3]||(n[3]=w=>a.value=!1)},{default:i(()=>[s(g,{"inner-class":"w-full",class:"nc-menu-item-combo","data-testid":"create-new-table",onClick:n[2]||(n[2]=w=>o("newTable"))},{default:i(()=>[l("div",Dl,[l("div",Cl,[s(b,{icon:"table",class:"!w-4 !h-4"}),q(" "+m(V.$t("objects.table")),1)]),e(U)&&R(e(U))?(t(),x(Se,{key:0},[l("div",{class:"px-1 cursor-default flex items-center h-9 -my-2",onClick:n[0]||(n[0]=Ve(()=>{},["stop"]))},n[4]||(n[4]=[l("div",{class:"h-7 w-px flex-none bg-nc-border-gray-medium"},null,-1)])),s(f,{base:e($),"onUpdate:base":n[1]||(n[1]=w=>ge($)?$.value=w:null),source:e(U),variant:"large","submenu-class":"nc-sub-menu-item-icon-only","title-class":"!p-0 hover:bg-brand-50 group","show-noco-db-import":"","popup-offset":[8,-2]},{title:i(()=>[l("div",Tl,[s(b,{icon:"ncChevronRight"})])]),expandIcon:i(()=>n[5]||(n[5]=[])),label:i(()=>[s(r,null,{default:i(()=>[l("span",jl,m(V.$t("labels.importOptions")),1)]),_:1})]),_:1},8,["base","source"])],64)):k("",!0)])]),_:1})]),_:1})}}}),Vl=Object.assign(Sl,{__name:"DashboardTreeViewProjectCreateNewMenu"}),Pl=Me({__name:"Permissions",props:{visible:{type:Boolean},tableId:{},title:{}},emits:["update:visible"],setup(L){return(F,u)=>{const o=Ss;return t(),p(o)}}}),Ml=Object.assign(Pl,{__name:"DlgTablePermissions"}),Ol={class:"item","data-testid":"sidebar-view-create-grid"},El={class:"item-inner"},Bl={class:"item","data-testid":"sidebar-view-create-form"},Ll={class:"item-inner"},Nl={class:"item","data-testid":"sidebar-view-create-gallery"},Ul={class:"item-inner"},Rl={class:"item"},Al={class:"item-inner"},zl={class:"item"},Fl={class:"item-inner"},Gl={class:"item"},Wl={class:"item-inner"},Hl=Me({__name:"CreateViewBtn",props:{alignLeftLevel:{},source:{}},setup(L){const F=L,{$e:u}=Je(),o=jt(F,"alignLeftLevel"),a=nt(),{loadViews:$,onOpenViewCreateModal:U}=a,{isAiFeaturesEnabled:_}=Ta(),R=Ye(Cs),V=Ye(ht),n=D(!1),b=D(),r=D(!1),f=Y(()=>{var v;return((v=R.value)==null?void 0:v.type)==="view"}),g=Y(()=>{var v;return(v=R.value)==null?void 0:v.synced}),G=Y(()=>o.value===1?"nc-view-create-dropdown nc-view-create-dropdown-left-1":o.value===2?"nc-view-create-dropdown nc-view-create-dropdown-left-2":"nc-view-create-dropdown");async function w({title:v="",type:I,copyViewId:j,groupingFieldColumnId:O,calendarRange:h,coverImageColumnId:S}){var T;n.value||(u("c:view:create:navdraw",{view:I==="AI"?I:qs[I]}),b.value=I,n.value=!0,await $({tableId:R.value.id}),r.value=!1,n.value=!1,U({title:v,type:I,copyViewId:j,groupingFieldColumnId:O,calendarRange:h,coverImageColumnId:S,baseId:V.value.id,tableId:R.value.id,sourceId:(T=R.value)==null?void 0:T.source_id}))}return(v,I)=>{const j=Ks,O=Ts,h=ze,S=St,T=Lt,z=Ut,K=zt,oe=Rt;return t(),p(oe,{visible:e(r),"onUpdate:visible":I[6]||(I[6]=J=>ge(r)?r.value=J:null),"overlay-class-name":e(G),"destroy-popup-on-hide":"",onClick:I[7]||(I[7]=Ve(J=>r.value=!0,["stop"]))},{overlay:i(()=>[s(K,{class:"max-w-48",variant:"medium"},{default:i(()=>{var J;return[s(S,{onClick:I[0]||(I[0]=Ve(Z=>w({type:e(Ue).GRID}),["stop"]))},{default:i(()=>[l("div",Ol,[l("div",El,[s(j,{meta:{type:e(Ue).GRID}},null,8,["meta"]),l("div",null,m(v.$t("objects.viewType.grid")),1)]),e(b)===e(Ue).GRID&&e(n)?(t(),p(O,{key:0})):(t(),p(h,{key:1,class:"plus",icon:"plus"}))])]),_:1}),s(T,{title:e(g)?v.$t("tooltip.formViewCreationNotSupportedForSyncedTable"):v.$t("tooltip.sourceDataIsReadonly"),disabled:!v.source.is_data_readonly&&!e(f)&&!e(g)},{default:i(()=>[s(S,{disabled:!!v.source.is_data_readonly||e(f)||e(g),onClick:I[1]||(I[1]=Z=>w({type:e(Ue).FORM}))},{default:i(()=>[l("div",Bl,[l("div",Ll,[s(j,{meta:{type:e(Ue).FORM},class:Q({"!opacity-50":!!v.source.is_data_readonly||e(f)||e(g)})},null,8,["meta","class"]),l("div",null,m(v.$t("objects.viewType.form")),1)]),e(b)===e(Ue).FORM&&e(n)?(t(),p(O,{key:0})):(t(),p(h,{key:1,class:Q(["plus",{"!text-current":!!v.source.is_data_readonly||e(f)||e(g)}]),icon:"plus"},null,8,["class"]))])]),_:1},8,["disabled"])]),_:1},8,["title","disabled"]),s(S,{onClick:I[2]||(I[2]=Z=>w({type:e(Ue).GALLERY}))},{default:i(()=>[l("div",Nl,[l("div",Ul,[s(j,{meta:{type:e(Ue).GALLERY}},null,8,["meta"]),l("div",null,m(v.$t("objects.viewType.gallery")),1)]),e(b)===e(Ue).GALLERY&&e(n)?(t(),p(O,{key:0})):(t(),p(h,{key:1,class:"plus",icon:"plus"}))])]),_:1}),s(S,{"data-testid":"sidebar-view-create-kanban",onClick:I[3]||(I[3]=Z=>w({type:e(Ue).KANBAN}))},{default:i(()=>[l("div",Rl,[l("div",Al,[s(j,{meta:{type:e(Ue).KANBAN}},null,8,["meta"]),l("div",null,m(v.$t("objects.viewType.kanban")),1)]),e(b)===e(Ue).KANBAN&&e(n)?(t(),p(O,{key:0})):(t(),p(h,{key:1,class:"plus",icon:"plus"}))])]),_:1}),s(S,{"data-testid":"sidebar-view-create-calendar",onClick:I[4]||(I[4]=Z=>w({type:e(Ue).CALENDAR}))},{default:i(()=>[l("div",zl,[l("div",Fl,[s(j,{meta:{type:e(Ue).CALENDAR},class:"!w-4 !h-4"},null,8,["meta"]),l("div",null,m(v.$t("objects.viewType.calendar")),1)]),e(b)===e(Ue).CALENDAR&&e(n)?(t(),p(O,{key:0})):(t(),p(h,{key:1,class:"plus",icon:"plus"}))])]),_:1}),e(_)?(t(),x(Se,{key:0},[s(z),s(T,{title:`Auto suggest views for ${((J=e(R))==null?void 0:J.title)||"the current table"}`,placement:"right"},{default:i(()=>[s(S,{"data-testid":"sidebar-view-create-ai",onClick:I[5]||(I[5]=Z=>w({type:"AI"}))},{default:i(()=>[l("div",Gl,[l("div",Wl,[s(h,{icon:"ncAutoAwesome",class:"!w-4 !h-4 text-nc-fill-purple-dark"}),l("div",null,m(v.$t("labels.useNocoAI")),1)])])]),_:1})]),_:1},8,["title"])],64)):k("",!0)]}),_:1})]),default:i(()=>[bt(v.$slots,"default",{},void 0,!0)]),_:3},8,["visible","overlay-class-name"])}}}),Kl=Object.assign(it(Hl,[["__scopeId","data-v-a723c1d6"]]),{__name:"DashboardTreeViewCreateViewBtn"}),ql=ns(()=>is(()=>import("./uosXAa0K.js"),__vite__mapDeps([8,2,3,9,10]),import.meta.url).then(L=>L.default||L)),Jl={class:"flex flex-col gap-3"},Ql={class:"text-[10px] leading-[14px] text-gray-300 uppercase mb-1"},Yl={class:"text-small leading-[18px]"},Zl={key:0},Xl={class:"text-[10px] leading-[14px] text-gray-300 uppercase mb-1"},ei={class:"text-xs"},ti={class:"text-[10px] leading-[14px] text-gray-300 uppercase mb-1"},si={class:"text-xs flex items-start gap-2"},ai={class:"text-sm flex items-center w-full gap-1","data-testid":"view-item"},oi=["data-testid"],ni={key:2,class:"flex-1 flex"},li=Me({__name:"ViewsNode",props:{view:{},table:{},onValidate:{type:Function}},emits:["update:view","selectIcon","changeView","rename","delete","openModal"],setup(L,{emit:F}){const u=L,o=F,a=mt(u,"view",o),{$e:$}=Je(),{t:U}=ts(),{isMobileMode:_,user:R}=Xe(),{isUIAllowed:V}=lt(),n=Ye(ht,D()),{activeView:b}=ue(nt()),{getMeta:r}=Et(),{meta:f,control:g}=bs(),{basesUser:G}=ue(tt()),w=Y(()=>u.table),v=D(w.value);Ot(Pa,a),Ot(Ma,v);const I=Ye(ja,D(!1)),j=Y(()=>{var P,re,le,ye;if(((re=(P=n.value)==null?void 0:P.sources)==null?void 0:re.length)===1)return!0;const c=(ye=(le=n.value)==null?void 0:le.sources)==null?void 0:ye.find(de=>de.id===a.value.source_id);return c?Zs(c):!1}),{openViewDescriptionDialog:O}=Ye(os),h=D(),S=D(!1),T=D(!1),z=D(!1),K=D(),oe=D(!0),J=Y(()=>{var c,P;return((c=a.value)==null?void 0:c.owned_by)===((P=R.value)==null?void 0:P.id)}),Z=Y(()=>{var c;return(G.value.get((c=n.value)==null?void 0:c.id)||[]).reduce((P,re)=>(P[re.id]=re,P[re.email]=re,P),{})}),E=Va(()=>{o("changeView",a.value)},250),W=()=>{if(T.value||z.value)return;(ls()?f.value:g.value)?o("changeView",a.value):E()},ve=()=>{setTimeout(()=>{var c,P;(c=h.value)==null||c.focus(),(P=h.value)==null||P.select()})};function X(){var c;_.value||!V("viewCreateOrEdit")||T.value||(T.value=!0,K.value=a.value.title,$("c:view:rename",{view:(c=a.value)==null?void 0:c.type}),yt(()=>{ve()}))}function ie(c){c.key==="Escape"?he(c):c.key==="Enter"&&ne(c)}function ne(c){c.stopImmediatePropagation(),c.preventDefault(),ke()}function he(c){c.stopImmediatePropagation(),c.preventDefault(),N()}Bt("Enter",c=>{T.value&&ne(c)});const $e=()=>{var c;_.value||!V("viewCreateOrEdit")||T.value||(T.value=!0,K.value=a.value.title,$("c:view:rename",{view:(c=a.value)==null?void 0:c.type}),yt(()=>{ve()}))};async function ke(){if(S.value=!1,!T.value)return;K.value&&(K.value=K.value.trim());const c=u.onValidate({...a.value,title:K.value});if(c!==!0){Be.error(c),N();return}if(a.value.title===""||a.value.title===K.value){N();return}const P=a.value.title;a.value.title=K.value||"",o("rename",a.value,P),te()}const H=c=>{S.value=!1,O(c)};function N(){T.value&&te()}function te(){z.value=!0,T.value=!1,K.value="",setTimeout(()=>{z.value=!1},250)}const ce=()=>{S.value=!1,o("delete",a.value)},we=Y(()=>{var c,P,re,le,ye,de,xe,Ie,C,A,ae,pe,be,De,Pe,Ce,Te,Ee,Oe,Le,fe,Ne;switch((c=a.value)==null?void 0:c.lock_type){case ot.Collaborative:return U((P=Zt[ot.Collaborative])==null?void 0:P.title);case ot.Personal:return`${U((re=Zt[ot.Personal])==null?void 0:re.title)} ${J.value?`(${U("general.you")})`:(le=a.value)!=null&&le.owned_by&&Z.value[a.value.owned_by]?`(${((ye=Z.value[a.value.owned_by])==null?void 0:ye.display_name)||((de=Z.value[a.value.owned_by])==null?void 0:de.email)})`:""}`;case ot.Locked:return!((Ie=(xe=a.value)==null?void 0:xe.meta)!=null&&Ie.lockedByUserId)||!Z.value[(A=(C=a.value)==null?void 0:C.meta)==null?void 0:A.lockedByUserId]?U((ae=Zt[ot.Locked])==null?void 0:ae.title):U("title.lockedByUser",{user:((De=Z.value[(be=(pe=a.value)==null?void 0:pe.meta)==null?void 0:be.lockedByUserId])==null?void 0:De.id)===((Pe=R.value)==null?void 0:Pe.id)?U("general.you"):((Ee=Z.value[(Te=(Ce=a.value)==null?void 0:Ce.meta)==null?void 0:Te.lockedByUserId])==null?void 0:Ee.display_name)||((fe=Z.value[(Le=(Oe=a.value)==null?void 0:Oe.meta)==null?void 0:Le.lockedByUserId])==null?void 0:fe.email)});default:return U((Ne=Zt[ot.Collaborative])==null?void 0:Ne.title)}});return He(S,async()=>{S.value&&(v.value=await r(w.value.id))}),(c,P)=>{const re=Ks,le=ql,ye=Nt,de=Lt,xe=ze,Ie=ct,C=so,A=Rt,ae=Sa,pe=vt("e");return t(),p(ae,{class:Q(["nc-sidebar-node !min-h-7 !max-h-7 !my-0.5 select-none group text-gray-700 !flex !items-center !hover:bg-gray-200 !hover:text-gray-700 cursor-pointer",{"!pl-7.5 !xs:pl-7.5":e(j),"!pl-14":!e(j)}]),"data-testid":`view-sidebar-view-${e(a).alias||e(a).title}`,onClick:Ve(W,["prevent"])},{default:i(()=>[s(de,{"tooltip-style":{width:"240px",zIndex:"1049"},"overlay-inner-style":{width:"240px"},trigger:"hover",placement:"right",disabled:e(T)||e(S)||!e(oe)},{title:i(()=>{var be,De,Pe,Ce,Te,Ee,Oe,Le,fe;return[l("div",Jl,[l("div",null,[l("div",Ql,m(c.$t("labels.viewName")),1),l("div",Yl,m(e(a).alias||e(a).title),1)]),(be=e(a))!=null&&be.created_by&&e(Z)[(De=e(a))==null?void 0:De.created_by]?(t(),x("div",Zl,[l("div",Xl,m(c.$t("labels.createdBy")),1),l("div",ei,m(((Ce=e(Z)[(Pe=e(a))==null?void 0:Pe.created_by])==null?void 0:Ce.id)===((Te=e(R))==null?void 0:Te.id)?c.$t("general.you"):((Oe=e(Z)[(Ee=e(a))==null?void 0:Ee.created_by])==null?void 0:Oe.display_name)||((fe=e(Z)[(Le=e(a))==null?void 0:Le.created_by])==null?void 0:fe.email)),1)])):k("",!0),l("div",null,[l("div",ti,m(c.$t("labels.viewMode")),1),l("div",si,m(e(we)),1)])])]}),default:i(()=>{var be,De,Pe,Ce,Te,Ee,Oe,Le;return[_e((t(),x("div",ai,[_e((t(),x("div",{class:"flex min-w-6","data-testid":`view-sidebar-drag-handle-${e(a).alias||e(a).title}`,onMouseenter:P[1]||(P[1]=fe=>oe.value=!1),onMouseleave:P[2]||(P[2]=fe=>oe.value=!0)},[s(le,{class:"nc-table-icon",emoji:(De=(be=u.view)==null?void 0:be.meta)==null?void 0:De.icon,size:"small",clearable:!0,readonly:e(_)||!e(V)("viewCreateOrEdit"),onEmojiSelected:P[0]||(P[0]=fe=>o("selectIcon",fe))},{default:i(()=>[s(re,{meta:u.view,class:"nc-view-icon w-4 !text-[16px]"},null,8,["meta"])]),_:1},8,["emoji","readonly"])],40,oi)),[[pe,["c:view:emoji-picker"]]]),e(T)?(t(),p(ye,{key:0,ref_key:"input",ref:h,value:e(K),"onUpdate:value":P[3]||(P[3]=fe=>ge(K)?K.value=fe:null),class:Q(["!bg-transparent !pr-1.5 !flex-1 mr-4 !rounded-md !h-6 animate-sidebar-node-input-padding",{"!font-semibold !text-brand-600":((Pe=e(b))==null?void 0:Pe.id)===e(a).id}]),style:{fontWeight:"inherit"},onBlur:ke,onKeydown:P[4]||(P[4]=Ve(fe=>ie(fe),["stop"]))},null,8,["value","class"])):(t(),p(de,{key:1,class:Q(["nc-sidebar-node-title text-ellipsis overflow-hidden select-none max-w-full",{"w-full":![e(ot).Locked,e(ot).Personal].includes((Ce=e(a))==null?void 0:Ce.lock_type)}]),"show-on-truncate-only":"",disabled:""},{title:i(()=>[q(m(e(a).alias||e(a).title),1)]),default:i(()=>{var fe;return[l("div",{"data-testid":"sidebar-view-title",class:Q({"font-semibold text-brand-600":((fe=e(b))==null?void 0:fe.id)===e(a).id}),style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"},onDblclick:Ve(X,["stop"])},m(e(a).alias||e(a).title),35)]}),_:1},8,["class"])),!e(T)&&[e(ot).Locked,e(ot).Personal].includes((Te=e(a))==null?void 0:Te.lock_type)?(t(),x("div",ni,[(t(),p(ps(("viewLockIcons"in c?c.viewLockIcons:e(Zt))[e(a).lock_type].icon),{class:Q(["ml-1 flex-none w-3.5 h-3.5",{"text-brand-400":((Ee=e(a))==null?void 0:Ee.lock_type)===e(ot).Personal&&e(J),"text-gray-400":!(((Oe=e(a))==null?void 0:Oe.lock_type)===e(ot).Personal&&e(J))}])},null,8,["class"]))])):k("",!0),!e(T)&&!e(I)?(t(),x(Se,{key:3},[(Le=e(a).description)!=null&&Le.length?(t(),p(de,{key:0,placement:"bottom",onMouseenter:P[5]||(P[5]=fe=>oe.value=!1),onMouseleave:P[6]||(P[6]=fe=>oe.value=!0)},{title:i(()=>[q(m(e(a).description),1)]),default:i(()=>[s(Ie,{type:"text",class:"!hover:bg-transparent",size:"xsmall"},{default:i(()=>[s(xe,{icon:"info",class:"!w-3.5 !h-3.5 nc-info-icon group-hover:opacity-100 text-gray-600 opacity-0"})]),_:1})]),_:1})):k("",!0),s(A,{visible:e(S),"onUpdate:visible":P[13]||(P[13]=fe=>ge(S)?S.value=fe:null),"overlay-class-name":"!rounded-lg"},{overlay:i(()=>[s(C,{"data-testid":`view-sidebar-view-actions-${e(a).alias||e(a).title}`,view:e(a),table:e(w),"in-sidebar":"",onCloseModal:P[11]||(P[11]=fe=>S.value=!1),onRename:$e,onDelete:ce,onDescriptionUpdate:P[12]||(P[12]=fe=>H(e(a)))},null,8,["data-testid","view","table"])]),default:i(()=>[_e((t(),p(Ie,{type:"text",size:"xxsmall",class:Q(["nc-sidebar-node-btn invisible !group-hover:visible !group-hover:opacity-100 nc-sidebar-view-node-context-btn",{"!visible !opacity-100":e(S)}]),onClick:P[7]||(P[7]=Ve(fe=>S.value=!e(S),["stop"])),onDblclick:P[8]||(P[8]=Ve(()=>{},["stop"])),onMouseenter:P[9]||(P[9]=fe=>oe.value=!1),onMouseleave:P[10]||(P[10]=fe=>oe.value=!0)},{default:i(()=>[s(xe,{icon:"threeDotHorizontal",class:"text-xl w-4.75"})]),_:1},8,["class"])),[[pe,["c:view:option"]]])]),_:1},8,["visible"])],64)):k("",!0)])),[[pe,["a:view:open",{view:e(a).type}]]])]}),_:1},8,["disabled"])]),_:1},8,["class","data-testid"])}}}),ii=Object.assign(li,{__name:"DashboardTreeViewViewsNode"}),ri={class:"flex flex-row items-center pl-1.25 !py-1.5 text-inherit"},ci={class:"pl-1.75"},di=Me({__name:"ViewsList",emits:["openModal","deleted"],setup(L,{emit:F}){const u=F,o=Ye(ht),a=Ye(Cs),{isLeftSidebarOpen:$}=ue(Vs()),{activeTableId:U}=ue(qe()),{isUIAllowed:_}=lt(),{isMobileMode:R}=Xe(),{baseHomeSearchQuery:V}=ue(tt()),{isSharedBase:n}=ue(Ze()),{$e:b}=Je(),{t:r}=ts(),{viewsByTable:f,activeView:g,allRecentViews:G}=ue(nt()),{navigateToTable:w}=qe(),v=Y(()=>{var c;return((c=f.value.get(a.value.id))==null?void 0:c.filter(P=>!P.is_default))??[]}),{api:I}=es(),{refreshCommandPalette:j}=ft(),{addUndo:O,defineModelScope:h}=hs(),{navigateToView:S,loadViews:T,removeFromRecentViews:z}=nt(),K=D([]),oe=D(!1),J=D(),Z=D(!1);He(g,c=>{c&&c.id&&(K.value=[c.id])});function E(c){Z.value=c,setTimeout(()=>{Z.value=!1},300)}const W=Y(()=>{var c,P;return(P=(c=o.value)==null?void 0:c.sources)==null?void 0:P.find(re=>re.id===a.value.source_id)}),ve=Y(()=>{var c,P;return((P=(c=o.value)==null?void 0:c.sources)==null?void 0:P.length)===1?!0:W.value?Zs(W.value):!1});function X(c){return!c.title||c.title.trim().length<0?r("msg.error.viewNameRequired"):v.value.some(P=>P.title===c.title&&P.id!==c.id)?r("msg.error.viewNameDuplicate"):!0}let ie;function ne(c){c.stopImmediatePropagation(),c.preventDefault(),oe.value=!0}async function he(c,P=!1){if(P||(c.stopImmediatePropagation(),c.preventDefault(),oe.value=!1),v.value.length<2)return;let{newIndex:re=0,oldIndex:le=0}=c;if(re=re-1,le=le-1,re===le)return;P||O({redo:{fn:async()=>{const be=ie.toArray(),De=be.splice(le,1);be.splice(re,0,De[0]),ie.sort(be),await he(c,!0)},args:[]},undo:{fn:async()=>{const be=ie.toArray(),De=be.splice(re,1);be.splice(le,0,De[0]),ie.sort(be),await he({...c,oldIndex:re,newIndex:le},!0)},args:[]},scope:h({view:g.value})});const ye=Array.from(c.to.children);ye.shift();const de=ye[re-1],xe=ye[re+1],Ie=v.value.find(be=>be.id===c.item.id);if(!Ie||!Ie.id)return;const C=de?v.value.find(be=>be.id===de.id)??{order:0}:{order:0},A=xe?v.value.find(be=>be.id===xe.id):{};let ae;v.value.length-1===re?ae=parseFloat(String(C.order))+1:re===0?ae=parseFloat(String(A.order))/2:ae=(parseFloat(String(C.order))+parseFloat(String(A.order)))/2;const pe=isNaN(Number(ae))?le:ae;Ie.order=pe,await I.dbView.update(Ie.id,{order:pe}),E(Ie.id),b("a:view:reorder")}const $e=c=>{ie&&ie.destroy(),!R.value&&(ie=new sa(c,{ghostClass:"ghost",onStart:ne,onEnd:he,filter:js}))};as(()=>J.value&&_("viewCreateOrEdit")&&$e(J.value.$el));async function ke(c){await S({view:c,tableId:a.value.id,baseId:o.value.id,hardReload:c.type===Ue.FORM&&K.value[0]===c.id,doNotSwitchTab:!0}),R.value&&($.value=!1)}async function H(c,P,re=!1){try{await I.dbView.update(c.id,{title:c.title,order:c.order}),S({view:c,tableId:a.value.id,baseId:o.value.id,hardReload:c.type===Ue.FORM&&K.value[0]===c.id}),j(),re||O({redo:{fn:(le,ye)=>{const de=le.title;le.title=ye,H(le,de,!0)},args:[c,c.title]},undo:{fn:(le,ye)=>{const de=le.title;le.title=ye,H(le,de,!0)},args:[c,P]},scope:h({view:g.value})}),G.value=G.value.map(le=>(le.viewId===c.id&&le.tableID===c.fk_model_id&&(le.viewName=c.title),le))}catch(le){Be.error(await Ke(le))}}function N(c){const P=D(!0),{close:re}=pt(ao,{modelValue:P,view:c,"onUpdate:modelValue":le,onDeleted:async()=>{var ye;le(),u("deleted"),z({viewId:c.id,tableId:c.fk_model_id,baseId:o.value.id}),j(),((ye=g.value)==null?void 0:ye.id)===c.id&&w({tableId:a.value.id,baseId:o.value.id}),await T({tableId:a.value.id,force:!0})}});function le(){P.value=!1,re(1e3)}}const te=async(c,P)=>{try{P.meta={...Mt(P.meta),icon:c},I.dbView.update(P.id,{meta:P.meta}),b("a:view:icon:sidebar",{icon:c})}catch(re){Be.error(await Ke(re))}};function ce({title:c="",type:P,copyViewId:re,groupingFieldColumnId:le,calendarRange:ye,coverImageColumnId:de}){var A;const xe=D(!0),{close:Ie}=pt(Ea,{modelValue:xe,title:c,type:P,tableId:a.value.id,selectedViewId:re,groupingFieldColumnId:le,views:v,calendarRange:ye,coverImageColumnId:de,baseId:o.value.id,sourceId:(A=W.value)==null?void 0:A.id,"onUpdate:modelValue":C,onCreated:async ae=>{C(),j(),await T({force:!0,tableId:a.value.id}),ae&&S({view:ae,tableId:a.value.id,baseId:o.value.id,hardReload:ae.type===Ue.FORM&&K.value[0]===ae.id}),b("a:view:create",{view:(ae==null?void 0:ae.type)||P})}});function C(){xe.value=!1,Ie(1e3)}}const we=Y(()=>v.value.filter(c=>Xt(c.title,V.value)));return(c,P)=>{const re=ze,le=Kl,ye=ii,de=Oa;return t(),p(de,{ref_key:"menuRef",ref:J,class:Q([{dragging:e(oe)},"nc-views-menu flex flex-col w-full !border-r-0 !bg-inherit"]),"selected-keys":e(K)},{default:i(()=>[e(n)?k("",!0):(t(),x(Se,{key:0},[e(_)("viewCreateOrEdit")?(t(),p(le,{key:0,"align-left-level":e(ve)?1:2,class:Q({"!pl-7.5 !xs:pl-7.5":e(ve),"!pl-13.6 !xs:pl-15":!e(ve)}),source:e(W)},{default:i(()=>[l("div",{class:Q([{"text-brand-500 hover:text-brand-600":e(U)===e(a).id,"text-gray-500 hover:text-brand-500":e(U)!==e(a).id},"nc-create-view-btn flex flex-row items-center cursor-pointer rounded-md w-full"]),role:"button"},[l("div",ri,[s(re,{icon:"plus",class:"nc-create-view-btn-icon"}),l("div",ci,m(c.$t("general.createEntity",{entity:c.$t("objects.view")})),1)])],2)]),_:1},8,["align-left-level","class","source"])):k("",!0)],64)),e(we).length?(t(!0),x(Se,{key:1},ms(e(we),xe=>{var Ie;return t(),p(ye,{id:xe.id,key:xe.id,class:Q([{"bg-gray-200":e(Z)===xe.id,active:((Ie=e(g))==null?void 0:Ie.id)===xe.id,[`nc-${xe.type?e(qs)[xe.type]:xe.type}-view-item`]:!0},"nc-view-item !rounded-md !px-0.75 !py-0.5 w-full transition-all ease-in duration-100"]),"data-view-id":xe.id,"on-validate":X,table:e(a),view:xe,onDelete:N,onRename:H,onChangeView:ke,onOpenModal:ce,onSelectIcon:C=>te(C,xe)},null,8,["id","class","data-view-id","table","view","onSelectIcon"])}),128)):k("",!0)]),_:1},8,["class","selected-keys"])}}}),ui=Object.assign(di,{__name:"DashboardTreeViewViewsList"}),pi={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function mi(L,F){return t(),x("svg",pi,F[0]||(F[0]=[l("path",{fill:"currentColor",d:"M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"},null,-1)]))}const vi=Ba({name:"mdi-eye",render:mi}),bi=ns(()=>is(()=>import("./uosXAa0K.js"),__vite__mapDeps([8,2,3,9,10]),import.meta.url).then(L=>L.default||L)),fi=ns(()=>is(()=>import("./mHhFSiUY.js"),__vite__mapDeps([11,12,2,3]),import.meta.url).then(L=>L.default||L)),_i=["data-order","data-id","data-table-id","data-active"],yi={class:"flex items-center py-0.5"},gi=["data-testid"],wi={class:"flex flex-row h-full items-center"},xi=["data-testid"],ki=["data-testid"],$i={key:2,class:"flex items-center"},hi={class:"flex gap-2 items-center"},Ii={class:"flex gap-2 items-center"},Di={class:"flex gap-2 items-center"},Ci={class:"flex gap-2 items-center"},Ti={class:"flex gap-2 items-center w-full"},ji={class:"flex-1"},Si={class:"flex gap-2 items-center"},Vi=Me({__name:"TableNode",props:{base:{},table:{},sourceIndex:{default:0}},setup(L){const F=L,{base:u,table:o,sourceIndex:a}=ss(F),{openTable:$}=Ls({baseId:u.value.id}),U=La(),{isUIAllowed:_}=lt(),{isMobileMode:R}=Xe(),{$e:V,$api:n}=Je(),{isMysql:b,isPg:r}=Ze();Ls({baseId:u.value.id});const{meta:f,control:g}=bs(),G=Ye(Js);Ot(Cs,o);const{setMenuContext:w,handleTableRename:v,openTableDescriptionDialog:I,duplicateTable:j,tableRenameId:O}=Ye(os),{loadViews:h,navigateToView:S,duplicateView:T}=nt(),{activeView:z,activeViewTitleOrId:K,viewsByTable:oe}=ue(nt()),{isLeftSidebarOpen:J}=ue(Vs()),{refreshCommandPalette:Z}=ft(),{showRecordPlanLimitExceededModal:E}=Na(),{isTableAndFieldPermissionsEnabled:W}=_o(),{baseTables:ve}=ue(qe()),X=Y(()=>ve.value.get(u.value.id)??[]),ie=Y(()=>U.params.viewId),ne=Y(()=>{var M,B;return(B=(M=u.value)==null?void 0:M.sources)==null?void 0:B[a.value]}),he=D(!1),$e=D(!1),ke=D(!1),H=D(),N=D(!1),te=D(!1),ce=us.useForm,we=Is({title:""}),c=Y(()=>({title:[Ua,{validator:(M,B)=>new Promise((y,d)=>{var at,gt,Fe;let se=255;if(b((at=ne.value)==null?void 0:at.id)?se=64:r((gt=ne.value)==null?void 0:gt.id)&&(se=63),((((Fe=u==null?void 0:u.value)==null?void 0:Fe.prefix)||"")+B).length>se)return d(new Error(`Table name exceeds ${se} characters`));y()})},{validator:(M,B)=>new Promise((y,d)=>{if(!((X==null?void 0:X.value)||[]).every(se=>se.id===o.value.id||se.title.toLowerCase()!==((B==null?void 0:B.trim())||"").toLowerCase()))return d(new Error("Duplicate table alias"));y()})}]})),{validate:P}=ce(we,c),re=async(M,B)=>{try{B.meta={...B.meta||{},icon:M},X.value.splice(X.value.indexOf(B),1,{...B}),await n.dbTable.update(B.id,{meta:B.meta}),V("a:table:icon:navdraw",{icon:M})}catch(y){Be.error(await Ke(y))}},{isSharedBase:le}=Ze(),ye=Y(()=>_("tableIconEdit",{roles:G==null?void 0:G.value})),de=D(!1),xe=D(!1),Ie=async()=>{if(de.value){de.value=!1;return}xe.value=!0;try{await h({tableId:o.value.id,ignoreLoading:!0})}catch(M){Be.error(await Ke(M))}finally{xe.value=!1,de.value=!0}},C=async()=>{if(!(N.value||te.value)){if(ls()?f.value:g.value){await $(o.value,!0);return}xe.value=!0;try{await $(o.value),R.value&&(J.value=!1)}catch(M){Be.error(await Ke(M))}finally{xe.value=!1,de.value=!0}}};He(()=>{var M;return(M=z.value)==null?void 0:M.id},()=>{var M,B;z.value&&((M=z.value)==null?void 0:M.fk_model_id)===((B=o.value)==null?void 0:B.id)&&(de.value=!0)},{immediate:!0});const A=Y(()=>{var M,B;return ie.value===((M=o.value)==null?void 0:M.id)&&(((B=z.value)==null?void 0:B.is_default)||!K.value)});let ae;He(ie,()=>{var M;if(ae&&clearTimeout(ae),o.value.id!==ie.value&&de.value){if((((M=oe.value.get(o.value.id))==null?void 0:M.filter(y=>!y.is_default))??[]).length)return;ae=setTimeout(()=>{de.value&&(de.value=!1),clearTimeout(ae)},1e4)}});const pe=M=>{ke.value=!1,!E()&&j(M)},be=()=>{setTimeout(()=>{var M,B;(M=H.value)==null||M.focus(),(B=H.value)==null||B.select()})},De=M=>{R.value||!_("tableRename",{roles:G==null?void 0:G.value,source:ne.value})||(ke.value=!1,N.value||(N.value=!0,we.title=M.title,yt(()=>{be()})))};He(O,(M,B)=>{var y;M!==B&&(M&&`${o.value.id}:${(y=ne.value)==null?void 0:y.id}`===O.value?De(o.value):(N.value=!1,fe()))},{immediate:!0});const Pe=M=>{ke.value=!1,I(M)},Ce=()=>{ke.value=!1,he.value=!0},Te=D(!1);async function Ee(){Te.value=!0,oe.value.get(o.value.id)||await $(o.value,void 0,!1);const M=oe.value.get(o.value.id),B=(M==null?void 0:M.find(y=>y.is_default))||(M==null?void 0:M[0]);if(B){const y=await T(B);Z(),await h({force:!0,tableId:o.value.id}),y&&(S({view:y,tableId:o.value.id,baseId:u.value.id,hardReload:y.type===Ue.FORM}),V("a:view:create",{view:y.type,sidebar:!0}))}Te.value=!1,ke.value=!1}async function Oe(M){ke.value=!1,$e.value=!0}const Le=async()=>{de.value=!1,await yt(),de.value=!0};function fe(){N.value&&Ne()}function Ne(){te.value=!0,N.value=!1,we.title="",O.value="",setTimeout(()=>{te.value=!1},250)}function ee(M){M.key==="Escape"?rt(M):M.key==="Enter"&&st(M)}function st(M){M.stopImmediatePropagation(),M.preventDefault(),Re()}function rt(M){M.stopImmediatePropagation(),M.preventDefault(),fe()}Bt("Enter",M=>{N.value&&st(M)});const et=async()=>{var M,B,y;try{return await P(),!0}catch(d){console.log("e",d);const se=(y=(B=(M=d.errorFields)==null?void 0:M[0])==null?void 0:B.errors)==null?void 0:y[0];se&&Be.error(se)}};async function Re(){var d;if(!N.value)return;if(!((d=we.title)!=null&&d.trim())||o.value.title===we.title){fe();return}if(!await et()){fe();return}const B=o.value.title;o.value.title=we.title.trim()||"";const y=se=>{o.value.title=se};v(o.value,we.title,B,y),Ne(),fe()}return(M,B)=>{var Gt,Wt,Ht,Kt,qt;const y=Ts,d=vi,se=Lt,Ae=bi,at=Nt,gt=us,Fe=ze,It=ct,rs=Ra,cs=ea,_t=St,Dt=Ut,Ft=fi,fs=fo,_s=zt,ys=Rt,gs=na,ws=Ml,xs=ui,Qe=vt("e");return t(),x("div",{class:Q(["nc-tree-item nc-table-node-wrapper text-sm select-none w-full",[`nc-base-tree-tbl nc-base-tree-tbl-${(Gt=e(o).title)==null?void 0:Gt.replaceAll(" ","")}`]]),"data-order":e(o).order,"data-id":e(o).id,"data-table-id":e(o).id,"data-active":e(ie)===e(o).id},[l("div",yi,[_e((t(),x("div",{class:Q(["flex-none flex-1 table-context flex items-center gap-1 h-full nc-tree-item-inner nc-sidebar-node pr-0.75 mb-0.25 rounded-md h-7 w-full group cursor-pointer hover:bg-gray-200",{"hover:bg-gray-200":e(ie)!==e(o).id,"pl-8 !xs:pl-7":e(a)!==0,"pl-2 xs:pl-2":e(a)===0,"!bg-primary-selected":e(A)}]),"data-testid":`nc-tbl-side-node-${e(o).title}`,onContextmenu:B[13]||(B[13]=me=>e(w)("table",e(o))),onClick:C},[l("div",wi,[l("div",{class:"flex w-auto","data-testid":`tree-view-table-draggable-handle-${e(o).title}`},[e(o).isViewsLoading?(t(),p(y,{key:0,class:"flex items-center w-6 h-full !text-gray-600"})):_e((t(),x("div",{key:1,class:Q(["flex items-center nc-table-icon min-w-6",{"pointer-events-none":!e(ye)}]),onClick:B[1]||(B[1]=Ve(()=>{},["stop"]))},[(t(),p(Ae,{key:(Wt=e(o).meta)==null?void 0:Wt.icon,emoji:(Ht=e(o).meta)==null?void 0:Ht.icon,size:"small",readonly:!e(ye)||e(R),onEmojiSelected:B[0]||(B[0]=me=>re(me,e(o)))},{default:i(({isOpen:me})=>[s(se,{class:"flex",placement:"topLeft","hide-on-click":"",disabled:!e(ye)||me},{title:i(()=>[q(m(M.$t("general.changeIcon")),1)]),default:i(()=>{var dt;return[(dt=e(o))!=null&&dt.synced?(t(),p(ps(("iconMap"in M?M.iconMap:e(Ns)).ncZap),{key:0,class:Q(["w-4 text-sm",e(A)?"!text-brand-600/85":"!text-gray-600/75"])},null,8,["class"])):e(o).type==="table"?(t(),p(ps(("iconMap"in M?M.iconMap:e(Ns)).table),{key:1,class:Q(["w-4 text-sm",e(A)?"!text-brand-600/85":"!text-gray-600/75"])},null,8,["class"])):(t(),p(d,{key:2,class:Q(["flex w-5 text-sm",e(A)?"!text-brand-600":"!text-gray-600"])},null,8,["class"]))]}),_:2},1032,["disabled"])]),_:1},8,["emoji","readonly"]))],2)),[[Qe,["c:table:emoji-picker"]]])],8,xi)]),e(N)?(t(),p(gt,{key:0,model:e(we),name:"rename-table-form",class:"w-full",onFinish:B[4]||(B[4]=Ve(()=>{},["prevent"]))},{default:i(()=>[s(at,{ref_key:"input",ref:H,value:e(we).title,"onUpdate:value":B[2]||(B[2]=me=>e(we).title=me),class:Q(["!bg-transparent !pr-1.5 !flex-1 mr-4 !rounded-md !h-6 animate-sidebar-node-input-padding",{"!font-semibold !text-brand-600":e(A)}]),style:{fontWeight:"inherit"},onBlur:Re,onKeydown:B[3]||(B[3]=Ve(me=>ee(me),["stop"]))},null,8,["value","class"])]),_:1},8,["model"])):(t(),p(se,{key:1,class:"nc-tbl-title nc-sidebar-node-title text-ellipsis overflow-hidden select-none !flex-1","show-on-truncate-only":""},{title:i(()=>[q(m(e(o).title),1)]),default:i(()=>[l("span",{class:Q(e(A)?"text-brand-600 font-semibold":"text-gray-700"),"data-testid":`nc-tbl-title-${e(o).title}`,style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"},onDblclick:B[5]||(B[5]=Ve(me=>De(e(o)),["stop"]))},m(e(o).title),43,ki)]),_:1})),e(N)?k("",!0):(t(),x("div",$i,[(Kt=e(o).description)!=null&&Kt.length?(t(),p(se,{key:0,placement:"bottom"},{title:i(()=>[q(m(e(o).description),1)]),default:i(()=>[s(It,{type:"text",class:"!hover:bg-transparent",size:"xsmall"},{default:i(()=>[s(Fe,{icon:"info",class:"!w-3.5 !h-3.5 nc-info-icon group-hover:opacity-100 text-gray-600 opacity-0"})]),_:1})]),_:1})):k("",!0),s(ys,{visible:e(ke),"onUpdate:visible":B[11]||(B[11]=me=>ge(ke)?ke.value=me:null),trigger:["click"],onClick:B[12]||(B[12]=Ve(()=>{},["stop"]))},{overlay:i(()=>[s(_s,{class:"!min-w-62.5","data-testid":`sidebar-table-context-menu-list-${e(o).title}`,variant:"small"},{default:i(()=>{var me,dt,wt,xt;return[e(o)?(t(),p(cs,{key:0,id:e(o).id,tooltip:M.$t("labels.clickToCopyTableID"),label:M.$t("labels.tableIdColon",{tableId:e(o).id})},null,8,["id","tooltip","label"])):k("",!0),e(_)("tableDescriptionEdit",{roles:e(G),source:e(ne)})&&!e(_)("tableRename",{roles:e(G),source:e(ne)})?(t(),p(_t,{key:1,"data-testid":`sidebar-table-description-${e(o).title}`,class:"nc-table-description",onClick:B[7]||(B[7]=ut=>Pe(e(o)))},{default:i(()=>[_e((t(),x("div",hi,[s(Fe,{icon:"ncAlignLeft",class:"opacity-80"}),q(" "+m(M.$t("labels.editTableDescription")),1)])),[[Qe,["c:table:update-description"]]])]),_:1},8,["data-testid"])):k("",!0),!e(le)&&(e(_)("tableRename",{roles:e(G),source:e(ne)})||e(_)("tableDelete",{roles:e(G),source:e(ne)}))?(t(),x(Se,{key:2},[s(Dt),e(_)("tableRename",{roles:e(G),source:e(ne)})?(t(),p(_t,{key:0,"data-testid":`sidebar-table-rename-${e(o).title}`,class:"nc-table-rename",onClick:B[8]||(B[8]=ut=>De(e(o)))},{default:i(()=>[_e((t(),x("div",Ii,[s(Fe,{icon:"rename",class:"opacity-80"}),q(" "+m(M.$t("general.rename"))+" "+m(M.$t("objects.table").toLowerCase()),1)])),[[Qe,["c:table:rename"]]])]),_:1},8,["data-testid"])):k("",!0),e(_)("tableDuplicate",{source:e(ne)})&&((me=e(ne))!=null&&me.is_meta||(dt=e(ne))!=null&&dt.is_local)?(t(),p(_t,{key:1,"data-testid":`sidebar-table-duplicate-${e(o).title}`,onClick:B[9]||(B[9]=ut=>pe(e(o)))},{default:i(()=>[_e((t(),x("div",Di,[s(Fe,{icon:"duplicate",class:"opacity-80"}),q(" "+m(M.$t("general.duplicate"))+" "+m(M.$t("objects.table").toLowerCase()),1)])),[[Qe,["c:table:duplicate"]]])]),_:1},8,["data-testid"])):k("",!0),s(Dt),e(_)("tableDescriptionEdit",{roles:e(G),source:e(ne)})?(t(),p(_t,{key:2,"data-testid":`sidebar-table-description-${e(o).title}`,class:"nc-table-description",onClick:B[10]||(B[10]=ut=>Pe(e(o)))},{default:i(()=>[_e((t(),x("div",Ci,[s(Fe,{icon:"ncAlignLeft",class:"opacity-80"}),q(" "+m(M.$t("labels.editTableDescription")),1)])),[[Qe,["c:table:update-description"]]])]),_:1},8,["data-testid"])):k("",!0),e(W)&&("isEeUI"in M?M.isEeUI:e(We))&&e(_)("tableDuplicate",{source:e(ne)})&&((wt=e(ne))!=null&&wt.is_meta||(xt=e(ne))!=null&&xt.is_local)?(t(),p(fs,{key:3,feature:e(ks).FEATURE_TABLE_AND_FIELD_PERMISSIONS},{default:i(({click:ut})=>[s(_t,{"data-testid":`sidebar-table-permissions-${e(o).title}`,class:"nc-table-permissions",onClick:Vt=>ut(e(ks).FEATURE_TABLE_AND_FIELD_PERMISSIONS,()=>{Oe(e(o))})},{default:i(()=>[_e((t(),x("div",Ti,[s(Fe,{icon:"ncLock",class:"opacity-80"}),l("div",ji,m(M.$t("title.editTablePermissions")),1),s(Ft,{feature:e(ks).FEATURE_TABLE_AND_FIELD_PERMISSIONS,title:M.$t("upgrade.upgradeToUseTableAndFieldPermissions"),content:M.$t("upgrade.upgradeToUseTableAndFieldPermissionsSubtitle",{plan:e(Aa).PLUS}),"on-click-callback":()=>{ke.value=!1}},null,8,["feature","title","content","on-click-callback"])])),[[Qe,["c:table:permissions"]]])]),_:2},1032,["data-testid","onClick"])]),_:1},8,["feature"])):k("",!0),s(Dt),s(_t,{onClick:Ee},{default:i(()=>[e(Te)?(t(),p(y,{key:0,size:"regular"})):(t(),p(Fe,{key:1,class:"nc-view-copy-icon opacity-80",icon:"duplicate"})),q(" "+m(M.$t("general.duplicateEntity",{entity:M.$t("title.defaultView").toLowerCase()})),1)]),_:1}),s(Dt),e(_)("tableDelete",{roles:e(G),source:e(ne)})?(t(),p(_t,{key:4,"data-testid":`sidebar-table-delete-${e(o).title}`,class:"nc-table-delete",danger:"",disabled:!!e(o).synced,onClick:Ce},{default:i(()=>[_e((t(),x("div",Si,[s(Fe,{icon:"delete"}),q(" "+m(M.$t("general.delete"))+" "+m(M.$t("objects.table").toLowerCase()),1)])),[[Qe,["c:table:delete"]]])]),_:1},8,["data-testid","disabled"])):k("",!0)],64)):k("",!0)]}),_:1},8,["data-testid"])]),default:i(()=>[_e((t(),p(It,{class:Q(["nc-sidebar-node-btn nc-tbl-context-menu text-gray-700 hover:text-gray-800",{"!opacity-100 !inline-block":e(ke)}]),"data-testid":"nc-sidebar-table-context-menu",type:"text",size:"xxsmall",onClick:B[6]||(B[6]=Ve(()=>{},["stop"]))},{default:i(()=>[s(rs,{class:"!text-current"})]),_:1},8,["class"])),[[Qe,["c:table:option"]]])]),_:1},8,["visible"]),_e((t(),p(It,{type:"text",size:"xxsmall",class:Q(["nc-sidebar-node-btn nc-sidebar-expand text-gray-700 hover:text-gray-800",{"!opacity-100 !visible":e(ke)}]),onClick:Ve(Ie,["stop"])},{default:i(()=>[s(Fe,{icon:"chevronRight",class:Q(["nc-sidebar-source-node-btns cursor-pointer transform transition-transform duration-200 !text-current text-[20px]",{"!rotate-90":e(de)}])},null,8,["class"])]),_:1},8,["class"])),[[Qe,["c:table:toggle-expand"]]])]))],42,gi)),[[Qe,["a:table:open"]]])]),e(o).id&&((qt=e(u))!=null&&qt.id)?(t(),p(gs,{key:0,visible:e(he),"onUpdate:visible":B[14]||(B[14]=me=>ge(he)?he.value=me:null),"table-id":e(o).id,"base-id":e(u).id},null,8,["visible","table-id","base-id"])):k("",!0),e(o).id&&("isEeUI"in M?M.isEeUI:e(We))?(t(),p(ws,{key:1,visible:e($e),"onUpdate:visible":B[15]||(B[15]=me=>ge($e)?$e.value=me:null),"table-id":e(o).id,title:e(o).title},null,8,["visible","table-id","title"])):k("",!0),e(de)?(t(),p(xs,{key:2,"table-id":e(o).id,"base-id":e(u).id,onDeleted:Le},null,8,["table-id","base-id"])):k("",!0)],10,_i)}}}),Pi=Object.assign(it(Vi,[["__scopeId","data-v-0158292d"]]),{__name:"DashboardTreeViewTableNode"}),Mi={class:"border-none sortable-list"},Oi={class:"nc-project-home-section-item"},Ei=["nc-source"],Bi=Me({__name:"TableList",props:{base:{},sourceIndex:{default:0},showCreateTableBtn:{type:Boolean,default:!1}},emits:["createTable"],setup(L,{emit:F}){const u=L,o=F,a=jt(u,"base"),$=jt(u,"sourceIndex"),U=Y(()=>{var S,T;return(T=(S=a.value)==null?void 0:S.sources)==null?void 0:T[$.value]}),{isMobileMode:_}=Xe(),{isUIAllowed:R}=lt(),{openedProject:V,baseHomeSearchQuery:n}=ue(tt()),{baseTables:b}=ue(qe()),r=Y(()=>b.value.get(a.value.id)??[]),{viewsByTable:f}=ue(nt()),{$api:g}=Je(),G=Y(()=>r.value.reduce((S,T)=>(S[T.id]=T,S),{})),w=D({}),v=D(),I={},j=S=>{const T=S.getAttribute("nc-source");T&&(_.value||(I[T]&&I[T].destroy(),sa.create(S,{onEnd:async z=>{var he,$e;const K=r.value.findIndex(ke=>ke.source_id===T),{newIndex:oe=0,oldIndex:J=0}=z;if(oe===J)return;const Z=z.item,E=G.value[Z.dataset.id],W=z.to.children;if(W.length<2)return;const ve=W[oe-1],X=W[oe+1],ie=ve&&G.value[ve.dataset.id],ne=X&&G.value[X.dataset.id];W.length-1===z.newIndex?E.order=ie.order+1:oe===0?E.order=ne.order/2:E.order=(ie.order+ne.order)/2,($e=r.value)==null||$e.splice(oe+K,0,...(he=r.value)==null?void 0:he.splice(J+K,1)),w.value[T]?w.value[T]=w.value[T]+1:w.value[T]=1,await g.dbTable.reorder(E.id,{order:E.order})},animation:150,setData(z,K){z.setData("text/json",JSON.stringify({id:K.dataset.id,title:K.dataset.title,type:K.dataset.type,sourceId:K.dataset.sourceId}))},revertOnSpill:!0,filter:js})))};Gs(()=>{v.value&&R("viewCreateOrEdit")&&(v.value instanceof HTMLElement?j(v.value):v.value.forEach(S=>j(S)))});const O=Y(()=>r.value.filter(S=>{var T,z;return S.source_id===((z=(T=a.value)==null?void 0:T.sources)==null?void 0:z[$.value].id)})),h=Y(()=>O.value.filter(S=>{var T;return Xt(S.title,n.value)||((T=f.value.get(S.id))==null?void 0:T.some(z=>Xt(z.title,n.value)))}));return(S,T)=>{var K,oe,J,Z,E,W,ve,X;const z=ze;return t(),x("div",Mi,[e(a)?(t(),x(Se,{key:0},[!e(O).length&&S.showCreateTableBtn?(t(),x("div",{key:0,class:Q([{"text-brand-500 hover:text-brand-600":((K=e(V))==null?void 0:K.id)===e(a).id,"text-gray-500 hover:text-brand-500":((oe=e(V))==null?void 0:oe.id)!==e(a).id},"nc-create-table-btn flex flex-row items-center cursor-pointer rounded-md w-full"]),role:"button",onClick:T[0]||(T[0]=ie=>o("createTable"))},[l("div",Oi,[s(z,{icon:"plus"}),l("div",null,m(S.$t("general.createEntity",{entity:S.$t("objects.table")})),1)])],2)):k("",!0),!e(O).length||!e(h).length?(t(),x("div",{key:1,class:Q(["py-0.5 text-gray-500 font-normal",{"nc-project-home-section-item":e($)===0,"ml-9 xs:ml-9.75":e($)!==0}])},m(e(O).length&&!e(h).length?S.$t("placeholder.noResultsFoundForYourSearch"):S.$t("placeholder.noTables")),3)):k("",!0),(J=e(a).sources)!=null&&J[e($)]&&e(a).sources[e($)].enabled?(t(),x("div",{ref_key:"menuRefs",ref:v,key:`sortable-${(Z=e(U))==null?void 0:Z.id}-${(E=e(U))!=null&&E.id&&((W=e(U))==null?void 0:W.id)in e(w)?e(w)[(ve=e(U))==null?void 0:ve.id]:"0"}`,"nc-source":(X=e(U))==null?void 0:X.id},[(t(!0),x(Se,null,ms(e(h),ie=>{var ne;return t(),p(Pi,{key:ie.id,class:"nc-tree-item text-sm","data-order":ie.order,"data-id":ie.id,table:ie,base:e(a),"source-index":e($),"data-title":ie.title,"data-source-id":(ne=e(U))==null?void 0:ne.id,"data-type":ie.type},null,8,["data-order","data-id","table","base","source-index","data-title","data-source-id","data-type"])}),128))],8,Ei)):k("",!0)],64)):k("",!0)])}}}),Li=Object.assign(Bi,{__name:"DashboardTreeViewTableList"}),Ni=L=>L.is_schema_readonly&&L.is_data_readonly?"#278bff":L.is_schema_readonly?"#df830f":"#de0062",Ui=L=>{var u,o;const F=`Connection type is ${((u=go.find(a=>a.value===L.type))==null?void 0:u.text)||((o=L.type)==null?void 0:o.toUpperCase())}.`;return L.is_schema_readonly&&L.is_data_readonly?Ge("div",{className:"w-max"},[F,Ge("br"),"Both data and schema editing are disabled.",Ge("br"),"This configuration is ideal for read-only use cases of the database.",Ge("br"),Ge("a",{className:"!text-current",href:"https://nocodb.com/docs/product-docs/data-sources/connect-to-data-source#configuring-permissions",target:"_blank"},"Learn more")]):L.is_schema_readonly?Ge("div",{className:"max-w-90"},[F,Ge("br"),"Data editing is allowed, while schema editing is forbidden.",Ge("br"),"This configuration is ideal to enable trusted users to directly change the database content.",Ge("br"),Ge("a",{className:"!text-current",href:"https://nocodb.com/docs/product-docs/data-sources/connect-to-data-source#configuring-permissions",target:"_blank"},"Learn more")]):Ge("div",{className:"max-w-90"},[F,Ge("br"),"Both data and schema editing are enabled.",Ge("br"),"We highly recommend ",Ge("a",{className:"!text-current",href:"https://nocodb.com/docs/product-docs/data-sources/connect-to-data-source#configuring-permissions",target:"_blank"},"disabling schema editing")," to maintain data integrity and avoid potential issues."])},Ri={key:0,class:"nc-treeview-active-base"},Ai={key:0,class:"flex-1"},zi={key:0,class:"nc-project-home-section pt-1 !pb-2 xs:hidden flex flex-col gap-2"},Fi={key:0,class:"flex items-center w-full"},Gi={class:"flex items-center gap-2"},Wi={class:"flex-1 relative overflow-y-auto nc-scrollbar-thin"},Hi={class:"nc-project-home-section"},Ki={class:"flex-1"},qi={key:0,class:"flex-1"},Ji={class:"transition-height duration-200"},Qi={key:1,class:"transition-height duration-200"},Yi={class:"border-none sortable-list"},Zi=["data-sourceId"],Xi=["onContextmenu"],er=["onContextmenu"],tr={class:"flex-none w-6 flex items-center justify-center"},sr=["data-testid","onDblclick"],ar={key:2,class:"flex flex-row items-center gap-x-0.25"},or={class:"flex gap-2 items-center"},nr=["nc-source"],lr=Me({__name:"Home",setup(L){const u=vs().currentRoute,{isSharedBase:o}=ue(Ze()),{baseUrl:a}=Ze(),{setMenuContext:$}=Ye(os),{api:U}=es(),_=Ye(ht),R=D(!0),V=tt(),{loadProject:n}=V,{activeProjectId:b}=ue(V),{activeTable:r}=ue(qe()),{isUIAllowed:f}=lt(),{meta:g,control:G}=bs(),{refreshCommandPalette:w}=ft(),v=D({}),I=D(),j=Y(()=>_.value.project_role||_.value.workspace_role),{$e:O}=Je(),h=D({}),S=D([]),[T]=za(),z=D(""),K=D({}),oe=D(),{refreshViewTabTitle:J}=nt(),Z=Y(()=>{var te;const H=String((te=u.value)==null?void 0:te.name).split("baseId-index-index");if(H.length<=1)return!1;const N=H[H.length-1];return N.split("-").length===2||N.split("-").length===1}),E=H=>["airtableImport","csvImport","jsonImport","excelImport"].some(N=>f(N,{source:H})),W=H=>{var te;if(!f("baseRename"))return;const N=(te=_.value.sources)==null?void 0:te.find(ce=>ce.id===H);N!=null&&N.id&&(v.value[N.id]={editMode:!0,tempTitle:N.alias||""},yt(()=>{const ce=document.querySelector(`[data-source-rename-input-id="${H}"]`);ce&&(ce==null||ce.focus(),ce==null||ce.select())}))},ve=async H=>{var te;const N=(te=_.value.sources)==null?void 0:te.find(ce=>ce.id===H);if(!(!(N!=null&&N.id)||!v.value[N.id])){if(v.value[N.id].tempTitle&&(v.value[N.id].tempTitle=v.value[N.id].tempTitle.trim()),!v.value[N.id].tempTitle){delete v.value[N.id];return}try{await U.source.update(N.base_id,N.id,{alias:v.value[N.id].tempTitle}),await n(N.base_id,!0),delete v.value[N.id],O("a:source:rename"),J==null||J()}catch(ce){Be.error(await Ke(ce))}finally{w()}}};function X(H,N=!0){var P,re,le;const te=D(!0);let ce=(P=_.value.sources)==null?void 0:P[0].id;if(typeof H=="number"&&(ce=(re=_.value.sources)==null?void 0:re[H].id),!ce||!((le=_.value)!=null&&le.id))return;const{close:we}=pt(Qs,{modelValue:te,sourceId:ce,baseId:_.value.id,onCreate:c,showSourceSelector:N,"onUpdate:modelValue":()=>c()});function c(ye){te.value=!1,ye&&(R.value=!0,(!S.value||!S.value.includes(`collapse-${ce}`))&&S.value.push(`collapse-${ce}`),setTimeout(()=>{const de=document.querySelector(`[data-table-id="${ye.id}"]`);de&&(de==null||de.scrollIntoView({behavior:"smooth",block:"nearest"}))},1e3),we(1e3))}}function ie(H){O("c:project:relation");const N=D(!0),{close:te}=pt(oa,{modelValue:N,sourceId:H.id,"onUpdate:modelValue":()=>ce(),baseId:_.value.id});function ce(){N.value=!1,te(1e3)}}async function ne(H=!0){var N,te;oe.value&&((te=(N=oe.value)==null?void 0:N.addNewProjectChildEntity)==null||te.call(N,H))}He(()=>{var H;return(H=r.value)==null?void 0:H.id},async()=>{if(!r.value)return;const H=r.value.source_id;H&&(S.value.includes(`collapse-${H}`)||S.value.push(`collapse-${H}`))},{immediate:!0}),Bt("Escape",()=>{for(const H of Object.keys(h.value))h.value[H]=!1});const he=async()=>{const H=ls()?g.value:G.value;await Pt(`${H?"#":""}${a({id:_.value.id,type:"database",isSharedBase:o.value,projectPage:f("projectOverviewTab")?void 0:"collaborator"})}`,H?{open:Hs}:void 0)},$e=D(!1),ke=Y(()=>{var H,N;return f("tableCreate",{roles:_.value.project_role,source:(N=(H=_.value)==null?void 0:H.sources)==null?void 0:N[0]})});return(H,N)=>{var Ce,Te,Ee,Oe,Le,fe,Ne;const te=la,ce=Ps,we=Il,c=ze,P=ct,re=Vl,le=Rt,ye=Li,de=yo,xe=Lt,Ie=Nt,C=St,A=Ut,ae=Ms,pe=zt,be=ko,De=xo,Pe=vt("e");return(Ce=e(_))!=null&&Ce.id&&!e(_).isLoading?(t(),x("div",Ri,[l("div",null,[s(ce,null,{default:i(()=>[e(o)?(t(),x("div",Ai,N[9]||(N[9]=[l("div",{"data-testid":"nc-workspace-menu",class:"flex items-center nc-workspace-menu overflow-hidden py-1.25 pr-0.25 justify-center w-full"},[l("a",{class:"w-24 min-w-10 transition-all duration-200 p-1 transform",href:"https://github.com/nocodb/nocodb",target:"_blank",rel:"noopener noreferrer"},[l("img",{alt:"NocoDB",src:wo})]),l("div",{class:"flex flex-grow"})],-1)]))):(t(),p(te,{key:1,ref_key:"projectNodeRef",ref:oe,"is-project-header":""},null,512))]),_:1}),s(we,{placeholder:"Search table, view"}),e(o)?k("",!0):(t(),x("div",zi,[e(ke)?(t(),x("div",Fi,[s(le,{visible:e($e),"onUpdate:visible":N[2]||(N[2]=ee=>ge($e)?$e.value=ee:null)},{overlay:i(()=>[s(re,{visible:e($e),"onUpdate:visible":N[0]||(N[0]=ee=>ge($e)?$e.value=ee:null),onNewTable:N[1]||(N[1]=ee=>ne())},null,8,["visible"])]),default:i(()=>[s(P,{type:"text",size:"small","full-width":"",class:Q(["nc-home-create-new-btn nc-home-create-new-dropdown-btn !text-brand-500 !hover:text-brand-600 !xs:hidden !w-full !px-3",e($e)?"active":""]),"icon-position":"right","data-testid":"nc-home-create-new-btn"},{icon:i(()=>[s(c,{icon:"chevronDown",class:"flex-none"})]),default:i(()=>[l("div",Gi,[s(c,{icon:"ncPlusCircleSolid"}),l("div",null,m(H.$t("labels.createNew")),1)])]),_:1},8,["class"])]),_:1},8,["visible"])])):k("",!0),_e((t(),p(P,{type:"text",size:"xsmall",class:Q(["nc-sidebar-top-button !h-8 w-full !pl-0",{"!text-brand-600 !bg-brand-50 !hover:bg-brand-50":e(b)===e(_).id&&e(Z),"!hover:bg-gray-200 !hover:text-gray-700":!(e(b)===e(_).id&&e(Z))}]),centered:!1,"data-testid":"nc-sidebar-base-overview-btn",onClick:he},{default:i(()=>[l("div",{class:Q(["flex items-center gap-2 pl-3 pr-1",{"font-semibold":e(b)===e(_).id&&e(Z)}])},[s(c,{icon:"home1",class:"!h-4 w-4"}),l("div",null,m(H.$t("general.overview")),1)],2)]),_:1},8,["class"])),[[Pe,["c:base:home"]]])]))]),l("div",Wi,[l("div",Hi,[l("div",{class:"nc-project-home-section-header !cursor-pointer",onClick:N[3]||(N[3]=Ve(ee=>R.value=!e(R),["stop"]))},[l("div",Ki,m(H.$t("objects.tables")),1),s(c,{icon:"chevronRight",class:Q(["flex-none nc-sidebar-source-node-btns cursor-pointer transform transition-transform duration-200 text-[20px] text-nc-content-gray-muted",{"!rotate-90":e(R)}])},null,8,["class"])]),l("div",{key:"g1",class:Q(["overflow-x-hidden transition-max-height",{"max-h-0":!e(R)}])},[e(_)&&((Te=e(_))!=null&&Te.sources)?(t(),x("div",{key:0,class:Q(["flex-1 overflow-y-auto overflow-x-hidden flex flex-col",{"mb-[20px]":e(o)}])},[(Le=(Oe=(Ee=e(_))==null?void 0:Ee.sources)==null?void 0:Oe[0])!=null&&Le.enabled?(t(),x("div",qi,[l("div",Ji,[s(ye,{base:e(_),"source-index":0,"show-create-table-btn":e(ke)},null,8,["base","show-create-table-btn"])])])):k("",!0),(Ne=(fe=e(_))==null?void 0:fe.sources)!=null&&Ne.slice(1).some(ee=>ee.enabled)?(t(),x("div",Qi,[l("div",Yi,[(t(!0),x(Se,null,ms(e(_).sources,(ee,st)=>(t(),x("div",{key:`source-${ee.id}`},[st===0?(t(),x(Se,{key:0},[],64)):ee&&ee.enabled?_e((t(),p(De,{key:1,"active-key":e(S),"onUpdate:activeKey":N[8]||(N[8]=rt=>ge(S)?S.value=rt:null),class:Q(["!mx-0 !px-0 nc-sidebar-source-node",[{hidden:e(T)&&!!e(z)}]]),"expand-icon-position":"right",bordered:!1,ghost:""},{expandIcon:i(({isActive:rt,header:et})=>{var Re,M,B,y,d;return[(M=(Re=et==null?void 0:et[0])==null?void 0:Re.props)!=null&&M["data-sourceId"]&&((d=e(v)[(y=(B=et==null?void 0:et[0])==null?void 0:B.props)==null?void 0:y["data-sourceId"]])!=null&&d.editMode)?k("",!0):_e((t(),p(P,{key:0,type:"text",size:"xxsmall",class:Q(["nc-sidebar-node-btn nc-sidebar-expand !xs:opacity-100 !mr-0 mt-0.5",{"!opacity-100 !inline-block":e(h)[ee.id]}])},{default:i(()=>[s(c,{icon:"chevronDown",class:Q(["flex-none cursor-pointer transform transition-transform duration-500 rotate-270",{"!rotate-360":rt}])},null,8,["class"])]),_:2},1032,["class"])),[[Pe,["c:external:base:expand"]]])]}),default:i(()=>[(t(),p(be,{key:`collapse-${ee.id}`},{header:i(()=>{var rt,et,Re,M;return[l("div",{"data-sourceId":ee.id,class:Q(["nc-sidebar-node min-w-20 w-full h-full flex flex-row group py-0.5 !mr-0",{"pr-0.5":ee.id&&((rt=e(v)[ee.id])==null?void 0:rt.editMode),"pr-6.5":!(ee.id&&((et=e(v)[ee.id])!=null&&et.editMode))}])},[st===0?(t(),x("div",{key:0,class:"source-context flex items-center gap-2 text-gray-800 nc-sidebar-node-title",onContextmenu:B=>e($)("source",ee)},[s(de,{class:"flex-none min-w-4 !xs:min-w-4.25 !xs:w-4.25 !xs:text-sm"}),q(" "+m(H.$t("general.default")),1)],40,Xi)):(t(),x("div",{key:1,class:"source-context flex flex-grow items-center gap-1 text-gray-800 min-w-1/20 max-w-full",onContextmenu:B=>e($)("source",ee)},[s(xe,{"tooltip-style":{"min-width":"max-content"},"overlay-inner-style":{"min-width":"max-content"},"mouse-leave-delay":.3,placement:"topLeft",trigger:"hover",class:"flex items-center"},{title:i(()=>[(t(),p(ps(("getSourceTooltip"in H?H.getSourceTooltip:e(Ui))(ee))))]),default:i(()=>[l("div",tr,[s(de,{color:("getSourceIconColor"in H?H.getSourceIconColor:e(Ni))(ee),class:"flex-none min-w-4 !xs:min-w-4.25 !xs:w-4.25 !xs:text-sm"},null,8,["color"])])]),_:2},1024),ee.id&&((Re=e(v)[ee.id])!=null&&Re.editMode)?(t(),p(Ie,{key:0,ref_for:!0,ref_key:"input",ref:I,value:e(v)[ee.id].tempTitle,"onUpdate:value":B=>e(v)[ee.id].tempTitle=B,class:"capitalize !bg-transparent flex-1 mr-4 !pr-1.5 !text-gray-700 !rounded-md !h-6 animate-sidebar-node-input-padding",style:{fontWeight:"inherit"},"data-source-rename-input-id":ee.id,onClick:N[4]||(N[4]=Ve(()=>{},["stop"])),onKeydown:[N[5]||(N[5]=Tt(Ve(()=>{},["stop","prevent"]),["enter"])),N[6]||(N[6]=Ve(()=>{},["stop"]))],onKeyup:[Tt(B=>ve(ee.id),["enter"]),Tt(B=>ve(ee.id),["esc"])],onBlur:B=>ve(ee.id)},null,8,["value","onUpdate:value","data-source-rename-input-id","onKeyup","onBlur"])):(t(),p(xe,{key:1,class:"nc-sidebar-node-title capitalize text-ellipsis overflow-hidden select-none text-gray-700",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"},"show-on-truncate-only":""},{title:i(()=>[q(m(ee.alias||""),1)]),default:i(()=>[l("span",{"data-testid":`nc-sidebar-base-${ee.alias}`,onDblclick:Ve(B=>W(ee.id),["stop"])},m(ee.alias||""),41,sr)]),_:2},1024))],40,er)),ee.id&&((M=e(v)[ee.id])!=null&&M.editMode)?k("",!0):(t(),x("div",ar,[s(le,{visible:e(h)[ee.id],trigger:["click"],"onUpdate:visible":B=>e(h)[ee.id]=B},{overlay:i(()=>[s(pe,{class:"nc-scrollbar-md !min-w-50",style:{maxHeight:"70vh",overflow:"overlay"},variant:"small",onClick:B=>e(h)[ee.id]=!1},{default:i(()=>[e(f)("baseRename")?(t(),p(C,{key:0,"data-testid":"nc-sidebar-source-rename",onClick:B=>W(ee.id)},{default:i(()=>[s(c,{icon:"rename"}),q(" "+m(H.$t("general.rename")),1)]),_:2},1032,["onClick"])):k("",!0),s(A),s(C,{key:"erd",onClick:B=>ie(ee)},{default:i(()=>[_e((t(),x("div",or,[s(c,{icon:"ncErd"}),q(" "+m(H.$t("title.relations")),1)])),[[Pe,["c:source:erd"]]])]),_:2},1032,["onClick"]),E(ee)?(t(),p(ae,{key:1,base:e(_),"onUpdate:base":N[7]||(N[7]=B=>ge(_)?_.value=B:null),source:ee,"show-source-selector":!1},null,8,["base","source"])):k("",!0)]),_:2},1032,["onClick"])]),default:i(()=>[_e((t(),p(P,{class:Q(["nc-sidebar-node-btn",{"!text-black !opacity-100 !inline-block":e(h)[ee.id]}]),type:"text",size:"xxsmall",onClick:Ve(B=>e(h)[ee.id]=!e(h)[ee.id],["stop"])},{default:i(()=>[s(c,{icon:"threeDotHorizontal",class:"text-xl w-4.75"})]),_:2},1032,["class","onClick"])),[[Pe,["c:source:options"]]])]),_:2},1032,["visible","onUpdate:visible"]),e(f)("tableCreate",{roles:e(j),source:ee})?_e((t(),p(P,{key:0,type:"text",size:"xxsmall",class:Q(["nc-sidebar-node-btn",{"!opacity-100 !inline-block":e(h)[ee.id]}]),onClick:Ve(B=>X(st,!1),["stop"])},{default:i(()=>[s(c,{icon:"plus",class:"text-xl leading-5",style:{"-webkit-text-stroke":"0.15px"}})]),_:2},1032,["class","onClick"])),[[Pe,["c:source:add-table"]]]):k("",!0)]))],10,Zi)]}),default:i(()=>[(t(),x("div",{ref_for:!0,ref:"menuRefs",key:`sortable-${ee.id}-${ee.id&&ee.id in e(K)?e(K)[ee.id]:"0"}`,"nc-source":ee.id},[s(ye,{base:e(_),"source-index":st},null,8,["base","source-index"])],8,nr))]),_:2},1024))]),_:2},1032,["active-key","class"])),[[Pe,["c:source:toggle-expand"]]]):k("",!0)]))),128))])])):k("",!0)],2)):k("",!0)],2)])]),bt(H.$slots,"footer",{},void 0,!0)])):k("",!0)}}}),ir=Object.assign(it(lr,[["__scopeId","data-v-5fb38c3e"]]),{__name:"DashboardTreeViewProjectHome"}),rr=Me({__name:"ProjectWrapper",props:{baseRole:{default:""},base:{}},setup(L){const F=L,u=jt(F,"baseRole"),o=jt(F,"base");return Ot(Js,u),Ot(ht,o),(a,$)=>bt(a.$slots,"default")}}),zs=Object.assign(rr,{__name:"DashboardTreeViewProjectWrapper"}),cr={key:"project-list",class:"nc-treeview-base-list absolute w-full h-full top-0 left-0 z-10 bg-nc-bg-gray-extralight"},dr={class:"w-full"},ur={class:"px-2 h-11 flex items-center"},pr={class:"nc-project-home-section pt-1 !pb-2"},mr={class:"nc-treeview flex-1 relative overflow-auto nc-scrollbar-thin nc-project-home-section"},vr={key:0,class:"nc-project-home-section-header"},br={mode:"inline",class:"nc-treeview pb-0.5 flex-grow min-h-50 overflow-x-hidden"},fr={key:0},_r={class:"nc-project-home-section-item text-nc-content-gray-muted font-normal"},yr={key:1,class:"nc-project-home-section-item text-nc-content-gray-muted font-normal"},gr={key:0,class:"absolute w-full h-full top-0 left-0 z-5 flex flex-col"},wr=Me({__name:"List",setup(L){const{isUIAllowed:F}=lt(),{$e:u,$api:o}=Je(),a=vs(),$=a.currentRoute,U=tt(),{createProject:_,updateProject:R}=U,{bases:V,basesList:n,activeProjectId:b,showProjectList:r,isProjectsLoaded:f}=ue(U),{isWorkspaceLoading:g,activeWorkspaceId:G}=ue($t()),w=D(!1),v=D(""),I=D(),j=D(!1),O=Y(()=>n.value.filter(C=>Xt(C.title,v.value))),h=Ze(),{loadTables:S}=h,{isSharedBase:T,base:z}=ue(h),K=qe(),{loadProjectTables:oe}=K,{activeTable:J}=ue(K),{isMobileMode:Z}=Xe(),{setMeta:E}=Et(),{allRecentViews:W}=ue(nt()),{refreshCommandPalette:ve}=ft(),{addUndo:X,defineProjectScope:ie}=hs(),ne=Y(()=>n.value.find(C=>C.id===b.value)),he=D(!1),$e=Y(()=>he.value?!f.value:!0);let ke;He(()=>Us($.value.params),()=>{if(clearTimeout(ke),Us($.value.params))if(f.value&&!n.value.length){he.value=!0,r.value=!0;return}else he.value=!1;else{he.value=!0;return}ke=setTimeout(()=>{var C;he.value=!0,clearTimeout(ke),!r.value&&(!b.value||!((C=ne.value)!=null&&C.id))&&(r.value=!0)},5e3)},{immediate:!0});const H=Is({}),N=(C,A)=>{H.type=C,H.value=A};function te(C){if(!C||!C.id)return;u("c:view:description");const A=D(!0),{close:ae}=pt(oo,{modelValue:A,view:C,"onUpdate:modelValue":pe});function pe(){A.value=!1,ae(1e3)}}function ce(C){if(!C||!C.id)return;u("c:table:description");const A=D(!0),{close:ae}=pt(Wo,{modelValue:A,tableMeta:C,"onUpdate:modelValue":pe});function pe(){A.value=!1,ae(1e3)}}const we=D("");async function c(C,A,ae,pe,be=!1,De){if(!(!C||!C.source_id)&&(A&&(A=A.trim()),!(A===ae&&!De))){pe(A);try{await o.dbTable.update(C.id,{base_id:C.base_id,table_name:A,title:A}),await oe(C.base_id,!0),be||X({redo:{fn:(Ce,Te,Ee,Oe)=>{c(Ce,Te,Ee,Oe,!0,!0)},args:[C,A,ae,pe]},undo:{fn:(Ce,Te,Ee,Oe)=>{c(Ce,Te,Ee,Oe,!0,!0)},args:[C,ae,A,pe]},scope:ie({model:C})}),await S(),W.value=W.value.map(Ce=>(Ce.tableID===C.id&&(Ce.isDefault&&(Ce.viewName=A),Ce.tableName=A),Ce));const Pe=await o.dbTable.read(C.id);await E(Pe),ve(),u("a:table:rename")}catch(Pe){Be.error(await Ke(Pe)),pe(ae)}}}function P(C,A){if(!C&&!(A||n.value[0].id))return;u("c:table:create:navdraw");const ae=D(!0),{close:pe}=pt(Qs,{modelValue:ae,sourceId:C,baseId:A||n.value[0].id,"onUpdate:modelValue":be});function be(){ae.value=!1,pe(1e3)}}const re=async C=>{if(!C||!C.id||!C.base_id)return;const A=D(!0);u("c:table:duplicate");const{close:ae}=pt(Jo,{modelValue:A,table:C,"onUpdate:modelValue":pe});function pe(){A.value=!1,ae(1e3)}},le=Y(()=>{var C,A,ae,pe;return((A=(C=z.value)==null?void 0:C.sources)==null?void 0:A[0])&&F("tableCreate",{source:(pe=(ae=z.value)==null?void 0:ae.sources)==null?void 0:pe[0]})&&$.value.name!=="index"&&$.value.name!=="index-index"&&$.value.name!=="index-index-create"&&$.value.name!=="index-index-create-external"&&$.value.name!=="index-user-index"});Rs(document,"keydown",async C=>{var ae;const A=ls()?C.metaKey:C.ctrlKey;if(!Fa()&&C.altKey&&!C.shiftKey&&!A)switch(C.keyCode){case 84:{if(le.value&&!Ga()){C.preventDefault(),u("c:shortcut",{key:"ALT + T"});const pe=b.value,be=pe?V.value.get(pe):void 0;if(!be)return;pe&&P((ae=be.sources)==null?void 0:ae[0].id,pe)}break}case 76:{$.value.params.baseId&&a.push({query:{...$.value.query,clear:$.value.query.clear==="1"?void 0:"1"}});break}case 68:{C.stopPropagation(),w.value=!0;break}}});const ye=C=>{var A;(A=document.querySelector(".source-context, .table-context"))!=null&&A.contains(C.target)||N("main")};Ot(os,{setMenuContext:N,duplicateTable:re,handleTableRename:c,openViewDescriptionDialog:te,openTableDescriptionDialog:ce,contextMenuTarget:H,tableRenameId:we}),Rs(document,"contextmenu",ye,!0);const de=()=>{var A;const C=document.querySelector(`.nc-treeview [data-table-id="${(A=J.value)==null?void 0:A.id}"]`);C&&(C==null||C.scrollIntoView({behavior:"smooth",block:"nearest"}))},xe=async C=>{var Pe,Ce;const{moved:{newIndex:A=0,oldIndex:ae=0,element:pe}}=C;if(!(pe!=null&&pe.id))return;let be;n.value.length-1===A?be=Math.max(...n.value.map(Te=>(Te==null?void 0:Te.order)??0))+1:A===0?be=Math.min(...n.value.map(Te=>(Te==null?void 0:Te.order)??0))/2:be=(parseFloat(String(((Pe=n.value[A-1])==null?void 0:Pe.order)??0))+parseFloat(String(((Ce=n.value[A+1])==null?void 0:Ce.order)??0)))/2;const De=isNaN(Number(be))?ae:be;await R(pe.id,{order:De}),u("a:base:reorder")};He(()=>{var C;return(C=J.value)==null?void 0:C.id},()=>{var C;(C=J.value)!=null&&C.id&&setTimeout(()=>{de()},1e3)},{immediate:!0});const Ie=D(void 0);return He([r,G],([C,A],[ae,pe])=>{if(!f.value){Ie.value=void 0;return}A!==pe?Ie.value=void 0:Ie.value=C?"slide-left":"slide-right"},{flush:"pre"}),He([I,r],()=>{!I.value||!r.value||yt(()=>{var C,A;(A=(C=I.value)==null?void 0:C.input)==null||A.focus()})}),He(f,()=>{f.value&&n.value.length?Ie.value=r.value?"slide-left":"slide-right":Ie.value=void 0,f.value&&!n.value.length&&(he.value=!0,r.value=!0)}),(C,A)=>{var Ee,Oe;const ae=un,pe=Ps,be=mn,De=yn,Pe=la,Ce=ir,Te=Ys;return t(),x("div",{class:Q(["nc-treeview-container relative w-full h-full overflow-hidden flex items-stretch",e(r)?"nc-treeview-container-base-list":"nc-treeview-container-active-base"])},[e($e)?(t(),p(ae,{key:0})):(t(),x(Se,{key:1},[s(Wa,{name:e(Ie),appear:""},{default:i(()=>{var Le,fe;return[e(r)?(t(),x("div",cr,[l("div",dr,[s(pe),l("div",ur,[s(be,{ref_key:"searchInputRef",ref:I,value:e(v),"onUpdate:value":A[0]||(A[0]=Ne=>ge(v)?v.value=Ne:null)},null,8,["value"])]),l("div",pr,[s(De,{"is-open":e(j),"onUpdate:isOpen":A[1]||(A[1]=Ne=>ge(j)?j.value=Ne:null),modal:"",type:"text",class:"nc-sidebar-create-base-btn nc-project-home-section-item !text-brand-500 !hover:text-brand-600 !hover:bg-none !xs:hidden w-full","data-testid":"nc-sidebar-create-base-btn"},null,8,["is-open"])])]),l("div",mr,[e(T)?k("",!0):(t(),x("div",vr,m(C.$t("objects.projects")),1)),l("div",br,[(Le=e(n))!=null&&Le.length?(t(),x("div",fr,[s(e($o),{"model-value":e(n),disabled:e(Z)||!e(F)("baseReorder")||((fe=e(n))==null?void 0:fe.length)<2,"item-key":"id",handle:".base-title-node","ghost-class":"ghost",filter:"isTouchEvent"in C?C.isTouchEvent:e(js),onChange:A[2]||(A[2]=Ne=>xe(Ne))},Ds({item:i(({element:Ne})=>[("searchCompare"in C?C.searchCompare:e(Xt))(Ne.title,e(v))?(t(),x("div",{key:Ne.id},[s(zs,{"base-role":Ne.project_role,base:Ne},{default:i(()=>[s(Pe)]),_:2},1032,["base-role","base"])])):k("",!0)]),_:2},[!e(g)&&!e(O).length?{name:"footer",fn:i(()=>[l("div",_r,m(C.$t("placeholder.noResultsFoundForYourSearch")),1)]),key:"0"}:void 0]),1032,["model-value","disabled","filter"])])):(t(),x("div",yr,"No Bases"))])]),bt(C.$slots,"footer",{},void 0,!0)])):k("",!0)]}),_:3},8,["name"]),e(r)?k("",!0):(t(),x(Se,{key:0},[e(b)&&((Ee=e(ne))!=null&&Ee.id)&&!e(ne).isLoading?(t(),x("div",gr,[s(zs,{"base-role":(Oe=e(ne))==null?void 0:Oe.project_role,base:e(ne)},{default:i(()=>[s(Ce,null,{footer:i(()=>[bt(C.$slots,"footer",{},void 0,!0)]),_:3})]),_:3},8,["base-role","base"])])):(t(),p(ae,{key:1}))],64)),s(Te,{modelValue:e(w),"onUpdate:modelValue":A[3]||(A[3]=Le=>ge(w)?w.value=Le:null)},null,8,["modelValue"])],64))],2)}}}),xr=Object.assign(it(wr,[["__scopeId","data-v-0cd14af1"]]),{__name:"DashboardTreeViewProjectList"}),kr={class:"flex flex-col gap-4"},$r={class:"flex items-center gap-2"},hr={class:"flex items-center gap-2"},Ir={class:"text-sm text-gray-500"},Dr=Me({__name:"UpgradeWs",props:{modelValue:{type:Boolean},jobId:{}},emits:["update:modelValue"],setup(L,{emit:F}){const u=L,a=mt(u,"modelValue",F),{$poller:$}=Je(),U=$t(),{activeWorkspace:_}=ue(U),R=D(""),V=D(!1),n=D(!1);function b(r){n.value=!0,$.subscribe({id:r},async f=>{var g;f.status!=="close"&&(f.status===kt.COMPLETED||f.status===kt.FAILED?(V.value=!0,n.value=!1,U.loadWorkspace(_.value.id)):R.value=((g=f.data)==null?void 0:g.message)||"Upgrading workspace...")})}return as(()=>{u.jobId&&b(u.jobId)}),(r,f)=>{const g=ze,G=Ts,w=ct,v=At;return t(),p(v,{visible:e(a),"onUpdate:visible":f[1]||(f[1]=I=>ge(a)?a.value=I:null),class:"!w-[30rem]","wrap-class-name":"nc-modal-upgrade-ws"},{default:i(()=>[l("div",kr,[l("div",$r,[s(g,{icon:"nocodb1",class:"w-5 h-5"}),f[2]||(f[2]=l("div",{class:"text-lg font-bold self-center"},"Upgrading Workspace",-1))]),l("div",hr,[e(n)?(t(),p(G,{key:0})):k("",!0),l("div",Ir,m(e(R)),1)]),e(V)?(t(),p(w,{key:0,type:"primary",onClick:f[0]||(f[0]=I=>a.value=!1)},{default:i(()=>f[3]||(f[3]=[q(" Done ")])),_:1,__:[3]})):k("",!0)])]),_:1},8,["visible"])}}}),Cr=Object.assign(Dr,{__name:"DlgUpgradeWs"}),Tr=ns(()=>is(()=>import("./XIQ6oBQW.js"),__vite__mapDeps([13,12,2,3]),import.meta.url).then(L=>L.default||L)),jr={class:"nc-sidebar flex flex-col bg-nc-bg-gray-extralight outline-r-1 outline-nc-border-gray-light select-none w-full h-full font-medium z-2",style:{outlineWidth:"1px"}},Sr={key:0,class:"nc-sidebar-bottom-section"},Vr={key:2,class:"flex flex-row w-full justify-between pt-0.5 truncate"},Pr=Me({__name:"Sidebar",setup(L){const F=$t(),{upgradeWsDlg:u,upgradeWsJobId:o}=ue(F),{isSharedBase:a}=ue(Ze()),{isMobileMode:$,appInfo:U}=Xe(),_=D(),R=D(!1),V=()=>{if(!$.value)return _.value&&(_.value.scrollTop>0?R.value=!0:R.value=!1),!1};return as(()=>{var n;(n=_.value)==null||n.addEventListener("scroll",V)}),Ha(()=>{var n;(n=_.value)==null||n.removeEventListener("scroll",V)}),(n,b)=>{const r=Do,f=Tr,g=Mo,G=Bo,w=to,v=Uo,I=xr,j=Cr;return t(),x("div",jr,[s(I,null,{footer:i(()=>[e(a)?k("",!0):(t(),x("div",Sr,[("isEeUI"in n?n.isEeUI:e(We))?(t(),p(r,{key:0})):k("",!0),s(f),("isEeUI"in n?n.isEeUI:e(We))?k("",!0):(t(),p(g,{key:1})),s(G),!e($)&&!e(U).ee?(t(),x("div",Vr,[s(w)])):k("",!0),e(U).isOnPrem?(t(),p(v,{key:3})):k("",!0)]))]),_:1}),e(o)?(t(),p(j,{key:0,modelValue:e(u),"onUpdate:modelValue":b[0]||(b[0]=O=>ge(u)?u.value=O:null),"job-id":e(o)},null,8,["modelValue","job-id"])):k("",!0)])}}}),Mr=Object.assign(it(Pr,[["__scopeId","data-v-4d5be13a"]]),{__name:"DashboardSidebar"}),Or={class:"prose-xl font-bold self-center"},Er={class:"prose-md self-center text-gray-500 mt-4"},Br={class:"text-xs p-2"},Lr={class:"flex flex-row gap-x-2 mt-2.5 pt-2.5 justify-end"},Nr=Me({__name:"SharedBaseDuplicate",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(L,{emit:F}){const u=L,o=F,{api:a}=es(),{sharedBaseId:$}=aa(),U=$t(),{populateWorkspace:_}=U,{workspacesList:R}=ue(U),{ncNavigateTo:V}=Xe(),n=mt(u,"modelValue",o),b=D({includeData:!0,includeViews:!0}),r=Y(()=>{const{includeData:j,includeViews:O}=b.value;return{excludeData:!j,excludeViews:!O}}),f=D(!1),g=D(),{$e:G,$poller:w}=Je(),v=async()=>{!g.value&&We;try{f.value=!0;const j=await a.base.duplicateShared(g.value??"nc",$.value,{options:r.value,base:We?{fk_workspace_id:g.value,type:Qa.DATABASE}:{}});$.value=null,w.subscribe({id:j.id},async O=>{O.status!=="close"&&(O.status===kt.COMPLETED?(console.log("job completed",j),await V({...We?{workspaceId:j.fk_workspace_id}:{},baseId:j.base_id}),f.value=!1,n.value=!1):O.status===kt.FAILED&&(Be.error("Failed to duplicate shared base"),await _(),f.value=!1,n.value=!1))}),G("a:base:duplicate-shared-base")}catch(j){Be.error(await Ke(j)),f.value=!1,n.value=!1}},I=Y(()=>{var j;return(j=R.value)==null?void 0:j.filter(O=>O.roles===As.OWNER||O.roles===As.CREATOR).map(O=>({label:`${O.title[0].toUpperCase()}${O.title.slice(1)}`,value:O.id}))});return(j,O)=>{const h=Ka,S=qa,T=Ja,z=ct,K=At,oe=vt("e");return t(),p(K,{visible:e(n),"onUpdate:visible":O[4]||(O[4]=J=>ge(n)?n.value=J:null),class:"!w-[30rem]","wrap-class-name":"nc-modal-project-duplicate"},{default:i(()=>[l("div",null,[l("div",Or,m(j.$t("general.duplicate"))+" "+m(j.$t("labels.sharedBase")),1),("isEeUI"in j?j.isEeUI:e(We))?(t(),x(Se,{key:0},[O[5]||(O[5]=l("div",{class:"my-4"},"Select workspace to duplicate shared base to:",-1)),s(h,{value:e(g),"onUpdate:value":O[0]||(O[0]=J=>ge(g)?g.value=J:null),class:"w-full",options:e(I),placeholder:"Select Workspace"},null,8,["value","options"])],64)):k("",!0),l("div",Er,m(j.$t("title.advancedSettings")),1),s(S,{class:"!m-0 !p-0 !my-2"}),l("div",Br,[s(T,{checked:e(b).includeData,"onUpdate:checked":O[1]||(O[1]=J=>e(b).includeData=J)},{default:i(()=>[q(m(j.$t("labels.includeData")),1)]),_:1},8,["checked"]),s(T,{checked:e(b).includeViews,"onUpdate:checked":O[2]||(O[2]=J=>e(b).includeViews=J)},{default:i(()=>[q(m(j.$t("labels.includeView")),1)]),_:1},8,["checked"])])]),l("div",Lr,[s(z,{key:"back",type:"secondary",onClick:O[3]||(O[3]=J=>n.value=!1)},{default:i(()=>[q(m(j.$t("general.cancel")),1)]),_:1}),_e((t(),p(z,{key:"submit",loading:e(f),disabled:!e(g)&&("isEeUI"in j?j.isEeUI:e(We)),onClick:v},{default:i(()=>[q(m(j.$t("general.confirm")),1)]),_:1},8,["loading","disabled"])),[[oe,["a:shared-base:duplicate"]]])])]),_:1},8,["visible"])}}}),Ur=Object.assign(Nr,{__name:"DlgSharedBaseDuplicate"}),Sc=Me({__name:"index",setup(L){const{isSharedBase:F,isSharedErd:u}=ue(Ze()),o=tt(),{populateWorkspace:a}=$t(),{signedIn:$}=Xe(),{isUIAllowed:U}=lt(),R=vs().currentRoute,{basesList:V}=ue(o),n=async()=>{const w=R.value.name;if(w!=="index-typeOrId"&&w!=="index")return;const v=eo().get(),I=v?o.basesList.find(j=>j.id===v)??o.basesList[0]:o.basesList[0];I!=null&&I.id&&await o.navigateToProject({baseId:I.id})},b=Y(()=>{const w=R.value.name||"";return!w.startsWith("index-typeOrId-baseId-")&&!["index","index-typeOrId","index-typeOrId-feed","index-typeOrId-integrations"].includes(w)}),r=Y(()=>(R.value.name||"").startsWith("index-typeOrId-form-viewId")),{sharedBaseId:f}=aa(),g=D(!1);async function G(){if(!b.value){if(R.value.params.typeOrId==="base"){await a();return}if(!$.value){Pt("/signIn");return}await a(),!R.value.params.baseId&&V.value.length>0&&await n()}}return He(()=>R.value.params.typeOrId,()=>{G()}),as(()=>{G().then(()=>{if(f.value){if(!U("baseDuplicate")){Be.error("You are not allowed to create base");return}g.value=!0}})}),He([()=>r.value,()=>b.value,()=>F.value,()=>u.value],w=>{Ya(!w.some(Boolean))},{immediate:!0}),(w,v)=>{const I=Za,j=Xa,O=Mr,h=Ur;return t(),x("div",null,[e(r)?(t(),p(j,{key:0},{default:i(()=>[s(I)]),_:1})):e(b)?(t(),p(j,{key:1,name:"shared-view"},{default:i(()=>[s(I)]),_:1})):(t(),p(j,{key:2,name:"dashboard"},{sidebar:i(()=>[s(O)]),content:i(()=>[s(I)]),_:1})),e(U)("baseDuplicate")?(t(),p(h,{key:3,modelValue:e(g),"onUpdate:modelValue":v[0]||(v[0]=S=>ge(g)?g.value=S:null)},null,8,["modelValue"])):k("",!0)])}}});export{Sc as default};
