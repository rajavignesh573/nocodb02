const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DBj5Znvf.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./B94p8ToD.js","./DkDj6Z7Z.js","./gAYHr7Gr.js","./Cd4chHHL.js","./boyBAVNN.js","./TextArea.CP5awuq0.css"])))=>i.map(i=>d[i]);
import{e as D,a$ as K,as as Q,G as u,r as d,bX as X,bd as q,fO as H,kU as J,g6 as W,j7 as Y,fQ as Z,gu as ee,gz as ae,T as te,n as b,L as e,c as se,I as j,K as ne,o as w,b as oe,w as G,a as x,O as le,b3 as ie,M as ue,d as de,t as re,ap as ce,ag as me,Q as ve,ba as pe,aX as fe,h5 as _e,gT as Ie,a_ as ge,_ as be}from"./DRA9KN5F.js";import{a as we}from"./B94p8ToD.js";import{e as Ae}from"./gAYHr7Gr.js";import"./DkDj6Z7Z.js";import"./Cd4chHHL.js";import"./boyBAVNN.js";const je=fe(()=>ge(()=>import("./DBj5Znvf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url).then(m=>m.default||m)),xe=["disabled"],ye={class:"flex items-center gap-1"},Ce=D({__name:"AI",props:{modelValue:{}},emits:["update:modelValue","save"],setup(m,{emit:S}){const T=m,y=S,{generateRows:B,generatingRows:v,generatingColumnRows:p,aiIntegrations:z}=K(),{row:C}=we(),{isUIAllowed:k}=Q(),V=u(X,d(!1)),r=u(q,d()),a=u(H),M=u(J,d(!1)),N=u(W,d(!1)),F=u(Y,d(!1)),L=u(Z,d(!1)),P=u(ee,d(!1)),O=u(ae,d(!1)),o=te(T,"modelValue",y),f=d(!1),A=b(()=>{var s,i;return!!((i=(s=a.value)==null?void 0:s.colOptions)==null?void 0:i.fk_integration_id)}),c=b(()=>{var n;if((n=r.value)!=null&&n.columns)return Ae(e(C).row,r.value.columns)}),R=async()=>{var _,I,g;if(!((_=r==null?void 0:r.value)!=null&&_.id)||!r.value.columns||!((I=a==null?void 0:a.value)!=null&&I.id)||!c.value)return;const n=_e((g=a.value.colOptions)==null?void 0:g.output_column_ids)&&a.value.colOptions.output_column_ids.split(",").length>1?a.value.colOptions.output_column_ids.split(","):[],s=n.map(t=>{var l,E;return(E=(l=r.value)==null?void 0:l.columnsById)==null?void 0:E[t]}).filter(Boolean);v.value.push(c.value),p.value.push(a.value.id);const i=await B(r.value.id,a.value.id,[c.value],!1,!!O.value);if(i!=null&&i.length){const t=i[0];if(n.length)for(const l of s)l&&(e(C).row[l.title]=t[l.title]);else{const l=t[a.value.title];l&&typeof l=="object"?(o.value=l,setTimeout(()=>{f.value=!1},100)):o.value={...Ie(o.value)?o.value:{},isStale:!1,value:t[a.value.title]}}}v.value=v.value.filter(t=>t!==c.value),p.value=p.value.filter(t=>t!==a.value.id)},h=b(()=>{var n;return!!(c.value&&v.value.includes(c.value)&&((n=a.value)!=null&&n.id)&&p.value.includes(a.value.id))}),U=pe(()=>{o.value={...o.value},y("save")},1e3),$=b(()=>!A.value||h.value||V.value||!k("dataEdit"));return(n,s)=>{const i=ie,_=ue,I=ce,g=je;return(!e(N)||e(L)||e(P))&&!e(o)?(w(),se("div",{key:0,class:me(["flex items-center w-full",{"justify-center":e(F)&&!e(O)}])},[oe(I,{disabled:e(A)||e(V)||e(k)("dataEdit"),class:"flex"},{title:G(()=>[de(re(e(z).length?n.$t("tooltip.aiIntegrationReConfigure"):n.$t("tooltip.aiIntegrationAddAndReConfigure")),1)]),default:G(()=>[x("button",{class:"nc-cell-ai-button nc-cell-button h-6",size:"small",disabled:e($),onClick:le(R,["stop"])},[x("div",ye,[e(h)?(w(),j(i,{key:0,size:"regular"})):(w(),j(_,{key:1,icon:"ncAutoAwesome",class:"h-4 w-4"})),s[3]||(s[3]=x("span",{class:"text-small leading-[18px] truncate font-medium"},"Generate",-1))])],8,xe)]),_:1},8,["disabled"])],2)):e(o)?(w(),j(g,{key:1,modelValue:e(o).value,"onUpdate:modelValue":[s[0]||(s[0]=t=>e(o).value=t),e(U)],"is-ai-edited":e(f),"onUpdate:isAiEdited":s[1]||(s[1]=t=>ve(f)?f.value=t:null),"is-ai":!0,"ai-meta":e(o),"is-field-ai-integration-available":e(A),onGenerate:R,onClose:s[2]||(s[2]=t=>M.value=!1)},null,8,["modelValue","is-ai-edited","ai-meta","is-field-ai-integration-available","onUpdate:modelValue"])):ne("",!0)}}}),Se=Object.assign(be(Ce,[["__scopeId","data-v-860c5567"]]),{__name:"CellAI"});export{Se as default};
