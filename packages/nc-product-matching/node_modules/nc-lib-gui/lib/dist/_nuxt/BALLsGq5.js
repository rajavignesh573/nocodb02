const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D8ZW_kPH.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./Header.CU2xE2ZP.css","./oAFgQQek.js","./CI3EriLB.js","./BYKJ-MHf.js","./gAYHr7Gr.js","./BBg0y0zb.js","./DCm6TF8M.js","./Bj4kMpzI.js","./CbSESqy_.js","./Bxzk9hCO.js","./CbX26EBz.js","./TimeSelector.DAR2lbHN.css","./Bm6QmuXP.js","./CkpISeXq.js","./index.N-A1gxk9.css","./zMMvJhqz.js","./FilterInput.7KjqjE1F.css","./ytmFgNfN.js","./Pagination.Cmvjwryu.css","./DkDj6Z7Z.js","./CQa0sIfA.js","./DxC2Oool.js","./By5RWL3d.js","./Cd4chHHL.js","./boyBAVNN.js","./B94p8ToD.js","./DfIS_byq.js","./BVqTF1QK.js","./DP83Cqnl.js","./CNwEZGnv.js","./DlXIlcns.js","./Ce4xoeky.js","./ListItem.DqIR0qoS.css","./Bw607vNV.js","./yMSt-9W5.js","./D7poRkS0.js","./C2xdh4Xe.js","./C2UaKEE0.js","./Item.GTPiKSkc.css","./C_VN1MCC.js","./index.CMurbi1o.css","./owbQkEXm.js","./DivDataCell.3R8zfazT.css","./CVZBrAgI.js","./LhVKWcKT.js","./QeWwuUYP.js","./index._6B72PDH.css","./B89wxTuy.js","./DjPyxH1k.js","./Markdown.CUPXKfeQ.css","./DCa6wpIA.js","./B8gs0dG7.js","./mXY_vhPu.js","./Comments.DTONmK0N.css","./B1qoNiTF.js","./CYKJe2Bk.js","./DkpDpjnr.js","./Dv0nYk-Y.js","./Cell.BBaBjsLL.css","./CHRPOXXy.js","./gByPF8bR.js","./Modal.CB1oWLel.css","./BCBMEREK.js","./DGFEr0h-.js","./YbUkeyWR.js","./lL-0_K96.js","./CIOK9Y4w.js","./C3FZdmXk.js","./index.C8L8AhJa.css","./DDmv9w84.js","./DWLi1ZcL.js","./LockView.BWC8JyQk.css","./CC4cUItJ.js","./EcM5l_HA.js","./BLPDl4Qg.js","./CsX17Y_h.js","./C_gbauhL.js","./BmscXXs6.js","./ColumnMenu.tCfxYPwr.css","./CG-5KGUk.js","./CkvAmLZt.js","./D7OHpRdS.js","./DvtLu3FC.js","./D_txg4HT.js","./SelectOptions.BDAXdwVJ.css","./JqUqXTOd.js","./I4o4wRE2.js","./BMPzbwPk.js","./CwPFbl3n.js","./C5HnjaiI.js","./CBhmoxRW.js","./Bc3_tI4-.js","./CJAyvGKH.js","./D43249YX.js","./U3gU45AW.js","./-iDxnmJF.js","./EditOrAddProvider.C1S70ahv.css","./C1XMFoVa.js","./C-ZUx0lq.js","./YYodiGXA.js","./C316Za7m.js","./CKrOnbU4.js","./index.DA-8lYYb.css","./Q6arX-cQ.js","./DAm3lfXS.js","./ItemChip.DLdmQCyF.css","./HasMany.Bt8cxc73.css","./BcdC5Wne.js","./ManyToMany.BL4O0IuN.css","./DL7lEb66.js","./BelongsTo.BiGhDz14.css","./BAC-pHef.js","./OneToOne.Czf6-FKt.css","./XEafgDD5.js","./BJUOFlKy.js","./CxRmRMsz.js","./5nPynpVe.js","./D0nVnAxk.js","./QrCode.B8NlH_0C.css","./yl5-sYM-.js","./Barcode.DFjssX3i.css","./D1qR1z24.js","./DK9RFSyz.js","./Lookup.Z1yF7HXa.css","./DJpPgcTT.js","./Button.1b2c9vvw.css","./BPAO9gWb.js","./auh2WIfM.js","./Readonly.B_Kbm42u.css"])))=>i.map(i=>d[i]);
import{bi as na,c as H,o as d,a as w,r as f,S as za,a8 as $t,V as St,a7 as Aa,f as sa,J as zt,G as L,bc as Da,ef as Ct,j1 as oa,kD as ia,dM as _t,fL as At,W as Pa,j5 as Na,n as M,Y as wt,a9 as Tt,bX as Dt,ge as Ma,aF as Rt,kE as Fa,aj as it,jh as Ua,hy as Gt,kF as ja,kG as Qt,fZ as Yt,gg as Zt,aC as Ba,ja as ra,aD as Pt,eh as qa,aG as Te,ba as Jt,bU as Ka,gj as ct,a4 as st,a5 as It,fP as Ae,u as Ha,eQ as Ga,eR as Qa,gQ as ua,gR as da,gT as Xt,fB as Wt,fA as ea,fr as Et,kH as Ya,kI as ft,fY as Za,jc as Ja,ie as Xa,jd as Wa,kJ as el,e as xt,T as Nt,as as bt,fO as Vt,g6 as Mt,gf as Ft,bm as ca,g as Ut,bz as jt,ac as Bt,a3 as Ge,ag as dt,O as Re,L as e,I as g,b as fe,ar as va,w as De,M as fa,aX as pe,an as ut,aq as pt,ad as gt,K as Pe,t as Ze,N as pa,d as Lt,bZ as ma,b_ as _a,fg as ya,Q as ha,j as mt,a_ as me,_ as qt,kK as ka,eI as tl,aH as al,ao as ta,iZ as ll,j2 as nl,kL as wa,kM as ga,kk as sl,gz as La,iw as ol,gA as il,bT as vt,kn as ba,iU as rl,kN as aa,b9 as ul,bw as dl,hL as cl,av as rt,bb as nt,j7 as vl,js as fl,id as pl,gS as ml,jr as _l,go as yl,kO as hl,kP as kl,kQ as wl,jt as gl,iu as Ll,hX as bl,i2 as Cl,h7 as la,kR as xl}from"./DRA9KN5F.js";import{_ as Ca}from"./DCm6TF8M.js";import{_ as xa}from"./CI3EriLB.js";import{_ as Ra}from"./ytmFgNfN.js";import{e as Ot}from"./gAYHr7Gr.js";import{u as Rl}from"./DkDj6Z7Z.js";import{u as Il,b as El}from"./CQa0sIfA.js";import{u as Ol}from"./DxC2Oool.js";import{u as Tl}from"./DfIS_byq.js";import{a as Kt}from"./B94p8ToD.js";import{S as Ia}from"./BVqTF1QK.js";import"./CNwEZGnv.js";import{S as Ea}from"./DlXIlcns.js";import{u as Vl}from"./CbX26EBz.js";const $l={class:"nc-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Sl(t,O){return d(),H("svg",$l,O[0]||(O[0]=[w("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"},null,-1)]))}const Ht=na({name:"mdi-plus",render:Sl}),zl=""+new URL("link-records.BXQG6er6.png",import.meta.url).href,[Al,Dl]=Rl((t,O,V,$=p=>{})=>{var Ue,xe,lt;const p=f(O.value),we=()=>{p.value=O.value},{metas:ae,getMeta:k}=za(),{base:S,sqlUis:R}=$t(St()),{getBaseRoles:D}=Aa(),{$api:F,$e:I}=sa(),{isMobileMode:U}=zt(),z=L(Da,f()),y=L(Ct,f(!1)),W=L(oa,!1),G=L(ia,f([])),Ie=L(At,_t()),{addUndo:ee,clone:j,defineViewScope:_e}=Pa(),m=L(Na,f(null)),se=f(),ye=f(),Ve=f([]),Ne=M(()=>Ve.value.reduce((n,l)=>(n[l.fk_column_id]=l,n),{})),T=wt({page:1,query:"",size:10}),ge=f(0),de=wt({page:1,query:"",size:10}),B=f(0),P=f(!1),$e=f([]),le=f([]),oe=f([]),b=f(!1),h=f([]),Ee=wt({state:null}),Le=f(0),{t:be}=Tt(),Me=L(Dt,f(!1)),A=M(()=>{var n;return(n=t.value)==null?void 0:n.colOptions}),{sharedView:ie}=Ma(),{getViewColumns:Qe}=Il(),{getValidSearchQueryForColumn:Ce}=El(),he=((Ue=S.value)==null?void 0:Ue.id)||((lt=(xe=ie.value)==null?void 0:xe.view)==null?void 0:lt.base_id),re=M(()=>{var n,l;return(l=ae==null?void 0:ae.value)==null?void 0:l[(n=t==null?void 0:t.value)==null?void 0:n.fk_model_id]}),x=M(()=>{var n,l;return(l=ae.value)==null?void 0:l[(n=A.value)==null?void 0:n.fk_related_model_id]}),Je=M(()=>{var n;return(n=x.value)!=null&&n.source_id?R.value[x.value.source_id]:Object.values(R.value)[0]}),Fe=M(()=>Ot(p.value.row,re.value.columns)),Be=M(()=>{var n,l;return!y.value||!((l=Rt((n=t.value)==null?void 0:n.meta))!=null&&l[Fa])}),Oe=n=>{var l;return Ot(n,(l=x.value)==null?void 0:l.columns)},Ke=async()=>{var l,r;if(await k(A.value.fk_related_model_id),Me.value)return;const n=A.value.fk_target_view_id??((r=(l=x.value.views)==null?void 0:l[0])==null?void 0:r.id)??"";n&&(Ve.value=await Qe(n)??[])},ce=M(()=>{var n,l,r,o;return((l=(n=x.value)==null?void 0:n.columns)==null?void 0:l.find(v=>v.pv))||((o=(r=x==null?void 0:x.value)==null?void 0:r.columns)==null?void 0:o[0])}),Se=M(()=>{var n;return((n=ce.value)==null?void 0:n.title)||""}),yt=M(()=>{var n;return((n=ce.value)==null?void 0:n.id)||""}),ht=M(()=>{var n,l,r;return((r=(l=(n=x.value)==null?void 0:n.columns)==null?void 0:l.filter(o=>o.pk))==null?void 0:r.map(o=>o.title))??[]}),qe=M(()=>{var n,l,r,o,v;return(v=((l=(n=re.value)==null?void 0:n.columns)==null?void 0:l.find(_=>_.pv))||((o=(r=re==null?void 0:re.value)==null?void 0:r.columns)==null?void 0:o[0]))==null?void 0:v.title}),Ye=M(()=>{var r,o,v,_,te,Q;let n={type:"",format:""};const l=((o=(r=x.value)==null?void 0:r.columns)==null?void 0:o.find(ne=>ne.pv))||((_=(v=x==null?void 0:x.value)==null?void 0:v.columns)==null?void 0:_[0]);return l&&((l==null?void 0:l.uidt)===it.DateTime&&(n={type:l==null?void 0:l.uidt,format:`${((te=Rt(l==null?void 0:l.meta))==null?void 0:te.date_format)??Ua[0]} ${((Q=Rt(l==null?void 0:l.meta))==null?void 0:Q.time_format)??Gt[0]}`}),(l==null?void 0:l.uidt)===it.Time&&(n={type:l==null?void 0:l.uidt,format:`${Gt[0]}`})),n}),kt=M(()=>O.value.row[qe.value]&&Ye.value.type&&Ye.value.format?ja(O.value.row[qe.value],Ye.value.format,Ye.value.format!==it.Time):O.value.row[qe.value]),ot=Qt(Zt,n=>(x.value.columns??[]).filter(l=>Yt(l))[0],f([])),Xe=Qt(Zt,n=>(x.value.columns??[]).filter(l=>!Ba(l)&&!ra(l)&&!Pt(l)&&!Yt(l)).sort((l,r)=>{var o,v,_,te;return Me.value?(((o=l.meta)==null?void 0:o.defaultViewColOrder)??1/0)-(((v=r.meta)==null?void 0:v.defaultViewColOrder)??1/0):(((_=Ne.value[l.id])==null?void 0:_.order)??1/0)-(((te=Ne.value[r.id])==null?void 0:te.order)??1/0)}).slice(0,U.value?1:3),f([])),We=M(()=>{var n,l;return Array.from(new Set([Se.value,...ht.value,...ot.value?[(n=ot.value)==null?void 0:n.title]:[],...(l=Xe.value||[])==null?void 0:l.map(r=>{var o;return(o=r.title)==null?void 0:o.trim()})]))}),et=qa(async()=>{var n,l,r,o;if(!((n=S.value)!=null&&n.id&&((l=S.value)==null?void 0:l.id)===((r=x.value)==null?void 0:r.base_id)))return await D((o=x.value)==null?void 0:o.base_id,{skipUpdatingUser:!0})}),tt=async(n,l)=>{var te;const r=l.colOptions||{};await k(r.fk_related_model_id);const o=(te=ae.value)==null?void 0:te[r==null?void 0:r.fk_related_model_id];if(!o)return;const v=((o==null?void 0:o.columns)||[]).filter(Q=>Q.pv||Q.pk),_=(Q,ne)=>{if(Et(Q))return Q.map(ve=>_(ve,ne)).filter(Boolean);if(!Xt(Q))return null;const ke={};for(const ve of ne){const ue=Q[ve.title];Wt(ue)||ea(ue)||(ke[ve.title]=ue)}return ke};return _(n,v)},at=async(n={})=>{var r;const l={};if(!Xt(n)||!Rt((r=t.value)==null?void 0:r.meta).enableConditions)return{};for(const o of re.value.columns){const v=n[o.title];if(!(Wt(v)||ea(v)))switch(o.uidt){case it.Attachment:{Et(v)&&(l[o.title]=v.map(_=>_!=null&&_.title?{title:_==null?void 0:_.title}:null).filter(Boolean));break}case it.Links:case it.LinkToAnotherRecord:{const _=await tt(v,o);_&&(l[o.title]=_);break}default:l[o.title]=v}}return l},u=n=>n?[...ce.value?[ce.value]:[],...Xe.value||[]].filter(r=>Ya(r)).map(r=>{let o="like",v=n.trim();if(ft(ce.value)&&ft(r)||(v=Ce(r,v,x.value)),!Za(v))return"";if(ft(ce.value)&&ft(r))o="eq,exactDate";else if((r.uidt!==it.Formula||Ja(r)!==Xa.NUMERIC)&&!Wa(r)&&Je.value&&["text","string"].includes(Je.value.getAbstractType(r))&&r.dt!=="bigint"){if(o="like",!v)return"";v=`%${v}%`}else o="eq",v=el(v)?"":v;return v?`(${r.title},${o},${v})`:""}).filter(Boolean).join("~or"):void 0,i=async(n,l=!1)=>{var r,o,v,_,te,Q,ne,ke,ve;n&&(Ee.state=n);try{let ue=T.size*(T.page-1)-ge.value;(ue<0||l)&&(ue=0,ge.value=0,T.page=1),b.value=!0;const ze=u(T.query);if(Me.value){const J=Ha().currentRoute;let X;if(y.value){const{formState:c,additionalState:C}=Ol();X=await at({...(c==null?void 0:c.value)||{},...(C==null?void 0:C.value)||{}})}se.value=await F.public.dataRelationList(J.value.params.viewId,t.value.id,{},{headers:{"xc-password":m.value},query:{limit:T.size,offset:ue,where:ze,fields:We.value,rowData:JSON.stringify(X)}})}else if(V!=null&&V.value){const K=await at(O.value.row);se.value=await F.dbTableRow.list(ct,((r=x==null?void 0:x.value)==null?void 0:r.base_id)??he,(o=x==null?void 0:x.value)==null?void 0:o.id,{limit:T.size,offset:ue,where:ze,linkColumnId:t.value.fk_column_id||t.value.id,linkRowData:JSON.stringify(K)});const J=new Set(((_=(v=ye.value)==null?void 0:v.list)==null?void 0:_.map(X=>X.Id))??[]);se.value.list&&J.size&&(se.value.list=se.value.list.filter(X=>!J.has(X.Id)))}else{let K;try{(te=O.value)!=null&&te.row&&(K=Object.keys((Q=O.value)==null?void 0:Q.row).reduce((J,X)=>(O.value.row[X]!==O.value.oldRow[X]&&(J[X]=O.value.row[X]),J),{}),K=await at(K))}catch{}se.value=await F.dbTableRow.nestedChildrenExcludedList(ct,re.value.base_id??he,re.value.id,encodeURIComponent(Fe.value),A.value.type,(ne=t==null?void 0:t.value)==null?void 0:ne.id,{limit:String(T.size),offset:String(ue),where:ze,linkRowData:K?JSON.stringify(K):void 0})}(ke=se.value)==null||ke.list.forEach((K,J)=>{h.value[J]=!1,oe.value[J]=!1}),(ve=se.value)!=null&&ve.list&&n&&n[t.value.title]&&se.value.list.forEach((K,J)=>{([Ae.BELONGS_TO,Ae.ONE_TO_ONE].includes(A.value.type)?[n[t.value.title]]:n[t.value.title]).find(c=>{let C=!0;for(const je in c)c[je]!==K[je]&&(C=!1);return C})&&(h.value[J]=!0)})}catch(ue){const ze=await Ga(ue);if(ze.error===Qa.INVALID_OFFSET_VALUE)return T.page=0,i(n,!0);st.error(`${be("msg.error.failedToLoadList")}: ${ze.message}`)}finally{b.value=!1}},q=async(n=!1,l=void 0,r=void 0)=>{var o,v,_,te,Q,ne,ke,ve,ue,ze;l&&(Ee.state=l);try{if(P.value=!0,[Ae.BELONGS_TO,Ae.ONE_TO_ONE].includes(A.value.type)||!t.value)return;let K=de.size*(de.page-1)+B.value;if(K<0||n?(K=0,B.value=0,de.page=1):K>=Le.value&&(K=0),V!=null&&V.value||!Fe.value){const J=((o=t.value)==null?void 0:o.title)||"",X=((v=Ee.state)==null?void 0:v[J])??[],c=de.query.toLocaleLowerCase(),C=c?X.filter(je=>`${je[Se.value]??""}`.toLocaleLowerCase().includes(c)):X;ye.value={list:C,pageInfo:{isFirstPage:!0,isLastPage:C.length<=10,page:1,pageSize:10,totalRows:C.length}}}else{const J=u(de.query);Me.value?ye.value=await F.public.dataNestedList((_=ie.value)==null?void 0:_.uuid,encodeURIComponent(Fe.value),A.value.type,t.value.id,{limit:String(de.size),offset:String(K),where:J},{headers:{"xc-password":m.value}}):ye.value=await F.dbTableRow.nestedList(ct,((te=re.value)==null?void 0:te.base_id)??(((Q=S==null?void 0:S.value)==null?void 0:Q.id)||((ke=(ne=ie.value)==null?void 0:ne.view)==null?void 0:ke.base_id)),re.value.id,encodeURIComponent(Fe.value),A.value.type,(ve=t==null?void 0:t.value)==null?void 0:ve.id,{limit:String(r??de.size),offset:String(K),where:J})}(ue=ye.value)==null||ue.list.forEach((J,X)=>{le.value[X]=!0,$e.value[X]=!1}),de.query||(Le.value=((ze=ye.value)==null?void 0:ze.pageInfo.totalRows)??0)}catch(K){st.error(`${be("msg.error.failedToLoadChildrenList")}: ${await It(K)}`)}finally{P.value=!1}return ye.value},a=async(n,l)=>{Ka.confirm({title:"Do you want to delete the record?",type:"warning",onOk:async()=>{var o;const r=Oe(n);try{const v=await F.dbTableRow.delete(ct,((o=x.value)==null?void 0:o.base_id)??he,x.value.id,encodeURIComponent(r));if(v.message)return st.info(`Record delete failed: ${`Unable to delete record with ID ${r} because of the following:
              
${v.message.join(`
`)}.

              Clear the data first & try again`})}`),!1;$==null||$({shouldShowLoading:!1,path:G.value}),V!=null&&V.value||await q(),l==null||l(n),I("a:links:delete-related-row")}catch(v){st.error(`${be("msg.error.deleteFailed")}: ${await It(v)}`)}}})},s=async(n,{metaValue:l=re.value}={},r=!1,o)=>{var v;try{Object.keys(p.value.row).length===0&&we(),B.value=B.value-1,ge.value=ge.value-1,oe.value[o]=!0,$e.value[o]=!0,await F.dbTableRow.nestedRemove(ct,(l==null?void 0:l.base_id)??S.value.id,l.id,encodeURIComponent(Fe.value),A.value.type,(v=t==null?void 0:t.value)==null?void 0:v.id,encodeURIComponent(Oe(n))),r||ee({redo:{fn:_=>s(_,{},!0,o),args:[j(n)]},undo:{fn:_=>E(_,{},!0,o),args:[j(n)]},scope:_e({view:z.value})}),h.value[o]=!1,le.value[o]=!1,A.value.type!==Ae.BELONGS_TO&&A.value.type!==Ae.ONE_TO_ONE&&(Le.value=Le.value-1)}catch(_){st.error(`${be("msg.error.unlinkFailed")}: ${await It(_)}`)}finally{oe.value[o]=!1,$e.value[o]=!1}$==null||$({shouldShowLoading:!1,path:G.value}),r&&W&&Ie.trigger({shouldShowLoading:!1}),I("a:links:unlink")},E=async(n,{metaValue:l=re.value}={},r=!1,o)=>{var v,_,te,Q;try{if(oe.value[o]=!0,$e.value[o]=!0,B.value=B.value+1,ge.value=ge.value+1,await F.dbTableRow.nestedAdd(ct,(l==null?void 0:l.base_id)??S.value.id,l.id,encodeURIComponent(Fe.value),A.value.type,(v=t==null?void 0:t.value)==null?void 0:v.id,encodeURIComponent(Oe(n))),!r){let ne=null;(ua(t.value)||da(t.value))&&(ne=(te=p.value.row)==null?void 0:te[(_=t.value)==null?void 0:_.title]),ee({redo:{fn:ke=>{E(ke,{},!0,o)},args:[j(n)]},undo:{fn:(ke,ve)=>{ve?E(ve,{},!0,o):s(ke,{},!0,o)},args:[j(n),j(ne)]},scope:_e({view:z.value})})}h.value[o]=!0,le.value[o]=!0,A.value.type!==Ae.BELONGS_TO&&A.value.type!==Ae.ONE_TO_ONE?Le.value=Le.value+1:(h.value=Array((Q=se.value)==null?void 0:Q.list.length).fill(!1),h.value[o]=!0)}catch(ne){st.error(`Linking failed: ${await It(ne)}`)}finally{oe.value[o]=!1,$e.value[o]=!1}$==null||$({shouldShowLoading:!1,path:G.value}),r&&W&&Ie.trigger({shouldShowLoading:!1}),I("a:links:link")},N=Jt(i,500),Y=Jt(q,500);return Te(T,async()=>{await N(Ee.state)}),Te(de,async()=>{await Y(!1,Ee.state)}),Te(ye,async()=>{var n;(n=ye.value)==null||n.list.forEach((l,r)=>{le.value[r]=!0,$e.value[r]=!1})}),{relatedTableMeta:x,loadRelatedTableMeta:Ke,targetViewColumns:Ve,targetViewColumnsById:Ne,relatedTableDisplayValueProp:Se,displayValueTypeAndFormatProp:Ye,childrenExcludedList:se,childrenList:ye,childrenListCount:Le,childrenListOffsetCount:B,childrenExcludedOffsetCount:ge,rowId:Fe,childrenExcludedListPagination:T,childrenListPagination:de,displayValueProp:qe,meta:re,unlink:s,link:E,loadChildrenExcludedList:i,loadChildrenList:q,isChildrenExcludedListLinked:h,isChildrenListLinked:le,isChildrenListLoading:$e,isChildrenExcludedListLoading:oe,row:O,isChildrenLoading:P,isChildrenExcludedLoading:b,deleteRelatedRow:a,getRelatedTableRowId:Oe,headerDisplayValue:kt,relatedTableDisplayValueColumn:ce,relatedTableDisplayValuePropId:yt,resetChildrenExcludedOffsetCount:()=>{ge.value=0},resetChildrenListOffsetCount:()=>{B.value=0},attachmentCol:ot,fields:Xe,refreshCurrentRow:we,externalBaseUserRoles:et,showExtraFields:Be}},"ltar-store");function Oa(){const t=Dl();if(t==null)throw new Error("Please call `useLTARStore` on the appropriate parent component");return t}const Pl=pe(()=>me(()=>import("./D8ZW_kPH.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(t=>t.default||t)),Nl=pe(()=>me(()=>import("./oAFgQQek.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]),import.meta.url).then(t=>t.default||t)),Ml=pe(()=>me(()=>import("./Bw607vNV.js").then(t=>t.i),__vite__mapDeps([36,1,2,23,22,28,7,26,27,37,6,25,38,39,5,40,41,42,43,44,45,33,31,46,47,48,49,50,51,52,53,54,55,56,57,13,14,58,59,60,61,62,63,64,65,66,29,67,68,69,32,30,34,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,8,98,99,100,101,18,102,103,104,105]),import.meta.url).then(t=>t.default||t)),Fl={class:"flex flex-col h-full"},Ul={class:"nc-dropdown-link-record-header bg-gray-100 py-2 rounded-t-xl flex justify-between pl-3 pr-2 gap-2"},jl={class:"flex-1 nc-dropdown-link-record-search-wrapper flex items-center rounded-md"},Bl={key:0},ql={class:"cursor-pointer"},Kl={class:"flex items-center"},Hl={class:"flex flex-col gap-2 flex-grow justify-center"},Gl={class:"flex flex-row gap-6 w-10/12"},Ql={key:1,class:"h-full flex flex-col gap-2 my-auto items-center justify-center text-gray-500 text-center"},Yl=["alt"],Zl={class:"text-base text-gray-700 font-bold"},Jl={class:"text-gray-700"},Xl={class:"flex items-center gap-1"},Wl={class:"nc-dropdown-link-record-footer bg-gray-100 p-2 rounded-b-xl flex items-center justify-between gap-3 min-h-11"},en={class:"flex items-center gap-2"},tn={class:"flex items-center gap-1"},an={class:"flex items-center gap-1"},ln={key:0,class:"flex justify-center items-center"},nn=xt({__name:"LinkedItems",props:{modelValue:{type:Boolean},cellValue:{},column:{},items:{}},emits:["update:modelValue","attachRecord","escape"],setup(t,{emit:O}){const V=t,$=O,p=Nt(V,"modelValue",$),{isMobileMode:we}=zt(),{isUIAllowed:ae}=bt(),{t:k}=Tt(),S=L(Ct,f(!1)),R=L(Dt,f(!1)),D=f(!1),F=f(!1),I=L(Vt,f()),U=L(Mt,f(!1)),z=L(Ft,_t()),y=L(At,_t()),W=f(),{isDataReadOnly:G}=bt(),{isSharedBase:Ie}=$t(St()),{childrenList:ee,childrenListCount:j,loadChildrenList:_e,childrenListPagination:m,childrenExcludedOffsetCount:se,childrenListOffsetCount:ye,relatedTableDisplayValueProp:Ve,displayValueTypeAndFormatProp:Ne,unlink:T,isChildrenListLoading:ge,isChildrenListLinked:de,isChildrenLoading:B,relatedTableMeta:P,link:$e,meta:le,row:oe,loadRelatedTableMeta:b,resetChildrenListOffsetCount:h,attachmentCol:Ee,fields:Le,refreshCurrentRow:be,rowId:Me,relatedTableDisplayValueColumn:A,externalBaseUserRoles:ie}=Oa(),{withLoading:Qe}=Tl(),{isNew:Ce,state:he,removeLTARRef:re,addLTARRef:x}=Kt(),{showRecordPlanLimitExceededModal:Je}=ca();Te([p,S],a=>{(a[0]||a[1])&&!Ce.value&&(be(),_e(!0)),a[0]||h()},{immediate:!0});const Fe=async(a,s)=>{Ce.value?await re(a,I==null?void 0:I.value):await T(a,{},!1,s)},Be=async(a,s)=>{Ce.value?await x(a,I==null?void 0:I.value):await $e(a,{},!1,s)},Oe=f(!1),Ke=f({}),ce=M(()=>{var N,Y,Z,He;if(Ce.value)return{};const a=(N=I==null?void 0:I.value)==null?void 0:N.colOptions,s=(Z=(Y=P==null?void 0:P.value)==null?void 0:Y.columns)==null?void 0:Z.find(Ue=>{if(!Pt(Ue))return!1;const xe=Ue==null?void 0:Ue.colOptions;return(xe==null?void 0:xe.fk_related_model_id)!==le.value.id?!1:a.type===Ae.MANY_TO_MANY&&(xe==null?void 0:xe.type)===Ae.MANY_TO_MANY?a.fk_parent_column_id===xe.fk_child_column_id&&a.fk_child_column_id===xe.fk_parent_column_id:a.fk_parent_column_id===xe.fk_parent_column_id&&a.fk_child_column_id===xe.fk_child_column_id});if(!s)return{};const E=s==null?void 0:s.colOptions;return E?E.type===Ae.BELONGS_TO?{[s.title]:(He=oe==null?void 0:oe.value)==null?void 0:He.row}:{[s.title]:(oe==null?void 0:oe.value)&&[oe.value.row]}:{}}),Se=M(()=>{var a;return((a=I.value)==null?void 0:a.title)||""}),yt=a=>{R.value||S.value||(Ke.value=a,Oe.value=!0)},ht=()=>{Je()||(Ke.value={},Oe.value=!0,D.value=!0,F.value=!0)};y.on(Qe(a=>{a!=null&&a.isFromLinkRecord&&(be(),_e())}));const qe=async a=>{var E;if(z==null||z.trigger({shouldShowLoading:!1}),y==null||y.trigger({shouldShowLoading:!1,isFromLinkRecord:!0,relatedTableMetaId:P.value.id,rowId:Me.value}),!F.value)return;Ce.value?(await x(a,I==null?void 0:I.value),_e(!1,he.value)):p.value=!1;const s=mt("div",{class:"ml-1 inline-flex flex-col gap-1 items-start"},[mt("span",{class:"font-semibold"},k("activity.recordCreatedLinked")),mt("span",{class:"text-gray-500"},k("activity.gotSavedLinkedSuccessfully",{tableName:(E=P.value)==null?void 0:E.title,recordTitle:a[Ve.value]}))]);st.success(s),F.value=!1},Ye=()=>{_e(!0)},kt=M(()=>{var a,s;return(s=(a=I.value)==null?void 0:a.colOptions)==null?void 0:s.type});Te(()=>V.cellValue,()=>{Ce.value&&_e(!1,he.value)},{immediate:!0}),Te(Oe,()=>{Oe.value||(D.value=!1),se.value=0,ye.value=0});const ot=M(()=>V.items<10&&m.page===1?V.items:j.value<10&&m.page===1?j.value||10:Math.ceil(j.value/10)===m.page?j.value%10:10),Xe=M(()=>{var a,s;return S.value||Ce.value?(s=(a=he.value)==null?void 0:a[Se.value])==null?void 0:s.length:B.value?V.items:j.value}),We=M(()=>{var a,s,E,N;return((s=(a=ee.value)==null?void 0:a.pageInfo)==null?void 0:s.totalRows)||Ce.value&&((N=(E=he.value)==null?void 0:E[Se.value])==null?void 0:N.length)}),et=(a,s)=>{Ie.value||U.value||R.value&&!S.value||(Ce.value||de.value[parseInt(s)]?Fe(a,parseInt(s)):Be(a,parseInt(s)))};Te([W,We],()=>{var a;(!(U.value||R.value)||We.value)&&((a=W.value)==null||a.focus())});const tt=a=>{var s,E,N,Y,Z;if(a.key==="Escape")p.value=!1;else if(a.key==="ArrowDown"){a.preventDefault();try{(E=(s=a.target)==null?void 0:s.nextElementSibling)==null||E.focus()}catch{}}else if(a.key==="ArrowUp"){a.preventDefault();try{(Y=(N=a.target)==null?void 0:N.previousElementSibling)==null||Y.focus()}catch{}}else if(!Oe.value&&a.key!=="Tab"&&a.key!=="Shift"&&a.key!=="Enter"&&a.key!==" ")try{(Z=W.value)==null||Z.focus()}catch{}};Ut(()=>{b(),window.addEventListener("keydown",tt),setTimeout(()=>{var a;(a=W.value)==null||a.focus()},100)});const at=f();Te(m,()=>{var a;(a=at.value)==null||a.scrollTo({top:0,behavior:"smooth"})}),jt(()=>{h(),m.query="",window.removeEventListener("keydown",tt)});const u=()=>{m.page=1,h()},i=f(!1),q=a=>{var s,E,N;if(a.key==="Escape")m.query||$("escape"),(s=W.value)==null||s.blur();else if(a.key==="Enter"){const Y=((E=ee.value)==null?void 0:E.list)??((N=he.value)==null?void 0:N[Se.value]);m.query&&Et(Y)&&Y.length&&et(Y[0],"0")}};return(a,s)=>{var _,te,Q,ne,ke,ve,ue,ze,K,J,X;const E=Ca,N=fa,Y=va,Z=Pl,He=Ia,Ue=Ea,xe=Nl,lt=Ht,n=pa,l=xa,r=Ra,o=Ml,v=Bt("e");return d(),H("div",{class:dt(["nc-modal-child-list h-full w-full",{active:e(p)}]),onKeydown:s[10]||(s[10]=Ge(Re(()=>{},["stop"]),["enter"]))},[w("div",Fl,[w("div",Ul,[w("div",jl,[e(A)&&e(ft)(e(A))?(d(),g(E,{key:0,class:"nc-filter-value-select rounded-md min-w-34",column:e(A),filter:{comparison_op:"eq",comparison_sub_op:"exactDate",value:e(m).query},onUpdateFilterValue:s[0]||(s[0]=c=>e(m).query=c),onClick:s[1]||(s[1]=Re(()=>{},["stop"]))},null,8,["column","filter"])):(d(),g(Y,{key:1,ref_key:"filterQueryRef",ref:W,value:e(m).query,"onUpdate:value":s[2]||(s[2]=c=>e(m).query=c),bordered:!1,placeholder:"Search linked records...",class:"w-full min-h-4 !pl-0",size:"small",autocomplete:"off",onFocus:s[3]||(s[3]=c=>i.value=!0),onBlur:s[4]||(s[4]=c=>i.value=!1),onChange:u,onKeydownCapture:Re(q,["stop"])},{prefix:De(()=>[fe(N,{icon:"search",class:"nc-search-icon mr-2 h-4 w-4 text-gray-500"})]),_:1},8,["value"]))]),fe(Z,{"data-testid":"nc-link-count-info","linked-records":e(Xe),"related-table-title":(_=e(P))==null?void 0:_.title,relation:e(kt),"table-title":(te=e(le))==null?void 0:te.title},null,8,["linked-records","related-table-title","relation","table-title"])]),w("div",{ref_key:"childrenListRef",ref:at,class:"flex-1 overflow-auto nc-scrollbar-thin"},[e(We)||e(B)?(d(),H("div",Bl,[w("div",ql,[e(B)?(d(!0),H(ut,{key:0},pt(Array.from({length:e(ot)}),(c,C)=>(d(),H("div",{key:C,class:"flex flex-row gap-3 px-3 py-2 transition-all relative border-b-1 border-gray-200 hover:bg-gray-50"},[w("div",Kl,[fe(He,{class:"!h-11 !w-11 !rounded-md overflow-hidden !children:h-full !children:w-full"})]),w("div",Hl,[fe(Ue,{active:"",class:"h-4 !w-48 !rounded-md overflow-hidden",size:"small"}),w("div",Gl,[(d(),H(ut,null,pt([1,2,3],je=>fe(Ue,{key:je,active:"",class:"!h-3 !w-24 !rounded-md overflow-hidden",size:"small"})),64))])])]))),128)):(d(!0),H(ut,{key:1},pt(((Q=e(ee))==null?void 0:Q.list)??((ne=e(he))==null?void 0:ne[e(Se)])??[],(c,C)=>{var je;return d(),g(xe,{key:C,attachment:e(Ee),"display-value-type-and-format-prop":e(Ne),fields:e(Le),"is-linked":(je=e(ee))!=null&&je.list?e(de)[Number.parseInt(C)]:!0,"is-loading":e(ge)[Number.parseInt(C)],"is-selected":!!(e(i)&&e(m).query&&Number.parseInt(C)===0),"related-table-display-value-prop":e(Ve),row:c,"data-testid":"nc-child-list-item",onLinkOrUnlink:Sa=>et(c,C),onExpand:Sa=>yt(c),onKeydown:[Ge(Re(()=>et(c,C),["prevent","stop"]),["space"]),Ge(Re(()=>et(c,C),["prevent","stop"]),["enter"])]},null,8,["attachment","display-value-type-and-format-prop","fields","is-linked","is-loading","is-selected","related-table-display-value-prop","row","onLinkOrUnlink","onExpand","onKeydown"])}),128))])])):(d(),H("div",Ql,[w("img",{alt:a.$t("msg.clickLinkRecordsToAddLinkFromTable"),class:"!w-[158px] flex-none",src:zl},null,8,Yl),w("div",Zl,Ze(a.$t("msg.noLinkedRecords")),1),w("div",Jl,Ze(a.$t("msg.clickLinkRecordsToAddLinkFromTable")),1),!e(U)&&(e(j)<1||(((ke=e(ee))==null?void 0:ke.list)??((ve=e(he))==null?void 0:ve[e(Se)])??[]).length>0)?gt((d(),g(n,{key:0,"data-testid":"nc-child-list-button-link-to",size:"small",onClick:s[5]||(s[5]=c=>$("attachRecord"))},{default:De(()=>[w("div",Xl,[fe(lt),Lt(" "+Ze(a.$t("title.linkRecords")),1)])]),_:1})),[[v,["c:links:link"]]]):Pe("",!0)]))],512),w("div",Wl,[w("div",en,[!e(R)&&!e(G)&&e(ae)("dataEdit",e(ie))&&e(ae)("dataEdit")&&!e(S)&&!((ue=e(P))!=null&&ue.synced)?(d(),g(l,{key:0,entity:e(_a).TABLE,"entity-id":(ze=e(P))==null?void 0:ze.id,permission:e(ma).TABLE_RECORD_ADD},{default:De(({isAllowed:c})=>[gt((d(),g(n,{size:"small",class:"!hover:bg-white !hover:text-brand-500 !h-7 !text-small",type:"secondary",disabled:!c,onClick:ht},{default:De(()=>[w("div",tn,[e(we)?Pe("",!0):(d(),g(lt,{key:0,class:"h-4 w-4"})),Lt(" "+Ze(a.$t("activity.newRecord")),1)])]),_:2},1032,["disabled"])),[[v,["c:row-expand:open"]]])]),_:1},8,["entity","entity-id","permission"])):Pe("",!0),!e(U)&&(e(j)>0||(((K=e(ee))==null?void 0:K.list)??((J=e(he))==null?void 0:J[e(Se)])??[]).length>0)?gt((d(),g(n,{key:1,"data-testid":"nc-child-list-button-link-to",class:"!hover:bg-white !hover:text-brand-500 !h-7 !text-small",size:"small",type:"secondary",onClick:s[6]||(s[6]=c=>$("attachRecord"))},{default:De(()=>[w("div",an,[fe(N,{icon:"link2",class:"!xs:hidden h-4 w-4"}),Lt(" "+Ze(e(we)?a.$t("title.linkMore"):a.$t("title.linkMoreRecords")),1)])]),_:1})),[[v,["c:links:link"]]]):Pe("",!0)]),!e(Ce)&&((X=e(ee))!=null&&X.pageInfo)&&+e(ee).pageInfo.totalRows>e(m).size?(d(),H("div",ln,[fe(r,{current:e(m).page,"onUpdate:current":s[7]||(s[7]=c=>e(m).page=c),"page-size":e(m).size,"onUpdate:pageSize":s[8]||(s[8]=c=>e(m).size=c),total:+e(ee).pageInfo.totalRows,mode:"simple"},null,8,["current","page-size","total"])])):Pe("",!0)])]),(d(),g(ya,null,{default:De(()=>{var c;return[e(Ke)&&e(Oe)?(d(),g(o,{key:0,modelValue:e(Oe),"onUpdate:modelValue":s[9]||(s[9]=C=>ha(Oe)?Oe.value=C:null),"load-row":!e(R),"close-after-save":e(D),meta:e(P),"new-record-header":e(D)?a.$t("activity.tableNameCreateNewRecord",{tableName:(c=e(P))==null?void 0:c.title}):void 0,row:{row:e(Ke),oldRow:e(Ke),rowMeta:e(F)?{new:!0}:{}},state:e(ce),"row-id":("extractPkFromRow"in a?a.extractPkFromRow:e(Ot))(e(Ke),e(P).columns),"use-meta-fields":"","skip-reload":"","maintain-default-view-order":"","new-record-submit-btn-text":e(F)?"Create & Link":void 0,onCreatedRecord:qe,onDeletedRecord:Ye},null,8,["modelValue","load-row","close-after-save","meta","new-record-header","row","state","row-id","new-record-submit-btn-text"])):Pe("",!0)]}),_:1}))],34)}}}),Ta=Object.assign(qt(nn,[["__scopeId","data-v-08be0283"]]),{__name:"VirtualCellComponentsLinkedItems"}),vs=Object.freeze(Object.defineProperty({__proto__:null,default:Ta},Symbol.toStringTag,{value:"Module"})),sn={class:"nc-icon",stroke:"currentColor",width:"49",height:"48",viewBox:"0 0 49 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},on=["id"],rn=["mask"];function un(t,O){return d(),H("svg",sn,[w("mask",{id:t.idMap.mask0_81_24829,style:{"mask-type":"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"49",height:"48"},O[0]||(O[0]=[w("rect",{x:"0.5",width:"48",height:"48",fill:"currentColor"},null,-1)]),8,on),w("g",{mask:"url(#"+t.idMap.mask0_81_24829+")"},O[1]||(O[1]=[w("path",{d:"M11.25 40C10.4833 40 9.83333 39.7333 9.3 39.2C8.76667 38.6667 8.5 38.0167 8.5 37.25V10.75C8.5 9.98333 8.76667 9.33333 9.3 8.8C9.83333 8.26667 10.4833 8 11.25 8H37.75C38.5167 8 39.1667 8.26667 39.7 8.8C40.2333 9.33333 40.5 9.98333 40.5 10.75V37.25C40.5 38.0167 40.2333 38.6667 39.7 39.2C39.1667 39.7333 38.5167 40 37.75 40H11.25ZM11.25 38.45H37.75C38.0833 38.45 38.3667 38.3333 38.6 38.1C38.8333 37.8667 38.95 37.5833 38.95 37.25V31.3H31.2C30.5333 32.6333 29.5917 33.65 28.375 34.35C27.1583 35.05 25.8667 35.4 24.5 35.4C23.1333 35.4 21.8417 35.05 20.625 34.35C19.4083 33.65 18.4667 32.6333 17.8 31.3H10.05V37.25C10.05 37.5833 10.1667 37.8667 10.4 38.1C10.6333 38.3333 10.9167 38.45 11.25 38.45ZM24.5 33.85C25.6 33.85 26.6333 33.575 27.6 33.025C28.5667 32.475 29.3 31.6833 29.8 30.65C29.9667 30.3167 30.2333 30.0917 30.6 29.975C30.9667 29.8583 31.3333 29.8 31.7 29.8H38.95V10.75C38.95 10.4167 38.8333 10.1333 38.6 9.9C38.3667 9.66667 38.0833 9.55 37.75 9.55H11.25C10.9167 9.55 10.6333 9.66667 10.4 9.9C10.1667 10.1333 10.05 10.4167 10.05 10.75V29.8H17.3C17.6667 29.8 18.0333 29.8583 18.4 29.975C18.7667 30.0917 19.0333 30.3167 19.2 30.65C19.7 31.6833 20.4333 32.475 21.4 33.025C22.3667 33.575 23.4 33.85 24.5 33.85ZM11.25 38.45H10.05H38.95H37.75H11.25Z",fill:"#1C1B1F"},null,-1)]),8,rn)])}const dn=na({name:"nc-icons-inbox",render:un,setup(){return{idMap:{mask0_81_24829:"uicons-"+Math.random().toString(36).substr(2,10)}}}}),cn=pe(()=>me(()=>import("./D8ZW_kPH.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(t=>t.default||t)),vn=pe(()=>me(()=>import("./oAFgQQek.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]),import.meta.url).then(t=>t.default||t)),fn=pe(()=>me(()=>import("./Bw607vNV.js").then(t=>t.i),__vite__mapDeps([36,1,2,23,22,28,7,26,27,37,6,25,38,39,5,40,41,42,43,44,45,33,31,46,47,48,49,50,51,52,53,54,55,56,57,13,14,58,59,60,61,62,63,64,65,66,29,67,68,69,32,30,34,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,8,98,99,100,101,18,102,103,104,105]),import.meta.url).then(t=>t.default||t)),pn={class:"flex flex-col h-full"},mn={class:"nc-dropdown-link-record-header bg-gray-100 py-2 rounded-t-xl flex justify-between pl-3 pr-2 gap-2"},_n={class:"flex-1 gap-2 flex items-center"},yn={class:"flex-1 nc-dropdown-link-record-search-wrapper flex items-center rounded-md"},hn={class:"flex-1 overflow-auto nc-scrollbar-thin"},kn={class:"flex items-center"},wn={class:"flex flex-col gap-2 flex-grow justify-center"},gn={class:"flex flex-row gap-6 w-10/12"},Ln={key:1,class:"h-full my-auto py-2 flex flex-col gap-3 items-center justify-center text-gray-500"},bn={key:0},Cn={key:1},xn={class:"nc-dropdown-link-record-footer bg-gray-100 p-2 rounded-b-xl flex items-center justify-between min-h-11"},Rn={class:"flex"},In={class:"flex items-center gap-1"},En={key:0,class:"flex items-center"},On={key:1,class:"flex items-center"},Tn=xt({__name:"UnLinkedItems",props:{modelValue:{type:Boolean},column:{},hideBackBtn:{type:Boolean}},emits:["update:modelValue","addNewRecord","attachLinkedRecord","escape"],setup(t,{emit:O}){const V=t,$=O,p=Nt(V,"modelValue",$),{isMobileMode:we}=zt(),{isUIAllowed:ae}=bt(),k=L(Vt),{isSharedBase:S}=$t(St()),R=f(),{t:D}=Tt(),{$e:F}=sa(),{isDataReadOnly:I}=bt(),{childrenExcludedList:U,isChildrenExcludedListLinked:z,childrenExcludedOffsetCount:y,childrenListOffsetCount:W,isChildrenExcludedListLoading:G,isChildrenExcludedLoading:Ie,childrenListCount:ee,loadChildrenExcludedList:j,loadChildrenList:_e,childrenExcludedListPagination:m,relatedTableDisplayValueProp:se,displayValueTypeAndFormatProp:ye,relatedTableDisplayValueColumn:Ve,link:Ne,relatedTableMeta:T,meta:ge,unlink:de,row:B,resetChildrenExcludedOffsetCount:P,loadRelatedTableMeta:$e,attachmentCol:le,fields:oe,refreshCurrentRow:b,rowId:h,externalBaseUserRoles:Ee}=Oa(),{addLTARRef:Le,isNew:be,removeLTARRef:Me,state:A}=Kt(),{showRecordPlanLimitExceededModal:ie}=ca(),Qe=L(Dt,f(!1)),Ce=f(!1),he=f(!1);Ie.value=!0;const re=L(Ct,f(!1)),x=L(ka,()=>{}),Je=L(Ft,_t()),Fe=L(At,_t()),Be=M(()=>{var u,i;return(i=(u=k.value)==null?void 0:u.colOptions)==null?void 0:i.type}),Oe=async(u,i)=>{be.value?(await Le(u,k==null?void 0:k.value),Be.value==="oo"||Be.value==="bt"?z.value.forEach((q,a)=>{q&&(z.value[a]=!1),i===a&&(z.value[a]=!0)}):z.value[i]=!0,x(),F("a:links:link")):await Ne(u,{},!1,i)},Ke=async(u,i)=>{be.value?(Me(u,k==null?void 0:k.value),z.value[i]=!1,x(),F("a:links:unlink")):await de(u,{},!1,i)};Te(p,(u,i)=>{u&&!i&&(b(),m.query="",m.page=1,re.value||_e(),j(A.value,!0)),u||P()},{immediate:!0});const ce=f(!1),Se=f({}),yt=M(()=>{var a,s,E,N;if(be.value)return{};const u=(a=k==null?void 0:k.value)==null?void 0:a.colOptions,i=(E=(s=T==null?void 0:T.value)==null?void 0:s.columns)==null?void 0:E.find(Y=>{if(!Pt(Y))return!1;const Z=Y==null?void 0:Y.colOptions;return(Z==null?void 0:Z.fk_related_model_id)!==ge.value.id?!1:u.type===Ae.MANY_TO_MANY&&(Z==null?void 0:Z.type)===Ae.MANY_TO_MANY?u.fk_parent_column_id===Z.fk_child_column_id&&u.fk_child_column_id===Z.fk_parent_column_id:u.fk_parent_column_id===Z.fk_parent_column_id&&u.fk_child_column_id===Z.fk_child_column_id});if(!i)return{};const q=i==null?void 0:i.colOptions;return q?q.type===Ae.BELONGS_TO||q.type===Ae.ONE_TO_ONE?{[i.title]:(N=B==null?void 0:B.value)==null?void 0:N.row}:{[i.title]:(B==null?void 0:B.value)&&[B.value.row]}:{}}),ht=M(()=>{var u,i,q,a,s,E,N,Y,Z;return re.value||be.value?Be.value==="bt"||Be.value==="oo"?(i=A.value)!=null&&i[(u=k.value)==null?void 0:u.title]?1:0:((s=(a=A.value)==null?void 0:a[(q=k.value)==null?void 0:q.title])==null?void 0:s.length)??0:Be.value==="bt"?(N=B.value)!=null&&N.row[(E=T.value)==null?void 0:E.title]?1:0:Be.value==="oo"?(Z=B.value)!=null&&Z.row[(Y=k.value)==null?void 0:Y.title]?1:0:ee.value??0});Te(ce,()=>{ce.value||(Ce.value=!1,re.value||_e(),j(A.value)),y.value=0,W.value=0}),Te(R,()=>{var u;(u=R.value)==null||u.focus()});const qe=(u,i)=>{S.value||(z.value[Number.parseInt(i)]?Ke(u,Number.parseInt(i)):Oe(u,Number.parseInt(i)))},Ye=()=>{ie()||(Se.value={},ce.value=!0,Ce.value=!0,he.value=!0)},kt=u=>{var q;if(Le(u,k==null?void 0:k.value),Je==null||Je.trigger({shouldShowLoading:!1}),Fe==null||Fe.trigger({shouldShowLoading:!1,isFromLinkRecord:!0,relatedTableMetaId:T.value.id,rowId:h.value}),!he.value){p.value=!1;return}const i=mt("div",{class:"ml-1 inline-flex flex-col gap-1 items-start"},[mt("span",{class:"font-semibold"},D("activity.recordCreatedLinked")),mt("span",{class:"text-gray-500"},D("activity.gotSavedLinkedSuccessfully",{tableName:(q=T.value)==null?void 0:q.title,recordTitle:u[se.value]}))]);st.success(i),p.value=!1,he.value=!1},ot=async()=>{await _e(),j(A.value,!0)},Xe=u=>{var i,q,a,s,E;if(u.key==="Escape")p.value=!1;else if(u.key==="ArrowDown"){u.preventDefault();try{(q=(i=u.target)==null?void 0:i.nextElementSibling)==null||q.focus()}catch{}}else if(u.key==="ArrowUp"){u.preventDefault();try{(s=(a=u.target)==null?void 0:a.previousElementSibling)==null||s.focus()}catch{}}else if(!ce.value&&u.key!=="Tab"&&u.key!=="Shift"&&u.key!=="Enter"&&u.key!==" ")try{(E=R.value)==null||E.focus()}catch{}},We=f();Te(m,()=>{var u;(u=We.value)==null||u.scrollTo({top:0,behavior:"smooth"})}),Ut(()=>{window.addEventListener("keydown",Xe),$e(),setTimeout(()=>{var u;(u=R.value)==null||u.focus()},100)}),jt(()=>{P(),m.query="",window.removeEventListener("keydown",Xe)});const et=()=>{m.page=1,P()},tt=f(!1),at=u=>{var i,q,a,s;u.key==="Escape"?(m.query||$("escape"),(i=R.value)==null||i.blur()):u.key==="Enter"&&m.query&&Et((q=U.value)==null?void 0:q.list)&&(a=U.value)!=null&&a.list.length&&qe((s=U.value)==null?void 0:s.list[0],"0")};return(u,i)=>{var r,o,v,_,te,Q,ne,ke,ve,ue,ze,K,J,X;const q=fa,a=Ca,s=va,E=cn,N=Ia,Y=Ea,Z=vn,He=Ht,Ue=pa,xe=xa,lt=Ra,n=fn,l=Bt("e");return d(),H("div",{class:dt(["nc-modal-link-record h-full w-full overflow-hidden",{active:e(p)}]),onKeydown:i[11]||(i[11]=Ge(Re(()=>{},["stop"]),["enter"]))},[w("div",pn,[w("div",mn,[w("div",_n,[u.hideBackBtn?Pe("",!0):(d(),H("button",{key:0,class:"!text-brand-500 hover:!text-brand-700 p-1.5 flex",onClick:i[0]||(i[0]=c=>$("attachLinkedRecord"))},[fe(q,{icon:"ncArrowLeft",class:"flex-none h-4 w-4"})])),w("div",yn,[e(Ve)&&e(ft)(e(Ve))?(d(),g(a,{key:0,class:"nc-filter-value-select rounded-md min-w-34",column:e(Ve),filter:{comparison_op:"eq",comparison_sub_op:"exactDate",value:e(m).query},onUpdateFilterValue:i[1]||(i[1]=c=>e(m).query=c),onClick:i[2]||(i[2]=Re(()=>{},["stop"]))},null,8,["column","filter"])):(d(),g(s,{key:1,ref_key:"filterQueryRef",ref:R,value:e(m).query,"onUpdate:value":i[3]||(i[3]=c=>e(m).query=c),bordered:!1,placeholder:"Search records to link...",class:"w-full nc-excluded-search min-h-4 !pl-0",size:"small",autocomplete:"off",onFocus:i[4]||(i[4]=c=>tt.value=!0),onBlur:i[5]||(i[5]=c=>tt.value=!1),onChange:et,onKeydownCapture:Re(at,["stop"])},{prefix:De(()=>[fe(q,{icon:"search",class:"nc-search-icon mr-2 h-4 w-4 text-gray-500"})]),_:1},8,["value"]))])]),fe(E,{"data-testid":"nc-link-count-info","linked-records":e(ht),"related-table-title":(r=e(T))==null?void 0:r.title,relation:e(Be),"table-title":(o=e(ge))==null?void 0:o.title},null,8,["linked-records","related-table-title","relation","table-title"])]),w("div",hn,[(_=(v=e(U))==null?void 0:v.pageInfo)!=null&&_.totalRows?(d(),H("div",{key:0,ref_key:"childrenExcludedListRef",ref:We},[e(Ie)?(d(!0),H(ut,{key:0},pt(Array.from({length:10}),(c,C)=>(d(),H("div",{key:C,class:"flex flex-row gap-3 px-3 py-2 transition-all relative border-b-1 border-gray-200 hover:c"},[w("div",kn,[fe(N,{class:"!h-11 !w-11 !rounded-md overflow-hidden !children:h-full !children:w-full"})]),w("div",wn,[fe(Y,{active:"",class:"h-4 !w-48 !rounded-md overflow-hidden",size:"small"}),w("div",gn,[(d(),H(ut,null,pt([1,2,3],je=>fe(Y,{key:je,active:"",class:"!h-3 !w-24 !rounded-md overflow-hidden",size:"small"})),64))])])]))),128)):(d(!0),H(ut,{key:1},pt(((te=e(U))==null?void 0:te.list)??[],(c,C)=>(d(),g(Z,{key:C,attachment:e(le),"display-value-type-and-format-prop":e(ye),fields:e(oe),"is-linked":e(z)[Number.parseInt(C)],"is-loading":e(G)[Number.parseInt(C)],"is-selected":!!(e(tt)&&e(m).query&&Number.parseInt(C)===0),"related-table-display-value-prop":e(se),row:c,"data-testid":"nc-excluded-list-item",onLinkOrUnlink:je=>qe(c,C),onExpand:()=>{Se.value=c,ce.value=!0},onKeydown:[Ge(Re(()=>qe(c,C),["prevent","stop"]),["space"]),Ge(Re(()=>qe(c,C),["prevent","stop"]),["enter"])]},null,8,["attachment","display-value-type-and-format-prop","fields","is-linked","is-loading","is-selected","related-table-display-value-prop","row","onLinkOrUnlink","onExpand","onKeydown"]))),128))],512)):(d(),H("div",Ln,[fe(e(dn),{class:"w-16 h-16 mx-auto"}),e(m).query?(d(),H("p",bn,Ze(u.$t("msg.noRecordsMatchYourSearchQuery")),1)):(d(),H("p",Cn,Ze(u.$t("msg.noRecordsAvailForLinking")),1))]))]),w("div",xn,[w("div",Rn,[!e(Qe)&&!e(I)&&e(ae)("dataEdit",e(Ee))&&!e(re)&&!((Q=e(T))!=null&&Q.synced)?(d(),g(xe,{key:0,entity:e(_a).TABLE,"entity-id":(ne=e(T))==null?void 0:ne.id,permission:e(ma).TABLE_RECORD_ADD},{default:De(({isAllowed:c})=>[gt((d(),g(Ue,{size:"small",class:"!hover:bg-white !hover:text-brand-500 !h-7 !text-small",type:"secondary",disabled:!c,onClick:Ye},{default:De(()=>[w("div",In,[e(we)?Pe("",!0):(d(),g(He,{key:0})),Lt(" "+Ze(u.$t("activity.newRecord")),1)])]),_:2},1032,["disabled"])),[[l,["c:row-expand:open"]]])]),_:1},8,["entity","entity-id","permission"])):Pe("",!0)]),(ke=e(U))!=null&&ke.pageInfo&&+((ue=(ve=e(U))==null?void 0:ve.pageInfo)==null?void 0:ue.totalRows)>e(m).size?(d(),H(ut,{key:0},[e(we)?(d(),H("div",En,[fe(lt,{current:e(m).page,"onUpdate:current":i[6]||(i[6]=c=>e(m).page=c),"page-size":e(m).size,"onUpdate:pageSize":i[7]||(i[7]=c=>e(m).size=c),total:+((K=(ze=e(U))==null?void 0:ze.pageInfo)==null?void 0:K.totalRows),"entity-name":"links-excluded-list"},null,8,["current","page-size","total"])])):(d(),H("div",On,[fe(lt,{current:e(m).page,"onUpdate:current":i[8]||(i[8]=c=>e(m).page=c),"page-size":e(m).size,"onUpdate:pageSize":i[9]||(i[9]=c=>e(m).size=c),total:+((X=(J=e(U))==null?void 0:J.pageInfo)==null?void 0:X.totalRows),"entity-name":"links-excluded-list",mode:"simple"},null,8,["current","page-size","total"])]))],64)):Pe("",!0)])]),(d(),g(ya,null,{default:De(()=>{var c;return[e(ce)?(d(),g(n,{key:0,modelValue:e(ce),"onUpdate:modelValue":i[10]||(i[10]=C=>ha(ce)?ce.value=C:null),"load-row":!e(Qe),"close-after-save":e(Ce),meta:e(T),"new-record-header":e(Ce)?u.$t("activity.tableNameCreateNewRecord",{tableName:(c=e(T))==null?void 0:c.title}):void 0,row:{row:e(Se),oldRow:{},rowMeta:e(he)?{new:!0}:{}},"row-id":("extractPkFromRow"in u?u.extractPkFromRow:e(Ot))(e(Se),e(T).columns),state:e(yt),"use-meta-fields":"","maintain-default-view-order":"","skip-reload":"","new-record-submit-btn-text":e(he)?"Create & Link":void 0,onDeletedRecord:ot,onCreatedRecord:kt},null,8,["modelValue","load-row","close-after-save","meta","new-record-header","row","row-id","state","new-record-submit-btn-text"])):Pe("",!0)]}),_:1}))],34)}}}),Va=Object.assign(qt(Tn,[["__scopeId","data-v-5d71f564"]]),{__name:"VirtualCellComponentsUnLinkedItems"}),fs=Object.freeze(Object.defineProperty({__proto__:null,default:Va},Symbol.toStringTag,{value:"Module"})),Vn=xt({__name:"LinkRecordDropdown",props:{isOpen:{type:Boolean,default:!1}},emits:["update:isOpen"],setup(t,{emit:O}){const p=Nt(t,"isOpen",O),we=f(),ae=`link-records_${Math.floor(Math.random()*99999)}`,k=(S=!1)=>{var D,F,I,U;const R=(U=(I=(F=(D=we.value)==null?void 0:D.parentElement)==null?void 0:F.parentElement)==null?void 0:I.parentElement)==null?void 0:U.parentElement;R&&(S?R.classList.add("inset-0","nc-link-dropdown-root",`nc-root-${ae}`):R.classList.remove("inset-0","nc-link-dropdown-root",`nc-root-${ae}`))};return Te(p,S=>{S?tl(document.querySelector(`.${ae}`),R=>{const D=R==null?void 0:R.target;!(D!=null&&D.classList.contains(`nc-root-${ae}`))||D!=null&&D.closest(`.nc-${ae}`)||(p.value=!1,k(!1))}):k(!1)},{flush:"post"}),Te([we,p],()=>{we.value&&(p.value?k(!0):k(!1))}),(S,R)=>{const D=al;return d(),g(D,{visible:e(p),placement:"bottom","overlay-class-name":`nc-links-dropdown !min-w-[540px] !xs:min-w-[90vw] ${e(p)?"active":""}`,class:dt(`.nc-${ae}`)},{overlay:De(()=>[w("div",{ref_key:"ncLinksDropdownRef",ref:we,class:dt(["nc-links-dropdown-wrapper",`${ae}`])},[ta(S.$slots,"overlay")],2)]),default:De(()=>[ta(S.$slots,"default")]),_:3},8,["visible","overlay-class-name","class"])}}}),$a=Object.assign(Vn,{__name:"VirtualCellComponentsLinkRecordDropdown"}),ps=Object.freeze(Object.defineProperty({__proto__:null,default:$a},Symbol.toStringTag,{value:"Module"})),$n={class:"flex w-full group items-center min-h-4"},Sn={class:"block flex-shrink truncate"},zn=["tabindex","onKeydown"],An=xt({__name:"Links",setup(t){const O=L(oa,!1),V=L(nl,wt(ll)),$=L(wa,f(0)),p=L(Vt),we=L(ga),ae=L(Ft,_t()),k=L(Ct,f(!1)),S=L(Mt,f(!1)),R=L(sl,f(!1)),D=L(La,f(!1)),F=L(ol,wt({})),I=L(il,null),U=vt(()=>{var b;return((b=p.value)==null?void 0:b.title)||""}),z=f(!1),y=f(!1),W=f(!1),G=f(!1),{isUIAllowed:Ie}=bt(),{t:ee}=Tt(),{state:j,isNew:_e}=Kt(),{relatedTableMeta:m,loadRelatedTableMeta:se,relatedTableDisplayValueProp:ye}=Al(p,we,_e,ae.trigger),Ve=vt(()=>{var b,h;return(h=(b=m.value)==null?void 0:b.columns)==null?void 0:h.find(Ee=>Ee.title===ye.value)});se();const Ne=vt(()=>!S.value&&Ie("dataEdit")&&!R.value||k.value),T=vt(()=>{var h,Ee,Le,be,Me,A,ie,Qe;if(k.value||_e.value)return(Ee=(h=j.value)==null?void 0:h[U.value])!=null&&Ee.length?`${+((be=(Le=j.value)==null?void 0:Le[U.value])==null?void 0:be.length)} ${ee("msg.recordsLinked")}`:k.value&&!D.value?ee("title.linkRecords"):ee("msg.noRecordsLinked");const b=+($==null?void 0:$.value)||0;return b?b===1?`1 ${((A=(Me=p.value)==null?void 0:Me.meta)==null?void 0:A.singular)||ee("general.link")}`:`${b} ${((Qe=(ie=p.value)==null?void 0:ie.meta)==null?void 0:Qe.plural)||ee("general.links")}`:ee("msg.noRecordsLinked")}),ge=vt(()=>{var b,h;return k!=null&&k.value?(h=(b=j.value)==null?void 0:b[U.value])==null?void 0:h.length:+($==null?void 0:$.value)||0}),de=()=>{y.value=!1,z.value=!0,G.value=!1},B=()=>{z.value=!1,y.value=!0},P=()=>{R.value||(y.value=!0,z.value=!1,W.value=!0,G.value=!1)};Vl(L(ba,f(!1)),b=>{switch(b.key){case"Enter":if(z.value)return;y.value=!0,W.value=!0,b.stopPropagation();break}});const $e=vt(()=>{var b;return _e.value?((b=j==null?void 0:j.value)==null?void 0:b[p==null?void 0:p.value.title])??[]:[]}),le=()=>{Ne.value&&(z.value=!0,y.value=!1,W.value=!0,G.value=!0)};Te([y,z],()=>{W.value=y.value||z.value}),Te(W,b=>{b||(z.value=!1,y.value=!1)},{flush:"post"});const oe=b=>{if(!(!(b instanceof KeyboardEvent)||!b.target||dl(b))&&cl(b))return y.value?(z.value=!1,y.value=!1):P(),!0};return Ut(()=>{I==null||I.on(oe),!R.value&&O&&!D.value&&V&&rl(()=>{oe(F.event)||(aa(".nc-canvas-table-editable-cell-wrapper .nc-canvas-links-icon-plus",V)?le():aa(".nc-canvas-table-editable-cell-wrapper .nc-canvas-links-text",V)?P():Ne.value?le():P())})}),jt(()=>{I==null||I.off(oe)}),(b,h)=>{const Ee=Ht,Le=Ta,be=Va,Me=$a,A=Bt("e");return d(),H("div",{class:"nc-cell-field flex w-full group items-center nc-links-wrapper py-1",onDblclick:Re(P,["stop"])},[fe(Me,{"is-open":W.value,"onUpdate:isOpen":h[6]||(h[6]=ie=>W.value=ie)},{overlay:De(()=>[y.value?(d(),g(Le,{key:0,modelValue:y.value,"onUpdate:modelValue":h[2]||(h[2]=ie=>y.value=ie),items:e(ge),column:e(Ve),"cell-value":e($e),onAttachRecord:de,onEscape:h[3]||(h[3]=ie=>W.value=!1)},null,8,["modelValue","items","column","cell-value"])):Pe("",!0),z.value?(d(),g(be,{key:1,modelValue:z.value,"onUpdate:modelValue":h[4]||(h[4]=ie=>z.value=ie),column:e(Ve),"hide-back-btn":G.value,onAttachLinkedRecord:B,onEscape:h[5]||(h[5]=ie=>W.value=!1)},null,8,["modelValue","column","hide-back-btn"])):Pe("",!0)]),default:De(()=>[w("div",$n,[w("div",Sn,[gt((d(),g(ul(e(R)?"span":"a"),{title:e(T),class:dt(["text-center nc-datatype-link underline-transparent nc-canvas-links-text font-weight-500",{"!text-gray-300":!e(T)}]),tabindex:e(S)?-1:0,onClick:h[0]||(h[0]=Re(ie=>e(k)&&!e(D)?le():P(),["stop","prevent"])),onKeydown:h[1]||(h[1]=Ge(Re(ie=>e(k)&&!e(D)?le():P,["stop","prevent"]),["enter"]))},{default:De(()=>[Lt(Ze(e(T)),1)]),_:1},40,["title","class","tabindex"])),[[A,["c:cell:links:modal:open"]]])]),h[7]||(h[7]=w("div",{class:"flex-grow"},null,-1)),e(Ne)?(d(),H("div",{key:0,class:dt([{hidden:e(R)},"!xs:hidden flex group justify-end group-hover:flex items-center nc-canvas-links-icon-plus"]),tabindex:e(S)?-1:0,onKeydown:Ge(Re(le,["stop"]),["enter"])},[fe(Ee,{class:"select-none !text-md text-gray-700 nc-action-icon nc-plus invisible group-hover:visible group-focus:visible",onClick:Re(le,["stop"])})],42,zn)):Pe("",!0)])]),_:1},8,["is-open"])],32)}}}),Dn=Object.assign(An,{__name:"VirtualCellLinks"}),Pn=pe(()=>me(()=>import("./Q6arX-cQ.js"),__vite__mapDeps([106,1,2,107,102,22,7,108,28,26,27,13,14,9,10,11,12,15,16,17,18,19,5,20,21,23,24,25,29,30,31,32,33,34,109]),import.meta.url).then(t=>t.default||t)),Nn=pe(()=>me(()=>import("./BcdC5Wne.js"),__vite__mapDeps([110,1,2,107,102,22,7,108,28,26,27,13,14,9,10,11,12,15,16,17,18,19,5,20,21,23,24,25,29,30,31,32,33,34,111]),import.meta.url).then(t=>t.default||t)),Mn=pe(()=>me(()=>import("./DL7lEb66.js"),__vite__mapDeps([112,1,2,107,102,22,7,108,28,26,27,13,14,9,10,11,12,15,16,17,18,19,5,20,21,23,24,25,29,30,31,32,33,34,113]),import.meta.url).then(t=>t.default||t)),Fn=pe(()=>me(()=>import("./BAC-pHef.js"),__vite__mapDeps([114,1,2,107,102,22,7,108,28,26,27,13,14,9,10,11,12,15,16,17,18,19,5,20,21,23,24,25,29,30,31,32,33,34,115]),import.meta.url).then(t=>t.default||t)),Un=pe(()=>me(()=>import("./XEafgDD5.js"),__vite__mapDeps([116,1,2,117,13,14]),import.meta.url).then(t=>t.default||t)),jn=pe(()=>me(()=>import("./CxRmRMsz.js"),__vite__mapDeps([118,1,2,101,22,117,13,14]),import.meta.url).then(t=>t.default||t)),Bn=pe(()=>me(()=>import("./5nPynpVe.js"),__vite__mapDeps([119,1,2,100,120,117,13,14,121]),import.meta.url).then(t=>t.default||t)),qn=pe(()=>me(()=>import("./yl5-sYM-.js"),__vite__mapDeps([122,1,2,120,117,13,14,123]),import.meta.url).then(t=>t.default||t)),Kn=pe(()=>me(()=>import("./D1qR1z24.js"),__vite__mapDeps([124,1,2]),import.meta.url).then(t=>t.default||t)),Hn=pe(()=>me(()=>import("./DK9RFSyz.js"),__vite__mapDeps([125,1,2,7,117,13,14,126]),import.meta.url).then(t=>t.default||t)),Gn=pe(()=>me(()=>import("./DJpPgcTT.js"),__vite__mapDeps([127,1,2,28,22,7,26,27,69,97,128]),import.meta.url).then(t=>t.default||t)),Qn=pe(()=>me(()=>import("./BPAO9gWb.js"),__vite__mapDeps([129,1,2,59]),import.meta.url).then(t=>t.default||t)),Yn=pe(()=>me(()=>import("./auh2WIfM.js"),__vite__mapDeps([130,1,2,18,67,131]),import.meta.url).then(t=>t.default||t)),Zn=xt({__name:"VirtualCell",props:{column:{},modelValue:{},row:{},active:{type:Boolean},path:{},readOnly:{type:Boolean},isAllowed:{type:Boolean}},emits:["update:modelValue","navigate","save"],setup(t,{emit:O}){const V=t,$=O,p=rt(V,"column"),we=rt(V,"active",!1),ae=rt(V,"row"),k=rt(V,"path"),S=rt(V,"readOnly",!1),R=rt(V,"isAllowed",!0);nt(Vt,p),nt(ba,we),nt(ga,ae),nt(ia,k),nt(wa,rt(V,"modelValue")),nt(ka,()=>$("save")),nt(Mt,S),nt(xl,R);const D=L(vl,f(!1)),F=L(Ct,f(!1)),I=L(La,f(!1));function U(G,Ie){$("navigate",G),F.value||Ie.stopImmediatePropagation()}const z=M(()=>ra(p.value)),y=M(()=>{if(fl(p.value))return"link";if(pl(p.value))return"hm";if(ml(p.value))return"mm";if(ua(p.value))return"bt";if(da(p.value))return"oo";if(_l(p.value))return"rollup";if(yl(p.value))return"formula";if(hl(p.value))return"qrCode";if(kl(p.value))return"barcode";if(wl(p.value))return"count";if(gl(p.value))return"lookup";if(Ll(p.value))return"button";if(bl(p.value))return"createdOrLastModifiedTimeCol";if(Cl(p.value))return"createdOrLastModifiedByCol"}),W=M(()=>{let G=`nc-virtual-cell-${(p.value.uidt||"default").toLowerCase()}`;return D.value&&!F.value&&y.value==="rollup"&&!I.value&&(G+=" text-right justify-end"),z.value&&!F.value&&(G+=" nc-display-value-cell"),G});return(G,Ie)=>{const ee=Dn,j=Pn,_e=Nn,m=Mn,se=Fn,ye=Un,Ve=jn,Ne=Bn,T=qn,ge=Kn,de=Hn,B=Gn,P=Qn,$e=Yn;return d(),H("div",{class:dt(["nc-virtual-cell w-full flex items-center",e(W)]),onKeydown:[Ie[0]||(Ie[0]=Ge(Re(le=>U(("NavigateDir"in G?G.NavigateDir:e(la)).NEXT,le),["exact"]),["enter"])),Ie[1]||(Ie[1]=Ge(Re(le=>U(("NavigateDir"in G?G.NavigateDir:e(la)).PREV,le),["shift","exact"]),["enter"]))]},[e(y)==="link"?(d(),g(ee,{key:0})):e(y)==="hm"?(d(),g(j,{key:1})):e(y)==="mm"?(d(),g(_e,{key:2})):e(y)==="bt"?(d(),g(m,{key:3})):e(y)==="oo"?(d(),g(se,{key:4})):e(y)==="rollup"?(d(),g(ye,{key:5})):e(y)==="formula"?(d(),g(Ve,{key:6})):e(y)==="qrCode"?(d(),g(Ne,{key:7})):e(y)==="barcode"?(d(),g(T,{key:8})):e(y)==="count"?(d(),g(ge,{key:9})):e(y)==="lookup"?(d(),g(de,{key:10})):e(y)==="button"?(d(),g(B,{key:11})):e(y)==="createdOrLastModifiedTimeCol"?(d(),g(P,{key:12,"model-value":G.modelValue},null,8,["model-value"])):e(y)==="createdOrLastModifiedByCol"?(d(),g($e,{key:13,"model-value":G.modelValue},null,8,["model-value"])):Pe("",!0)],34)}}}),Jn=Object.assign(qt(Zn,[["__scopeId","data-v-e393912b"]]),{__name:"SmartsheetVirtualCell"}),ms=Object.freeze(Object.defineProperty({__proto__:null,default:Jn},Symbol.toStringTag,{value:"Module"}));export{vs as L,fs as U,ms as V,Jn as _,Oa as a,ps as b,Al as u};
