const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./mHhFSiUY.js","./C_gbauhL.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./Diu6bBeI.js","./CRQxmmPY.js","./ItemLabel.CAkj3Vwy.css","./C2UaKEE0.js","./Item.GTPiKSkc.css","./ghxJ1J6L.js","./0J_Jm9qQ.js","./-iDxnmJF.js","./BYKJ-MHf.js","./lL-0_K96.js","./phJnKPvr.js","./CkpISeXq.js","./QuickImport.WzY-_B2v.css"])))=>i.map(i=>d[i]);
import{e as se,R as ut,f as _e,T as Ae,am as Ce,W as pt,r as U,X as je,Y as mt,n as O,Z as _t,$ as vt,I as V,o as s,w as i,a as _,b as n,L as e,a0 as ft,a1 as Ee,a2 as wt,a3 as bt,O as yt,N as Ge,d as L,t as m,b2 as qe,Q as pe,P as Je,a4 as B,a5 as te,_ as ve,aa as Ke,a6 as Ue,c as w,K as A,ao as Qe,bV as gt,a8 as me,V as Xe,g as kt,a7 as $t,b7 as C,aP as Se,ag as J,M as Ie,ad as Y,bW as ht,an as F,aq as xe,G as Ye,bc as Vt,bm as Ze,b9 as He,b6 as Tt,aX as ce,br as Le,bq as X,a_ as de,ap as et,as as Et,bX as St,a9 as xt,J as Lt,bY as Fe,bo as Be,bA as At,ac as Ct,aA as Ut,b1 as ee,af as It,b3 as Pt,bZ as Ot,b_ as Rt,ah as ze,b$ as Mt,b4 as Dt,ax as We}from"./DRA9KN5F.js";import Nt from"./CHRPOXXy.js";import jt from"./DWLi1ZcL.js";import{u as Ft}from"./DkDj6Z7Z.js";import{u as Bt}from"./C_-gdvC5.js";import{_ as zt}from"./EcM5l_HA.js";import{_ as Wt}from"./C2UaKEE0.js";import{_ as Gt}from"./CRQxmmPY.js";import{_ as qt}from"./CI3EriLB.js";import{_ as Jt}from"./C3FZdmXk.js";import{_ as Kt}from"./CsX17Y_h.js";import{_ as Qt}from"./C_VN1MCC.js";const Xt={class:"flex flex-row items-center gap-x-2"},Yt={class:"text-gray-900 font-semibold"},Zt={class:"mt-1"},Ht={class:"flex flex-row justify-end gap-x-2 mt-5"},es=se({__name:"DescriptionUpdate",props:{modelValue:{type:Boolean},view:{},sourceId:{}},emits:["update:modelValue","updated"],setup(l,{emit:g}){const r=ut(l,["view"]),p=g,{$e:k,$api:S}=_e(),o=Ae(r,"modelValue",p),{loadViews:x}=Ce(),{addUndo:$,defineProjectScope:I}=pt(),a=U(),v=U(!1),R=je.useForm,b=mt({description:""}),K=O(()=>({description:[{validator:(f,d)=>new Promise((u,T)=>{u()})}]})),{validateInfos:G}=R(b,K);_t(()=>{var f;(f=l.view)!=null&&f.description&&(b.description=`${l.view.description}`),vt(()=>{var u;const d=(u=a.value)==null?void 0:u.$el;d&&(d.setSelectionRange(0,b.description.length),d.focus())})},{flush:"post"});const E=async(f=!1)=>{if(l.view){b.description&&(b.description=b.description.trim()),v.value=!0;try{await S.dbView.update(l.view.id,{description:b.description}),o.value=!1,f||$({redo:{fn:d=>{b.description=d,E(!0,!0)},args:[b.description]},undo:{fn:d=>{b.description=d,E(!0,!0)},args:[l.view.description]},scope:I({view:l.view})}),await x({tableId:l.view.fk_model_id,ignoreLoading:!0,force:!0}),k("a:view:description:update"),o.value=!1}catch(d){B.error(await te(d))}v.value=!1}};return(f,d)=>{const u=qe,T=wt,c=ft,y=je,M=Ge,D=Je;return s(),V(D,{visible:e(o),"onUpdate:visible":d[4]||(d[4]=N=>pe(o)?o.value=N:null),size:"small","show-separator":!1},{header:i(()=>{var N;return[_("div",Xt,[n(u,{meta:f.view,class:"mt-0.5 !text-2xl"},null,8,["meta"]),_("span",Yt,m((N=f.view)==null?void 0:N.title),1)])]}),default:i(()=>{var N,z,j,ie;return[_("div",Zt,[n(y,{layout:"vertical",model:e(b),name:"create-new-table-form"},{default:i(()=>[n(c,Ee({label:f.$t("labels.description")},e(G).description),{default:i(()=>[n(T,{ref_key:"inputEl",ref:a,value:e(b).description,"onUpdate:value":d[0]||(d[0]=ae=>e(b).description=ae),class:"nc-input-sm !py-2 nc-text-area !text-gray-800 nc-input-shadow","hide-details":"",size:"small",placeholder:f.$t("msg.info.enterTableDescription"),onKeydown:d[1]||(d[1]=bt(yt(()=>E(),["exact"]),["enter"]))},null,8,["value","placeholder"])]),_:1},16,["label"])]),_:1},8,["model"]),_("div",Ht,[n(M,{type:"secondary",size:"small",onClick:d[2]||(d[2]=ae=>o.value=!1)},{default:i(()=>[L(m(f.$t("general.cancel")),1)]),_:1}),n(M,{key:"submit",type:"primary",size:"small",disabled:((z=(N=e(G))==null?void 0:N.description)==null?void 0:z.validateStatus)==="error"||((j=e(b).description)==null?void 0:j.trim())===((ie=f.view)==null?void 0:ie.description),loading:e(v),onClick:d[3]||(d[3]=()=>E())},{default:i(()=>[L(m(f.$t("general.save")),1)]),_:1},8,["disabled","loading"])])])]}),_:1},8,["visible"])}}}),la=Object.assign(ve(es,[["__scopeId","data-v-1669df64"]]),{__name:"DlgViewDescriptionUpdate"}),ts={key:0,class:"flex flex-row items-center py-2 px-3 bg-gray-50 rounded-lg text-gray-700"},ss={class:"capitalize text-ellipsis overflow-hidden select-none w-full pl-3",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},as={key:0},ns={key:1},os=se({__name:"Delete",props:{modelValue:{type:Boolean},view:{}},emits:["update:modelValue","deleted"],setup(l,{emit:g}){const r=l,p=g,{refreshCommandPalette:k}=Ke(),{view:S}=r,o=Ae(r,"modelValue",p),{api:x}=Ue(),{$e:$}=_e();async function I(){if(r.view)try{await x.dbView.delete(r.view.id),o.value=!1,p("deleted"),$("a:view:delete",{view:r.view.type})}catch(a){B.error(await te(a))}finally{k()}}return(a,v)=>{const R=qe,b=Nt;return s(),V(b,{visible:e(o),"onUpdate:visible":v[0]||(v[0]=K=>pe(o)?o.value=K:null),"entity-name":a.$t("objects.view"),"on-delete":I},{"entity-preview":i(()=>[e(S)?(s(),w("div",ts,[n(R,{meta:r.view,class:"nc-view-icon w-4 min-h-4"},null,8,["meta"]),_("div",ss,[e(S).is_default?(s(),w("span",as,m(a.$t("labels.defaultView")),1)):(s(),w("span",ns,m(e(S).title),1))])])):A("",!0)]),_:1},8,["visible","entity-name"])}}}),ia=Object.assign(os,{__name:"DlgViewDelete"}),ls={class:"flex flex-row items-center gap-x-3 h-12.5 p-2"},is={class:"flex flex-col justify-center flex-grow"},rs={class:"flex flex-col"},cs={class:"capitalize font-semibold text-nc-content-gray"},ds={class:"text-xs text-nc-content-gray-subtle2"},us=se({__name:"UserItem",props:{user:{}},setup(l){const g=O(()=>{var r,p,k,S,o,x;return(p=(r=l.user)==null?void 0:r.display_name)!=null&&p.trim()?(S=(k=l.user)==null?void 0:k.display_name)==null?void 0:S.trim():(x=(o=l.user)==null?void 0:o.email)==null?void 0:x.split("@")[0]});return(r,p)=>{const k=gt;return s(),w("div",ls,[n(k,{size:"base",user:r.user},null,8,["user"]),_("div",is,[_("div",rs,[_("span",cs,m(e(g)),1),_("span",ds,m(r.user.email),1)])]),Qe(r.$slots,"append")])}}}),Te=Object.assign(us,{__name:"DlgReAssignUserItem"}),[ps,ms]=Ft(()=>{const{api:l}=Ue(),{base:g}=me(Xe()),{$e:r}=_e(),{formStatus:p,invitationUsersData:k}=me(Bt()),S=U(1),o=U(10),x=U(""),$=U(null),I=U(null),a=U(0),v=U(!1),R=O(()=>!$.value||!I.value?[]:$.value.filter(E=>{var d;const f=(d=I.value)==null?void 0:d.find(u=>u.id===E.id);return f?E.roles!==f.roles:!1})),b=async(E=S.value,f=o.value)=>{var d,u;try{if(!((d=g.value)!=null&&d.id))return;const T=await l.auth.baseUserList((u=g.value)==null?void 0:u.id,{query:{limit:f,offset:(E-1)*f,query:x.value}});if(!T.users)return;const c=T.users.list.filter(y=>!y.roles);a.value=(T.users.pageInfo.totalRows??0)-Number(c==null?void 0:c.length),$.value?$.value=[...$.value,...T.users.list.filter(y=>y.roles)]:$.value=T.users.list.filter(y=>y.roles),I.value=JSON.parse(JSON.stringify($.value))}catch(T){B.error(await te(T))}};return{loadUsers:b,inviteUser:async E=>{var d;let f;p.value="base-collaborateSaving";try{if(!((d=g.value)!=null&&d.id))return;f=await l.auth.baseUserAdd(g.value.id,{...E,base_id:g.value.id,baseName:g.value.title}),k.value.invitationToken=f.invite_token,S.value=1,$.value=[],await b()}catch(u){B.error(await te(u)),p.value="collaborate";return}return p.value="base-collaborateSaved",r("a:user:add"),f},users:$,totalUsers:a,searchText:x,currentPage:S,currentLimit:o,editedUsers:R,updateEditedUsers:async E=>{var f,d;E=E||R.value,v.value=!0;try{await Promise.all(E.filter(u=>u.roles!=="No access").map(async u=>{var c;await l.auth.baseUserUpdate(g.value.id,u.id,{email:u.email,roles:u.roles,base_id:g.value.id,baseName:g.value.title});const T=(c=$.value)==null?void 0:c.find(y=>y.id===u.id);T&&(T.roles=u.roles)})),await Promise.all(E.filter(u=>u.roles==="No access").map(async u=>{await l.auth.baseUserRemove(g.value.id,u.id)})),$.value=((f=$.value)==null?void 0:f.filter(u=>u.roles!=="No access"))??[],a.value=((d=$.value)==null?void 0:d.length)??0,I.value=JSON.parse(JSON.stringify($.value))}catch(u){B.error(await te(u))}finally{v.value=!1}},isBatchUpdating:v}},"useManageUsers");function _s(){const l=ms();return l||ps()}const vs={class:"mb-5"},fs={class:"flex text-base font-bold mb-2 text-nc-content-gray-emphasis"},ws={class:"flex text-sm text-nc-content-gray-subtle"},bs={key:0,class:"mb-5"},ys={class:"mb-2 text-nc-content-gray"},gs={class:"mb-5"},ks={class:"mb-2 text-nc-content-gray"},$s={key:1,class:"flex flex-row items-center h-12.5 p-2 nc-list-user-item"},hs={key:2,class:"max-h-65 overflow-auto nc-scrollbar-thin"},Vs={key:3,class:"h-25 p-2 text-gray-400 text-sm flex items-center justify-center"},Ts={class:"flex justify-end"},Es={class:"flex gap-2"},Ss=se({__name:"index",props:{modelValue:{type:Boolean},view:{}},emits:["update:modelValue"],setup(l,{emit:g}){const r=l,p=g,{loadUsers:k,users:S}=_s(),o=Ae(r,"modelValue",p);kt(async()=>{S.value||await k()});const x=$t(),$=Ce(),{basesUser:I}=me(x),a=U(""),v=U(),R=U(!1),b=O(()=>{var c;return((c=r.view)==null?void 0:c.lock_type)===C.Personal}),K=O(()=>{var c;return r.view&&((c=I.value.get(r.view.base_id))==null?void 0:c.find(y=>y.id===r.view.owned_by))||{id:r.view.owned_by,display_name:"Unknown User"}}),G=O(()=>{let c=r.view.base_id?I.value.get(r.view.base_id)||[]:[];if(a.value){const y=a.value.toLowerCase();c=c.filter(M=>{var D;return((D=M.display_name)==null?void 0:D.toLowerCase().includes(y))||M.email.toLowerCase().includes(y)})}return c.filter(y=>{var D;const M=y.roles!==Se.NO_ACCESS&&y.roles!==Se.VIEWER;return b.value?y.id!==((D=K.value)==null?void 0:D.id)&&M:M})}),{api:E,isLoading:f}=Ue(),d=async()=>{try{if(!v.value)return;await E.dbView.update(r.view.id,{owned_by:v.value.id,...b.value?{}:{lock_type:C.Personal}}),o.value=!1,B.success(b.value?"View reassigned successfully":"View assigned as personal view successfully"),$.loadViews({ignoreLoading:!0,tableId:r.view.fk_model_id,force:!0}).catch(()=>{})}catch(c){await B.error(await te(c))}},u=c=>{v.value=c,R.value=!1},T=c=>{setTimeout(()=>c==null?void 0:c.focus(),100)};return(c,y)=>{const M=Ie,D=Ge,N=Je;return s(),V(N,{visible:e(o),"onUpdate:visible":y[3]||(y[3]=z=>pe(o)?o.value=z:null),"wrap-class-name":"nc-modal-re-assign",width:"448px"},{default:i(()=>{var z;return[_("div",vs,[_("div",fs,m(e(b)?c.$t("labels.reAssignThisView"):c.$t("labels.assignAsPersonalView")),1),_("div",ws,m(e(b)?c.$t("title.reAssignViewModalSubtitle"):c.$t("title.assignAsPersonalViewModalSubtitle")),1)]),e(b)?(s(),w("div",bs,[_("div",ys,m(c.$t("labels.currentOwner")),1),n(Te,{user:e(K),class:"bg-nc-bg-gray-light rounded-lg px-4"},null,8,["user"])])):A("",!0),_("div",gs,[_("div",ks,m(e(b)?c.$t("labels.newOwner"):c.$t("labels.selectOwner")),1),_("div",{class:J(["rounded-lg border-1",{"shadow-sm":e(v)&&!e(R)}])},[e(v)&&!e(R)?(s(),V(Te,{key:0,user:e(v),class:"cursor-pointer px-3",onClick:y[0]||(y[0]=j=>R.value=!0)},{append:i(()=>[n(M,{icon:"arrowDown",class:"text-gray-500"})]),_:1},8,["user"])):(s(),w("div",$s,[n(M,{icon:"search",class:"text-nc-content-gray-muted ml-3 flex-none"}),Y(_("input",{ref:T,"onUpdate:modelValue":y[1]||(y[1]=j=>pe(a)?a.value=j:null),placeholder:"Search User to assign...",class:"border-0 px-2 outline-none nc-search-input flex-1"},null,512),[[ht,e(a)]])])),!e(v)||e(R)?(s(),w("div",hs,[(s(!0),w(F,null,xe(e(G),j=>(s(),V(Te,{key:j.id,class:J(["cursor-pointer hover:bg-gray-100 px-3 nc-list-user-item",{"bg-gray-100":e(v)===j}]),user:j,onClick:ie=>u(j)},null,8,["class","user","onClick"]))),128))])):A("",!0),(z=e(G))!=null&&z.length?A("",!0):(s(),w("div",Vs,m(c.$t("placeholder.noBaseUsersFound")),1))],2)]),_("div",Ts,[_("div",Es,[n(D,{size:"small",type:"secondary",onClick:y[2]||(y[2]=j=>o.value=!1)},{default:i(()=>[L(m(c.$t("labels.cancel")),1)]),_:1}),n(D,{size:"small",type:"primary",class:"nc-invite-btn",disabled:!e(v),loading:e(f),onClick:d},{default:i(()=>[L(m(c.$t("activity.assignView")),1)]),_:1},8,["disabled","loading"])])])]}),_:1},8,["visible"])}}}),xs=Object.assign(ve(Ss,[["__scopeId","data-v-c45fbc58"]]),{__name:"DlgReAssign"}),Ls=ce(()=>de(()=>import("./mHhFSiUY.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(l=>l.default||l)),As={class:"w-full flex flex-col gap-y-1"},Cs={class:"flex items-center gap-2 flex-grow"},Us={key:2},Is=se({__name:"LockType",props:{hideTick:{type:Boolean},type:{},disabled:{type:Boolean}},emits:["select","cancel"],setup(l,{emit:g}){const r=g,p=Tt,k=Ye(Vt),{getPlanTitle:S}=Ze();return(o,x)=>{var a;const $=Ie,I=Ls;return s(),w("div",{class:J(["nc-locked-menu-item w-full max-w-[312px]",{"!px-1":o.hideTick}]),onClick:x[0]||(x[0]=v=>r("select",o.type))},[_("div",{class:J(["w-full",{"show-tick":!o.hideTick}])},[_("div",As,[_("div",Cs,[(s(),V(He(e(p)[o.type].icon),{class:J(["flex-none w-6",{"!w-3 h-3":o.hideTick,"!w-4 h-4":!o.hideTick,"text-gray-400":o.disabled}])},null,8,["class"])),_("div",{class:J(["flex",{"!text-xs py-0.7":o.hideTick,"text-gray-400":o.disabled}])},m(o.$t(e(p)[o.type].title)),3),o.hideTick?A("",!0):(s(),w(F,{key:0},[x[1]||(x[1]=_("div",{class:"flex flex-grow"},null,-1)),((a=e(k))==null?void 0:a.lock_type)===o.type?(s(),V($,{key:0,icon:"circleCheckSolid",class:J(["h-4 w-4 flex-none",{"!text-brand-500":!o.disabled}])},null,8,["class"])):o.type===e(C).Personal?(s(),V(I,{key:1,feature:e(X).FEATURE_PERSONAL_VIEWS,content:o.$t("upgrade.upgradeToAccessPersonalViewSubtitle",{plan:e(S)(e(Le).PLUS)}),"on-click-callback":()=>r("cancel")},null,8,["feature","content","on-click-callback"])):(s(),w("span",Us))],64))]),o.hideTick?A("",!0):(s(),w("div",{key:0,class:J(["nc-subtitle font-weight-400 max-w-120 !text-xs whitespace-normal ml-6 pr-6",{"text-gray-400":o.disabled,"text-nc-content-gray-subtle2":!o.disabled}])},m(o.$t(e(p)[o.type].subtitle)),3))])],2)],2)}}}),tt=Object.assign(ve(Is,[["__scopeId","data-v-70085314"]]),{__name:"SmartsheetToolbarLockType"}),Ps=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"})),Os=se({__name:"NotAllowedTooltip",props:{tooltipStyle:{},overlayInnerStyle:{},mouseLeaveDelay:{},placement:{},trigger:{},message:{},enabled:{type:Boolean}},setup(l){return(g,r)=>{const p=et;return s(),V(p,{disabled:!g.enabled,"tooltip-style":{"min-width":"max-content"},"overlay-inner-style":{"min-width":"max-content"},"mouse-leave-delay":.3,placement:"left",trigger:"hover"},{title:i(()=>[L(m("message"in g?g.message:e(B)),1)]),default:i(()=>[Qe(g.$slots,"default")]),_:3},8,["disabled"])}}}),Rs=Object.assign(Os,{__name:"SmartsheetToolbarNotAllowedTooltip"}),Ms=ce(()=>de(()=>import("./Diu6bBeI.js"),__vite__mapDeps([4,5,2,3,6,7,8]),import.meta.url).then(l=>l.default||l)),Ds=ce(()=>de(()=>Promise.resolve().then(()=>Ps),void 0,import.meta.url).then(l=>l.default||l)),Ns=ce(()=>de(()=>import("./mHhFSiUY.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(l=>l.default||l)),js=ce(()=>de(()=>import("./ghxJ1J6L.js").then(l=>l.Q),__vite__mapDeps([9,2,3,10,11,12,13,14,15,16]),import.meta.url).then(l=>l.default||l)),Fs={class:"nc-base-menu-item group"},Bs={class:"nc-base-menu-item group nc-view-context-download-option"},zs={class:"flex flex-row items-center gap-x-3"},Ws={class:"nc-base-menu-item flex !flex-shrink group !py-1 !px-1 rounded-md bg-brand-50"},Gs={class:"w-full flex flex-row items-center gap-x-3"},qs={class:"w-full flex flex-row items-center gap-x-3"},Js=se({inheritAttrs:!1,__name:"ViewActionMenu",props:{view:{},table:{},inSidebar:{type:Boolean,default:!1}},emits:["rename","closeModal","delete","descriptionUpdate"],setup(l,{emit:g}){const r=l,p=g,{isUIAllowed:k,isDataReadOnly:S}=Et(),o=Ye(St,U(!1)),{$api:x,$e:$}=_e(),{t:I}=xt(),a=O(()=>r.view),v=O(()=>r.table),{loadViews:R,navigateToView:b,duplicateView:K}=Ce(),{user:G}=Lt(),{base:E}=me(Xe()),{refreshCommandPalette:f}=Ke(),{showRecordPlanLimitExceededModal:d,getPlanTitle:u}=Ze(),T=O(()=>{var t;return((t=a.value)==null?void 0:t.lock_type)||C.Collaborative}),c=O(()=>{var t;return(t=v.value)==null?void 0:t.source_id}),y=()=>{p("rename")},M=()=>{p("descriptionUpdate")},D=[Fe.CSV,Fe.EXCEL],N={csv:{title:"CSV",icon:Be.ncFileTypeCsvSmall},excel:{title:"Excel",icon:Be.ncFileTypeExcel}},z=D.reduce((t,h)=>(t[h]=U(!1),t),{}),j=t=>{p("closeModal"),!d()&&(t.value=!0)},ie=t=>{const{close:h}=We(jt,{modelValue:U(!0),"onUpdate:modelValue":()=>{h()},changeType:t,view:a});p("closeModal")};async function ae(t){var h;if(a.value){if(((h=a.value)==null?void 0:h.lock_type)===t){B.success(`Already in ${t} view`),p("closeModal");return}if(t==="personal"&&a.value.is_default)return B.info(I("msg.toast.notAllowedToChangeDefaultView"));if(t===C.Locked||a.value.lock_type===C.Locked){ie(t);return}$(`a:${Dt[a.value.type]||"view"}:lockmenu`,{lockType:t,sidebar:r.inSidebar});try{a.value.lock_type=t,await x.dbView.update(a.value.id,{lock_type:t}),B.success(`Successfully Switched to ${t} view`)}catch(oe){B.error(await te(oe))}p("closeModal")}}const fe=U(!1);async function st(){fe.value=!0;const t=await K(a.value);f(),await R({force:!0,tableId:v.value.id}),t&&(b({view:t,tableId:v.value.id,baseId:E.value.id,hardReload:t.type===ee.FORM}),$("a:view:create",{view:t.type,sidebar:!0})),fe.value=!1,p("closeModal")}const at=async()=>{p("delete")},Pe=()=>{const{close:t}=We(xs,{modelValue:U(!0),"onUpdate:modelValue":()=>{t()},view:a});p("closeModal")},ne=O(()=>{var t,h,oe,Z,W,P,re;return((t=a.value)==null?void 0:t.owned_by)===((h=G.value)==null?void 0:h.id)||!((oe=a.value)!=null&&oe.owned_by)&&(((W=(Z=G.value)==null?void 0:Z.base_roles)==null?void 0:W[Se.OWNER])||((re=(P=G.value)==null?void 0:P.workspace_roles)==null?void 0:re[At.OWNER]))}),we=O(()=>{var t;return(t=a.value)==null?void 0:t.is_default}),Oe=O(()=>{var t;return((t=a.value)==null?void 0:t.lock_type)===C.Personal}),be=O(()=>!!(we.value||!ne.value)),nt=O(()=>{var t,h;return k("csvTableImport")&&!o.value&&!S.value&&((t=v.value)==null?void 0:t.type)!=="view"&&!((h=v.value)!=null&&h.synced)});return(t,h)=>{var De;const oe=zt,Z=Ut,W=Ie,P=Wt,re=et,ot=Pt,Re=Gt,lt=qt,ye=Jt,it=Ms,rt=Ds,ge=tt,ke=Kt,$e=Rs,Me=Ns,ct=Qt,dt=js,le=Ct("e");return s(),w(F,null,[e(a)?(s(),V(ct,Ee({key:0},t.$attrs,{"data-testid":`view-sidebar-view-actions-${e(a).alias||e(a).title}`,class:"!min-w-70","data-id":"toolbar-actions",variant:"small"}),{default:i(()=>{var H,ue;return[e(a)?(s(),V(oe,{key:0,id:e(a).id,tooltip:t.$t("labels.clickToCopyViewID"),label:t.$t("labels.viewIdColon",{viewId:(H=e(a))==null?void 0:H.id})},null,8,["id","tooltip","label"])):A("",!0),!((ue=e(a))!=null&&ue.is_default)&&e(k)("viewCreateOrEdit")?(s(),w(F,{key:1},[n(Z),t.inSidebar?(s(),w(F,{key:0},[e(T)!==e(C).Locked?(s(),V(P,{key:0,onClick:y},{default:i(()=>[n(W,{icon:"rename",class:"opacity-80"}),L(" "+m(t.$t("general.renameEntity",{entity:e(a).type!==e(ee).FORM?t.$t("objects.view").toLowerCase():t.$t("objects.viewType.form").toLowerCase()})),1)]),_:1})):(s(),V(re,{key:1},{title:i(()=>[L(m(t.$t("msg.info.disabledAsViewLocked")),1)]),default:i(()=>[n(P,{disabled:""},{default:i(()=>[n(W,{icon:"rename",class:"opacity-80"}),L(" "+m(t.$t("general.renameEntity",{entity:e(a).type!==e(ee).FORM?t.$t("objects.view").toLowerCase():t.$t("objects.viewType.form").toLowerCase()})),1)]),_:1})]),_:1})),Y(n(P,{onClick:M},{default:i(()=>[n(W,{icon:"ncAlignLeft",class:"opacity-80"}),L(" "+m(t.$t("labels.editDescription")),1)]),_:1},512),[[It,e(T)!==e(C).Locked]])],64)):A("",!0),n(P,{onClick:st},{default:i(()=>[e(fe)?(s(),V(ot,{key:0,size:"regular"})):(s(),V(W,{key:1,class:"nc-view-copy-icon opacity-80",icon:"duplicate"})),L(" "+m(t.$t("general.duplicateEntity",{entity:e(a).type!==e(ee).FORM?t.$t("objects.view").toLowerCase():t.$t("objects.viewType.form").toLowerCase()})),1)]),_:1})],64)):A("",!0),e(a).type!==e(ee).FORM?(s(),w(F,{key:2},[n(Z),e(nt)?(s(),V(ye,{key:"upload",variant:"small"},{title:i(()=>[Y((s(),w("div",Fs,[n(W,{icon:"upload",class:"opacity-80"}),L(" "+m(t.$t("general.upload")),1)])),[[le,["c:navdraw:preview-as",{sidebar:r.inSidebar}]]])]),default:i(()=>[n(Re,null,{default:i(()=>[L(m(t.$t("activity.uploadData")),1)]),_:1}),(s(!0),w(F,null,xe(e(z),(Q,q)=>(s(),w(F,null,[e(k)(`${q}TableImport`)&&!e(o)?(s(),V(lt,{key:q,entity:e(Rt).TABLE,"entity-id":e(v).id,permission:e(Ot).TABLE_RECORD_ADD,placement:"right",description:t.$t("objects.permissions.uploadDataTooltip")},{default:i(({isAllowed:he})=>[n(P,{disabled:!he,onClick:Ve=>j(Q)},{default:i(()=>{var Ve,Ne;return[Y((s(),w("div",{class:J([{disabled:e(T)===e(C).Locked},"nc-base-menu-item"])},[(Ve=N[q])!=null&&Ve.icon?(s(),V(He(N[q].icon),{key:0,class:J({"opacity-80":he,"!opacity-50":!he})},null,8,["class"])):A("",!0),L(" "+m((Ne=N[q])==null?void 0:Ne.title),1)],2)),[[le,[`a:upload:${q}`,{sidebar:r.inSidebar}]]])]}),_:2},1032,["disabled","onClick"])]),_:2},1032,["entity","entity-id","permission","description"])):A("",!0)],64))),256))]),_:1})):A("",!0),n(ye,{key:"download",variant:"small"},{title:i(()=>[Y((s(),w("div",Bs,[n(W,{icon:"download",class:"opacity-80"}),L(" "+m(t.$t("general.download")),1)])),[[le,["c:download",{sidebar:r.inSidebar}]]])]),default:i(()=>[n(it)]),_:1})],64)):A("",!0),e(k)("viewCreateOrEdit")?(s(),w(F,{key:3},[n(Z),n(ye,{key:"lock-type",variant:"small",disabled:!e(ne)&&!e(k)("reAssignViewOwner")&&e(Oe),class:"scrollbar-thin-dull max-h-90vh overflow-auto !py-0"},{title:i(()=>[Y((s(),w("div",zs,[_("div",null,m(t.$t("labels.viewMode")),1),_("div",Ws,[n(rt,{type:e(T),class:"flex nc-view-actions-lock-type !text-brand-500 !flex-shrink !cursor-auto","hide-tick":""},null,8,["type"])]),h[3]||(h[3]=_("div",{class:"flex flex-grow"},null,-1))])),[[le,["c:navdraw:preview-as",{sidebar:r.inSidebar}]]])]),default:i(()=>[n(Re,null,{default:i(()=>[L(m(t.$t("labels.viewMode")),1)]),_:1}),n(P,{class:"!mx-1 !py-2 !rounded-md nc-view-action-lock-subaction max-w-[100px]","data-testid":"nc-view-action-lock-subaction-Collaborative",disabled:!e(k)("fieldAdd"),onClick:h[0]||(h[0]=Q=>ae(e(C).Collaborative))},{default:i(()=>[n(ge,{type:e(C).Collaborative,disabled:!e(k)("fieldAdd")},null,8,["type","disabled"])]),_:1},8,["disabled"]),("isEeUI"in t?t.isEeUI:e(ze))?(s(),V($e,{key:0,enabled:e(be),message:e(we)?"Default view can't be made personal":"Only view owner can change to personal view"},{default:i(()=>[n(ke,{feature:e(X).FEATURE_PERSONAL_VIEWS},{default:i(({click:Q})=>[n(P,{"data-testid":"nc-view-action-lock-subaction-Personal",disabled:e(be),class:"!mx-1 !py-2 !rounded-md nc-view-action-lock-subaction max-w-[100px] children:w-full children:children:w-full group",onClick:q=>Q(e(X).FEATURE_PERSONAL_VIEWS,()=>ae(e(C).Personal))},{default:i(()=>[n(ge,{type:e(C).Personal,disabled:e(be),onCancel:h[1]||(h[1]=q=>p("closeModal"))},null,8,["type","disabled"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["feature"])]),_:1},8,["enabled","message"])):A("",!0),n(P,{"data-testid":"nc-view-action-lock-subaction-Locked",class:"!mx-1 !py-2 !rounded-md nc-view-action-lock-subaction",disabled:!e(k)("fieldAdd"),onClick:h[2]||(h[2]=Q=>ae(e(C).Locked))},{default:i(()=>[n(ge,{type:e(C).Locked,disabled:!e(k)("fieldAdd")},null,8,["type","disabled"])]),_:1},8,["disabled"])]),_:1},8,["disabled"]),("isEeUI"in t?t.isEeUI:e(ze))&&!e(we)?(s(),w(F,{key:0},[e(Oe)?(s(),V($e,{key:0,enabled:!(e(ne)||e(k)("reAssignViewOwner")),message:"Only owner or creator can re-assign"},{default:i(()=>[n(ke,{feature:e(X).FEATURE_PERSONAL_VIEWS},{default:i(({click:Q})=>[n(P,{"inner-class":"w-full",disabled:!(e(ne)||e(k)("reAssignViewOwner")),onClick:q=>Q(e(X).FEATURE_PERSONAL_VIEWS,()=>Pe())},{default:i(()=>[Y((s(),w("div",Gs,[_("div",null,m(t.$t("labels.reAssignView")),1),h[4]||(h[4]=_("div",{class:"flex-1 w-full"},null,-1)),n(Me,{feature:e(X).FEATURE_PERSONAL_VIEWS,"limit-or-feature":"to access re-assign personal view feature.",content:t.$t("upgrade.upgradeToAccessReassignViewSubtitle",{plan:e(u)(e(Le).PLUS)}),"on-click-callback":()=>p("closeModal")},null,8,["feature","content","on-click-callback"])])),[[le,["c:navdraw:reassign-personal-view",{sidebar:r.inSidebar}]]])]),_:2},1032,["disabled","onClick"])]),_:1},8,["feature"])]),_:1},8,["enabled"])):(s(),V($e,{key:1,enabled:!e(ne),message:"Only view owner can assign as personal view"},{default:i(()=>[n(ke,{feature:e(X).FEATURE_PERSONAL_VIEWS},{default:i(({click:Q})=>[n(P,{"inner-class":"w-full",disabled:!e(ne),onClick:q=>Q(e(X).FEATURE_PERSONAL_VIEWS,()=>Pe())},{default:i(()=>[Y((s(),w("div",qs,[_("div",null,m(t.$t("labels.assignAsPersonalView")),1),h[5]||(h[5]=_("div",{class:"flex-1 w-full"},null,-1)),n(Me,{feature:e(X).FEATURE_PERSONAL_VIEWS,"limit-or-feature":"to access assign as personal view feature.",content:t.$t("upgrade.upgradeToAccessAssignAsPersonalViewSubtitle",{plan:e(u)(e(Le).PLUS)}),"on-click-callback":()=>p("closeModal")},null,8,["feature","content","on-click-callback"])])),[[le,["c:navdraw:assign-personal-view",{sidebar:r.inSidebar}]]])]),_:2},1032,["disabled","onClick"])]),_:1},8,["feature"])]),_:1},8,["enabled"]))],64)):A("",!0)],64)):A("",!0),!e(a).is_default&&e(k)("viewCreateOrEdit")?(s(),w(F,{key:4},[n(Z),e(T)===e(C).Locked?(s(),V(re,{key:0},{title:i(()=>[L(m(t.$t("msg.info.disabledAsViewLocked")),1)]),default:i(()=>[n(P,{disabled:""},{default:i(()=>[n(W,{class:"nc-view-delete-icon opacity-80",icon:"delete"}),L(" "+m(t.$t("general.deleteEntity",{entity:e(a).type!==e(ee).FORM?t.$t("objects.view").toLowerCase():t.$t("objects.viewType.form").toLowerCase()})),1)]),_:1})]),_:1})):(s(),V(P,{key:1,danger:"",onClick:at},{default:i(()=>[n(W,{class:"nc-view-delete-icon opacity-80",icon:"delete"}),L(" "+m(t.$t("general.deleteEntity",{entity:e(a).type!==e(ee).FORM?t.$t("objects.view").toLowerCase():t.$t("objects.viewType.form").toLowerCase()})),1)]),_:1}))],64)):A("",!0)]}),_:1},16,["data-testid"])):(s(),w("span",Mt(Ee({key:1},t.$attrs)),null,16)),(De=e(v))!=null&&De.base_id&&e(c)?(s(),w(F,{key:2},xe(D,H=>n(dt,{key:H,modelValue:e(z)[H].value,"onUpdate:modelValue":ue=>e(z)[H].value=ue,"import-data-only":!0,"import-type":H,"base-id":e(v).base_id,"source-id":e(c)},null,8,["modelValue","onUpdate:modelValue","import-type","base-id","source-id"])),64)):A("",!0)],64)}}}),ra=Object.assign(ve(Js,[["__scopeId","data-v-11acaf35"]]),{__name:"SmartsheetToolbarViewActionMenu"});export{ra as _,ia as a,la as b};
