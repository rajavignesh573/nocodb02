const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DRA9KN5F.js","./entry.CNP42Mi6.css","./BALLsGq5.js","./DCm6TF8M.js","./Bj4kMpzI.js","./CbSESqy_.js","./Bxzk9hCO.js","./CbX26EBz.js","./TimeSelector.DAR2lbHN.css","./Bm6QmuXP.js","./CkpISeXq.js","./index.N-A1gxk9.css","./zMMvJhqz.js","./FilterInput.7KjqjE1F.css","./CI3EriLB.js","./ytmFgNfN.js","./Pagination.Cmvjwryu.css","./gAYHr7Gr.js","./DkDj6Z7Z.js","./CQa0sIfA.js","./DxC2Oool.js","./By5RWL3d.js","./Cd4chHHL.js","./boyBAVNN.js","./B94p8ToD.js","./DfIS_byq.js","./BVqTF1QK.js","./DP83Cqnl.js","./CNwEZGnv.js","./DlXIlcns.js","./Ce4xoeky.js","./VirtualCell.6f0pX0MN.css","./B1qoNiTF.js","./CYKJe2Bk.js","./DkpDpjnr.js","./Dv0nYk-Y.js","./Cell.BBaBjsLL.css","./CfTpfQ4B.js","./VirtualCell.krPvGNjk.css","./CDTi0oRk.js","./Cell.DrFrP4_9.css","./Bw607vNV.js","./yMSt-9W5.js","./BYKJ-MHf.js","./D7poRkS0.js","./C2xdh4Xe.js","./C2UaKEE0.js","./Item.GTPiKSkc.css","./C_VN1MCC.js","./index.CMurbi1o.css","./owbQkEXm.js","./DivDataCell.3R8zfazT.css","./CVZBrAgI.js","./LhVKWcKT.js","./QeWwuUYP.js","./index._6B72PDH.css","./B89wxTuy.js","./DjPyxH1k.js","./Markdown.CUPXKfeQ.css","./DCa6wpIA.js","./B8gs0dG7.js","./mXY_vhPu.js","./Comments.DTONmK0N.css","./CHRPOXXy.js","./gByPF8bR.js","./Modal.CB1oWLel.css","./BCBMEREK.js","./DGFEr0h-.js","./YbUkeyWR.js","./lL-0_K96.js","./CIOK9Y4w.js","./C3FZdmXk.js","./index.C8L8AhJa.css","./DDmv9w84.js","./DWLi1ZcL.js","./LockView.BWC8JyQk.css","./CC4cUItJ.js","./EcM5l_HA.js","./BLPDl4Qg.js","./CsX17Y_h.js","./C_gbauhL.js","./BmscXXs6.js","./ColumnMenu.tCfxYPwr.css","./CG-5KGUk.js","./CkvAmLZt.js","./D7OHpRdS.js","./DvtLu3FC.js","./D_txg4HT.js","./SelectOptions.BDAXdwVJ.css","./JqUqXTOd.js","./I4o4wRE2.js","./BMPzbwPk.js","./CwPFbl3n.js","./C5HnjaiI.js","./CBhmoxRW.js","./Bc3_tI4-.js","./CJAyvGKH.js","./D43249YX.js","./U3gU45AW.js","./BBg0y0zb.js","./-iDxnmJF.js","./EditOrAddProvider.C1S70ahv.css","./C1XMFoVa.js","./C-ZUx0lq.js","./YYodiGXA.js","./C316Za7m.js","./CKrOnbU4.js","./index.DA-8lYYb.css"])))=>i.map(i=>d[i]);
import{G as C,r as u,bX as rt,f as Tt,U as Vt,a8 as it,ge as At,n as v,e as Ft,bd as Dt,bc as Mt,g8 as Bt,fL as Lt,dM as jt,g9 as Pt,gg as Nt,am as zt,as as Ht,bk as Ot,fS as $t,u as Ut,bm as Gt,bb as N,ef as qt,fQ as Wt,j7 as Yt,j8 as Kt,j9 as Xt,ja as Zt,aF as Jt,jb as Ie,i as Qt,$ as eo,aj as Xe,Y as to,fq as oo,h2 as ao,aG as Ze,b1 as no,cb as lo,ac as so,c as d,o as n,an as E,a as p,I as w,b as y,aH as ro,L as t,Q as Ee,w as c,cf as z,K as x,aq as ie,aX as D,cS as io,aw as uo,N as co,M as mo,ag as Ce,iu as Se,ik as po,fV as Te,d as ue,ad as Je,b9 as Qe,bo as et,t as Ve,aA as wo,bZ as tt,b_ as ot,fg as at,h7 as nt,a_ as M,gf as fo,_ as _o}from"./DRA9KN5F.js";import{_ as vo}from"./C2UaKEE0.js";import{_ as yo}from"./CI3EriLB.js";import{_ as go}from"./C_VN1MCC.js";import{e as K,_ as ho}from"./BUnSBgDC.js";import{i as de,f as ce,e as Ro,c as bo}from"./gAYHr7Gr.js";import{i as xo}from"./BYKJ-MHf.js";import{u as ko}from"./DfIS_byq.js";import{u as Io}from"./CQa0sIfA.js";import{u as Eo}from"./CKrOnbU4.js";import{b as Co}from"./C2xdh4Xe.js";import{_ as So}from"./BBg0y0zb.js";import"./DkDj6Z7Z.js";import"./BmscXXs6.js";import"./D7poRkS0.js";import"./C316Za7m.js";import"./boyBAVNN.js";function To(l,m,h){const B=C(rt,u(!1)),{$api:L}=Tt(),me=Vt(),{activeTable:S}=it(me),{sharedView:H}=At(),Z=v(()=>l.value||S.value),O=u(),{cachedRows:J,syncCount:pe,clearCache:$,deleteRow:we,loadData:Q,navigateToSiblingRow:j,totalRows:fe,fetchChunk:ee,chunkStates:_e,isFirstRow:ve,isLastRow:te}=Eo({meta:Z,viewMeta:m,callbacks:{getWhereFilter:async()=>(h==null?void 0:h.value)??""},where:h,isPublic:B});async function T(){var k,U;(k=m==null?void 0:m.value)!=null&&k.id&&(O.value=B.value?(U=H.value)==null?void 0:U.view:await L.dbView.galleryRead(m.value.id))}return{cachedRows:J,deleteRow:we,loadData:Q,navigateToSiblingRow:j,loadGalleryData:T,viewData:O,totalRows:fe,clearCache:$,chunkStates:_e,syncCount:pe,fetchChunk:ee,isFirstRow:ve,isLastRow:te}}const Vo=D(()=>M(()=>import("./DRA9KN5F.js").then(l=>l.oR),__vite__mapDeps([0,1]),import.meta.url).then(l=>l.default||l)),Ao=D(()=>M(()=>import("./BALLsGq5.js").then(l=>l.V),__vite__mapDeps([2,0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),import.meta.url).then(l=>l.default||l)),Fo=D(()=>M(()=>import("./B1qoNiTF.js").then(l=>l.C),__vite__mapDeps([32,0,1,7,8,33,34,35,24,18,17,22,23,36]),import.meta.url).then(l=>l.default||l)),Do=D(()=>M(()=>import("./CfTpfQ4B.js"),__vite__mapDeps([37,0,1,21,38]),import.meta.url).then(l=>l.default||l)),Mo=D(()=>M(()=>import("./CDTi0oRk.js"),__vite__mapDeps([39,0,1,21,40]),import.meta.url).then(l=>l.default||l)),Bo=D(()=>M(()=>import("./Bw607vNV.js").then(l=>l.R),__vite__mapDeps([41,0,1,19,18,24,17,22,23,42,43,21,44,45,14,46,47,48,49,50,51,29,27,52,53,54,55,56,57,58,59,60,61,62,32,7,8,33,34,35,36,63,64,65,66,67,25,68,69,70,28,26,30,71,72,73,74,75,2,3,4,5,6,9,10,11,12,13,15,16,20,31,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107]),import.meta.url).then(l=>l.default||l)),Lo=D(()=>M(()=>import("./Bw607vNV.js").then(l=>l.i),__vite__mapDeps([41,0,1,19,18,24,17,22,23,42,43,21,44,45,14,46,47,48,49,50,51,29,27,52,53,54,55,56,57,58,59,60,61,62,32,7,8,33,34,35,36,63,64,65,66,67,25,68,69,70,28,26,30,71,72,73,74,75,2,3,4,5,6,9,10,11,12,13,15,16,20,31,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107]),import.meta.url).then(l=>l.default||l)),jo={class:"flex items-center gap-2"},Po={class:"flex items-center gap-2"},No={class:"flex-1"},zo={class:"nc-gallery-container grid gap-3 p-3"},Ho=["data-card-id"],Oo={class:"z-10 arrow"},$o={class:"z-10 arrow"},Uo={key:1,class:"h-52 w-full !flex flex-row !border-b-1 !border-nc-border-gray-medium items-center justify-center !bg-nc-bg-default"},Go={class:"flex-1 flex content-stretch gap-3 w-full"},qo=["onClick"],Wo={class:"flex flex-col rounded-lg w-full"},Yo={class:"flex flex-row w-full justify-start"},Ko={class:"nc-card-col-header w-full !children:text-gray-500"},Xo={key:0,class:"flex flex-row w-full text-nc-content-gray items-center justify-start min-h-7 py-1"},Zo={key:1,class:"flex flex-row w-full h-7 pl-1 items-center justify-start"},Jo={class:"sticky bottom-4 w-[fit-content]"},Qo={class:"flex items-center gap-2"},X=50,lt=100,st=30,ea=Ft({__name:"Gallery",setup(l){const m=C(Dt,u()),h=C(Mt,u()),B=C(Bt),L=C(Lt),{withLoading:me}=ko(),S=C(Pt,jt()),H=C(rt,u(!1)),Z=C(Nt,u([])),{isViewDataLoading:O}=it(zt()),{isSqlView:J,xWhere:pe,isExternalSource:$,isSyncedTable:we}=Io(),{isUIAllowed:Q}=Ht(),j=Ot(),{getPossibleAttachmentSrc:fe}=$t(),ee=Ut(),{showRecordPlanLimitExceededModal:_e,blockExternalSourceRecordVisibility:ve,showAsBluredRecord:te}=Gt(),T=u(!1),k=u(),U=u();N(qt,u(!1)),N(Wt,u(!0)),N(Yt,u(!1)),N(Kt,u(!1)),N(Xt,u(1)),N(fo,L);const{fetchChunk:ut,loadGalleryData:Ae,deleteRow:dt,syncCount:Fe,navigateToSiblingRow:De,chunkStates:ye,cachedRows:ct,totalRows:Me,isFirstRow:Be,isLastRow:Le,clearCache:je,viewData:oe}=To(m,h,pe),G=v(()=>ve($.value)?Math.min(200,Me.value):Me.value),Pe=v(()=>Z.value.filter(e=>!Zt(e))),_=v(()=>{var e,o;return((o=(e=m.value)==null?void 0:e.columns)==null?void 0:o.find(r=>r.pv&&Z.value.includes(r)))??null}),q=v(()=>{var e,o;return(e=m.value)!=null&&e.columnsById?m.value.columnsById[(o=oe.value)==null?void 0:o.fk_cover_image_col_id]:{}}),mt=v(()=>{var o,r;const e=((r=Jt((o=oe.value)==null?void 0:o.meta))==null?void 0:r.fk_cover_image_object_fit)||Ie.FIT;if(e===Ie.FIT)return"contain";if(e===Ie.COVER)return"cover"}),pt=v(()=>Q("dataEdit")),Ne=u(!1),ae=v({get:()=>Ne.value,set:e=>{pt.value&&(Ne.value=e)}}),P=u(null),wt=(e,o)=>{J.value||(e.preventDefault(),o&&(P.value=o))},ze=e=>{var o;if(!((o=q.value)!=null&&o.title)||!e.row[q.value.title])return[];try{const r=typeof e.row[q.value.title]=="string"?JSON.parse(e.row[q.value.title]):e.row[q.value.title];return Array.isArray(r)?r.flat().map(i=>typeof i=="string"?JSON.parse(i):i).filter(i=>i&&!Array.isArray(i)&&typeof i=="object"&&Object.keys(i).length):[]}catch{return[]}},ne=v({get(){return!!j.query.rowId},set(e){e||ee.push({query:{...j.query,rowId:void 0}})}}),le=(e,o)=>{const r=Ro(e.row,m.value.columns);U.value=o,r&&!H.value?(k.value=void 0,ee.push({query:{...j.query,rowId:r}})):(k.value=e,T.value=!0)},He=async(e,o)=>{const r=e.target;r.closest(".arrow")||r.closest(".slick-dots")||le(o)},Oe=async()=>{var e;le({row:{...bo((e=m.value)==null?void 0:e.columns)},oldRow:{},rowMeta:{new:!0}})},ft=(e,o)=>{Se(e)&&o.stopPropagation()};S==null||S.on(Oe),Qt(()=>S.off(Oe));const ge=u(!1);B==null||B.on(async()=>{await Ae(),ge.value=!0,await eo(()=>{ge.value=!1})});const $e={[Xe.LongText]:150,[Xe.Attachment]:56,default:44},W=u(),he=u(0),V=to({start:0,end:12}),{width:Re}=oo(W),Y=v(()=>Re.value<=537?1:Math.floor((Re.value-537)/262)+2),A=v(()=>{var r;return 64+Pe.value.reduce((i,f)=>{const R=$e[f.uidt]||$e.default;return i+R+12},0)+((r=oe.value)!=null&&r.fk_cover_image_col_id?208:0)+2}),be=v(()=>{const{start:e,end:o}=V;return Array.from({length:Math.min(o,G.value)-e},(r,i)=>{const f=e+i;return ct.value.get(f)||{row:{},oldRow:{},rowMeta:{rowIndex:f,isLoading:!0}}})}),{isRowColouringEnabled:xe}=Co(),Ue=async()=>{const{start:e,end:o}=V,r=Math.floor(e/X),i=Math.floor((o-1)/X),f=new Set;for(let g=r;g<=i;g++)ye.value[g]||f.add(g);const R=i+1;o%X>X-st&&!ye.value[R]&&f.add(R);const F=r-1;F>=0&&e%X<st&&!ye.value[F]&&f.add(F),f.size>0&&await Promise.all([...f].map(g=>ut(g))),je(Math.max(0,e-lt),Math.min(G.value,o+lt))},_t=u(0),se=()=>{if(!W.value){setTimeout(se,50);return}const{clientHeight:e}=W.value,o=Math.floor(he.value/(A.value+12)),r=Math.ceil((e-12)/(A.value+12)),i=2,f=Math.max(0,o-i)*Y.value,R=Math.min((o+r+i)*Y.value,G.value);V.start=f,V.end=R;const F=Math.ceil(V.start/Y.value)*(A.value+12);_t.value=F,Ue()},re=v(()=>{const e=Math.ceil(G.value/Y.value);return e*A.value+(e-1)*12});let ke=!1;ao(W,{onScroll:e=>{ke||(ke=!0,requestAnimationFrame(()=>{var o;he.value=((o=e.target)==null?void 0:o.scrollTop)||0,se(),ke=!1}))},throttle:200}),Ze(h,async e=>{O.value=!0;try{(e==null?void 0:e.type)===no.GALLERY&&(await Ae(),await Fe(),V.end===0&&(V.end=Math.min(100,G.value)),await Ue())}finally{O.value=!1}},{immediate:!0});const vt=v(()=>{const e=Math.floor(he.value/(A.value+12)),r=Math.max(0,e-2)*(A.value+12);return r>re.value?re.value-A.value:r}),{width:yt,height:gt}=lo();Ze([()=>yt.value,()=>gt.value,()=>Y.value,()=>Re.value],()=>{se()},{immediate:!0}),L==null||L.on(me(async()=>{je(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),await Fe(),se()}));const ht=()=>{_e()||S.trigger()};return(e,o)=>{var Ke;const r=vo,i=wo,f=mo,R=yo,F=go,g=co,Rt=Vo,bt=So,Ge=Ao,qe=Fo,xt=Do,kt=Mo,It=io,Et=Bo,Ct=ro,We=Lo,Ye=so("e");return n(),d(E,null,[p("div",{ref_key:"scrollContainer",ref:W,"data-testid":"nc-gallery-wrapper",class:"flex flex-col w-full nc-gallery select-none relative nc-scrollbar-md bg-nc-bg-gray-extralight h-[calc(100svh-93px)]"},[y(Ct,{visible:t(ae),"onUpdate:visible":o[3]||(o[3]=a=>Ee(ae)?ae.value=a:null),disabled:t(P)===null,trigger:t(J)?[]:["contextmenu"],"overlay-class-name":"nc-dropdown-grid-context-menu"},{overlay:c(()=>[y(F,{variant:"small",onClick:o[2]||(o[2]=a=>ae.value=!1)},{default:c(()=>{var a,b;return[t(P)?(n(),w(r,{key:0,onClick:o[0]||(o[0]=s=>le(t(P).row))},{default:c(()=>[Je((n(),d("div",jo,[(n(),w(Qe(("iconMap"in e?e.iconMap:t(et)).maximize),{class:"flex"})),ue(" "+Ve(e.$t("activity.expandRecord")),1)])),[[Ye,["a:row:expand-record"]]])]),_:1})):x("",!0),y(i),((a=t(P))==null?void 0:a.index)!==void 0?(n(),w(R,{key:1,entity:t(ot).TABLE,"entity-id":(b=t(m))==null?void 0:b.id,permission:t(tt).TABLE_RECORD_DELETE,placement:"right"},{default:c(({isAllowed:s})=>[y(r,{danger:"",disabled:!s,onClick:o[1]||(o[1]=I=>t(dt)(t(P).index))},{default:c(()=>[Je((n(),d("div",Po,[y(f,{icon:"delete"}),ue(" "+Ve(e.$t("activity.deleteRow")),1)])),[[Ye,["a:row:delete"]]])]),_:2},1032,["disabled"])]),_:1},8,["entity","entity-id","permission"])):x("",!0)]}),_:1})]),default:c(()=>[p("div",No,[(n(),d("div",{key:t(re),class:"relative",style:z({height:`${t(re)}px`})},[p("div",{style:z({height:`${t(vt)}px`})},null,4),p("div",zo,[(n(!0),d(E,null,ie(t(be),a=>(n(),d("div",{key:`record-${a.rowMeta.rowIndex}`,"data-card-id":`record-${a.rowMeta.rowIndex}`,style:z({filter:t(te)(t($),a.rowMeta.rowIndex+1)&&!a.rowMeta.new?"blur(4px)":void 0,pointerEvents:t(te)(t($),a.rowMeta.rowIndex+1)&&!a.rowMeta.new?"none":"auto"})},[y(Et,{row:a},{default:c(()=>{var b;return[y(It,{class:"!rounded-xl h-full !border-nc-border-gray-medium !bg-nc-bg-default border-1 group overflow-hidden break-all max-w-[450px] cursor-pointer flex flex-col","body-style":{padding:"12px !important",flex:1,display:"flex"},"data-testid":`nc-gallery-card-${a.rowMeta.rowIndex}`,style:z({...("extractRowBackgroundColorStyle"in e?e.extractRowBackgroundColorStyle:t(K))(a).rowBgColor,...("extractRowBackgroundColorStyle"in e?e.extractRowBackgroundColorStyle:t(K))(a).rowBorderColor}),onClick:s=>He(s,a),onContextmenu:s=>wt(s,{row:a,index:a.rowMeta.rowIndex})},uo({default:c(()=>[p("div",Go,[t(xe)?(n(),d("div",{key:0,class:"w-1 flex-none min-h-4 rounded-sm",style:z(("extractRowBackgroundColorStyle"in e?e.extractRowBackgroundColorStyle:t(K))(a).rowLeftBorderColor)},null,4)):x("",!0),p("div",{class:Ce(["flex-1 flex flex-col gap-3 !children:pointer-events-none",{"w-[calc(100%_-_16px)]":t(xe),"w-full":!t(xe)}])},[t(_)?(n(),d("h2",{key:0,class:Ce(["nc-card-display-value-wrapper",{"!children:pointer-events-auto":("isButton"in e?e.isButton:t(Se))(t(_))||("isRowEmpty"in e?e.isRowEmpty:t(de))(a,t(_))&&("isAllowToRenderRowEmptyField"in e?e.isAllowToRenderRowEmptyField:t(ce))(t(_))}])},[!("isRowEmpty"in e?e.isRowEmpty:t(de))(a,t(_))||("isAllowToRenderRowEmptyField"in e?e.isAllowToRenderRowEmptyField:t(ce))(t(_))||("isPercent"in e?e.isPercent:t(po))(t(_))?(n(),d(E,{key:0},[t(Te)(t(_))?(n(),w(Ge,{key:0,modelValue:a.row[t(_).title],"onUpdate:modelValue":s=>a.row[t(_).title]=s,class:"!text-nc-content-brand",column:t(_),row:a},null,8,["modelValue","onUpdate:modelValue","column","row"])):(n(),w(qe,{key:1,modelValue:a.row[t(_).title],"onUpdate:modelValue":s=>a.row[t(_).title]=s,class:"!text-nc-content-brand",column:t(_),"edit-enabled":!1,"read-only":!0},null,8,["modelValue","onUpdate:modelValue","column"]))],64)):(n(),d(E,{key:1},[ue(" - ")],64))],2)):x("",!0),(n(!0),d(E,null,ie(t(Pe),s=>(n(),d("div",{key:`record-${a.rowMeta.rowIndex}-${s.id}`,class:Ce(["nc-card-col-wrapper",{"!children:pointer-events-auto":("isButton"in e?e.isButton:t(Se))(s)||("isRowEmpty"in e?e.isRowEmpty:t(de))(a,s)&&("isAllowToRenderRowEmptyField"in e?e.isAllowToRenderRowEmptyField:t(ce))(s)}]),onClick:I=>ft(s,I)},[p("div",Wo,[p("div",Yo,[p("div",Ko,[t(Te)(s)?(n(),w(xt,{key:0,column:s,"hide-menu":!0},null,8,["column"])):(n(),w(kt,{key:1,column:s,"hide-menu":!0},null,8,["column"]))])]),!("isRowEmpty"in e?e.isRowEmpty:t(de))(a,s)||("isAllowToRenderRowEmptyField"in e?e.isAllowToRenderRowEmptyField:t(ce))(s)?(n(),d("div",Xo,[t(Te)(s)?(n(),w(Ge,{key:0,modelValue:a.row[s.title],"onUpdate:modelValue":I=>a.row[s.title]=I,column:s,row:a,class:"!text-nc-content-gray"},null,8,["modelValue","onUpdate:modelValue","column","row"])):(n(),w(qe,{key:1,modelValue:a.row[s.title],"onUpdate:modelValue":I=>a.row[s.title]=I,column:s,"edit-enabled":!1,"read-only":!0,class:"!text-nc-content-gray"},null,8,["modelValue","onUpdate:modelValue","column"]))])):(n(),d("div",Zo,"-"))])],10,qo))),128))],2)])]),_:2},[(b=t(oe))!=null&&b.fk_cover_image_col_id?{name:"cover",fn:c(()=>[!t(ge)&&ze(a).length?(n(),w(bt,{key:0,class:"gallery-carousel !border-b-1 !border-nc-border-gray-medium min-h-52 !bg-nc-bg-default",style:z({...("extractRowBackgroundColorStyle"in e?e.extractRowBackgroundColorStyle:t(K))(a).rowBgColor,...("extractRowBackgroundColorStyle"in e?e.extractRowBackgroundColorStyle:t(K))(a).rowBorderColor}),arrows:""},{customPaging:c(()=>o[8]||(o[8]=[p("a",null,[p("div",null,[p("div")])],-1)])),prevArrow:c(()=>[p("div",Oo,[y(g,{type:"secondary",size:"xsmall",class:"!absolute !left-1.5 !bottom-[-90px] !opacity-0 !group-hover:opacity-100 !rounded-lg cursor-pointer"},{default:c(()=>[y(f,{icon:"arrowLeft",class:"text-nc-content-inverted-secondary w-4 h-4"})]),_:1})])]),nextArrow:c(()=>[p("div",$o,[y(g,{type:"secondary",size:"xsmall",class:"!absolute !right-1.5 !bottom-[-90px] !opacity-0 !group-hover:opacity-100 !rounded-lg cursor-pointer"},{default:c(()=>[y(f,{icon:"arrowRight",class:"text-nc-content-inverted-secondary w-4 h-4"})]),_:1})])]),default:c(()=>[(n(!0),d(E,null,ie(ze(a),(s,I)=>(n(),d(E,null,[("isImage"in e?e.isImage:t(xo))(s.title,s.mimetype??s.type)?(n(),w(Rt,{key:`carousel-${a.rowMeta.rowIndex}-${I}`,class:"h-52","image-class":"!w-full","object-fit":t(mt),srcs:t(fe)(s,"card_cover"),onClick:St=>He(St,a)},null,8,["object-fit","srcs","onClick"])):x("",!0)],64))),256))]),_:2},1032,["style"])):(n(),d("div",Uo,o[9]||(o[9]=[p("img",{class:"object-contain w-[48px] h-[48px]",src:ho},null,-1)])))]),key:"0"}:void 0]),1032,["data-testid","style","onClick","onContextmenu"])]}),_:2},1032,["row"])],12,Ho))),128)),t(be).length<=4?(n(!0),d(E,{key:0},ie(Array(8-t(be).length),a=>(n(),d("div",{key:a,class:"nc-empty-card"}))),128)):x("",!0)])],4))])]),_:1},8,["visible","disabled","trigger"]),p("div",Jo,[t(Q)("dataInsert")&&!t(we)?(n(),w(R,{key:0,entity:t(ot).TABLE,"entity-id":(Ke=t(m))==null?void 0:Ke.id,permission:t(tt).TABLE_RECORD_ADD},{default:c(({isAllowed:a})=>[y(g,{size:"xs",type:"secondary",class:"ml-4",disabled:!a,onClick:ht},{default:c(()=>[p("div",Qo,[(n(),w(Qe(("iconMap"in e?e.iconMap:t(et)).plus),{class:""})),ue(" "+Ve(e.$t("activity.newRecord")),1)])]),_:2},1032,["disabled"])]),_:1},8,["entity","entity-id","permission"])):x("",!0)])],512),(n(),w(at,null,{default:c(()=>[t(k)&&t(T)?(n(),w(We,{key:0,modelValue:t(T),"onUpdate:modelValue":o[4]||(o[4]=a=>Ee(T)?T.value=a:null),row:t(k),"load-row":!t(H),"first-row":t(Be),"last-row":t(Le),state:t(U),meta:t(m),view:t(h)},null,8,["modelValue","row","load-row","first-row","last-row","state","meta","view"])):x("",!0)]),_:1})),(n(),w(at,null,{default:c(()=>{var a;return[t(ne)&&((a=t(m))!=null&&a.id)?(n(),w(We,{key:0,modelValue:t(ne),"onUpdate:modelValue":o[5]||(o[5]=b=>Ee(ne)?ne.value=b:null),row:t(k)??{row:{},oldRow:{},rowMeta:{}},meta:t(m),"load-row":!t(H),"row-id":t(j).query.rowId,"first-row":t(Be),"last-row":t(Le),view:t(h),"show-next-prev-icons":"","expand-form":le,onNext:o[6]||(o[6]=b=>t(De)(("NavigateDir"in e?e.NavigateDir:t(nt)).NEXT)),onPrev:o[7]||(o[7]=b=>t(De)(("NavigateDir"in e?e.NavigateDir:t(nt)).PREV))},null,8,["modelValue","row","meta","load-row","row-id","first-row","last-row","view"])):x("",!0)]}),_:1}))],64)}}}),ya=Object.assign(_o(ea,[["__scopeId","data-v-6508eb09"]]),{__name:"SmartsheetGallery"});export{ya as default};
