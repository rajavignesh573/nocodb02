import{_ as pe,c as L,o as a,an as X,aq as be,ag as _,b as o,a as r,bV as ve,t as c,J as Z,$ as le,e as ie,ak as de,G as F,r as S,k5 as he,n as O,aY as ne,L as e,I as M,K as $,w as l,N as ye,M as xe,ap as ke,fR as H,d as P,fJ as ge,g as ce,bz as _e,lW as $e,lY as Be,gz as we,j9 as Me,g6 as Le,ef as Ce,j7 as Te,kV as Ie,fQ as Ae,gu as Se,aQ as Oe,bd as Ee,a7 as He,a8 as Re,le as Fe,aG as ae,bv as re,eI as ze,O as R,a3 as U,k4 as je,i3 as Ne,lf as Ue,lE as Ke,lh as Pe,li as qe,lj as De,ly as Ve,o3 as Ge,be as Qe}from"./DRA9KN5F.js";import{B as We,u as Ye,E as Je,S as Xe,P as Ze}from"./DjPyxH1k.js";import{_ as et,M as tt}from"./B89wxTuy.js";import{s as st}from"./Bc3_tI4-.js";const nt={props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data(){return{selectedIndex:0,user:null}},watch:{items(){this.selectedIndex=0},selectedIndex(){le(()=>{this.scrollToSelected()})}},created(){const{user:u}=Z();this.user=u},methods:{onKeyDown({event:u}){return u.key==="ArrowUp"?(this.upHandler(),!0):u.key==="ArrowDown"?(this.downHandler(),!0):u.key==="Enter"?(u.stopPropagation(),u.preventDefault(),this.enterHandler(u),!0):u.key==="Tab"?(this.selectItem(this.selectedIndex),!0):!1},scrollToSelected(){const u=this.$el.querySelector(".is-selected");u&&u.scrollIntoView({block:"nearest"})},upHandler(){this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length},downHandler(){this.selectedIndex=(this.selectedIndex+1)%this.items.length},enterHandler(u){this.selectItem(this.selectedIndex,u)},selectItem(u,K){var C;const m=this.items[u];m&&this.command({id:{...m,isSameUser:`${(m==null?void 0:m.id)===((C=this.user)==null?void 0:C.id)}`}})}}},lt={class:"w-64 bg-white scroll-smooth nc-mention-list nc-scrollbar-md border-1 border-gray-200 rounded-lg max-h-64 !py-2"},it=["onClick"],ot={class:"max-w-64 truncate"},at={key:1,class:"px-4"};function rt(u,K,m,C,t,p){const w=ve;return a(),L("div",lt,[m.items.length?(a(!0),L(X,{key:0},be(m.items,(x,I)=>(a(),L("div",{key:I,class:_([{"is-selected":I===t.selectedIndex},"py-2 flex hover:bg-gray-100 transition-all cursor-pointer items-center text-gray-800 pl-4"]),onClick:z=>p.selectItem(I,z)},[o(w,{user:{...x,display_name:x.name},class:"mr-2 !text-[0.65rem] !h-[16.8px]",size:"auto"},null,8,["user"]),r("div",ot,c(x.name&&x.name.length>0?x.name:x.email),1)],10,it))),128)):(a(),L("div",at,"No users"))])}const dt=pe(nt,[["render",rt],["__scopeId","data-v-28b0fbed"]]),ct={class:"flex flex-col items-center"},ut={class:"text-xs"},mt={class:"flex flex-col items-center"},ft={class:"flex flex-col items-center"},pt={class:"flex flex-col items-center"},bt={class:"flex flex-col items-center"},vt={class:"flex flex-col items-center"},ht={class:"flex flex-col items-center"},yt={class:"flex flex-col items-center"},xt={key:9,class:"divider"},kt={key:1,class:"flex flex-row items-center px-0.5"},gt={class:"!text-xs !ml-1"},_t={key:11,class:"!sticky right-0 pr-0.5 bg-white"},$t=ie({__name:"SelectedBubbleMenu",props:{editor:{},embedMode:{type:Boolean,default:!1},isFormField:{type:Boolean,default:!1},hiddenOptions:{default:()=>[]},enableCloseButton:{type:Boolean,default:!1},hideMention:{type:Boolean,default:!1}},emits:["close"],setup(u,{emit:K}){const m=u,C=K,{editor:t,embedMode:p,isFormField:w,hiddenOptions:x,enableCloseButton:I}=de(m),{appInfo:z}=Z(),B=F(he,S(!1)),k=O(()=>ne()?"⌘":"CTRL"),q=O(()=>ne()?"⇧":"Shift"),D=O(()=>ne()?"⌥":"Alt"),A=O(()=>{if(w.value)return"bottom"}),T=O(()=>w.value?-1:0),E=()=>{var h,b,g,N,V,Q,y,W,Y,J,s,n;const d=((N=(g=(b=(h=t.value)==null?void 0:h.state)==null?void 0:b.selection)==null?void 0:g.$from)==null?void 0:N.nodeBefore)||((W=(y=(Q=(V=t.value)==null?void 0:V.state)==null?void 0:Q.selection)==null?void 0:y.$from)==null?void 0:W.nodeAfter),i=(s=(J=(Y=t.value)==null?void 0:Y.state)==null?void 0:J.storedMarks)==null?void 0:s.some(f=>f.type.name==="link");((n=d==null?void 0:d.marks)==null?void 0:n.some(f=>f.type.name==="link"))||i?t.value.chain().focus().unsetLink().run():(t.value.state.selection.empty?t.value.chain().focus().insertContent(" ").setTextSelection({from:t.value.state.selection.$from.pos,to:t.value.state.selection.$from.pos+1}).toggleLink({href:""}).setTextSelection({from:t.value.state.selection.$from.pos,to:t.value.state.selection.$from.pos+1}).deleteSelection().run():t.value.chain().focus().setLink({href:""}).selectTextblockEnd().run(),setTimeout(()=>{const f=document.querySelector(".nc-text-area-rich-link-option-input");f&&f.focus()},100))},j=d=>w.value?!x.value.includes(d):!0,G=d=>!w.value||d.some(i=>!x.value.includes(i)),ee=()=>{var i,v,h,b;if(!t.value)return;const d=t.value.state.doc.textBetween(t.value.state.selection.$from.pos-1,t.value.state.selection.$from.pos);d==="@"?t.value.chain().deleteRange({from:t.value.state.selection.$from.pos-1,to:t.value.state.selection.$from.pos}).run():d!==" "?((i=t.value)==null||i.commands.insertContent(" @"),(v=t.value)==null||v.chain().focus().run()):((h=t.value)==null||h.commands.insertContent("@"),(b=t.value)==null||b.chain().focus().run())},te=()=>{C("close")};return(d,i)=>{const v=xe,h=ye,b=ke;return a(),L("div",{class:_(["bubble-menu flex-row gap-x-1 rounded-lg",{"nc-form-field-bubble-menu inline-flex py-0":e(w),"flex bg-gray-100 px-1 py-1":!e(w),"embed-mode":e(p),"full-mode":!e(p),"edit-column-mode":e(B)}])},[o(b,{placement:e(A),disabled:e(t).isActive("codeBlock")},{title:l(()=>[r("div",ct,[r("div",null,c(d.$t("labels.bold")),1),r("div",ut,c(e(k))+" B",1)])]),default:l(()=>[o(h,{size:"small",type:"text",class:_({"is-active":e(t).isActive("bold")}),disabled:e(t).isActive("codeBlock"),tabindex:e(T),onClick:i[0]||(i[0]=g=>e(t).chain().focus().toggleBold().run())},{default:l(()=>[o(v,{icon:"bold"})]),_:1},8,["class","disabled","tabindex"])]),_:1},8,["placement","disabled"]),o(b,{placement:e(A),disabled:e(t).isActive("codeBlock")},{title:l(()=>[r("div",mt,[r("div",null,c(d.$t("labels.italic")),1),r("div",null,c(e(k))+" I",1)])]),default:l(()=>[o(h,{size:"small",type:"text",disabled:e(t).isActive("codeBlock"),class:_({"is-active":e(t).isActive("italic")}),tabindex:e(T),onClick:i[1]||(i[1]=g=>{e(t).chain().focus().toggleItalic().run()})},{default:l(()=>[o(v,{icon:"italic"})]),_:1},8,["disabled","class","tabindex"])]),_:1},8,["placement","disabled"]),o(b,{placement:e(A),disabled:e(t).isActive("codeBlock")},{title:l(()=>[r("div",ft,[r("div",null,c(d.$t("labels.underline")),1),r("div",null,c(e(k))+" U",1)])]),default:l(()=>[o(h,{size:"small",type:"text",class:_({"is-active":e(t).isActive("underline")}),disabled:e(t).isActive("codeBlock"),tabindex:e(T),onClick:i[2]||(i[2]=g=>e(t).chain().focus().toggleUnderline().run())},{default:l(()=>[o(v,{icon:"underline"})]),_:1},8,["class","disabled","tabindex"])]),_:1},8,["placement","disabled"]),e(p)&&!e(B)?(a(),M(b,{key:0,placement:e(A),disabled:e(t).isActive("codeBlock")},{title:l(()=>[r("div",pt,[r("div",null,c(d.$t("labels.strike")),1),r("div",null,c(e(q))+" "+c(e(k))+" S",1)])]),default:l(()=>[o(h,{size:"small",type:"text",class:_({"is-active":e(t).isActive("strike")}),disabled:e(t).isActive("codeBlock"),tabindex:e(T),onClick:i[3]||(i[3]=g=>e(t).chain().focus().toggleStrike().run())},{default:l(()=>[o(v,{icon:"strike"})]),_:1},8,["class","disabled","tabindex"])]),_:1},8,["placement","disabled"])):$("",!0),(e(w)?j(e(H).quote):!e(p))?(a(),M(b,{key:1,placement:e(A),disabled:e(t).isActive("codeBlock")},{title:l(()=>[P(c(d.$t("general.code")),1)]),default:l(()=>[o(h,{size:"small",type:"text",tabindex:e(T),class:_({"is-active":e(t).isActive("code")}),disabled:e(t).isActive("codeBlock"),onClick:i[4]||(i[4]=g=>e(t).chain().focus().toggleCode().run())},{default:l(()=>[o(v,{icon:"code"})]),_:1},8,["tabindex","class","disabled"])]),_:1},8,["placement","disabled"])):$("",!0),e(p)&&j(e(H).code)?(a(),M(b,{key:2,placement:e(A)},{title:l(()=>[P(c(d.$t("general.codeBlock")),1)]),default:l(()=>[o(h,{size:"small",type:"text",tabindex:e(T),class:_({"is-active":e(t).isActive("codeBlock")}),onClick:i[5]||(i[5]=g=>e(t).chain().focus().toggleCodeBlock().run())},{default:l(()=>[o(v,{icon:"ncCodeBlock"})]),_:1},8,["tabindex","class"])]),_:1},8,["placement"])):$("",!0),i[15]||(i[15]=r("div",{class:"divider"},null,-1)),e(p)&&!e(w)?(a(),L(X,{key:3},[o(b,null,{title:l(()=>[r("div",bt,[r("div",null,c(d.$t("labels.heading1")),1),r("div",null,c(e(k))+" "+c(e(D))+" 1",1)])]),default:l(()=>[o(h,{size:"small",type:"text",class:_({"is-active":e(t).isActive("heading",{level:1})}),onClick:i[6]||(i[6]=g=>e(t).chain().focus().toggleHeading({level:1}).run())},{default:l(()=>[o(v,{icon:"ncHeading1"})]),_:1},8,["class"])]),_:1}),o(b,null,{title:l(()=>[r("div",vt,[r("div",null,c(d.$t("labels.heading2")),1),r("div",null,c(e(k))+" "+c(e(D))+" 2",1)])]),default:l(()=>[o(h,{size:"small",type:"text",class:_({"is-active":e(t).isActive("heading",{level:2})}),onClick:i[7]||(i[7]=g=>e(t).chain().focus().toggleHeading({level:2}).run())},{default:l(()=>[o(v,{icon:"ncHeading2"})]),_:1},8,["class"])]),_:1}),o(b,null,{title:l(()=>[r("div",ht,[r("div",null,c(d.$t("labels.heading3")),1),r("div",null,c(e(k))+" "+c(e(D))+" 3",1)])]),default:l(()=>[o(h,{size:"small",type:"text",class:_({"is-active":e(t).isActive("heading",{level:3})}),onClick:i[8]||(i[8]=g=>e(t).chain().focus().toggleHeading({level:3}).run())},{default:l(()=>[o(v,{icon:"ncHeading3"})]),_:1},8,["class"])]),_:1}),i[13]||(i[13]=r("div",{class:"divider"},null,-1))],64)):$("",!0),e(p)&&!e(B)&&j(e(H).blockQuote)?(a(),M(b,{key:4,placement:e(A)},{title:l(()=>[P(c(d.$t("labels.blockQuote")),1)]),default:l(()=>[o(h,{size:"small",type:"text",tabindex:e(T),class:_({"is-active":e(t).isActive("blockquote")}),onClick:i[9]||(i[9]=g=>e(t).chain().focus().toggleBlockquote().run())},{default:l(()=>[o(v,{icon:"ncQuote"})]),_:1},8,["tabindex","class"])]),_:1},8,["placement"])):$("",!0),j(e(H).bulletList)?(a(),M(b,{key:5,placement:e(A)},{title:l(()=>[P(c(d.$t("labels.bulletList")),1)]),default:l(()=>[o(h,{size:"small",type:"text",tabindex:e(T),class:_({"is-active":e(t).isActive("bulletList")}),onClick:i[10]||(i[10]=g=>e(t).chain().focus().toggleBulletList().run())},{default:l(()=>[o(v,{icon:"ncList"})]),_:1},8,["tabindex","class"])]),_:1},8,["placement"])):$("",!0),j(e(H).numberedList)?(a(),M(b,{key:6,placement:e(A)},{title:l(()=>[P(c(d.$t("labels.numberedList")),1)]),default:l(()=>[o(h,{size:"small",type:"text",tabindex:e(T),class:_({"is-active":e(t).isActive("orderedList")}),onClick:i[11]||(i[11]=g=>e(t).chain().focus().toggleOrderedList().run())},{default:l(()=>[o(v,{icon:"ncNumberList"})]),_:1},8,["tabindex","class"])]),_:1},8,["placement"])):$("",!0),j(e(H).taskList)?(a(),M(b,{key:7,placement:e(A)},{title:l(()=>[P(c(d.$t("labels.taskList")),1)]),default:l(()=>[o(h,{size:"small",type:"text",tabindex:e(T),class:_({"is-active":e(t).isActive("taskList")}),onClick:i[12]||(i[12]=g=>e(t).chain().focus().toggleTaskList().run())},{default:l(()=>[o(v,{icon:"ncCheckList"})]),_:1},8,["tabindex","class"])]),_:1},8,["placement"])):$("",!0),e(z).ee&&!m.hideMention?(a(),M(b,{key:8},{title:l(()=>[r("div",yt,[r("div",null,c(d.$t("labels.mention")),1),i[14]||(i[14]=r("div",null,"@",-1))])]),default:l(()=>{var g;return[o(h,{size:"small",class:_({"is-active":(g=e(t))==null?void 0:g.isActive("suggestions")}),tabindex:e(T),type:"text",onClick:ee},{default:l(()=>[o(v,{icon:"atSign"})]),_:1},8,["class","tabindex"])]}),_:1})):$("",!0),G([e(H).blockQuote,e(H).bulletList,e(H).numberedList,e(H).taskList])?(a(),L("div",xt)):$("",!0),j(e(H).link)?(a(),M(b,{key:10,placement:e(A),disabled:e(t).isActive("codeBlock")},{title:l(()=>[P(c(d.$t("general.link")),1)]),default:l(()=>[o(h,{size:"small",type:"text",class:_({"is-active":e(t).isActive("link")}),disabled:e(t).isActive("codeBlock"),tabindex:e(T),onClick:E},{default:l(()=>[e(w)?(a(),M(v,{key:0,icon:"link2"})):(a(),L("div",kt,[o(v,{icon:"link2"}),r("div",gt,c(d.$t("general.link")),1)]))]),_:1},8,["class","disabled","tabindex"])]),_:1},8,["placement","disabled"])):$("",!0),e(I)?(a(),L("div",_t,[o(h,{type:"text",size:"small",onClick:te},{default:l(()=>[o(v,{icon:"close"})]),_:1})])):$("",!0)],2)}}}),ue=Object.assign($t,{__name:"CellRichTextSelectedBubbleMenu"}),Bt=ie({__name:"SelectedBubbleMenuPopup",props:{editor:{},hideMention:{type:Boolean}},setup(u){const K=u,m=O(()=>K.editor),C=O(()=>m?!m.value.state.selection.empty:!1),t=S(!1);ge(()=>C.value,x=>{t.value=x},{debounce:200,maxWait:800,immediate:!0});const p=x=>{if(document.elementsFromPoint(x.clientX,x.clientY).some(k=>{var q;return(q=k==null?void 0:k.classList)==null?void 0:q.contains("bubble-menu")}))return;const B=document.querySelector(".nc-textarea-rich-editor");B==null||B.classList.add("bubble-menu-hidden")},w=x=>{document.elementsFromPoint(x.clientX,x.clientY).some(B=>{var k;return(k=B==null?void 0:B.classList)==null?void 0:k.contains("bubble-menu")})||setTimeout(()=>{const B=document.querySelector(".nc-textarea-rich-editor");B==null||B.classList.remove("bubble-menu-hidden")},100)};return ce(()=>{document.addEventListener("mouseup",w),document.addEventListener("mousedown",p)}),_e(()=>{document.removeEventListener("mouseup",w),document.removeEventListener("mousedown",p)}),(x,I)=>{const z=ue;return a(),M(e(We),{editor:e(m),"update-delay":300,"tippy-options":{duration:100,maxWidth:600}},{default:l(()=>[e(t)?(a(),M(z,{key:0,editor:e(m),"hide-mention":x.hideMention},null,8,["editor","hide-mention"])):$("",!0)]),_:1},8,["editor"])}}}),wt=Object.assign(Bt,{__name:"CellRichTextSelectedBubbleMenuPopup"}),Mt=$e.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:u}){return["ul",Be(this.options.HTMLAttributes,u,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:u})=>u.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),Lt=["tabindex"],Ct={key:0,class:"truncate"},Tt={key:0},It={class:"scrollbar-thin scrollbar-thumb-gray-200 hover:scrollbar-thumb-gray-300 scrollbar-track-transparent relative"},At={key:3,class:"nc-form-field-bubble-menu-wrapper overflow-hidden"},St=ie({__name:"RichText",props:{value:{},readOnly:{type:Boolean},syncValueChange:{type:Boolean},showMenu:{type:Boolean},fullMode:{type:Boolean},isFormField:{type:Boolean,default:!1},autofocus:{type:Boolean},placeholder:{},renderAsText:{type:Boolean},hiddenBubbleMenuOptions:{default:()=>[]},hideMention:{type:Boolean,default:!1}},emits:["update:value","focus","blur","close"],setup(u,{emit:K}){const m=u,C=K,{fullMode:t,isFormField:p,hiddenBubbleMenuOptions:w}=de(m),{appInfo:x}=Z(),I=F(we,S(!1)),z=F(Me,S(1)),B=F(Le,S(!1)),k=F(Ce,S(!1)),q=F(Te,S(!1)),D=F(Ie,S(!1)),A=F(Ae,S(!1)),T=F(Se,S(!1)),E=S(!1),j=Oe(),G=F(Ee),{user:ee}=Z(),te=He(),{basesUser:d}=Re(te),i=O(()=>G.value.base_id?d.value.get(G.value.base_id)||[]:[]),v=O(()=>B.value&&!I.value&&(A.value||T.value)?6:z.value),h=O(()=>p.value?E.value:!0),b=S(null),g=S(null),N=O({get:()=>Fe.preprocessMarkdown(m.value,!0),set:s=>{C("update:value",s)}}),V=O(()=>i.value.filter(s=>s.deleted!==!0)),Q=()=>{const s=[Xe.configure({heading:p.value?!1:void 0,strike:!1,hardBreak:!1,italic:!1}),Ue,Ke,Pe,qe,De,Mt,Ve.configure({nested:!0}),Ze.configure({emptyEditorClass:"is-editor-empty",placeholder:m.placeholder}),tt.configure({breaks:!0,transformPastedText:!0})];return x.value.ee&&!m.hideMention&&s.push(Ge.configure({suggestion:{...st(dt),items:({query:n})=>V.value.map(f=>({id:f.id,name:f.display_name,email:f.email,meta:f.meta})).filter(f=>Qe([f.name,f.email],n))},users:e(V.value),currentUser:e(ee.value)})),s},y=Ye({content:N.value,extensions:Q(),onUpdate:({editor:s})=>{N.value=s.storage.markdown.getMarkdown()},editable:!m.readOnly,autofocus:m.autofocus,onFocus:()=>{E.value=!0,C("focus")},onBlur:s=>{var n,f;(f=(n=s==null?void 0:s.event)==null?void 0:n.relatedTarget)!=null&&f.closest(".bubble-menu, .nc-textarea-rich-editor, .nc-rich-text, .tippy-box, .mention, .nc-mention-list, .tippy-content")||(E.value=!1,C("blur"))}}),W=s=>{y.value&&y.value.commands.setContent(s,!1)},Y=()=>{k.value&&!p.value&&!m.readOnly&&!j.shift.value&&J()};function J(){y.value&&le(()=>{var s;(s=y.value)==null||s.chain().focus().run()})}return m.syncValueChange&&ae([N,y],()=>{var s;W(p.value?(s=N.value||"")==null?void 0:s.replace(/(<br\s*\/?>)+$/g,""):N.value)}),p.value&&ae([m,y],()=>{var s,n;m.readOnly?(s=y.value)==null||s.setEditable(!1):(n=y.value)==null||n.setEditable(!0)}),ce(()=>{(t.value||D.value)&&le(()=>{var s;(s=y.value)==null||s.commands.focus("end")})}),re(b,"focusout",s=>{var f;const n=s==null?void 0:s.relatedTarget;((f=n==null?void 0:n.classList)!=null&&f.contains("tiptap")||!(n!=null&&n.closest(".bubble-menu, .tippy-content, .nc-textarea-rich-editor,  .tippy-box, .mention, .nc-mention-list, .tippy-content")))&&(E.value=!1,C("blur"))},!0),re(g,"focusout",s=>{var f;const n=s==null?void 0:s.relatedTarget;!n&&((f=s.target)!=null&&f.closest(".bubble-menu, .tippy-content, .nc-textarea-rich-editor, .tippy-box, .mention, .nc-mention-list, .tippy-content"))||n!=null&&n.closest(".bubble-menu, .tippy-content, .nc-textarea-rich-editor,  .tippy-box, .mention, .nc-mention-list, .tippy-content")||(E.value=!1,C("blur"))},!0),ze(b,s=>{if(!E.value)return;const n=s==null?void 0:s.target;n!=null&&n.closest(".bubble-menu,.tippy-content, .nc-textarea-rich-editor, .tippy-box, .mention, .nc-mention-list, .tippy-content")||(E.value=!1,C("blur"))}),(s,n)=>{var oe;const f=ue,me=wt,fe=et;return a(),L("div",{class:_(["nc-rich-text h-full focus:outline-none",{"flex flex-col flex-grow nc-rich-text-full":e(t),"nc-rich-text-embed flex flex-col pl-1 w-full":!e(t),readonly:s.readOnly,"nc-form-rich-text-field !p-0 relative":e(p),"nc-rich-text-grid":e(q)}]),tabindex:e(B)||e(p)?-1:0,onFocus:Y},[s.renderAsText?(a(),L("div",Ct,[e(y)?(a(),L("span",Tt,c(((oe=e(y))==null?void 0:oe.getText())??""),1)):$("",!0)])):(a(),L(X,{key:1},[s.showMenu&&!s.readOnly&&!e(p)?(a(),L("div",{key:0,class:_(["absolute top-0 right-0.5",{"flex rounded-tr-2xl overflow-hidden w-full":e(t)||e(k),"max-w-[calc(100%_-_198px)]":e(t),"justify-start left-0.5":e(k),"justify-end xs:hidden":!e(k)}])},[r("div",It,[e(y)?(a(),M(f,{key:0,editor:e(y),"embed-mode":"","hide-mention":s.hideMention,"is-form-field":e(p),"enable-close-button":e(t),onClose:n[0]||(n[0]=se=>C("close"))},null,8,["editor","hide-mention","is-form-field","enable-close-button"])):$("",!0)])],2)):$("",!0),e(y)&&!e(p)&&!e(k)?(a(),M(me,{key:1,editor:e(y),"hide-mention":s.hideMention},null,8,["editor","hide-mention"])):$("",!0),e(h)?(a(),L(X,{key:2},[e(y)?(a(),M(fe,{key:0,ref_key:"richTextLinkOptionRef",ref:g,editor:e(y),"is-form-field":e(p),onBlur:n[1]||(n[1]=se=>E.value=!1)},null,8,["editor","is-form-field"])):$("",!0)],64)):$("",!0),o(e(Je),{ref_key:"editorDom",ref:b,editor:e(y),class:_(["nc-rich-text-content flex flex-col nc-textarea-rich-editor w-full",{"mt-2.5 flex-grow":e(t),"scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent":!e(t)||!e(t)&&e(I),"flex-grow":e(I),[`!overflow-hidden nc-rich-truncate nc-line-clamp-${("rowHeightTruncateLines"in s?s.rowHeightTruncateLines:e(Ne))(e(v))}`]:!e(t)&&s.readOnly&&e(v)&&!e(I)&&!e(k)}]),onKeydown:[n[2]||(n[2]=R(()=>{},["alt","stop"])),n[3]||(n[3]=U(R(()=>{},["alt","stop"]),["enter"])),n[4]||(n[4]=U(R(()=>{},["shift","stop"]),["enter"])),n[5]||(n[5]=U(R(()=>{},["stop"]),["down"])),n[6]||(n[6]=U(R(()=>{},["stop"]),["left"])),n[7]||(n[7]=U(R(()=>{},["stop"]),["right"])),n[8]||(n[8]=U(R(()=>{},["stop"]),["up"])),n[9]||(n[9]=U(R(()=>{},["stop"]),["delete"])),n[12]||(n[12]=U(se=>("handleOnEscRichTextEditor"in s?s.handleOnEscRichTextEditor:e(je))(se,e(y)),["esc"]))],onSelectstartCapture:n[10]||(n[10]=R(()=>{},["stop"])),onMousedown:n[11]||(n[11]=R(()=>{},["stop"]))},null,8,["editor","class"]),e(p)&&!s.readOnly?(a(),L("div",At,[r("div",{class:_(e(E)?"max-h-[50px]":"max-h-0"),style:{transition:"max-height 0.2s ease-in-out"}},[e(y)?(a(),M(f,{key:0,editor:e(y),"embed-mode":"","is-form-field":"","hidden-options":e(w),"hide-mention":s.hideMention},null,8,["editor","hidden-options","hide-mention"])):$("",!0)],2)])):$("",!0)],64))],42,Lt)}}}),Ft=Object.assign(St,{__name:"CellRichText"});export{Ft as default};
