const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DRA9KN5F.js","./entry.CNP42Mi6.css","./DzI8hkox.js","./gAYHr7Gr.js","./PlainCell.CJha1QXQ.css","./Xx6o57R-.js","./QeWwuUYP.js","./index._6B72PDH.css","./BUnSBgDC.js","./BKua7nEo.js","./RecordCard.pwDI-3DF.css","./Bw607vNV.js","./CQa0sIfA.js","./DkDj6Z7Z.js","./B94p8ToD.js","./Cd4chHHL.js","./boyBAVNN.js","./yMSt-9W5.js","./BYKJ-MHf.js","./By5RWL3d.js","./D7poRkS0.js","./C2xdh4Xe.js","./CI3EriLB.js","./C2UaKEE0.js","./Item.GTPiKSkc.css","./C_VN1MCC.js","./index.CMurbi1o.css","./owbQkEXm.js","./DivDataCell.3R8zfazT.css","./DlXIlcns.js","./DP83Cqnl.js","./CVZBrAgI.js","./LhVKWcKT.js","./B89wxTuy.js","./DjPyxH1k.js","./Markdown.CUPXKfeQ.css","./DCa6wpIA.js","./B8gs0dG7.js","./mXY_vhPu.js","./Comments.DTONmK0N.css","./B1qoNiTF.js","./CbX26EBz.js","./TimeSelector.DAR2lbHN.css","./CYKJe2Bk.js","./DkpDpjnr.js","./Dv0nYk-Y.js","./Cell.BBaBjsLL.css","./CHRPOXXy.js","./gByPF8bR.js","./Modal.CB1oWLel.css","./BCBMEREK.js","./DGFEr0h-.js","./DfIS_byq.js","./YbUkeyWR.js","./lL-0_K96.js","./CIOK9Y4w.js","./CNwEZGnv.js","./BVqTF1QK.js","./Ce4xoeky.js","./C3FZdmXk.js","./index.C8L8AhJa.css","./DDmv9w84.js","./DWLi1ZcL.js","./LockView.BWC8JyQk.css","./BALLsGq5.js","./DCm6TF8M.js","./Bj4kMpzI.js","./CbSESqy_.js","./Bxzk9hCO.js","./Bm6QmuXP.js","./CkpISeXq.js","./index.N-A1gxk9.css","./zMMvJhqz.js","./FilterInput.7KjqjE1F.css","./ytmFgNfN.js","./Pagination.Cmvjwryu.css","./DxC2Oool.js","./VirtualCell.6f0pX0MN.css","./CC4cUItJ.js","./EcM5l_HA.js","./BLPDl4Qg.js","./CsX17Y_h.js","./C_gbauhL.js","./BmscXXs6.js","./ColumnMenu.tCfxYPwr.css","./CG-5KGUk.js","./CkvAmLZt.js","./D7OHpRdS.js","./DvtLu3FC.js","./D_txg4HT.js","./SelectOptions.BDAXdwVJ.css","./JqUqXTOd.js","./I4o4wRE2.js","./BMPzbwPk.js","./CwPFbl3n.js","./C5HnjaiI.js","./CBhmoxRW.js","./Bc3_tI4-.js","./CJAyvGKH.js","./D43249YX.js","./U3gU45AW.js","./BBg0y0zb.js","./-iDxnmJF.js","./EditOrAddProvider.C1S70ahv.css","./C1XMFoVa.js","./C-ZUx0lq.js","./YYodiGXA.js","./C316Za7m.js","./CKrOnbU4.js","./index.DA-8lYYb.css"])))=>i.map(i=>d[i]);
import{e as ut,f as ct,r as Y,as as mt,G as Ae,bd as ft,n as fe,fq as vt,gg as wt,o5 as Ne,ac as pt,c as b,K as J,L as t,o as f,a as F,an as W,aq as ae,t as re,ag as Z,I as U,aj as q,w as E,b as oe,N as _t,b9 as He,bo as Fe,d as yt,aX as we,aH as gt,bZ as ht,b_ as kt,ad as Mt,O as Dt,cf as zt,aw as xt,ba as bt,a_ as pe,_ as Rt}from"./DRA9KN5F.js";import{_ as St}from"./C2UaKEE0.js";import{_ as Yt}from"./C_VN1MCC.js";import{_ as Et}from"./CI3EriLB.js";import{i as We,e as ve}from"./gAYHr7Gr.js";import{a as Ct}from"./15xfm8CF.js";import{u as Tt}from"./CQa0sIfA.js";import{u as It}from"./D7poRkS0.js";import"./DkDj6Z7Z.js";import"./C2xdh4Xe.js";import"./boyBAVNN.js";const Ot=we(()=>pe(()=>import("./DRA9KN5F.js").then(D=>D.oV),__vite__mapDeps([0,1]),import.meta.url).then(D=>D.default||D)),Lt=we(()=>pe(()=>import("./DzI8hkox.js"),__vite__mapDeps([2,0,1,3,4]),import.meta.url).then(D=>D.default||D)),Vt=we(()=>pe(()=>import("./Xx6o57R-.js"),__vite__mapDeps([5,0,1,6,7,8]),import.meta.url).then(D=>D.default||D)),Pt=we(()=>pe(()=>import("./BKua7nEo.js"),__vite__mapDeps([9,0,1,8,10]),import.meta.url).then(D=>D.default||D)),jt=we(()=>pe(()=>import("./Bw607vNV.js").then(D=>D.R),__vite__mapDeps([11,0,1,12,13,14,3,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,6,7,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109]),import.meta.url).then(D=>D.default||D)),Bt={key:0,class:"h-full prevent-select relative","data-testid":"nc-calendar-month-view"},$t=["onClick","onDblclick"],At={key:0,class:"flex justify-between p-1"},Nt={class:"flex items-center gap-1"},Ht={class:"ml-1"},Ft={key:1,class:"leading-3 text-[13px] p-3"},Wt={class:"text-xs px-1"},Ut={class:"bg-nc-bg-default px-4 gap-3 flex flex-col py-4 max-h-70 overflow-y-auto"},Xt={key:1,class:"text-gray-500"},Zt={class:"absolute inset-0 z-2 pointer-events-none mt-8 pb-7.5","data-testid":"nc-calendar-month-record-container"},qt=["data-testid","data-unique-id","onMouseover","onMousedown"],Gt={class:"text-xs font-medium text-gray-400"},Jt=ut({__name:"MonthView",emits:["newRecord","expandRecord"],setup(D,{emit:Ue}){const ie=Ue,{selectedDate:_e,selectedMonth:Ce,formattedData:K,formattedSideBarData:Te,calDataType:ye,sideBarFilterOption:Xe,displayField:de,calendarRange:A,viewMetaProperties:Ze,showSideMenu:qe,updateRowProperty:De,updateFormat:ue,timezoneDayjs:s,isSyncedFromColumn:ze}=Ct(),{isSyncedTable:Ge}=Tt(),{$e:Ie}=ct(),xe=Y(!0),{isUIAllowed:N}=mt(),ne=Ae(ft,Y()),P=fe(()=>{var a;return(a=Ze.value)!=null&&a.hide_weekend?5:7}),Je=fe(()=>{let a=[];return xe.value?a=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],P.value===5&&(a=a.filter(l=>l!=="Sat"&&l!=="Sun")),a}),ge=Y(),{width:Ke,height:Qe}=vt(ge),G=Y(null),C=Y(null),ce=Y(!1),le=Y(!1),z=Y(null),be=Y(),Re=Y(),he=Y(null),ke=Y(),k=Y(null),et=Ae(wt,Y()),{fields:tt}=It(),Se=fe(()=>(tt.value??[]).reduce((a,l)=>(a[l.fk_column_id]={bold:!!l.bold,italic:!!l.italic,underline:!!l.underline},a),{})),p=fe(()=>{const a=s.timezonize(Ce.value.startOf("month")),l=xe.value?0:-1,d=s.timezonize(a.startOf("week")).add(l,"day"),y=s.timezonize(),S=a.daysInMonth(),u=a.day(),O=xe.value?u===0?6:u-1:u,T=Math.ceil((S+O)/7);return{weeks:Array.from({length:T},(j,g)=>({weekIndex:g,days:Array.from({length:7},(h,i)=>{const v=d.add(g*7+i,"day");return{date:v,key:`${g}-${i}`,isWeekend:v.get("day")===0||v.get("day")===6,isToday:v.isSame(y,"date"),isInPagedMonth:v.isSame(Ce.value,"month"),isVisible:P.value===5?v.get("day")!==0&&v.get("day")!==6:!0,dayNumber:v.format("DD")}})})),gridClass:{"grid-cols-7":P.value===7,"grid-cols-5":P.value===5,grid:!0,grow:!0}}}),me=fe(()=>{if(!p.value||!A.value)return{records:[],count:{}};const a=Ke.value/P.value,l=Qe.value/p.value.weeks.length,d=28,y=27,S=Math.floor((l-y)/(d+8)),u={},O=(g,h=1)=>{var v;u[g]||(u[g]={overflow:!1,count:0,overflowCount:0,lanes:[],overflowRecords:[]});const{lanes:i}=u[g];for(let e=0;e<S;e++)if(!i[e]){let o=!0;for(let m=0;m<h;m++){const _=s.dayjsTz(g).add(m,"day").format("YYYY-MM-DD");if((v=u[_])!=null&&v.lanes[e]){o=!1;break}}if(o)return e}return-1},T=(g,h,i=1)=>{for(let v=0;v<i;v++){const e=s.dayjsTz(g).add(v,"day").format("YYYY-MM-DD");u[e]||(u[e]={overflow:!1,count:0,overflowCount:0,lanes:[],overflowRecords:[]}),u[e].lanes[h]=!0,u[e].count++}},j=[];return A.value.forEach(g=>{const h=g.fk_from_col,i=g.fk_to_col;[...K.value].filter(e=>{if(h&&i){const o=e.row[h.title]?s.timezonize(e.row[h.title]):null,m=e.row[i.title]?s.timezonize(e.row[i.title]):null;return o&&m&&!m.isBefore(o)}else if(h&&!i)return!!(e.row[h.title]?s.timezonize(e.row[h.title]):null);return!1}).sort((e,o)=>{const m=s.timezonize(e.row[h.title]),_=i?s.timezonize(e.row[i.title]):m,M=s.timezonize(o.row[h.title]);return(i?s.timezonize(o.row[i.title]):M).diff(M)-_.diff(m)}).forEach(e=>{var o,m,_,M,c;if(!i&&h){const n=s.timezonize(e.row[h.title]),r=n.format("YYYY-MM-DD"),w=e.rowMeta.id??Ne(),I=O(r);if(I===-1){u[r].overflow=!0,u[r].overflowCount++,e.rowMeta.id=w,e.rowMeta.range=g,u[r].overflowRecords.push(e);return}T(r,I);const B=p.value.weeks.findIndex(H=>H.days.some(ee=>ee.date.isSame(n,"day"))),x=(o=p.value.weeks[B])==null?void 0:o.days.findIndex(H=>H.date.isSame(n,"day")),R=w===C.value||w===((m=k.value)==null?void 0:m.rowMeta.id),$={left:`${x*a}px`,width:`${a}px`,top:R?`${B*l}px`:`${B*l+(y+I*(d+4))}px`};R&&($.zIndex="100",$.display="block"),P.value===5&&(x===5||x===6)&&!R&&($.display="none"),j.push({...e,rowMeta:{...e.rowMeta,style:$,maxSpanning:1,position:"rounded",range:g,id:w}})}else if(h&&i){let n=s.timezonize(e.row[h.title]);const r=s.timezonize(e.row[i.title]);let w=n.startOf("week");n.isBefore(w)&&(n=p.value.weeks[0].days[0].date);const I=e.rowMeta.id??Ne();let B=0;for(;w.isSameOrBefore(r,"day")&&w.isBefore(p.value.weeks[p.value.weeks.length-1].days[6].date);){let x=w.endOf("week");P.value===5&&(x=x.subtract(2,"day"));const R=w.isBefore(n)?n:w,$=x.isAfter(r)?r:x;if(P.value===5&&[0,6].includes(n.day())){w=s.timezonize(w.add(1,"week"));continue}if($.isBefore(p.value.weeks[0].days[0].date)){w=s.timezonize(w.add(1,"week"));continue}const H=$.diff(R,"day")+1,ee=R.format("YYYY-MM-DD"),L=O(ee,H);if(L===-1){e.rowMeta.id=I,e.rowMeta.range=g;for(let X=0;X<H;X++){const se=R.add(X,"day").format("YYYY-MM-DD");u[se]&&(u[se].overflow=!0,u[se].overflowCount++,u[se].overflowRecords.push(e))}w=w.add(1,"week");continue}T(ee,L,H);const V=p.value.weeks.findIndex(X=>X.days.some(se=>se.date.isSame(R,"day"))),Ee=(_=p.value.weeks[V])==null?void 0:_.days.findIndex(X=>X.date.isSame(R,"day")),je=(M=p.value.weeks[V])==null?void 0:M.days.findIndex(X=>X.date.isSame($,"day")),Be=I===C.value||I===((c=k.value)==null?void 0:c.rowMeta.id),$e={left:`${Ee*a-.5}px`,width:`${(je-Ee+1)*a}px`,top:Be?`${V*l+d}px`:`${V*l+(y+L*(d+4))}px`};Be&&($e.zIndex="100");let te="rounded";const dt=p.value.weeks[V-1]?p.value.weeks[V-1].days[0].date.isBefore(R,"month"):!1;n.isSame(w,"week")&&r.isSame(x,"week")&&r.isSameOrBefore(x)?te="rounded":n.isSame(R,"week")?dt&&r.isSame(x,"week")?te="rounded":te="leftRounded":r.isSame(x,"week")?te="rightRounded":te="none",j.push({...e,rowMeta:{...e.rowMeta,position:te,style:$e,range:g,maxSpanning:je-Ee+1,id:I,recordIndex:B}}),B++,w=s.timezonize(w.add(1,"week"))}}})}),{records:j,count:u}}),Me=Y({x:null,y:null}),Ye=(a,l,d)=>{var w,I,B,x,R,$,H,ee;const{top:y,height:S,width:u,left:O}=ge.value.getBoundingClientRect();let T=a.clientX-O;Me.value.x&&(T-=Me.value.x);const j=a.clientY-y,g=Math.max(0,Math.min(1,T/u)),h=Math.max(0,Math.min(1,j/S)),i=(I=(w=z.value)==null?void 0:w.rowMeta.range)==null?void 0:I.fk_from_col,v=(x=(B=z.value)==null?void 0:B.rowMeta.range)==null?void 0:x.fk_to_col;if(!i)return{newRow:null,updateProperty:[]};const e=Math.floor(h*p.value.weeks.length),o=Math.floor(g*P.value);let m=p.value.weeks[e]?p.value.weeks[e].days[o].date:null;if(!m)return{newRow:null,updateProperty:[]};let _=s.timezonize(z.value.row[i.title]);_.isValid()||(_=s.dayjsTz()),m=m.add(_.hour(),"hour").add(_.minute(),"minute").add(_.second(),"second");let M;const c={...z.value,row:{...(R=z.value)==null?void 0:R.row,[i.title]:s.dayjsTz(m).format(ue.value)}},n=[i.title];if(v){const L=($=z.value)!=null&&$.row[i.title]?s.timezonize(z.value.row[i.title]):null,V=(H=z.value)!=null&&H.row[v.title]?s.timezonize((ee=z.value)==null?void 0:ee.row[v.title]):null;L&&V?M=s.dayjsTz(m).add(V.diff(L,"day"),"day"):L&&!V||!L&&V?M=s.dayjsTz(m).endOf("day"):M=m.clone(),c.row[v.title]=s.dayjsTz(M).format(ue.value),n.push(v.title)}if(z.value.row[i.title]===c.row[i.title]&&!d)return{newRow:null,updatedProperty:[]};if(!c)return{newRow:null,updateProperty:[]};const r=ve(c.row,ne.value.columns);return c.rowMeta.id=C==null?void 0:C.value,l?(K.value=[...K.value,c],Te.value=Te.value.filter(L=>ve(L.row,ne.value.columns)!==r)):K.value=K.value.map(L=>ve(L.row,ne.value.columns)===r?c:L),{newRow:c,updateProperty:n}},Oe=a=>{!N("dataEdit")||!z.value||Ye(a,!1)},at=bt((a,l,d)=>{De(a,l,d)},500),Le=a=>{var _,M;if(!N("dataEdit")||!k.value)return;const{top:l,height:d,width:y,left:S}=ge.value.getBoundingClientRect(),u=(a.clientY-l-window.scrollY)/d,O=(a.clientX-S-window.scrollX)/y,T=k.value.row[k.value.rowMeta.range.fk_to_col.title],j=k.value.row[k.value.rowMeta.range.fk_from_col.title],g=(_=k.value.rowMeta.range)==null?void 0:_.fk_from_col,h=(M=k.value.rowMeta.range)==null?void 0:M.fk_to_col,i=Math.floor(u*p.value.weeks.length),v=Math.floor(O*P.value);let e=[],o;if(ke.value==="right"){let c=p.value.weeks[i]?p.value.weeks[i].days[v].date.endOf("day"):null;if(e=[h.title],s.dayjsTz(c).isBefore(j)&&(c=s.dayjsTz(j).clone().endOf("day")),!c)return;o={...k.value,row:{...k.value.row,[h.title]:s.dayjsTz(c).format(ue.value)}}}else{let c=p.value.weeks[i]?p.value.weeks[i].days[v].date:null;if(e=[g.title],s.dayjsTz(c).isAfter(T)&&(c=s.dayjsTz(T).clone()),!c)return;o={...k.value,row:{...k.value.row,[g.title]:s.dayjsTz(c).format(ue.value)}}}o.rowMeta.id=k.value.rowMeta.id;const m=ve(o.row,ne.value.columns);K.value=K.value.map(c=>ve(c.row,ne.value.columns)===m?o:c),o&&at(o,e,!1)},Ve=()=>{ce.value=!1,ke.value=void 0,k.value=null,document.removeEventListener("mousemove",Le),document.removeEventListener("mouseup",Ve)},ot=(a,l,d)=>{var y;!N("dataEdit")||C.value||(y=d.rowMeta.range)!=null&&y.is_readonly||(ce.value=!0,ke.value=a,k.value=d,document.addEventListener("mousemove",Le),document.addEventListener("mouseup",Ve))},Pe=a=>{var y;if(clearTimeout(Re.value),!N("dataEdit")||!z.value||!le.value||(y=z.value.rowMeta.range)!=null&&y.is_readonly)return;a.preventDefault(),G.value.style.boxShadow="none";const{newRow:l,updateProperty:d}=Ye(a,!1,!0);G.value&&(G.value.style.boxShadow="none",le.value=!1,C.value=null,G.value=null),z.value=null,De(l,d,!1),he.value=null,Me.value={x:null,y:null},Ie("c:calendar:month:drag-record"),document.removeEventListener("mousemove",Oe),document.removeEventListener("mouseup",Pe)},nt=(a,l)=>{if(ce.value||!l.rowMeta.id||ze.value)return;let d=a.target;le.value=!1,Re.value=setTimeout(()=>{var S,u;if(N("dataEdit")&&!((S=l.rowMeta.range)!=null&&S.is_readonly)){for(le.value=!0;!d.classList.contains("draggable-record");)d=d.parentElement;le.value=!0,G.value=d,C.value=l.rowMeta.id,z.value=l,Me.value={x:((u=z.value)==null?void 0:u.rowMeta.maxSpanning)>1?a.clientX-d.getBoundingClientRect().left:0,y:a.clientY},document.addEventListener("mousemove",Oe),document.addEventListener("mouseup",Pe)}},500);const y=()=>{clearTimeout(Re.value),document.removeEventListener("mouseup",y),le.value||ie("expandRecord",l)};document.addEventListener("mouseup",y)},lt=a=>{var d,y;if(!N("dataEdit"))return;a.preventDefault();const l=(d=a.dataTransfer)==null?void 0:d.getData("text/plain");if(l){const{record:S,isWithoutDates:u}=JSON.parse(l);if((y=S.rowMeta.range)!=null&&y.is_readonly)return;z.value=S;const{newRow:O,updateProperty:T}=Ye(a,u);G.value&&(G.value.style.boxShadow="none",G.value=null),De(O,T,!1),Ie("c:calendar:day:drag-record")}},st=a=>{z.value=null,C.value=null,k.value=null,ce.value=!1,ke.value=void 0,he.value=null,_e.value=a},rt=a=>{Xe.value="selectedDate",_e.value=a,qe.value=!0},Q=a=>_e.value?s.dayjsTz(a).isSame(_e.value,"day"):!1,it=a=>{if(!N("dataEdit")||!A.value||Ge.value)return;const l=A.value[0].fk_from_col;if(!l)return;const d={row:{[l.title]:a.format(ue.value)}};ie("newRecord",d)};return(a,l)=>{const d=_t,y=St,S=Ot,u=Yt,O=gt,T=Et,j=Lt,g=Vt,h=Pt,i=jt,v=pt("e");return t(A)?(f(),b("div",Bt,[F("div",{class:Z(["grid",{"grid-cols-7":t(P)===7,"grid-cols-5":t(P)===5}])},[(f(!0),b(W,null,ae(t(Je),(e,o)=>(f(),b("div",{key:o,class:"text-center bg-gray-50 py-1 border-r-1 last:border-r-0 border-gray-100 font-semibold leading-4 uppercase text-[10px] text-gray-500"},re(e),1))),128))],2),F("div",{ref_key:"calendarGridContainer",ref:ge,class:Z([{"grid-rows-5":t(p).weeks.length===5,"grid-rows-6":t(p).weeks.length===6,"grid-rows-7":t(p).weeks.length===7},"grid"]),style:{height:"calc(100% - 1.59rem)"},onDrop:lt},[(f(!0),b(W,null,ae(t(p).weeks,e=>(f(),b("div",{key:e.weekIndex,class:Z(t(p).gridClass),"data-testid":"nc-calendar-month-week"},[(f(!0),b(W,null,ae(e.days,(o,m)=>{var _,M,c;return f(),b(W,null,[o.isVisible?(f(),b("div",{key:o.key,class:Z([{"selected-date":Q(o.date)||t(he)&&o.date.isSame(t(he),"day"),"!text-gray-400":!o.isInPagedMonth,"!bg-gray-50 !hover:bg-gray-100 !border-gray-200":o.isWeekend,"!border-r-gray-200":(_=e.days[m+1])==null?void 0:_.isWeekend,"border-t-1":e.weekIndex===0},"text-right relative group last:border-r-0 transition text-sm h-full border-r-1 border-b-1 border-gray-100 font-medium hover:bg-gray-50 text-gray-800 bg-white"]),"data-testid":"nc-calendar-month-day",onClick:n=>st(o.date),onDblclick:n=>it(o.date)},[t(N)("dataEdit")?(f(),b("div",At,[F("span",{class:Z({"block group-hover:hidden":!Q(o.date)&&[t(q).DateTime,t(q).Date].includes(t(ye)),hidden:Q(o.date)&&[t(q).DateTime,t(q).Date].includes(t(ye))})},null,2),t(A).length>1&&!t(ze)?(f(),U(O,{key:0,"auto-close":""},{overlay:E(()=>[oe(u,{class:"w-64"},{default:E(()=>[oe(y,null,{default:E(()=>l[1]||(l[1]=[yt(" Select date field to add ")])),_:1,__:[1]}),(f(!0),b(W,null,ae(t(A),(n,r)=>(f(),U(y,{key:r,class:"text-gray-800 font-semibold text-sm",onClick:()=>{const w={row:{[n.fk_from_col.title]:o.date.format("YYYY-MM-DD HH:mm:ssZ"),...n.fk_to_col?{[n.fk_to_col.title]:o.date.endOf("day").format("YYYY-MM-DD HH:mm:ssZ")}:{}}};ie("newRecord",w)}},{default:E(()=>[F("div",Nt,[oe(S,{"column-meta":n.fk_from_col},null,8,["column-meta"]),F("span",Ht,re(n.fk_from_col.title),1)])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:E(()=>[oe(d,{class:Z([{"!block":Q(o.date),"!hidden":!Q(o.date)},"!group-hover:block rounded"]),size:"small",type:"secondary"},{default:E(()=>[(f(),U(He(("iconMap"in a?a.iconMap:t(Fe)).plus),{class:"h-4 w-4"}))]),_:2},1032,["class"])]),_:2},1024)):[t(q).DateTime,t(q).Date].includes(t(ye))&&!t(ze)?(f(),U(T,{key:1,entity:t(kt).TABLE,"entity-id":(M=t(ne))==null?void 0:M.id,permission:t(ht).TABLE_RECORD_ADD},{default:E(({isAllowed:n})=>[oe(d,{class:Z([{"!block":Q(o.date),"!hidden":!Q(o.date)},"!group-hover:block !w-6 !h-6 !rounded"]),size:"xsmall",type:"secondary",disabled:!n,onClick:()=>{const r={row:{[t(A)[0].fk_from_col.title]:o.date.format("YYYY-MM-DD HH:mm:ssZ"),...t(A)[0].fk_to_col?{[t(A)[0].fk_to_col.title]:o.date.endOf("day").format("YYYY-MM-DD HH:mm:ssZ")}:{}}};ie("newRecord",r)}},{default:E(()=>[(f(),U(He(("iconMap"in a?a.iconMap:t(Fe)).plus)))]),_:2},1032,["class","disabled","onClick"])]),_:2},1032,["entity","entity-id","permission"])):J("",!0),F("span",{class:Z([{"bg-brand-50 text-brand-500 !font-bold":o.isToday},"px-1.3 py-1 text-[13px] text-sm leading-3 font-medium rounded-lg"])},re(o.dayNumber),3)])):J("",!0),t(N)("dataEdit")?J("",!0):(f(),b("div",Ft,re(o.dayNumber),1)),t(me).count[o.date.format("YYYY-MM-DD")]&&((c=t(me).count[o.date.format("YYYY-MM-DD")])!=null&&c.overflow)&&!t(C)?(f(),U(O,{key:2},{overlay:E(()=>{var n;return[F("div",Ut,[(f(!0),b(W,null,ae((n=t(me).count[o.date.format("YYYY-MM-DD")])==null?void 0:n.overflowRecords,(r,w)=>{var I,B,x;return f(),U(g,{key:w,draggable:!1,class:"w-64","from-date":t(s).timezonize(r.row[r.rowMeta.range.fk_from_col.title]).format("D MMM • h:mm A"),invalid:!1,row:r,"to-date":(x=(B=(I=r==null?void 0:r.rowMeta)==null?void 0:I.range)==null?void 0:B.fk_to_col)!=null&&x.title&&r.row[r.rowMeta.range.fk_to_col.title]?t(s).timezonize(r.row[r.rowMeta.range.fk_to_col.title]).format("DD MMM • HH:mm A"):null,"data-testid":"nc-sidebar-record-card",onClick:R=>ie("expandRecord",r)},{default:E(()=>[("isRowEmpty"in a?a.isRowEmpty:t(We))(r,t(de))?(f(),b("span",Xt," - ")):(f(),U(j,{key:0,modelValue:r.row[t(de).title],"onUpdate:modelValue":R=>r.row[t(de).title]=R,column:t(de)},null,8,["modelValue","onUpdate:modelValue","column"]))]),_:2},1032,["from-date","row","to-date","onClick"])}),128))])]}),default:E(()=>[Mt((f(),U(d,{class:"!absolute bottom-1 right-1 text-center min-w-4.5 mx-auto z-3 text-gray-500",size:"xxsmall",type:"secondary",onClick:n=>rt(o.date)},{default:E(()=>{var n;return[F("span",Wt," + "+re((n=t(me).count[o.date.format("YYYY-MM-DD")])==null?void 0:n.overflowCount),1)]}),_:2},1032,["onClick"])),[[v,"['c:calendar:month-view-more']"]])]),_:2},1024)):J("",!0)],42,$t)):J("",!0)],64)}),256))],2))),128))],34),F("div",Zt,[(f(!0),b(W,null,ae(t(me).records,e=>{var o,m;return f(),b(W,null,[((o=e.rowMeta.style)==null?void 0:o.display)!=="none"?(f(),b("div",{key:e.rowMeta.id,"data-testid":`nc-calendar-month-record-${e.row[t(de).title]}`,"data-unique-id":`${e.rowMeta.id}`,style:zt({...e.rowMeta.style,zIndex:e.rowMeta.id===t(C)?100:0,lineHeight:"18px",opacity:(t(C)===null||e.rowMeta.id===t(C))&&(t(k)===null||e.rowMeta.id===((m=t(k))==null?void 0:m.rowMeta.id))?1:.3}),class:Z([{"cursor-pointer":!t(ce)},"absolute group draggable-record transition pointer-events-auto"]),onMouseleave:l[0]||(l[0]=_=>be.value=null),onMouseover:_=>be.value=e.rowMeta.id,onMousedown:Dt(_=>nt(_,e),["stop"])},[oe(i,{row:e},{default:E(()=>{var _,M,c;return[oe(h,{hover:t(be)===e.rowMeta.id,position:e.rowMeta.position,record:e,dragging:t(C)===e.rowMeta.id||((M=(_=t(k))==null?void 0:_.rowMeta)==null?void 0:M.id)===e.rowMeta.id,resize:!!((c=e.rowMeta.range)!=null&&c.fk_to_col)&&t(N)("dataEdit"),onResizeStart:ot},xt({default:E(()=>[(f(!0),b(W,null,ae(t(et),n=>(f(),b(W,{key:n.id},[("isRowEmpty"in a?a.isRowEmpty:t(We))(e,n)?J("",!0):(f(),U(j,{key:0,modelValue:e.row[n.title],"onUpdate:modelValue":r=>e.row[n.title]=r,class:"text-xs",bold:t(Se)[n.id].bold,column:n,italic:t(Se)[n.id].italic,underline:t(Se)[n.id].underline},null,8,["modelValue","onUpdate:modelValue","bold","column","italic","underline"]))],64))),128))]),_:2},[[t(q).DateTime,t(q).LastModifiedTime,t(q).CreatedTime].includes(t(ye))?{name:"time",fn:E(()=>{var n;return[F("span",Gt,re(t(s).timezonize(e.row[(n=e.rowMeta.range)==null?void 0:n.fk_from_col.title]).format("h:mma").slice(0,-1)),1)]}),key:"0"}:void 0]),1032,["hover","position","record","dragging","resize"])]}),_:2},1032,["row"])],46,qt)):J("",!0)],64)}),256))])])):J("",!0)}}}),da=Object.assign(Rt(Jt,[["__scopeId","data-v-810eed10"]]),{__name:"SmartsheetCalendarMonthView"});export{da as default};
