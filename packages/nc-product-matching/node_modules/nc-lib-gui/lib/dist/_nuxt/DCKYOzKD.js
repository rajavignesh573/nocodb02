import{e as gt,a8 as ct,am as ut,G as yt,r as ot,b5 as ft,av as W,T as wt,S as ht,V as vt,aG as xt,n as H,h3 as _t,c as m,o as r,a as i,K as d,b as S,w as p,L as t,cf as A,ag as D,I as u,an as h,ap as bt,t as n,d as I,aj as g,M as kt,aq as Q,aH as $t,Q as at,_ as St}from"./DRA9KN5F.js";import{_ as At}from"./C2UaKEE0.js";import{_ as Vt}from"./C_VN1MCC.js";import{c as Ot}from"./CG-5KGUk.js";import{b as Ft,g as M}from"./Bw607vNV.js";import{r as N}from"./DGFEr0h-.js";import{u as jt}from"./CQa0sIfA.js";import{S as Bt}from"./CNwEZGnv.js";import"./BLPDl4Qg.js";import"./CkvAmLZt.js";import"./D7OHpRdS.js";import"./DvtLu3FC.js";import"./D_txg4HT.js";import"./By5RWL3d.js";import"./gAYHr7Gr.js";import"./C3FZdmXk.js";import"./JqUqXTOd.js";import"./I4o4wRE2.js";import"./BMPzbwPk.js";import"./CwPFbl3n.js";import"./YbUkeyWR.js";import"./D7poRkS0.js";import"./DkDj6Z7Z.js";import"./C5HnjaiI.js";import"./CBhmoxRW.js";import"./DjPyxH1k.js";import"./Bc3_tI4-.js";import"./CsX17Y_h.js";import"./BCBMEREK.js";import"./CJAyvGKH.js";import"./QeWwuUYP.js";import"./Dv0nYk-Y.js";import"./D43249YX.js";import"./U3gU45AW.js";import"./BYKJ-MHf.js";import"./B94p8ToD.js";import"./Cd4chHHL.js";import"./boyBAVNN.js";import"./BBg0y0zb.js";import"./-iDxnmJF.js";import"./yMSt-9W5.js";import"./C2xdh4Xe.js";import"./CI3EriLB.js";import"./owbQkEXm.js";import"./DlXIlcns.js";import"./DP83Cqnl.js";import"./CVZBrAgI.js";import"./LhVKWcKT.js";import"./B89wxTuy.js";import"./DCa6wpIA.js";import"./B8gs0dG7.js";import"./mXY_vhPu.js";import"./B1qoNiTF.js";import"./CbX26EBz.js";import"./CYKJe2Bk.js";import"./DkpDpjnr.js";import"./CHRPOXXy.js";import"./gByPF8bR.js";import"./DfIS_byq.js";import"./lL-0_K96.js";import"./CIOK9Y4w.js";import"./DDmv9w84.js";import"./DWLi1ZcL.js";import"./BALLsGq5.js";import"./DCm6TF8M.js";import"./Bj4kMpzI.js";import"./CbSESqy_.js";import"./Bxzk9hCO.js";import"./Bm6QmuXP.js";import"./CkpISeXq.js";import"./zMMvJhqz.js";import"./ytmFgNfN.js";import"./DxC2Oool.js";import"./BVqTF1QK.js";import"./CC4cUItJ.js";import"./EcM5l_HA.js";import"./C_gbauhL.js";import"./BmscXXs6.js";import"./C1XMFoVa.js";import"./C-ZUx0lq.js";import"./YYodiGXA.js";import"./C316Za7m.js";import"./CKrOnbU4.js";import"./Ce4xoeky.js";const Ct={class:"sticky flex items-center bg-gray-50 left-0"},Kt={class:"flex relative justify-between gap-2 w-full"},zt={key:0,class:"nc-pagination-skeleton flex justify-center item-center min-h-10 min-w-16 w-16"},Lt={"data-testid":"grid-pagination",class:"text-gray-500 text-ellipsis overflow-hidden pl-1 truncate nc-grid-row-count caption text-xs text-nowrap"},Rt={"data-testid":"grid-pagination",class:"text-gray-500 text-ellipsis overflow-hidden pl-1 truncate nc-grid-row-count caption text-xs text-nowrap"},Dt={style:{direction:"rtl"},class:"flex gap-2 text-nowrap truncate overflow-hidden items-center"},It={class:"text-gray-600 text-[12px] font-semibold"},Mt={class:"text-gray-500 text-[12px] leading-4"},Nt={class:"flex gap-2 text-nowrap overflow-hidden items-center"},Tt={class:"text-[12px] leading-4"},Pt={class:"text-[12px] font-semibold"},qt={class:"flex !w-full text-[13px] text-gray-800 items-center justify-between"},Gt={class:"flex gap-2 truncate text-nowrap overflow-hidden items-center"},Et={class:"text-gray-500 text-[12px] leading-4"},Ut={class:"text-gray-600 font-semibold text-[12px]"},Wt={class:"flex gap-2 text-nowrap overflow-hidden items-center"},Ht={class:"text-[12px] leading-4"},Qt={class:"font-semibold text-[12px]"},Jt={class:"flex !w-full text-[13px] text-gray-800 items-center justify-between"},Xt={key:0,class:"absolute h-9 bg-white border-l-1 border-gray-200 px-1 flex items-center right-0"},Yt=gt({__name:"PaginationV2",props:{scrollLeft:{},paginationData:{},changePage:{type:Function},showSizeChanger:{type:Boolean},customLabel:{},totalRows:{},depth:{},disablePagination:{type:Boolean}},emits:["update:paginationData"],setup(rt,{emit:it}){const b=rt,st=it,{isViewDataLoading:nt,isPaginationLoading:T}=ct(ut()),v=yt(ft,ot(!1)),{changePage:w,customLabel:V}=b,lt=W(b,"showSizeChanger"),c=wt(b,"paginationData",st),P=W(b,"disablePagination"),{metas:O}=ht(),pt=vt(),{isMysql:F,isPg:j}=pt,{meta:B}=jt(),{updateAggregate:J,getAggregations:X,visibleFieldsComputed:mt,displayFieldComputed:a}=Ft(),q=W(b,"scrollLeft"),G=ot();xt(q,e=>{G.value&&(G.value.scrollLeft=e)},{immediate:!0});const x=H(()=>{var e;return((e=c.value)==null?void 0:e.totalRows)??1/0}),k=H({get:()=>{var e;return((e=c==null?void 0:c.value)==null?void 0:e.page)??1},set:async e=>{if(!P.value){T.value=!0;try{await(w==null?void 0:w(e)),T.value=!1}catch(l){if(_t.isCancel(l))return;T.value=!1}}}}),E=H({get:()=>{var e;return((e=c.value)==null?void 0:e.pageSize)??25},set:e=>{var l,K;if(c.value){if((l=c.value)!=null&&l.pageSize&&((K=c.value)==null?void 0:K.pageSize)===e)return;c.value.pageSize=e,c.value.totalRows&&k.value*e<c.value.totalRows?w==null||w(k.value):w==null||w(1)}}}),C=(e,l=!1)=>{if(l||(q.value??0)<30)switch(e){case 3:return 26;case 2:return 17;case 1:return 8;default:return 0}return 0};return(e,l)=>{var et;const K=Bt,z=bt,L=kt,Y=At,Z=Vt,tt=$t,dt=Ot;return r(),m("div",{ref_key:"containerElement",ref:G,class:"bg-gray-50 w-full pr-1 border-t-1 border-gray-200 overflow-x-hidden no-scrollbar flex h-9"},[i("div",Ct,[S(tt,{disabled:[t(g).SpecificDBType,t(g).ForeignKey,t(g).Button].includes((et=t(a).column)==null?void 0:et.uidt)||t(v),"overlay-class-name":"max-h-96 relative scroll-container nc-scrollbar-md overflow-auto"},{overlay:p(()=>{var o;return[t(a).field&&((o=t(a).column)!=null&&o.id)?(r(),u(Z,{key:0,variant:"small"},{default:p(()=>[(r(!0),m(h,null,Q(t(X)(t(a).column),(y,s)=>(r(),u(Y,{key:s,onClick:f=>t(J)(t(a).column.id,y)},{default:p(()=>{var f;return[i("div",qt,[I(n(e.$t(`aggregation_type.${y}`))+" ",1),((f=t(a).field)==null?void 0:f.aggregation)===y?(r(),u(L,{key:0,class:"text-brand-500",icon:"check"})):d("",!0)])]}),_:2},1032,["onClick"]))),128))]),_:1})):d("",!0)]}),default:p(()=>{var o,y,s,f,$,_,R,U;return[t(a).field&&((o=t(a).column)!=null&&o.id)?(r(),m("div",{key:0,class:D(["flex items-center overflow-x-hidden hover:bg-gray-100 text-gray-500 justify-end transition-all transition-linear px-3 py-2",{"cursor-pointer":!t(v)}]),style:A({"min-width":(y=t(a))==null?void 0:y.width,"max-width":(s=t(a))==null?void 0:s.width,width:(f=t(a))==null?void 0:f.width,"margin-left":`${C(e.depth??0)}px`})},[i("div",Kt,[t(P)?+e.totalRows>=0?(r(),u(z,{key:1,class:"flex sticky items-center h-full"},{title:p(()=>[I(n(e.totalRows)+" "+n(e.totalRows!==1?e.$t("objects.records"):e.$t("objects.record")),1)]),default:p(()=>[i("span",Rt,n(Intl.NumberFormat("en",{notation:"compact"}).format(e.totalRows))+" "+n(e.totalRows!==1?e.$t("objects.records"):e.$t("objects.record")),1)]),_:1})):d("",!0):(r(),m(h,{key:0},[t(nt)?(r(),m("div",zt,[S(K,{active:!0,title:!0,paragraph:!1,class:"w-16 max-w-16"})])):(r(),u(z,{key:1,class:"flex sticky items-center h-full"},{title:p(()=>[I(n(t(x))+" "+n(t(V)?t(V):t(x)!==1?e.$t("objects.records"):e.$t("objects.record")),1)]),default:p(()=>[i("span",Lt,n(Intl.NumberFormat("en",{notation:"compact"}).format(t(x)))+" "+n(t(V)?t(V):t(x)!==1?e.$t("objects.records"):e.$t("objects.record")),1)]),_:1}))],64)),[t(g).SpecificDBType,t(g).ForeignKey,t(g).Button].includes(($=t(a).column)==null?void 0:$.uidt)?d("",!0):(r(),m(h,{key:2},[!((_=t(a).field)!=null&&_.aggregation)||((R=t(a).field)==null?void 0:R.aggregation)==="none"?(r(),m("div",{key:0,class:D([{"group-hover:opacity-100":!t(v)},"text-gray-500 opacity-0 transition"])},[S(L,{class:"text-gray-500",icon:"arrowDown"}),l[2]||(l[2]=i("span",{class:"text-[10px] font-semibold"}," Summary ",-1))],2)):t(a).value!==void 0?(r(),u(z,{key:1,style:A({maxWidth:`${(U=t(a))==null?void 0:U.width}`})},{title:p(()=>[i("div",Nt,[i("span",Tt,n(e.$t(`aggregation.${t(a).field.aggregation}`)),1),i("span",Pt,n(("getFormattedAggrationValue"in e?e.getFormattedAggrationValue:t(M))(t(a).field.aggregation,t(a).value,t(a).column,[],{meta:t(B),metas:t(O),isMysql:t(F),isPg:t(j),col:t(a).column})),1)])]),default:p(()=>[i("div",Dt,[i("span",It,n(("getFormattedAggrationValue"in e?e.getFormattedAggrationValue:t(M))(t(a).field.aggregation,t(a).value,t(a).column,[],{meta:t(B),metas:t(O),isMysql:t(F),isPg:t(j),col:t(a).column})),1),i("span",Mt,n(e.$t(`aggregation.${t(a).field.aggregation}`)),1)])]),_:1},8,["style"])):d("",!0)],64))])],6)):d("",!0)]}),_:1},8,["disabled"])]),(r(!0),m(h,null,Q(t(mt),({field:o,width:y,column:s,value:f},$)=>(r(),m(h,{key:$},[$===0&&t(q)>30?(r(),m("div",{key:0,style:A(`width: ${C(e.depth??0,!0)}px;min-width: ${C(e.depth??0,!0)}px;max-width: ${C(e.depth??0,!0)}px`)},null,4)):d("",!0),o&&(s!=null&&s.id)?(r(),u(tt,{key:1,disabled:[t(g).SpecificDBType,t(g).ForeignKey,t(g).Button].includes(s==null?void 0:s.uidt)||t(v),"overlay-class-name":"max-h-96 relative scroll-container nc-scrollbar-md overflow-auto"},{overlay:p(()=>[S(Z,{variant:"small"},{default:p(()=>[(r(!0),m(h,null,Q(t(X)(s),(_,R)=>(r(),u(Y,{key:R,onClick:U=>t(J)(s.id,_)},{default:p(()=>[i("div",Jt,[I(n(e.$t(`aggregation_type.${_}`))+" ",1),(o==null?void 0:o.aggregation)===_?(r(),u(L,{key:0,class:"text-brand-500",icon:"check"})):d("",!0)])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:p(()=>[i("div",{class:D(["flex items-center overflow-hidden justify-end group hover:bg-gray-100 text-gray-500 transition-all transition-linear px-3 py-2",{"cursor-pointer":!t(v)}]),style:A({"min-width":y,"max-width":y,width:y})},[[t(g).SpecificDBType,t(g).ForeignKey,t(g).Button].includes(s==null?void 0:s.uidt)?d("",!0):(r(),m(h,{key:0},[(o==null?void 0:o.aggregation)==="none"||(o==null?void 0:o.aggregation)===null?(r(),m("div",{key:0,class:D([{"group-hover:opacity-100":!t(v)},"text-gray-500 opacity-0 transition"])},[S(L,{class:"text-gray-500",icon:"arrowDown"}),l[3]||(l[3]=i("span",{class:"text-[10px] font-semibold"}," Summary ",-1))],2)):f!==void 0?(r(),u(z,{key:1,style:A({maxWidth:`${o==null?void 0:o.width}px`})},{title:p(()=>[i("div",Wt,[i("span",Ht,n(e.$t(`aggregation.${o.aggregation}`).replace("Percent ","")),1),i("span",Qt,n(("getFormattedAggrationValue"in e?e.getFormattedAggrationValue:t(M))(o.aggregation,f,s,[],{meta:t(B),metas:t(O),isMysql:t(F),isPg:t(j),col:s})),1)])]),default:p(()=>[i("div",Gt,[i("span",Et,n(e.$t(`aggregation.${o.aggregation}`).replace("Percent ","")),1),i("span",Ut,n(("getFormattedAggrationValue"in e?e.getFormattedAggrationValue:t(M))(o.aggregation,f,s,[],{meta:t(B),metas:t(O),isMysql:t(F),isPg:t(j),col:s})),1)])]),_:2},1032,["style"])):d("",!0)],64))],6)]),_:2},1032,["disabled"])):d("",!0)],64))),128)),l[4]||(l[4]=i("div",{class:"!pl-8 pr-60 !w-8 h-1"},"‎",-1)),t(P)?d("",!0):(r(),m("div",Xt,[t(x)!==1/0?(r(),u(dt,{key:0,current:t(k),"onUpdate:current":l[0]||(l[0]=o=>at(k)?k.value=o:null),"page-size":t(E),"onUpdate:pageSize":l[1]||(l[1]=o=>at(E)?E.value=o:null),"show-size-changer":t(lt),class:"xs:mr-2",total:+t(x),"entity-name":"grid","prev-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:t(N))()}+←`,"next-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:t(N))()}+→`,"first-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:t(N))()}+↓`,"last-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:t(N))()}+↑`},null,8,["current","page-size","show-size-changer","total","prev-page-tooltip","next-page-tooltip","first-page-tooltip","last-page-tooltip"])):d("",!0)]))],512)}}}),jo=Object.assign(St(Yt,[["__scopeId","data-v-d1116b3f"]]),{__name:"SmartsheetGridPaginationV2"});export{jo as default};
