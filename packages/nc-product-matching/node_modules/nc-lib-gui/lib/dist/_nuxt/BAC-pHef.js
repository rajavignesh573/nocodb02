const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BALLsGq5.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./DCm6TF8M.js","./Bj4kMpzI.js","./CbSESqy_.js","./Bxzk9hCO.js","./CbX26EBz.js","./TimeSelector.DAR2lbHN.css","./Bm6QmuXP.js","./CkpISeXq.js","./index.N-A1gxk9.css","./zMMvJhqz.js","./FilterInput.7KjqjE1F.css","./CI3EriLB.js","./ytmFgNfN.js","./Pagination.Cmvjwryu.css","./gAYHr7Gr.js","./DkDj6Z7Z.js","./CQa0sIfA.js","./DxC2Oool.js","./By5RWL3d.js","./Cd4chHHL.js","./boyBAVNN.js","./B94p8ToD.js","./DfIS_byq.js","./BVqTF1QK.js","./DP83Cqnl.js","./CNwEZGnv.js","./DlXIlcns.js","./Ce4xoeky.js","./VirtualCell.6f0pX0MN.css"])))=>i.map(i=>d[i]);
import{e as se,G as o,fO as le,dM as ie,gf as re,r as m,kL as ue,kM as pe,kn as me,g6 as ce,ef as ve,kk as de,j1 as fe,Y as U,iZ as _e,j2 as Ie,gz as ye,iw as we,gA as Ce,gx as xe,mj as je,as as be,ki as ge,n as w,aG as z,g as ke,iU as Oe,kN as D,bz as Ee,I as O,o as C,w as K,a as N,ag as $,L as t,c as Te,K as E,a3 as Ae,O as B,b as Re,M as he,aX as F,bw as Le,hL as Ve,a_ as S,_ as Me}from"./DRA9KN5F.js";import{_ as Pe}from"./DAm3lfXS.js";import{a as Ue}from"./B94p8ToD.js";import{u as ze}from"./BALLsGq5.js";import{u as De}from"./CbX26EBz.js";import"./YYodiGXA.js";import"./DkDj6Z7Z.js";import"./gAYHr7Gr.js";import"./Cd4chHHL.js";import"./boyBAVNN.js";import"./DCm6TF8M.js";import"./Bj4kMpzI.js";import"./CbSESqy_.js";import"./Bxzk9hCO.js";import"./Bm6QmuXP.js";import"./CkpISeXq.js";import"./zMMvJhqz.js";import"./CI3EriLB.js";import"./ytmFgNfN.js";import"./CQa0sIfA.js";import"./DxC2Oool.js";import"./By5RWL3d.js";import"./DfIS_byq.js";import"./BVqTF1QK.js";import"./DP83Cqnl.js";import"./CNwEZGnv.js";import"./DlXIlcns.js";import"./Ce4xoeky.js";const Ke=F(()=>S(()=>import("./BALLsGq5.js").then(s=>s.U),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),import.meta.url).then(s=>s.default||s)),Ne=F(()=>S(()=>import("./BALLsGq5.js").then(s=>s.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),import.meta.url).then(s=>s.default||s)),$e={class:"chips flex items-center flex-1 max-w-[calc(100%_-_16px)] min-h-[28px]"},Be=se({__name:"OneToOne",async setup(s){let T,A;const r=o(le),G=o(re,ie()),l=o(ue,m(null)),X=o(pe),_=o(me),Y=o(ce,m(!1)),R=o(ve,m(!1)),Z=o(de,m(!1)),h=o(fe,!1),x=o(Ie,U(_e)),L=o(ye,m(!1)),q=o(we,U({})),c=o(Ce,null),v=o(xe,null),d=o(je,null),{isUIAllowed:J}=be(),a=m(!1),f=m(!1),{state:j,isNew:b,removeLTARRef:Q}=Ue(),{relatedTableMeta:W,loadRelatedTableMeta:H,relatedTableDisplayValueProp:g,relatedTableDisplayValuePropId:V,unlink:ee}=ze(r,X,b,G.trigger);[T,A]=ge(()=>H()),await T,A();const I=w(()=>!Y.value&&J("dataEdit")&&!Z.value||R.value),te=w(()=>l!=null&&l.value?"maximize":"plus"),i=w(()=>{var e;if(l!=null&&l.value)return l==null?void 0:l.value;if(b.value){const n=r==null?void 0:r.value.title,u=(e=j==null?void 0:j.value)==null?void 0:e[n];return Array.isArray(u)?u[0]:u}return null}),M=async e=>{b.value?await Q(e,r==null?void 0:r.value):await ee(e)};De(_,e=>{switch(e.key){case"Enter":a.value=!0,e.stopPropagation();break}});const P=w(()=>{var e,n;return(n=(e=W.value)==null?void 0:e.columns)==null?void 0:n.find(u=>u.title===g.value)});z(a,()=>{f.value=a.value}),z(f,e=>{e||(a.value=!1)},{flush:"post"});function y(e){e.type!=="click"||!I.value||(L.value||R.value||_.value)&&(a.value=!0)}const k=e=>{if(!(!(e instanceof KeyboardEvent)||!e.target||Le(e)||!I.value)&&Ve(e))return a.value?a.value=!1:a.value=!0,!0};return ke(()=>{d==null||d.on(y),v==null||v.on(y),c==null||c.on(k),!(!I.value||!h||!x||L.value)&&Oe(()=>{k(q.event)||(D(".unlink-icon",x)?M(i.value):(D(".nc-canvas-table-editable-cell-wrapper .nc-plus.nc-action-icon",x),a.value=!0))})}),Ee(()=>{d==null||d.off(y),v==null||v.off(y),c==null||c.off(k)}),(e,n)=>{const u=Pe,ne=he,ae=Ke,oe=Ne;return C(),O(oe,{"is-open":f.value,"onUpdate:isOpen":n[5]||(n[5]=p=>f.value=p)},{overlay:K(()=>[a.value?(C(),O(ae,{key:0,modelValue:a.value,"onUpdate:modelValue":n[3]||(n[3]=p=>a.value=p),column:t(P),"hide-back-btn":"",onEscape:n[4]||(n[4]=p=>f.value=!1)},null,8,["modelValue","column"])):E("",!0)]),default:K(()=>[N("div",{class:$(["nc-cell-field flex w-full chips-wrapper items-center min-h-6.5 relative",{active:t(_)}])},[N("div",$e,[t(i)&&(t(g)||t(V))?(C(),O(u,{key:0,item:t(i),value:!Array.isArray(t(i))&&typeof t(i)=="object"?t(i)[t(g)]??t(i)[t(V)]:t(i),column:t(P),"show-unlink-button":!0,onUnlink:n[0]||(n[0]=p=>M(t(i)))},null,8,["item","value","column"])):E("",!0)]),t(I)?(C(),Te("div",{key:0,class:"flex justify-end group gap-1 min-h-4 items-center",tabindex:"0",onKeydown:n[2]||(n[2]=Ae(B(p=>a.value=!0,["stop"]),["enter"]))},[Re(ne,{icon:t(te),class:$(["!text-md select-none text-gray-700 nc-action-icon nc-plus invisible group-hover:visible group-focus:visible",{"!visible !text-gray-600":t(h)&&t(_)}]),onClick:n[1]||(n[1]=B(p=>a.value=!0,["stop"]))},null,8,["icon","class"])],32)):E("",!0)],2)]),_:1},8,["is-open"])}}}),It=Object.assign(Me(Be,[["__scopeId","data-v-c38089f3"]]),{__name:"VirtualCellOneToOne"});export{It as default};
