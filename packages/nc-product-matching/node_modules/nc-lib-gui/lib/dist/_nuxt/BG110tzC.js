import{e as B,bk as E,ki as M,bb as d,r as y,bX as G,ef as H,mt as q,mu as z,Y as K,aG as T,c as f,o as l,b as t,w as n,I as k,K as m,L as e,bG as X,bU as A,ag as J,Q,a as w,d as g,M as Y,t as c,X as O,a0 as W,cU as Z,by as ee,N as se,bH as ae,dM as te,fL as oe,bd as ne,_ as re}from"./DRA9KN5F.js";import{_ as le}from"./Cb-Omy6C.js";import{u as ie}from"./BcrYf4lp.js";import{a as de}from"./DxC2Oool.js";import{a as me}from"./CQa0sIfA.js";import"./2d03FuDZ.js";import"./DkDj6Z7Z.js";import"./By5RWL3d.js";import"./Cd4chHHL.js";import"./boyBAVNN.js";import"./gAYHr7Gr.js";import"./B94p8ToD.js";const ce=""+new URL("form.DESRCJtL.png",import.meta.url).href,ue={class:"flex flex-col gap-5"},_e={class:"flex flex-row items-center gap-x-2 text-base font-weight-700 text-gray-800"},pe={key:0,class:"mb-2 text-sm text-red-500"},fe={class:"flex flex-row justify-end gap-x-2"},we={key:2,alt:"view image",src:ce,class:"fixed inset-0 w-full h-full"},ge=B({__name:"[viewId]",async setup(be){let b,v;ie("nc-left-sidebar",{hasSidebar:!1});const I=E(),{loadSharedView:u,sharedView:C,sharedViewMeta:_,meta:x,notFound:p,password:S,passwordDlg:o,passwordError:h}=de(I.params.viewId);[b,v]=M(()=>u()),await b,v(),p.value||(d(oe,te()),d(ne,x),d(G,y(!0)),d(H,y(!0)),me(C,x,!0),q(_.value.rtl?"rtl":"ltr"),_.value.language&&z(_.value.language));const r=K({password:""});T(()=>r.password,()=>{S.value=r.password});const N=s=>{var a;return s&&((a=s==null?void 0:s.focus)==null?void 0:a.call(s))};return(s,a)=>{const V=X,$=le,P=Y,F=Z,L=W,R=O,j=se,D=A,U=ae;return l(),f("div",null,[t(U,null,{default:n(()=>[!e(o)&&!e(p)?(l(),k(V,{key:0})):m("",!0),e(p)?(l(),k($,{key:1})):m("",!0),t(D,{visible:e(o),"onUpdate:visible":a[1]||(a[1]=i=>Q(o)?o.value=i:null),class:J({active:e(o)}),closable:!1,width:"min(100%, 450px)",centered:"",footer:null,"mask-closable":!1,"wrap-class-name":"nc-modal-shared-form-password-dlg","mask-style":{backgroundColor:"rgba(255, 255, 255, 0.64)",backdropFilter:"blur(8px)"},onClose:a[2]||(a[2]=i=>o.value=!1)},{default:n(()=>[w("div",ue,[w("div",_e,[t(P,{icon:"ncKey",class:"!text-base w-5 h-5"}),g(" "+c(s.$t("msg.thisSharedViewIsProtected")),1)]),t(R,{model:e(r),onFinish:e(u)},{default:n(()=>[t(L,{name:"password",rules:[{required:!0,message:s.$t("msg.error.signUpRules.passwdRequired")}],class:"!mb-0"},{default:n(()=>[t(F,{ref:N,value:e(r).password,"onUpdate:value":a[0]||(a[0]=i=>e(r).password=i),class:"!rounded-lg !text-small","hide-details":"",placeholder:s.$t("msg.enterPassword")},null,8,["value","placeholder"]),t(ee,{name:"layout"},{default:n(()=>[e(h)?(l(),f("div",pe,c(e(h)),1)):m("",!0)]),_:1})]),_:1},8,["rules"])]),_:1},8,["model","onFinish"]),w("div",fe,[t(j,{disabled:!e(r).password,type:"primary",size:"small","html-type":"submit",class:"!px-2","data-testid":"nc-shared-view-password-submit-btn",onClick:e(u)},{loading:n(()=>[g(c(s.$t("msg.verifyingPassword")),1)]),default:n(()=>[g(c(s.$t("objects.view"))+" ",1)]),_:1},8,["disabled","onClick"])])])]),_:1},8,["visible","class"]),e(o)?(l(),f("img",we)):m("",!0)]),_:1})])}}}),Fe=re(ge,[["__scopeId","data-v-05f370a3"]]);export{Fe as default};
