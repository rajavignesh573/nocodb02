import{e as re,r as w,fm as E,T as de,ak as ue,n as $,ds as ce,aG as W,$ as K,g as pe,bv as he,c as r,o,ag as p,L as a,K as m,a as i,ad as fe,ao as y,cf as g,a1 as J,an as H,aq as O,t as _,I as Q,M as ge,d as be,af as me,b as F,b3 as ye,eP as X,fn as ve,_ as we}from"./DRA9KN5F.js";import{_ as $e}from"./ytmFgNfN.js";const ke=["data-test-id","onClick"],xe=["onClick"],_e=["data-test-id"],Re={key:0,class:"nc-table-extra-row"},Ce={class:"flex items-center justify-center absolute left-0 top-0 w-full h-full z-10 pointer-events-none"},Be={class:"flex flex-col justify-center items-center gap-2"},Se={class:"text-center"},Te={class:"flex-none text-center flex flex-col items-center gap-3"},He={key:0,class:"flex flex-row justify-center items-center bg-nc-bg-gray-extralight min-h-10"},Ne={class:"flex justify-between items-center w-full px-6"},ze={class:"text-nc-content-gray-muted text-xs"},De=re({__name:"Table",props:{columns:{default:()=>[]},data:{default:()=>[]},headerRowHeight:{default:"54px"},rowHeight:{default:"54px"},orderBy:{default:()=>({})},multiFieldOrderBy:{type:Boolean,default:!1},bordered:{type:Boolean,default:!0},isDataLoading:{type:Boolean,default:!1},stickyHeader:{type:Boolean,default:!0},forceStickyHeader:{type:Boolean,default:!1},stickyFirstColumn:{type:Boolean},disableTableScroll:{type:Boolean,default:!1},headerRowClassName:{default:""},bodyRowClassName:{default:""},headerCellClassName:{default:""},bodyCellClassName:{default:""},customHeaderRow:{type:Function,default:()=>({})},customRow:{type:Function,default:()=>({})},pagination:{type:Boolean,default:!1},paginationOffset:{default:10},tableToolbarClassName:{default:""}},emits:["update:orderBy","rowClick"],setup(Y,{emit:Z}){const h=Y,L=Z,ee={page:1,pageSize:25,totalRows:0,isLoading:!0},v=w(),k=w(),j=w(),I=w(),{height:te}=E(I),{height:ae,width:P}=E(k),{height:M}=E(j),b=de(h,"orderBy",L),{columns:N,data:d,isDataLoading:R,customHeaderRow:V,customRow:q}=ue(h),se=$(()=>`nc-table-header-row ${h.headerRowClassName}`),le=$(()=>`nc-table-row ${h.bodyRowClassName}`),G=ce(),z=w([]),n=w(ee),C=$(()=>h.pagination&&!R.value&&n.value.totalRows&&n.value.totalRows>h.paginationOffset),ne=$(()=>{if(!C.value)return d.value;const{page:e,pageSize:s}=n.value,u=(e-1)*s,f=u+s;return d.value.slice(u,f)}),D=$(()=>te.value||0),U=$(()=>C.value?Math.max(40,M.value):M.value),oe=e=>{if(!d.value.length||!e)return;const s={undefined:"asc",asc:"desc",desc:void 0};h.multiFieldOrderBy?b.value[e]=s[`${b.value[e]}`]:b.value={[e]:s[`${b.value[e]}`]}};W(()=>d.value.length,()=>{h.pagination&&(n.value.totalRows=d.value.length)},{immediate:!0});const A=()=>{!k.value||!P.value||ve(500).then(()=>[K(()=>{var s;const e=(s=k.value)==null?void 0:s.querySelectorAll("th > div");e&&e.length&&e.forEach((u,f)=>{z.value[f]=u.getBoundingClientRect().width||void 0})})])};W([k,P],()=>{K(()=>{A()})},{immediate:!0,flush:"post"}),pe(()=>{A()}),he(v,"scroll",()=>{var u,f,B,S,x,t;const e=(u=v.value)==null?void 0:u.querySelector("th:nth-of-type(1)"),s=(f=v.value)==null?void 0:f.querySelector("th:nth-of-type(2)");!e||!s||!((B=e==null?void 0:e.getBoundingClientRect())!=null&&B.right)||!((S=s==null?void 0:s.getBoundingClientRect())!=null&&S.left)||((s==null?void 0:s.getBoundingClientRect().left)<(e==null?void 0:e.getBoundingClientRect().right)?(x=v.value)==null||x.classList.add("sticky-border"):(t=v.value)==null||t.classList.remove("sticky-border"))});const ie=(e,s)=>{L("rowClick",e,s)};return W(()=>n.value.pageSize,()=>{n.value.page!==1&&n.value.page*n.value.pageSize>d.value.length&&(n.value.page=1)}),(e,s)=>{var x;const u=ge,f=ye,B=X,S=$e;return o(),r("div",{class:p(["nc-table-container relative",{bordered:e.bordered,"nc-disable-table-scroll":e.disableTableScroll,"min-h-120":a(R)}])},[e.$slots.tableToolbar?(o(),r("div",{key:0,ref_key:"tableToolbarRef",ref:I,class:p(["nc-table-toolbar pb-4",[e.tableToolbarClassName,{"sticky z-5 top-0 bg-nc-bg-default":e.forceStickyHeader}]])},[y(e.$slots,"tableToolbar",{},void 0,!0)],2)):m("",!0),i("div",{ref_key:"tableWrapper",ref:v,class:p(["nc-table-wrapper relative",{"sticky-first-column":e.stickyFirstColumn,"h-full":a(d).length&&!e.disableTableScroll,"nc-scrollbar-thin !overflow-auto max-h-full":!e.disableTableScroll}]),style:g({maxHeight:e.disableTableScroll?void 0:`calc(100% - ${a(D)+a(U)}px)`})},[i("table",{ref_key:"tableHeader",ref:k,class:p(["w-full max-w-full",{"!sticky top-0 z-5":e.stickyHeader&&!e.disableTableScroll,"!sticky z-5":e.forceStickyHeader}]),style:g({...e.forceStickyHeader?{top:`${a(D)}px`}:{}})},[i("thead",null,[i("tr",J({style:{height:e.headerRowHeight},class:[`${a(se)}`]},a(V)?a(V)(a(N)):{}),[(o(!0),r(H,null,O(a(N),(t,c)=>{var l;return o(),r("th",{key:c,class:p(["nc-table-header-cell",[`${e.headerCellClassName}`,`nc-table-header-cell-${c}`,{"!hover:bg-nc-bg-gray-light select-none cursor-pointer":t.showOrderBy,"cursor-not-allowed":t.showOrderBy&&!((l=a(d))!=null&&l.length),"!text-nc-content-gray-subtle":t.showOrderBy&&(t==null?void 0:t.dataIndex)&&a(b)[t.dataIndex],"flex-1":!t.width&&!t.basis}]]),style:g({width:t.width?`${t.width}px`:void 0,flexBasis:t.width?void 0:t.basis,maxWidth:t.width?`${t.width}px`:void 0}),"data-test-id":`nc-table-header-cell-${t.name||t.key}`,onClick:T=>t.showOrderBy&&(t!=null&&t.dataIndex)?oe(t.dataIndex):void 0},[i("div",{class:p(["gap-3",[`${t.justify||""}`]]),style:g({padding:t.padding||"0px 24px",minWidth:`calc(${t.minWidth}px - 2px)`})},[y(e.$slots,"headerCell",{column:t},()=>[i("div",null,_(t.title||t.name||""),1)],!0),t.showOrderBy&&(t!=null&&t.dataIndex)?(o(),r(H,{key:0},[a(b)[t.dataIndex]?(o(),Q(u,{key:0,icon:"chevronDown",class:p(["flex-none",{"transform rotate-180":a(b)[t.dataIndex]==="asc"}])},null,8,["class"])):(o(),Q(u,{key:1,icon:"chevronUpDown",class:"flex-none"}))],64)):m("",!0)],6)],14,ke)}),128))],16)])],6),a(d).length?(o(),r("table",{key:0,class:"w-full h-full",style:g({maxHeight:e.disableTableScroll?void 0:`calc(100% - ${a(ae)}px)`})},[i("tbody",null,[y(e.$slots,"body-prepend",{},void 0,!0),(o(!0),r(H,null,O(a(ne),(t,c)=>(o(),r("tr",J({key:c,style:{height:e.rowHeight},class:[`${a(le)}`,`nc-table-row-${c}`]},{ref_for:!0},a(q)?a(q)(t,c):{},{onClick:l=>ie(t,c)}),[(o(!0),r(H,null,O(a(N),(l,T)=>(o(),r("td",{key:T,class:p(["nc-table-cell",[`${e.bodyCellClassName}`,`nc-table-cell-${c}`,{"flex-1":!l.width&&!l.basis}]]),style:g({width:l.width?`${l.width}px`:void 0,flexBasis:l.width?void 0:l.basis,maxWidth:l.width?`${l.width}px`:void 0}),"data-test-id":`nc-table-cell-${l.name||l.key}`},[i("div",{class:p([`${l.align||"items-center"} ${l.justify||""}`]),style:g({padding:l.padding||"0px 24px",minWidth:`calc(${l.minWidth}px - 2px)`,maxWidth:a(z)[T]?`${a(z)[T]}px`:void 0})},[y(e.$slots,"bodyCell",{column:l,record:t,recordIndex:c},()=>[be(_(l!=null&&l.dataIndex&&l.key!=="action"?t[l.dataIndex]:""),1)],!0)],6)],14,_e))),128))],16,xe))),128)),a(G).extraRow?(o(),r("tr",Re,[y(e.$slots,"extraRow",{},void 0,!0)])):m("",!0)])],4)):m("",!0)],6),fe(i("div",Ce,[i("div",Be,[F(f,{size:"xlarge"}),i("span",Se,_(e.$t("general.loading")),1)])],512),[[me,a(R)]]),!a(R)&&!((x=a(d))!=null&&x.length)?(o(),r("div",{key:1,class:"flex-none nc-table-empty flex items-center justify-center py-8 px-6 h-full",style:g({maxHeight:`calc(100% - ${e.headerRowHeight} - ${a(D)+a(U)}px)`})},[i("div",Te,[y(e.$slots,"emptyText",{},()=>[F(B,{image:("Empty"in e?e.Empty:a(X)).PRESENTED_IMAGE_SIMPLE,description:e.$t("labels.noData"),class:"!my-0"},null,8,["image","description"])],!0)])],4)):m("",!0),a(G).tableFooter||a(C)?(o(),r("div",{key:2,ref_key:"tableFooterRef",ref:j},[y(e.$slots,"tableFooter",{},()=>[a(C)?(o(),r("div",He,[i("div",Ne,[s[2]||(s[2]=i("div",null,"Â ",-1)),F(S,{current:a(n).page,"onUpdate:current":s[0]||(s[0]=t=>a(n).page=t),"page-size":a(n).pageSize,"onUpdate:pageSize":s[1]||(s[1]=t=>a(n).pageSize=t),total:+(a(n).totalRows||0),"show-size-changer":"","use-stored-page-size":!1},null,8,["current","page-size","total"]),i("div",ze,_(a(n).totalRows)+" "+_(a(n).totalRows===1?"row":"rows"),1)])])):m("",!0)],!0)],512)):m("",!0)],2)}}}),Oe=Object.assign(we(De,[["__scopeId","data-v-6e4a7232"]]),{__name:"NcTable"});export{Oe as _};
