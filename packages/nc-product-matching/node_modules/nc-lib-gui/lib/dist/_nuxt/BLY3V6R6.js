import{_ as G}from"./DYT5EKex.js";import{_ as J}from"./C6valJX6.js";import{e as K,T as Q,ki as R,fu as l,n as b,c as r,o as i,b as p,a as t,w as k,L as o,t as c,an as S,aq as A,I as U,d as C,N as W,aS as X,M as Z,aA as ee,el as te,_ as oe}from"./DRA9KN5F.js";import{u as ae,b as se}from"./C9dUxAef.js";import{a as ne,A as f}from"./DVsD9aaJ.js";import"./CtCRqrd3.js";import"./boyBAVNN.js";import"./BMufqs0w.js";import"./CN7ac-4_.js";import"./G4Pt-Lbf.js";import"./C5HnjaiI.js";import"./CBhmoxRW.js";import"./DkDj6Z7Z.js";import"./BYKJ-MHf.js";import"./BSgyuQBI.js";import"./-iDxnmJF.js";import"./QeWwuUYP.js";import"./D8vl_16c.js";import"./BMPzbwPk.js";const le={class:"flex flex-col h-full h-[calc(100vh_-_40px)]","data-testid":"nc-setup-config"},ie={class:"flex gap-3 items-center"},ce={"data-rec":"true"},re={class:"h-full flex h-[calc(100%_-_48px)]"},pe={class:"nc-config-left-panel nc-scrollbar-thin relative h-full flex flex-col"},de={class:"w-full flex items-center gap-3 border-gray-200 py-6 px-6"},_e={class:"font-semibold text-base"},ue={class:"flex gap-2"},me={class:"h-[calc(100%_-_48px)] flex py-4 flex-col p-6 overflow-auto"},fe={key:0,class:"flex flex-row w-full justify-center items-center h-52"},he={key:1,class:"flex"},ge={class:"nc-config-right-panel"},ve={class:"flex-grow flex flex-col gap-3"},xe={class:"text-gray-500 text-capitalize"},ye=["href"],we={class:"text-gray-500 text-capitalize"},be={class:""},ke=K({__name:"Config",props:{id:{},modelValue:{type:Boolean}},emits:["saved","close","update:modelValue"],async setup(D,{emit:I}){let h,g;const v=D,B=Q(v,"modelValue",I),{readPluginDetails:T,activePluginFormData:u,activePlugin:n,isLoading:N,loadingAction:m,testSettings:V,saveSettings:$}=ne();[h,g]=R(()=>T(v.id)),await h,g();const L={Input:l.Input,Select:l.Select,Checkbox:l.Switch,LongText:l.Input,Password:l.Password},{formState:x,validate:y,validateInfos:M}=ae({formSchema:[...n.value.formDetails.items.flatMap((e,a)=>[{type:L[e.type]||l.Input,label:e.label,placeholder:e.placeholder,model:e.key,required:e.required,helpText:e.help_text,width:"48",border:!1,showHintAsTooltip:!0},...a%2?[]:[{type:l.Space,width:"4"}]])],initialState:u}),P=async e=>{try{switch(e){case f.Save:await y(),u.value=x.value,await $(),B.value=!1;break;case f.Test:await y(),u.value=x.value,await V();break}}catch(a){console.log(a)}finally{m.value=null}},F=b(()=>Object.values(M||{}).every(e=>e.validateStatus!=="error")),O=b(()=>{var e,a,d,_;return[{title:"Application Setup",url:`https://nocodb.com/docs/product-docs/account-settings/oss-specific-details#configure-${(a=(e=n.value)==null?void 0:e.category)==null?void 0:a.toLowerCase()}`},...((_=(d=n.value)==null?void 0:d.formDetails)==null?void 0:_.docs)||[]]});return(e,a)=>{const d=G,_=J,H=W,j=X,z=se,Y=Z,q=ee;return i(),r("div",le,[p(_,null,{title:k(()=>[t("div",ie,[p(d,{app:o(n),class:"h-8 w-8"},null,8,["app"]),t("span",ce,c(o(n).title),1)])]),_:1}),t("div",re,[t("div",pe,[t("div",de,[t("span",_e,c(e.$t("labels.configuration")),1),a[0]||(a[0]=t("div",{class:"flex-grow"},null,-1)),t("div",ue,[(i(!0),r(S,null,A(o(n).formDetails.actions,(s,E)=>{var w;return i(),U(H,{key:E,loading:o(m)===s.key,type:s.key===("Action"in e?e.Action:o(f)).Save?"primary":"default",size:"small",disabled:!!o(m)||!o(F),"data-testid":`nc-setup-config-action-${(w=s.key)==null?void 0:w.toLowerCase()}`,onClick:Ae=>P(s.key)},{default:k(()=>[C(c(s.label),1)]),_:2},1032,["loading","type","disabled","data-testid","onClick"])}),128))])]),t("div",me,[o(N)||!o(n)?(i(),r("div",fe,[p(j,{size:"large"})])):(i(),r("div",he,[p(z,{class:"w-229 px-2 mx-auto"})]))])]),t("div",ge,[t("div",ve,[t("div",xe,c(e.$t("labels.documentation")),1),(i(!0),r(S,null,A(o(O),s=>(i(),r("a",{key:s.title,href:s.url,target:"_blank",rel:"noopener noreferrer",class:"!no-underline !text-current flex gap-2 items-center"},[p(Y,{icon:"bookOpen",class:"text-gray-500"}),C(" "+c(s.title),1)],8,ye))),128)),p(q),t("div",we,c(e.$t("labels.modifiedOn")),1),t("div",be,c(o(te)(o(n).created_at).format("DD MMM YYYY HH:mm")),1)])])])])}}}),Ge=Object.assign(oe(ke,[["__scopeId","data-v-2bcd4558"]]),{__name:"AccountSetupConfig"});export{Ge as default};
