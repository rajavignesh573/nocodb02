import{e as X,av as Z,r as d,bb as c,dz as ee,kU as ae,a8 as se,V as le,n as r,jp as _,im as w,io as x,ip as h,jn as j,aj as U,kn as ie,ef as te,I as M,c as ne,L as i,ih as re,o as b,es as oe,Q as P,O as ue,ag as de,b9 as ce,a1 as me,mk as fe,iE as ye,jl as ve,l6 as be,ml as pe,ij as ge,ii as Fe,ik as Oe,jo as Re,il as Se,jm as ke,l5 as De,fO as Ie,g6 as Te,_ as _e}from"./DRA9KN5F.js";import{S as we}from"./Bj4kMpzI.js";import{M as C}from"./CbSESqy_.js";import{I as B,F as xe,D as E,C as he,P as je,a as Ue,R as Me,T as Pe,Y as Ce,b as Be,c as Ee}from"./Bxzk9hCO.js";import{U as V}from"./zMMvJhqz.js";const Ve=X({__name:"FilterInput",props:{column:{},filter:{},disabled:{type:Boolean}},emits:["updateFilterValue"],setup(L,{emit:A}){var g,F,O;const e=L,Y=A,s=Z(e,"column"),N=d(!0),$=d(e.filter.readOnly||e.disabled);c(Ie,s),c(ae,ee(N)),c(Te,$);const q={isSingleSelect:De,isMultiSelect:ke,isDate:w,isYear:j,isDateTime:x,isTime:h,isRating:Se,isDuration:Re,isPercent:Oe,isCurrency:Fe,isDecimal:ge,isReadonlyDateTime:pe,isInt:_,isFloat:be,isTextArea:ve,isLinks:a=>a.uidt===U.Links,isUser:ye,isReadonlyUser:fe},{sqlUis:f}=se(le()),z=d((g=s.value)!=null&&g.source_id&&f.value[(F=s.value)==null?void 0:F.source_id]?f.value[(O=s.value)==null?void 0:O.source_id]:Object.values(f.value)[0]),n=r(()=>s.value&&z.value.getAbstractType(s.value)),Q=a=>{const l=q[a];return!s.value||!l?!1:l(s.value,n.value)},o=r({get:()=>e.filter.value,set:a=>{Y("updateFilterValue",a)}}),W=[{value:!0,label:"true"},{value:!1,label:"false"},{value:null,label:"unset"}],G=a=>["anyof","nanyof"].includes(a)?C:we,y=a=>["daysAgo","daysFromNow","pastNumberOfDays","nextNumberOfDays"].includes(a)?E:Ee,p=r(()=>({isSingleSelect:G(e.filter.comparison_op),isMultiSelect:C,isDate:y(e.filter.comparison_sub_op),isYear:Ce,isDateTime:y(e.filter.comparison_sub_op),isReadonlyDateTime:y(e.filter.comparison_sub_op),isTime:Pe,isRating:Me,isDuration:Ue,isPercent:je,isCurrency:he,isDecimal:E,isInt:B,isFloat:xe,isLinks:B,isUser:V,isReadonlyUser:V})),u=r(()=>Object.keys(p.value).find(a=>Q(a))),H=r(()=>{var a,l,m,t,R,S,k,D,I,T;switch(u.value){case"isSingleSelect":case"isMultiSelect":return{disableOptionCreation:!0,showReadonlyField:((a=e.filter)==null?void 0:a.readOnly)||(e==null?void 0:e.disabled)};case"isPercent":case"isDecimal":case"isFloat":case"isLinks":case"isInt":return{class:"h-32px",showReadonlyField:((l=e.filter)==null?void 0:l.readOnly)||(e==null?void 0:e.disabled)};case"isDuration":return{showValidationError:!1,showReadonlyField:((m=e.filter)==null?void 0:m.readOnly)||(e==null?void 0:e.disabled)};case"isUser":return{forceMulti:!0,showReadonlyField:((t=e.filter)==null?void 0:t.readOnly)||(e==null?void 0:e.disabled)};case"isReadonlyUser":return["anyof","nanyof"].includes(e.filter.comparison_op)?{forceMulti:!0,showReadonlyField:((R=e.filter)==null?void 0:R.readOnly)||(e==null?void 0:e.disabled)}:{};case"isCurrency":return{hidePrefix:!0,showReadonlyField:((S=e.filter)==null?void 0:S.readOnly)||(e==null?void 0:e.disabled)};case"isRating":return{style:{minWidth:`${(((D=(k=s.value)==null?void 0:k.meta)==null?void 0:D.max)||5)*19}px`},showReadonlyField:((I=e.filter)==null?void 0:I.readOnly)||(e==null?void 0:e.disabled)};default:return{showReadonlyField:((T=e.filter)==null?void 0:T.readOnly)||(e==null?void 0:e.disabled)}}}),J=r(()=>{var a;return s.value&&(((a=s.value)==null?void 0:a.uidt)===U.Links||_(s.value,n)||w(s.value,n)||x(s.value,n)||h(s.value,n)||j(s.value,n))}),v=d(!1);c(ie,d(!0)),c(te,d(!0));const K=r(()=>u.value==="isSingleSelect"||u.value==="isMultiSelect"||u.value==="isUser");return(a,l)=>{const m=oe;return i(s)&&("isBoolean"in a?a.isBoolean:i(re))(i(s),i(n))?(b(),M(m,{key:0,value:i(o),"onUpdate:value":l[0]||(l[0]=t=>P(o)?o.value=t:null),disabled:a.filter.readOnly||e.disabled,options:W},null,8,["value","disabled"])):(b(),ne("div",{key:1,class:de(["bg-white border-1 flex flex-grow min-h-4 h-full px-1 items-center nc-filter-input-wrapper !rounded-lg",{"px-2":i(J),"border-brand-500":i(v),"!max-w-100":i(K)}]),onMouseup:l[4]||(l[4]=ue(()=>{},["stop"]))},[(b(),M(ce(i(u)?i(p)[i(u)]:Be),me({modelValue:i(o),"onUpdate:modelValue":l[1]||(l[1]=t=>P(o)?o.value=t:null),disabled:a.filter.readOnly||e.disabled,placeholder:"Enter a value",column:i(s),class:["flex !rounded-lg",{"text-nc-content-gray-muted pointer-events-none":e.disabled}]},i(H),{location:"filter",onFocus:l[2]||(l[2]=t=>v.value=!0),onBlur:l[3]||(l[3]=t=>v.value=!1)}),null,16,["modelValue","disabled","column","class"]))],34))}}}),qe=Object.assign(_e(Ve,[["__scopeId","data-v-7440c073"]]),{__name:"SmartsheetToolbarFilterInput"});export{qe as _};
