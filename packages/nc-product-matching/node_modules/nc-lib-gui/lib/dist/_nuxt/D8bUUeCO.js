const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ywWj9oN7.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./DjPyxH1k.js","./B89wxTuy.js","./Markdown.CUPXKfeQ.css","./Bc3_tI4-.js","./RichText.CtXwIC-P.css","./BALLsGq5.js","./DCm6TF8M.js","./Bj4kMpzI.js","./CbSESqy_.js","./Bxzk9hCO.js","./CbX26EBz.js","./TimeSelector.DAR2lbHN.css","./Bm6QmuXP.js","./CkpISeXq.js","./index.N-A1gxk9.css","./zMMvJhqz.js","./FilterInput.7KjqjE1F.css","./CI3EriLB.js","./ytmFgNfN.js","./Pagination.Cmvjwryu.css","./gAYHr7Gr.js","./DkDj6Z7Z.js","./CQa0sIfA.js","./DxC2Oool.js","./By5RWL3d.js","./Cd4chHHL.js","./boyBAVNN.js","./B94p8ToD.js","./DfIS_byq.js","./BVqTF1QK.js","./DP83Cqnl.js","./CNwEZGnv.js","./DlXIlcns.js","./Ce4xoeky.js","./VirtualCell.6f0pX0MN.css","./B1qoNiTF.js","./CYKJe2Bk.js","./DkpDpjnr.js","./Dv0nYk-Y.js","./Cell.BBaBjsLL.css"])))=>i.map(i=>d[i]);
import{e as Ze,mv as Je,a8 as We,r as b,bb as ze,kV as et,n as z,mw as tt,ab as M,g as st,mx as at,c as m,o as l,a as o,b as d,K as f,L as e,I as k,an as Se,aF as j,t as n,aw as Ce,w as r,d as p,M as ot,aX as X,N as nt,X as lt,ap as it,a0 as rt,a1 as ut,O as dt,fV as mt,ag as T,aj as ct,by as ft,cf as _t,aL as Te,Q as pt,P as vt,my as yt,a_ as Q,mz as gt,_ as bt}from"./DRA9KN5F.js";import{u as xt,_ as ht,a as kt}from"./D6_NfMsA.js";import wt from"./owbQkEXm.js";import{u as $t}from"./DxC2Oool.js";import{u as zt}from"./B8gs0dG7.js";import{_ as St}from"./BCBMEREK.js";import"./2d03FuDZ.js";import"./DJYXGfCo.js";import"./DkDj6Z7Z.js";import"./By5RWL3d.js";import"./Cd4chHHL.js";import"./boyBAVNN.js";import"./gAYHr7Gr.js";import"./B94p8ToD.js";import"./mXY_vhPu.js";const Ct=X(()=>Q(()=>import("./ywWj9oN7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url).then(c=>c.default||c)),Tt=X(()=>Q(()=>import("./BALLsGq5.js").then(c=>c.V),__vite__mapDeps([8,1,2,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37]),import.meta.url).then(c=>c.default||c)),Ft=X(()=>Q(()=>import("./B1qoNiTF.js").then(c=>c.C),__vite__mapDeps([38,1,2,13,14,39,40,41,30,24,23,28,29,42]),import.meta.url).then(c=>c.default||c)),Dt={class:"h-full"},At={class:"survey md:p-0 w-full h-full flex flex-col max-w-[max(33%,688px)] mx-auto mb-4rem lg:mb-10rem"},Vt={key:0,class:"my-auto z-2"},Lt={class:"rounded-3xl border-1 border-gray-200 p-6 lg:p-12 bg-white"},Pt={class:"text-2xl font-bold text-gray-900 mb-4","data-testid":"nc-survey-form__heading"},Rt={key:0,class:"flex flex-col justify-center items-center text-center"},Mt={key:1},jt={key:0,class:"mt-16 w-full flex justify-between items-center flex-wrap gap-3"},It={key:0,class:"text-sm text-gray-500 dark:text-slate-300 m-0"},Nt={class:"flex-1 self-end flex justify-end"},Bt={key:0},qt={class:"flex justify-end mt-12"},Et={class:"flex items-center gap-3"},Ot={class:"hidden md:flex text-sm items-center gap-1 text-gray-800"},Ut={key:1,class:"px-6 lg:px-12"},Gt={class:"text-2xl font-bold text-gray-900 line-clamp-2 text-center mb-2rem md:mb-4rem"},Ht={class:"select-none text-gray-500 mb-4 md:mb-2","data-testid":"nc-survey-form__footer"},Kt={key:0,class:"flex flex-col gap-2"},Xt={class:"nc-form-column-label text-sm font-semibold text-gray-800","data-testid":"nc-form-column-label"},Qt={key:0,class:"text-red-500 text-base leading-[18px]"},Yt={key:0,class:"nc-form-column-description text-gray-500 text-sm","data-testid":"nc-survey-form__field-description"},Zt={class:"flex flex-col gap-2 text-slate-500 dark:text-slate-300 text-xs mt-2"},Jt={class:"hidden text-sm text-gray-500 md:flex flex-wrap items-center"},Wt={class:"ml-1 mt-4 flex w-full text-lg"},es={class:"flex-1 flex justify-end"},ts={key:0},ss={key:1,class:"flex items-center gap-3"},as={class:"lg:absolute lg:bottom-0 lg:right-0 lg:px-4 lg:pb-4 lg:px-10 lg:pb-10"},os={class:"flex justify-end items-center gap-4 nc-survey-form-branding"},ns={class:"flex justify-center"},ls={key:0,class:"flex items-center gap-3"},is={class:"text-lg font-bold"},rs={class:"mt-1 text-sm"},us={class:"flex justify-end mt-7 gap-x-2"},ds=Ze({__name:"survey",setup(c){const{md:Fe}=Je(yt),{formState:w,formColumns:F,submitForm:De,submitted:v,secondsRemain:Ae,sharedFormView:u,sharedViewMeta:Ve,onReset:Le,validateInfos:Y,validate:Pe,clearValidate:Re,isRequired:Me,handleAddMissingRequiredFieldDefaultState:je,fieldMappings:$}=$t(),{isMobileMode:_}=We(zt()),I=b(!1),D=b("left"),N=b("arrow-right"),A=b(!1),y=b(!1),g=b(!1),B=b(),Z=b();ze(gt,B),ze(et,b(!0));const V=z(()=>Ve.value.transitionDuration||100),J=z(()=>F.value?F.value.reduce((t,s)=>{const i=s.label||s.title;return i&&t.push(i),t},[]):[]),{index:W,goToPrevious:Ie,goToNext:Ne,isFirst:ee,isLast:L,goTo:Be}=tt(J),a=z(()=>{var t;return(t=F.value)==null?void 0:t[W.value]}),P=z(()=>{var t,s;return(t=a.value)!=null&&t.title?((s=Y[$.value[a.value.title]])==null?void 0:s.validateStatus)==="error":!1});function q(t){I.value=!0,D.value=t,setTimeout(()=>{D.value=D.value==="left"?"right":"left"},V.value/2),setTimeout(()=>{I.value=!1,setTimeout(O,100)},V.value)}function te(t){N.value=t,A.value=!0,setTimeout(()=>{A.value=!1},V.value/2)}const R=async t=>{if($.value[t]===void 0)return console.warn("Missing mapping field for:",t),!1;try{return await Pe($.value[t]),!0}catch{return!1}};async function S(t){var s;L.value||!y.value||v.value||g.value||!a.value||!a.value.title||(s=a.value)!=null&&s.title&&!await R(a.value.title)||(te(t||"arrow-right"),setTimeout(()=>{q("left"),Ne()},t==="ok-button"?300:0))}async function E(t){ee.value||!y.value||v.value||g.value||(te(t||"arrow-left"),q("right"),Ie())}function O(){var t,s;if(document&&typeof document<"u"){const i=document.querySelector(".nc-cell input")||document.querySelector(".nc-cell textarea")||document.querySelector('.nc-cell [tabindex="0"]');i&&(Z.value=i,(t=i==null?void 0:i.select)==null||t.call(i),(s=i==null?void 0:i.focus)==null||s.call(i))}}function se(){Re(),v.value=!1,y.value=!1,q("right"),Be(J.value[0])}async function ae(){v.value||(g.value=!1,De())}Le(se);const oe=()=>{y.value=!0,je(),setTimeout(()=>{O()},100)},qe=()=>{(document==null?void 0:document.activeElement)!==Z.value&&O()},ne=async()=>{var t;(t=a.value)!=null&&t.title&&!await R(a.value.title)||(g.value=!0,setTimeout(()=>{var s,i;(s=document.querySelector('.nc-survery-form__confirmation_modal div[tabindex="0"]'))==null||s.focus(),(i=document.querySelector(".nc-survey-form-btn-submit.nc-button"))==null||i.focus()},50))};M(["ArrowLeft","ArrowDown"],()=>{_.value||E("arrow-left")}),M(["ArrowRight","ArrowUp"],()=>{_.value||S("arrow-right")}),M(["Enter"],async t=>{if(!(_.value||v.value)){if(!y.value&&!v.value)oe();else if(y.value)if(L.value)g.value?ae():(t.preventDefault(),ne());else{const s=document.activeElement;if(s!=null&&s.classList&&s.classList.contains("nc-survey-form__btn-next"))return;S("ok-button")}}}),M("Escape",()=>{var t,s;document&&((s=(t=document.activeElement)==null?void 0:t.blur)==null||s.call(t))}),st(()=>{if(!Fe.value){const{direction:t}=at(B,{onSwipe:()=>{I.value||(t.value==="left"?S():t.value==="right"&&E())}})}});const{message:U}=xt(z(()=>{var t;return(t=u==null?void 0:u.value)==null?void 0:t.success_msg}),z(()=>w.value));return(t,s)=>{var le,ie,re,ue,de,me,ce,fe,_e;const i=ht,G=Ct,H=ot,Ee=St,x=nt,Oe=Tt,Ue=Ft,Ge=wt,He=rt,Ke=it,Xe=lt,Qe=kt,Ye=vt;return l(),m("div",Dt,[o("div",At,[e(u)?(l(),m("div",Vt,[!e(y)||e(v)?(l(),m(Se,{key:0},[e(u)&&!("parseProp"in t?t.parseProp:e(j))((le=e(u))==null?void 0:le.meta).hide_banner?(l(),k(i,{key:0,"banner-image-url":e(u).banner_image_url,class:"flex-none mb-4"},null,8,["banner-image-url"])):f("",!0),o("div",Lt,[o("h1",Pt,n(e(u).heading),1),e(v)?(l(),m("div",Rt,[d(Ee,{class:"nc-survey-form__success-msg !p-4 !rounded-lg text-left w-full !bg-white !border-gray-200 !items-start",type:"success","data-testid":"nc-survey-form__success-msg",outlined:"","show-icon":""},Ce({message:r(()=>[e(U)?(l(),k(G,{key:0,value:e(U),class:"!h-auto -ml-1","is-form-field":"","read-only":"","sync-value-change":""},null,8,["value"])):(l(),m("span",Mt,n(t.$t("msg.info.thankYou")),1))]),icon:r(()=>[o("div",null,[d(H,{icon:"circleCheck2",class:"text-[#27D665]"})])]),_:2},[e(U)?void 0:{name:"description",fn:r(()=>[p(n(t.$t("msg.info.submittedFormData")),1)]),key:"0"}]),1024),typeof((ie=e(u))==null?void 0:ie.redirect_url)!="string"&&(e(u).show_blank_form||e(u).submit_another_form)?(l(),m("div",jt,[(re=e(u))!=null&&re.show_blank_form?(l(),m("p",It,n(t.$t("labels.newFormLoaded"))+" "+n(e(Ae))+" "+n(t.$t("general.seconds").toLowerCase()),1)):f("",!0),o("div",Nt,[(ue=e(u))!=null&&ue.submit_another_form?(l(),k(x,{key:0,type:"secondary",size:e(_)?"medium":"small","data-testid":"nc-survey-form__btn-submit-another-form",onClick:se},{default:r(()=>[p(n(t.$t("activity.submitAnotherForm")),1)]),_:1},8,["size"])):f("",!0)])])):f("",!0)])):e(y)?f("",!0):(l(),m(Se,{key:1},[(de=e(u).subheading)!=null&&de.trim()?(l(),m("div",Bt,[d(G,{value:e(u).subheading,class:"font-medium text-base text-gray-500 dark:text-slate-300 !h-auto mb-4 -ml-1","is-form-field":"","read-only":"","sync-value-change":"","data-testid":"nc-survey-form__sub-heading"},null,8,["value"])])):f("",!0),o("div",qt,[o("div",Et,[o("div",Ot,[o("span",null,n(t.$t("labels.pressEnter"))+" ↵ ",1)]),d(x,{size:e(_)?"medium":"small","data-testid":"nc-survey-form__fill-form-btn",onClick:s[0]||(s[0]=h=>oe())},{default:r(()=>[p(n(t.$t("labels.fillForm")),1)]),_:1},8,["size"])])])],64))])],64)):(l(),m("div",Ut,[o("h1",Gt,n(e(u).heading),1)])),e(y)&&!e(v)?(l(),k(ft,{key:2,name:`slide-${e(D)}`,duration:e(V),mode:"out-in"},{default:r(()=>[d(Xe,{model:e(w)},{default:r(()=>{var h,pe,ve,ye,ge;return[(l(),m("div",{ref_key:"el",ref:B,key:(h=e(a))==null?void 0:h.title,class:"flex flex-col gap-4 w-full m-auto rounded-xl border-1 border-gray-200 bg-white p-6 lg:p-12"},[o("div",Ht,n(e(W)+1)+" / "+n((pe=e(F))==null?void 0:pe.length),1),e(a)?(l(),m("div",Kt,[o("div",Xt,[o("span",null,n(e(a).label||e(a).title),1),e(Me)(e(a))?(l(),m("span",Qt," *")):f("",!0)]),(ve=e(a))!=null&&ve.description?(l(),m("div",Yt,[d(G,{value:(ye=e(a))==null?void 0:ye.description,class:"!h-auto -ml-1","is-form-field":"","read-only":"","sync-value-change":""},null,8,["value"])])):f("",!0),d(Ke,{disabled:!((ge=e(a))!=null&&ge.read_only)},{title:r(()=>[p(n(t.$t("activity.preFilledFields.lockedFieldTooltip")),1)]),default:r(()=>[e(a).title&&e($)[e(a).title]?(l(),k(He,ut({key:0,name:e($)[e(a).title],class:"nc-input-required-error"},e(Y)[e($)[e(a).title]]),{default:r(()=>[d(Ge,{class:"relative nc-form-data-cell",onClick:dt(qe,["stop"])},Ce({default:r(()=>{var K,be,xe,he,ke,we,$e;return[e(mt)(e(a))?(l(),k(Oe,{key:0,modelValue:e(w)[e(a).title],"onUpdate:modelValue":[s[1]||(s[1]=C=>e(w)[e(a).title]=C),s[2]||(s[2]=C=>R(e(a).title))],class:T(["mt-0 nc-input h-auto",{readonly:(K=e(a))==null?void 0:K.read_only}]),row:{row:{},oldRow:{},rowMeta:{}},"data-testid":`nc-survey-form__input-${e(a).title.replaceAll(" ","")}`,column:e(a),"read-only":(be=e(a))==null?void 0:be.read_only},null,8,["modelValue","class","data-testid","column","read-only"])):(l(),k(Ue,{key:1,modelValue:e(w)[e(a).title],"onUpdate:modelValue":[s[3]||(s[3]=C=>e(w)[e(a).title]=C),s[4]||(s[4]=C=>R(e(a).title))],class:T(["nc-input h-auto",{"layout-list":(he=("parseProp"in t?t.parseProp:e(j))((xe=e(a))==null?void 0:xe.meta))==null?void 0:he.isList,readonly:(ke=e(a))==null?void 0:ke.read_only}]),"data-testid":`nc-survey-form__input-${e(a).title.replaceAll(" ","")}`,column:e(a),"edit-enabled":!((we=e(a))!=null&&we.read_only),"read-only":($e=e(a))==null?void 0:$e.read_only},null,8,["modelValue","class","data-testid","column","edit-enabled","read-only"]))]}),_:2},[e(a).uidt===e(ct).LongText?{name:"help",fn:r(()=>[o("div",Zt,[o("div",Jt,[p(n(t.$t("general.shift"))+" ",1),s[10]||(s[10]=o("span",{class:"text-primary"},"  ⇧  ",-1)),p(" + "+n(t.$t("general.enter"))+" ",1),s[11]||(s[11]=o("span",{class:"text-primary"},"  ↵  ",-1)),p(" "+n(t.$t("msg.info.makeLineBreak")),1)])])]),key:"0"}:void 0]),1024)]),_:1},16,["name"])):f("",!0)]),_:1},8,["disabled"])])):f("",!0),o("div",Wt,[o("div",es,[e(L)?(l(),m("div",ts,[d(x,{size:e(_)?"medium":"small",class:T(e(N)==="submit-button"&&e(A)?"transform translate-y-[1px] translate-x-[1px] ring ring-accent ring-opacity-100":""),disabled:e(P),"data-testid":"nc-survey-form__btn-submit-confirm",onClick:ne},{default:r(()=>[p(n(t.$t("general.submit"))+" "+n(t.$t("objects.viewType.form")),1)]),_:1},8,["size","class","disabled"])])):(l(),m("div",ss,[o("div",{class:T(["hidden md:flex text-sm items-center gap-1",e(P)?"text-gray-200":"text-gray-800"])},[o("span",null,n(t.$t("labels.pressEnter"))+" ↵ ",1)],2),d(x,{size:e(_)?"medium":"small","data-testid":"nc-survey-form__btn-next",class:T(["nc-survey-form__btn-next",[e(N)==="ok-button"&&e(A)?"transform translate-y-[2px] translate-x-[2px] !after:ring !after:ring-accent !after:ring-opacity-100":""]]),disabled:e(P),onClick:s[5]||(s[5]=K=>S())},{default:r(()=>[p(n(t.$t("labels.next")),1)]),_:1},8,["size","class","disabled"])]))])])]))]}),_:1},8,["model"])]),_:1},8,["name","duration"])):f("",!0)])):f("",!0),o("div",as,[o("div",os,[o("div",ns,[d(Qe,{class:"inline-flex mx-auto",style:_t({color:e(Te).isReadable(((ce=("parseProp"in t?t.parseProp:e(j))((me=e(u))==null?void 0:me.meta))==null?void 0:ce.background_color)||"#F9F9FA","#D5D5D9",{level:"AA",size:"large"})?"#fff":e(Te).mostReadable(((_e=("parseProp"in t?t.parseProp:e(j))((fe=e(u))==null?void 0:fe.meta))==null?void 0:_e.background_color)||"#F9F9FA",["#374151","#D5D5D9"]).toHex8String()})},null,8,["style"])]),e(y)&&!e(v)?(l(),m("div",ls,[d(x,{type:"secondary",size:e(_)?"medium":"small","data-testid":"nc-survey-form__icon-prev",disabled:e(ee),onClick:s[6]||(s[6]=h=>E())},{default:r(()=>[d(H,{icon:"ncArrowLeft"})]),_:1},8,["size","disabled"]),d(x,{size:e(_)?"medium":"small",type:"secondary","data-testid":"nc-survey-form__icon-next",disabled:e(L)||e(P),onClick:s[7]||(s[7]=h=>S())},{default:r(()=>[d(H,{icon:"ncArrowRight"})]),_:1},8,["size","disabled"])])):f("",!0)])])]),d(Ye,{visible:e(g),"onUpdate:visible":s[9]||(s[9]=h=>pt(g)?g.value=h:null),size:"small",class:"nc-survery-form__confirmation_modal"},{default:r(()=>[o("div",null,[o("div",is,n(t.$t("general.submit"))+" "+n(t.$t("objects.viewType.form")),1),o("div",rs,n(t.$t("title.surveyFormSubmitConfirmMsg")),1),o("div",us,[d(x,{type:"secondary",size:e(_)?"medium":"small",onClick:s[8]||(s[8]=h=>g.value=!1)},{default:r(()=>[p(n(t.$t("general.back")),1)]),_:1},8,["size"]),d(x,{type:"primary",size:e(_)?"medium":"small","data-testid":"nc-survey-form__btn-submit",class:"nc-survey-form-btn-submit",onClick:ae},{default:r(()=>[p(n(t.$t("general.submit")),1)]),_:1},8,["size"])])])]),_:1},8,["visible"])])}}}),Ss=bt(ds,[["__scopeId","data-v-5e59246b"]]);export{Ss as default};
