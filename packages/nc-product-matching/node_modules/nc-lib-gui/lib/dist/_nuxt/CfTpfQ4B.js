const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DRA9KN5F.js","./entry.CNP42Mi6.css","./DFDQpYGj.js","./CC4cUItJ.js","./EcM5l_HA.js","./C2UaKEE0.js","./Item.GTPiKSkc.css","./BLPDl4Qg.js","./CsX17Y_h.js","./CHRPOXXy.js","./gByPF8bR.js","./Modal.CB1oWLel.css","./BCBMEREK.js","./CQa0sIfA.js","./DkDj6Z7Z.js","./C_gbauhL.js","./C_VN1MCC.js","./index.CMurbi1o.css","./D7poRkS0.js","./BmscXXs6.js","./gAYHr7Gr.js","./By5RWL3d.js","./ColumnMenu.tCfxYPwr.css","./Menu.t7sYKetr.css","./CG-5KGUk.js","./CkvAmLZt.js","./D7OHpRdS.js","./DvtLu3FC.js","./D_txg4HT.js","./SelectOptions.BDAXdwVJ.css","./C3FZdmXk.js","./index.C8L8AhJa.css","./JqUqXTOd.js","./I4o4wRE2.js","./BMPzbwPk.js","./CwPFbl3n.js","./YbUkeyWR.js","./C5HnjaiI.js","./CBhmoxRW.js","./DjPyxH1k.js","./Bc3_tI4-.js","./CJAyvGKH.js","./QeWwuUYP.js","./index._6B72PDH.css","./Dv0nYk-Y.js","./D43249YX.js","./CNwEZGnv.js","./DP83Cqnl.js","./DlXIlcns.js","./BVqTF1QK.js","./Ce4xoeky.js","./U3gU45AW.js","./BYKJ-MHf.js","./B94p8ToD.js","./Cd4chHHL.js","./boyBAVNN.js","./BBg0y0zb.js","./-iDxnmJF.js","./EditOrAddProvider.C1S70ahv.css"])))=>i.map(i=>d[i]);
import{e as Be,a9 as Ve,av as pe,a8 as Fe,V as je,n as m,J as Pe,r as _,b_ as Ne,bZ as Se,S as ze,as as Ue,G as L,bd as qe,j7 as He,ef as Ge,gz as Ke,o2 as We,aD as H,gS as ve,id as me,gQ as _e,gR as Je,go as fe,jY as Qe,aj as ye,fP as Xe,iX as G,g$ as Ye,aG as Ze,c as f,o as s,a as K,K as O,b as W,I as T,L as e,an as J,w as D,aX as X,d as el,t as Q,ap as ll,ag as N,aq as tl,iC as ol,M as al,Q as he,O as S,eC as nl,j0 as sl,a_ as Y,bb as il,fO as ul,_ as rl}from"./DRA9KN5F.js";import{u as dl}from"./By5RWL3d.js";const cl=X(()=>Y(()=>import("./DRA9KN5F.js").then(i=>i.oU),__vite__mapDeps([0,1]),import.meta.url).then(i=>i.default||i)),pl=X(()=>Y(()=>import("./DFDQpYGj.js"),__vite__mapDeps([2,0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),import.meta.url).then(i=>i.default||i)),vl=X(()=>Y(()=>import("./CG-5KGUk.js").then(i=>i.E),__vite__mapDeps([24,0,1,7,25,26,27,28,13,14,21,20,29,30,31,32,33,34,35,36,18,37,38,39,40,8,12,41,5,6,16,17,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58]),import.meta.url).then(i=>i.default||i)),ml=["data-test-id"],_l={key:1,class:"text-red-500"},fl={key:0,class:"flex-1"},yl={key:1},hl={class:"nc-edit-or-add-provider-wrapper"},bl=Be({__name:"VirtualCell",props:{column:{},hideMenu:{type:Boolean},required:{type:[Boolean,Number]},hideIcon:{type:Boolean},hideIconTooltip:{type:Boolean},isHiddenCol:{type:Boolean},showLockIcon:{type:Boolean}},setup(i){const B=i,{t:V}=Ve(),t=pe(B,"column"),{base:be,tables:ke}=Fe(je()),we=m(()=>{var l,o;return(o=(l=be.value)==null?void 0:l.sources)==null?void 0:o.some(n=>{var p;return n.id===((p=t.value)==null?void 0:p.source_id)&&!n.is_meta&&!n.is_local})}),Z=pe(B,"hideMenu"),{isMobileMode:x}=Pe(),a=_(!1),c=_(!1),F=_(!1);il(ul,t);const{isAllowed:Oe}=dl(),Ie=m(()=>{var l;return!B.showLockIcon||!((l=t.value)!=null&&l.id)?!0:Oe(Ne.FIELD,t.value.id,Se.RECORD_FIELD_EDIT)}),{metas:z}=ze(),{isUIAllowed:C,isMetaReadOnly:ge}=Ue(),d=L(qe,_()),xe=L(He,_(!1)),U=L(Ge,_(!1)),u=L(Ke,_(!1)),v=L(We,_(!1)),Ce=m(()=>{var l;return((l=d.value)==null?void 0:l.type)==="view"}),q=m(()=>{var l;return(l=d==null?void 0:d.value)==null?void 0:l.title}),ee=m(()=>{var l,o,n,p,y,I;return H(t.value)?(l=t.value)==null?void 0:l.colOptions:(n=(o=t==null?void 0:t.value)==null?void 0:o.colOptions)!=null&&n.fk_relation_column_id?(I=(y=(p=d==null?void 0:d.value)==null?void 0:p.columns)==null?void 0:y.find(E=>{var g,h;return E.id===((h=(g=t==null?void 0:t.value)==null?void 0:g.colOptions)==null?void 0:h.fk_relation_column_id)}))==null?void 0:I.colOptions:null}),Ee=m(()=>{var l,o,n;return((l=ee.value)==null?void 0:l.fk_related_model_id)&&((n=z.value)==null?void 0:n[(o=ee.value)==null?void 0:o.fk_related_model_id])}),$=m(()=>{var l;return(l=Ee.value)==null?void 0:l.title}),Te=m(()=>{var o,n,p,y,I,E,g,h,M,R,b,P,ae,ne,se,ie,ue,re,de,ce;if(!t.value)return"";let l="";if(H(t.value)&&$.value&&we.value){if(ve(t.value)){const r=((o=ke.value)==null?void 0:o.find(A=>{var k,w;return A.id===((w=(k=t.value)==null?void 0:k.colOptions)==null?void 0:w.fk_mm_model_id)}))||((y=z.value)==null?void 0:y[(p=(n=t.value)==null?void 0:n.colOptions)==null?void 0:p.fk_mm_model_id]);l=r?`
Junction Table: ${r.title}`:""}else if(me(t.value)){const r=(M=(h=(g=z.value)==null?void 0:g[(E=(I=t.value)==null?void 0:I.colOptions)==null?void 0:E.fk_related_model_id])==null?void 0:h.columns)==null?void 0:M.find(A=>{var k,w;return A.id===((w=(k=t.value)==null?void 0:k.colOptions)==null?void 0:w.fk_child_column_id)});l=(R=r==null?void 0:r.title)!=null&&R.startsWith("nc_")?"":`
Foreign Key Column: ${r.title}`}else if(_e(t.value)){const r=(P=(b=d.value)==null?void 0:b.columns)==null?void 0:P.find(A=>{var k,w;return A.id===((w=(k=t.value)==null?void 0:k.colOptions)==null?void 0:w.fk_child_column_id)});l=(ae=r==null?void 0:r.title)!=null&&ae.startsWith("nc_")?"":`
Foreign Key Column: ${r.title}`}}return me(t.value)?`'${q.value}' ${V("labels.hasMany")} '${$.value}'${l}`:ve(t.value)?`'${q.value}' & '${$.value}' ${V("labels.manyToMany")}${l}`:_e(t.value)?`'${(ne=t==null?void 0:t.value)==null?void 0:ne.title}' ${V("labels.belongsTo")} '${$.value}'${l}`:Je(t.value)?`'${q.value}' & '${$.value}' ${V("labels.oneToOne")}${l}`:fe(t.value)?`Formula - ${Qe((ie=(se=t.value)==null?void 0:se.colOptions)==null?void 0:ie.formula,(ue=d==null?void 0:d.value)==null?void 0:ue.columns,(de=(re=t.value)==null?void 0:re.colOptions)==null?void 0:de.formula_raw)}`:((ce=t==null?void 0:t.value)==null?void 0:ce.title)||""}),De=m(()=>H(t.value)||fe(t.value)),j=_(null),$e=m(()=>{var l;return t.value.uidt===ye.LinkToAnotherRecord&&((l=t.value.colOptions)==null?void 0:l.type)===Xe.ONE_TO_ONE?G[ye.Links]:Ye(t.value)?G.AIButton:t.value.uidt?G[t.value.uidt]:""}),Me=async l=>{j.value=l,a.value=!0},le=_(),te=()=>{j.value=null,a.value=!1};Ze(a,l=>{l||(F.value=!1)});const oe=(l,o=!1)=>{u.value&&(l==null?void 0:l.type)==="dblclick"||v.value||Ce.value||!U.value&&C("fieldEdit")&&!x.value&&(!ge.value||sl.includes(t.value.uidt))&&(o&&(F.value=!0),a.value=!0)},Re=l=>{U.value||!C("fieldEdit")&&!x.value||(l.preventDefault(),l.stopPropagation(),c.value=!c.value)},Ae=()=>{var l;a.value=!0,(l=le.value)!=null&&l.shouldKeepModalOpen()||(a.value=!1,F.value=!1)},Le=l=>{if(!(x.value||!C("fieldEdit"))){if(c.value)l.preventDefault(),l.stopPropagation();else if(u.value&&!a.value&&!v.value){c.value=!0;return}c.value=!1}};return(l,o)=>{var h,M,R;const n=cl,p=ll,y=al,I=pl,E=vl,g=nl;return s(),f("div",{class:N(["flex items-center w-full h-full text-small text-gray-500 font-weight-medium group",{"flex-col !items-start justify-center pt-0.5":e(u)&&!e(x)&&!e(v),"bg-gray-100":e(u)&&!e(v)?e(a)||e(c):!1,"nc-cell-expanded-form-header cursor-pointer hover:bg-gray-100":e(u)&&!e(x)&&e(C)("fieldEdit")&&!e(v)}]),onDblclick:oe,onContextmenu:S(Re,["right"]),onClick:Le},[K("div",{class:N(["nc-virtual-cell-name-wrapper flex-1 flex items-center",{"max-w-[calc(100%_-_23px)]":!e(u)&&!((h=e(t).description)!=null&&h.length),"max-w-[calc(100%_-_44px)]":!e(u)&&((M=e(t).description)==null?void 0:M.length),"max-w-full":e(u)&&!e(v)}])},[e(t)&&!B.hideIcon?(s(),f(J,{key:0},[e(xe)?(s(),T(p,{key:0,disabled:l.hideIconTooltip,class:"flex items-center",placement:"bottom"},{title:D(()=>[el(Q(e($e)),1)]),default:D(()=>[W(n)]),_:1},8,["disabled"])):(s(),T(n,{key:1}))],64)):O("",!0),W(p,{placement:"bottom",class:"truncate name pl-1","show-on-truncate-only":!e(De)},{title:D(()=>[(s(!0),f(J,null,tl(e(Te).split(`
`),(b,P)=>(s(),f("div",{key:P},Q(b),1))),128))]),default:D(()=>[K("span",{"data-test-id":e(t).title,class:N({"select-none":e(u)&&!e(v)})},Q(e(t).title),11,ml)]),_:1},8,["show-on-truncate-only"]),("isVirtualColRequired"in l?l.isVirtualColRequired:e(ol))(e(t),((R=e(d))==null?void 0:R.columns)||[])||l.required?(s(),f("span",_l," *")):O("",!0),e(Ie)?O("",!0):(s(),T(y,{key:2,icon:"ncLock",class:"nc-column-lock-icon flex-none !ml-1 w-3.5 h-3.5 opacity-90"})),e(u)&&!e(x)&&e(C)("fieldEdit")&&!e(v)&&!e(Z)?(s(),T(y,{key:3,icon:"arrowDown",class:N(["nc-column-context-menu flex-none cursor-pointer ml-1 group-hover:visible w-4 h-4",{visible:e(a)||e(c),invisible:!(e(a)||e(c))}])},null,8,["class"])):O("",!0)],2),e(Z)?O("",!0):(s(),f(J,{key:0},[e(u)?O("",!0):(s(),f("div",fl)),!e(U)&&e(C)("fieldEdit")?(s(),T(I,{key:1,"is-open":e(c),"onUpdate:isOpen":o[0]||(o[0]=b=>he(c)?c.value=b:null),"is-hidden-col":l.isHiddenCol,virtual:!0,onAddColumn:Me,onEdit:oe},null,8,["is-open","is-hidden-col"])):O("",!0)],64)),W(g,{visible:e(a),"onUpdate:visible":o[4]||(o[4]=b=>he(a)?a.value=b:null),class:"h-full",trigger:["click"],placement:e(u)&&!e(v)?"bottomLeft":"bottomRight","overlay-class-name":`nc-dropdown-edit-column ${e(a)?"active":""}`,onVisibleChange:Ae},{overlay:D(()=>[K("div",hl,[e(a)?(s(),T(E,{key:0,ref_key:"editOrAddProviderRef",ref:le,column:e(j)?null:e(t),"column-position":e(j),class:"w-full","edit-description":e(F),onSubmit:te,onCancel:te,onClick:o[2]||(o[2]=S(()=>{},["stop"])),onKeydown:o[3]||(o[3]=S(()=>{},["stop"]))},null,8,["column","column-position","edit-description"])):O("",!0)])]),default:D(()=>[e(u)&&!e(v)?(s(),f("div",{key:0,class:"h-[1px]",onDblclick:o[1]||(o[1]=S(()=>{},["stop"]))}," ",32)):(s(),f("div",yl))]),_:1},8,["visible","placement","overlay-class-name"])],34)}}}),Ol=Object.assign(rl(bl,[["__scopeId","data-v-6fcec453"]]),{__name:"SmartsheetHeaderVirtualCell"});export{Ol as default};
