import{e as te,T as ue,a9 as be,n as le,ac as ye,c,o as u,a as d,b as m,w as f,ag as L,ad as j,K as h,L as l,I as k,N as pe,O as E,b9 as S,bo as P,t as _,bB as fe,an as B,aq as me,eJ as we,_ as ve,f as ge,r as q,ds as Fe,ao as U,M as he,ah as re,d as w,aH as Le,aj as Ce,aF as Ve,$ as $e,S as _e,eh as Ae,ch as Be,g as Ne,cS as Ee,ae as Me,bW as ee,Q as ie}from"./DRA9KN5F.js";import{_ as Te}from"./C2UaKEE0.js";import{_ as Se}from"./C_VN1MCC.js";import{_ as Pe}from"./PG11Gduf.js";import{_ as Ie}from"./GU4raMbz.js";import{M as oe,h as Oe,b as He,c as Ue,i as qe,f as De,j as Ge}from"./C316Za7m.js";import{mockSetupInit as We}from"./CHKCftXA.js";import{_ as Re}from"./Berb7S-h.js";import"./xLIsHrMo.js";import"./D7poRkS0.js";import"./DkDj6Z7Z.js";import"./Bj4kMpzI.js";import"./CbSESqy_.js";import"./Bxzk9hCO.js";import"./CbX26EBz.js";import"./Bm6QmuXP.js";import"./CkpISeXq.js";import"./zMMvJhqz.js";import"./DWLi1ZcL.js";import"./CLeRErKn.js";import"./DTEj8koB.js";import"./Dp7CMpJ6.js";import"./CQa0sIfA.js";import"./CSKT8BGh.js";import"./gAYHr7Gr.js";const ze={class:"flex flex-col min-w-full w-min gap-y-2"},Xe={key:0,class:"flex items-center nc-filter-where-label ml-1"},je={class:"flex items-center w-full justify-between gap-2"},Je={class:"truncate flex-1 capitalize"},Ke=te({__name:"FilterGroupRow",props:{modelValue:{},index:{},nestedLevel:{},columns:{},dbClientType:{},disableAddNewFilter:{type:Boolean},actionBtnType:{},webHook:{type:Boolean},link:{type:Boolean},widget:{type:Boolean},isForm:{type:Boolean},isPublic:{type:Boolean},isFullWidth:{type:Boolean},disabled:{type:Boolean},isLockedView:{type:Boolean},isLogicalOpChangeAllowed:{type:Boolean},filterPerViewLimit:{},filtersCount:{},queryFilter:{type:Boolean},handler:{},isColourFilter:{type:Boolean},isLoadingFilter:{type:Boolean}},emits:["update:modelValue","change","delete"],setup(J,{emit:D}){const s=J,b=D,n=ue(s,"modelValue",b),{t:y}=be(),o=[{value:"and",text:y("general.and")},{value:"or",text:y("general.or")}],F=le(()=>n.value.readOnly||s.disabled||s.isLockedView),R=le(()=>{var t;return new Set((t=n.value.children)==null?void 0:t.slice(1).map(v=>v.logical_op)).size>1}),I=t=>{switch(t.type){case"add":{t.filter.fk_parent_id=n.value.id,b("change",{filter:{...n.value},type:"child_add",prevValue:{...n.value,children:t.prevValue},value:{...n.value},index:s.index});break}case"delete":{t.filter.fk_parent_id=n.value.id,b("change",{filter:{...n.value},type:"child_delete",prevValue:{...n.value,children:t.prevValue},value:{...n.value},index:s.index});break}}},O=t=>{b("change",{...t,index:s.index})},a=t=>{var V,N;const v=n.value.logical_op;(V=s.handler)!=null&&V.rowChange?(N=s.handler)==null||N.rowChange({filter:n.value,type:"logical_op",prevValue:v,value:t,index:s.index}):(n.value.logical_op=t,b("change",{filter:{...n.value},type:"logical_op",prevValue:v,value:t,index:s.index}))},i=()=>{b("delete",{filter:{...n.value},index:s.index})};return(t,v)=>{const V=we,N=fe,G=pe,r=ye("e");return u(),c("div",ze,[d("div",{class:L(["flex rounded-lg p-2 min-w-full w-min border-1",[`nc-filter-nested-level-${t.nestedLevel}`]])},[m(l(ce),{modelValue:l(n).children,"onUpdate:modelValue":v[4]||(v[4]=C=>l(n).children=C),index:t.index,"nested-level":t.nestedLevel+1,columns:t.columns,disabled:t.disabled,"is-locked-view":t.isLockedView,"is-logical-op-change-allowed":l(R),"action-btn-type":t.actionBtnType,"web-hook":t.webHook,link:t.link,widget:t.widget,"is-form":t.isForm,"is-public":t.isPublic,"filter-per-view-limit":t.filterPerViewLimit,"disable-add-new-filter":t.disableAddNewFilter,"filters-count":t.filtersCount,"query-filter":t.queryFilter,"fk-parent-id":l(n).id,"parent-filter":l(n),"is-full-width":t.isFullWidth,handler:t.handler,"is-colour-filter":t.isColourFilter,"is-loading-filter":t.isLoadingFilter,onChange:I,onRowChange:O},{nestedRowStart:f(()=>[t.index===0?(u(),c("span",Xe,_(t.$t("labels.where")),1)):(u(),c("div",{key:`${t.index}nested`,class:"flex nc-filter-logical-op"},[j((u(),k(N,{value:l(n).logical_op,"onUpdate:value":v[0]||(v[0]=C=>l(n).logical_op=C),"dropdown-match-select-width":!1,class:L(["min-w-18 capitalize",{"nc-disabled-logical-op":l(F)||t.index>1&&!t.isLogicalOpChangeAllowed}]),placeholder:"Group op","dropdown-class-name":"nc-dropdown-filter-logical-op-group",disabled:t.index>1&&!t.isLogicalOpChangeAllowed||l(F),onClick:v[1]||(v[1]=E(()=>{},["stop"])),onChange:v[2]||(v[2]=C=>a(C))},{default:f(()=>[(u(),c(B,null,me(o,C=>m(V,{key:C.value,value:C.value},{default:f(()=>[d("div",je,[d("div",Je,_(C.text),1),l(n).logical_op===C.value?(u(),k(S(("iconMap"in t?t.iconMap:l(P)).check),{key:0,id:"nc-selected-item-icon",class:"text-primary w-4 h-4"})):h("",!0)])]),_:2},1032,["value"])),64))]),_:1},8,["value","disabled","class"])),[[r,["c:filter:logical-op:select"]]])]))]),nestedRowEnd:f(()=>[d("div",{class:L({"cursor-wait":t.isLoadingFilter})},[!l(n).readOnly&&!t.disabled?j((u(),k(G,{key:t.index,type:"text",size:"small",disabled:t.isLockedView,class:L(["nc-filter-item-remove-btn cursor-pointer",{"pointer-events-none":t.isLoadingFilter}]),onClick:v[3]||(v[3]=E(C=>i(),["stop"]))},{default:f(()=>[(u(),k(S(("iconMap"in t?t.iconMap:l(P)).deleteListItem)))]),_:1},8,["disabled","class"])),[[r,["c:filter:delete",{link:!!t.link,webHook:!!t.webHook,widget:!!t.widget}]]]):h("",!0)],2)]),_:1},8,["modelValue","index","nested-level","columns","disabled","is-locked-view","is-logical-op-change-allowed","action-btn-type","web-hook","link","widget","is-form","is-public","filter-per-view-limit","disable-add-new-filter","filters-count","query-filter","fk-parent-id","parent-filter","is-full-width","handler","is-colour-filter","is-loading-filter"])],2)])}}}),Qe=Object.assign(ve(Ke,[["__scopeId","data-v-7ca15989"]]),{__name:"SmartsheetToolbarFilterGroupRow"}),Ze={key:0,class:"flex min-w-full w-min items-center gap-1 mb-2"},Ye={class:"flex items-center gap-1"},xe={class:"flex items-center gap-1"},el={class:"flex items-center gap-1"},ll={class:"flex items-center gap-1"},il={class:"flex items-center gap-1"},ol={class:"flex items-center gap-1"},tl={class:"flex items-center gap-1"},nl={class:"flex items-center gap-1"},dl=te({__name:"FilterGroup",props:{index:{},fkParentId:{},parentFilter:{},nestedLevel:{},columns:{},dbClientType:{},showNullAndEmptyInFilter:{type:Boolean},isLogicalOpChangeAllowed:{type:Boolean},filterPerViewLimit:{},filtersCount:{},modelValue:{},disableAddNewFilter:{type:Boolean},actionBtnType:{},webHook:{type:Boolean},link:{type:Boolean},widget:{type:Boolean},isForm:{type:Boolean},isPublic:{type:Boolean},isFullWidth:{type:Boolean},disabled:{type:Boolean},isLockedView:{type:Boolean},queryFilter:{type:Boolean},handler:{},isColourFilter:{type:Boolean},readOnly:{type:Boolean},isLoadingFilter:{type:Boolean}},emits:["update:modelValue","change","rowChange","delete"],setup(J,{emit:D}){const s=J,b=D,n=ue(s,"modelValue",b),{$e:y}=ge(),o=q(),F=q(),R=q({}),I=Fe(),O=e=>{var p,g;return(((g=(p=I[e??"default"])==null?void 0:p.call(I))==null?void 0:g.length)??0)>0},a=le(()=>s.nestedLevel>0),i=le(()=>n.value.filter(e=>e.status!=="delete")),t=()=>{var e;(e=o.value)==null||e.scrollTo({top:o.value.scrollHeight,behavior:"smooth"})},v=()=>{(a.value||s.isColourFilter)&&$e(()=>{var e,p,g;!(F!=null&&F.value)||s.isColourFilter&&((p=(e=F==null?void 0:F.value)==null?void 0:e.getBoundingClientRect())==null?void 0:p.top)<200||(g=F==null?void 0:F.value)==null||g.scrollIntoView({behavior:"smooth",block:s.isColourFilter?void 0:"end",inline:"nearest"})})},V=e=>{var p;return(p=s.columns)==null?void 0:p.find(g=>g.id===e.fk_column_id)},N=async e=>{var g;const p=V(e);p&&(p.uidt===Ce.SingleSelect&&["anyof","nanyof"].includes(R.value[e.id])&&["eq","neq"].includes(e.comparison_op)?e.value=null:["blank","notblank","empty","notempty","null","notnull"].includes(e.comparison_op)?(e.value=null,e.comparison_sub_op=null):Oe(p.filterUidt??p.uidt)&&(e.value=null,He(e.comparison_op,(g=p==null?void 0:p.meta)==null?void 0:g.date_format).map($=>$.value).includes(e.comparison_sub_op)||(e.comparison_op==="isWithin"?e.comparison_sub_op="pastNumberOfDays":e.comparison_sub_op="exactDate")),R.value[e.id]=e.comparison_op,y("a:filter:update",{logical:e.logical_op,comparison:e.comparison_op,comparison_sub_op:e.comparison_sub_op,link:!!s.link,widget:!!s.widget,webHook:!!s.webHook}))},G=(e,p)=>{N(e.filter),b("rowChange",e),b("change",{filters:[...n.value],value:[...n.value],filter:e.filter,index:e.index,type:"row_changed"})},r=()=>{},C=async e=>{var g,$,M,X,Z,Y,x,A,W,T,de,se;const p=[...n.value];if(e&&((g=s.handler)!=null&&g.addFilterGroup))await s.handler.addFilterGroup({type:"add",filter:null,filters:n.value,index:s.index,value:[...n.value],parentFilter:s.parentFilter,fk_parent_id:s.fkParentId,prevValue:p});else if(!e&&(($=s.handler)!=null&&$.addFilter))await s.handler.addFilter({type:"add",filter:null,filters:n.value,index:s.index,value:[...n.value],parentFilter:s.parentFilter,fk_parent_id:s.fkParentId,prevValue:p});else{const z=e?{_id:Math.random().toString(36).substring(2,15),is_group:!0,logical_op:((M=n.value[0])==null?void 0:M.logical_op)??"and",children:[],fk_parent_id:s.fkParentId,parentFilter:s.parentFilter,order:(((Y=(Z=n.value)==null?void 0:Z[((X=n.value)==null?void 0:X.length)-1])==null?void 0:Y.order)??0)+1}:{_id:Math.random().toString(36).substring(2,15),is_group:!1,logical_op:((x=n.value[0])==null?void 0:x.logical_op)??"and",fk_column_id:s.columns[0].id,comparison_op:null,fk_parent_id:s.fkParentId,parentFilter:s.parentFilter,order:(((T=(W=n.value)==null?void 0:W[((A=n.value)==null?void 0:A.length)-1])==null?void 0:T.order)??0)+1};if(!z.is_group){const H=V(z),ae=(H==null?void 0:H.filterUidt)??(H==null?void 0:H.uidt);z.comparison_op=(se=Ue(ae,(de=Ve(H==null?void 0:H.meta))==null?void 0:de.date_format).filter(ke=>qe(z,ke,ae,s.showNullAndEmptyInFilter))[0])==null?void 0:se.value}N(z,s.index),n.value.push(z),b("change",{type:"add",filter:z,filters:[...n.value],index:s.index,value:[...n.value],parentFilter:s.parentFilter,fk_parent_id:s.fkParentId,prevValue:p})}a.value||t(),v()},K=async()=>C(!1),Q=async()=>C(!0),ne=async(e,p)=>{var $,M;const g=[...n.value];if(($=s.handler)!=null&&$.deleteFilter)await((M=s.handler)==null?void 0:M.deleteFilter({type:"delete",filter:n.value[p],filters:n.value,index:s.index,value:[...n.value],parentFilter:s.parentFilter,fk_parent_id:s.fkParentId,prevValue:g}));else{const X=n.value.splice(p,1);b("change",{type:"delete",filter:X,filters:[...n.value],index:s.index,value:[...n.value],parentFilter:s.parentFilter,fk_parent_id:s.fkParentId,prevValue:g})}};return(e,p)=>{const g=he,$=pe,M=Te,X=Se,Z=Le,Y=Pe,x=Ie;return u(),c("div",{"data-testid":"nc-filter",class:L(["menu-filter-dropdown w-min",{"max-h-[max(80vh,500px)] min-w-122 py-2 pl-4":!l(a)&&!e.queryFilter,"!min-w-127.5":e.isForm&&!e.webHook,"!min-w-full !w-full !pl-0":e.isFullWidth||!l(a)&&e.webHook,"min-w-full":e.isFullWidth||l(a)||e.queryFilter}])},[l(a)?(u(),c("div",Ze,[U(e.$slots,"nestedRow",{},void 0,!0),O("nestedRow")?h("",!0):(u(),c(B,{key:0},[d("div",{class:L([`nc-filter-logical-op-level-${e.nestedLevel}`])},[U(e.$slots,"nestedRowStart",{},void 0,!0)],2),p[6]||(p[6]=d("div",{class:"flex-grow"},null,-1)),m(Z,{trigger:["hover"],"overlay-class-name":"nc-dropdown-filter-group-sub-menu",disabled:e.disableAddNewFilter||e.isLockedView||e.disabled},{overlay:f(()=>[m(X,null,{default:f(()=>[!("isEeUI"in e?e.isEeUI:l(re))&&!e.isPublic?(u(),c(B,{key:0},[e.filtersCount<e.filterPerViewLimit?(u(),c(B,{key:0},[m(M,{"data-testid":"add-filter-menu",onClick:E(K,["stop"])},{default:f(()=>[d("div",Ye,[(u(),k(S(("iconMap"in e?e.iconMap:l(P)).plus),{"data-testid":"filter-add-icon"})),w(" "+_(e.isForm&&!e.webHook?e.$t("activity.addCondition"):e.$t("activity.addFilter")),1)])]),_:1}),e.nestedLevel<5?(u(),k(M,{key:0,"data-testid":"add-filter-group-menu",onClick:E(Q,["stop"])},{default:f(()=>[d("div",xe,[(u(),k(S(("iconMap"in e?e.iconMap:l(P)).plusSquare))),w(" "+_(e.isForm&&!e.webHook?e.$t("activity.addConditionGroup"):e.$t("activity.addFilterGroup")),1)])]),_:1})):h("",!0)],64)):h("",!0)],64)):(u(),c(B,{key:1},[m(M,{"data-testid":"add-filter-menu",onClick:E(K,["stop"])},{default:f(()=>[d("div",el,[(u(),k(S(("iconMap"in e?e.iconMap:l(P)).plus),{"data-testid":"filter-add-icon"})),w(" "+_(e.isForm&&!e.webHook?e.$t("activity.addCondition"):e.$t("activity.addFilter")),1)])]),_:1}),!e.webHook&&e.nestedLevel<("MAX_NESTED_LEVEL"in e?e.MAX_NESTED_LEVEL:l(oe))?(u(),k(M,{key:0,"data-testid":"add-filter-group-menu",onClick:E(Q,["stop"])},{default:f(()=>[d("div",ll,[(u(),k(S(("iconMap"in e?e.iconMap:l(P)).plusSquare))),w(" "+_(e.isForm&&!e.webHook?e.$t("activity.addConditionGroup"):e.$t("activity.addFilterGroup")),1)])]),_:1})):h("",!0)],64))]),_:1})]),default:f(()=>[m($,{size:"xs",type:"text",disabled:e.disableAddNewFilter||e.isLockedView||e.disabled},{default:f(()=>[m(g,{icon:"plus",class:"cursor-pointer","data-testid":"filter-add-icon"})]),_:1},8,["disabled"])]),_:1},8,["disabled"]),d("div",null,[U(e.$slots,"nestedRowEnd",{},void 0,!0)])],64))])):U(e.$slots,"root-header",{key:1},void 0,!0),l(i)&&l(i).length?(u(),c("div",{key:2,ref_key:"wrapperDomRef",ref:o,class:L(["flex flex-col gap-y-1.5 nc-filter-grid min-w-full w-min",{"max-h-420px nc-scrollbar-thin nc-filter-top-wrapper pr-4 mt-1 mb-2 py-1":!l(a)&&!e.queryFilter,"!pr-0":e.webHook&&!l(a)}]),onClick:p[0]||(p[0]=E(()=>{},["stop"]))},[(u(!0),c(B,null,me(l(n),(A,W)=>(u(),c(B,{key:W},[A.status!=="delete"?(u(),c(B,{key:0},[A.is_group?(u(),c(B,{key:0},[U(e.$slots,"filterGroupRow",{},void 0,!0),O("filterGroupRow")?h("",!0):(u(),k(l(Qe),{key:0,"model-value":A,index:W,"nested-level":e.nestedLevel,columns:e.columns,disabled:e.disabled,"is-full-width":e.isFullWidth,"is-logical-op-change-allowed":e.isLogicalOpChangeAllowed,"is-locked-view":e.isLockedView,"db-client-type":e.dbClientType,"web-hook":e.webHook,link:e.link,widget:e.widget,"is-form":e.isForm,"is-public":e.isPublic,"filter-per-view-limit":e.filterPerViewLimit,"disable-add-new-filter":e.disableAddNewFilter,"filters-count":e.filtersCount,"query-filter":e.queryFilter,handler:e.handler,"is-colour-filter":e.isColourFilter,"is-loading-filter":e.isLoadingFilter,onChange:T=>G(T),onDelete:T=>ne(T,W)},null,8,["model-value","index","nested-level","columns","disabled","is-full-width","is-logical-op-change-allowed","is-locked-view","db-client-type","web-hook","link","widget","is-form","is-public","filter-per-view-limit","disable-add-new-filter","filters-count","query-filter","handler","is-colour-filter","is-loading-filter","onChange","onDelete"]))],64)):(u(),c(B,{key:1},[U(e.$slots,"filterRow",{},void 0,!0),O("filterRow")?h("",!0):(u(),k(Y,{key:0,"model-value":A,index:W,columns:e.columns,"show-null-and-empty-in-filter":e.showNullAndEmptyInFilter,disabled:e.disabled,"is-logical-op-change-allowed":e.isLogicalOpChangeAllowed,"is-locked-view":e.isLockedView,"db-client-type":e.dbClientType,"web-hook":e.webHook,widget:e.widget,link:e.link,handler:e.handler,"is-colour-filter":e.isColourFilter,"is-loading-filter":e.isLoadingFilter,onChange:T=>G(T),onDelete:T=>ne(T,W)},null,8,["model-value","index","columns","show-null-and-empty-in-filter","disabled","is-logical-op-change-allowed","is-locked-view","db-client-type","web-hook","widget","link","handler","is-colour-filter","is-loading-filter","onChange","onDelete"]))],64))],64)):h("",!0)],64))),128))],2)):h("",!0),l(a)?h("",!0):(u(),c(B,{key:3},[("isEeUI"in e?e.isEeUI:l(re))&&!e.isPublic?(u(),c(B,{key:0},[!e.disabled&&e.filtersCount<e.filterPerViewLimit?(u(),c("div",{key:0,ref_key:"addFiltersRowDomRef",ref:F,class:L(["flex gap-2",{"mt-1 mb-2":l(n).length,"cursor-wait":e.isLoadingFilter}])},[m($,{size:"small",type:e.actionBtnType,disabled:e.disableAddNewFilter||e.isLockedView||e.readOnly,class:L(["nc-btn-focus",{"pointer-events-none":e.isLoadingFilter}]),"data-testid":"add-filter",onClick:p[1]||(p[1]=E(A=>K(),["stop"]))},{default:f(()=>[d("div",il,[(u(),k(S(("iconMap"in e?e.iconMap:l(P)).plus))),w(" "+_(e.isForm&&!e.webHook?e.$t("activity.addCondition"):e.$t("activity.addFilter")),1)])]),_:1},8,["type","disabled","class"]),e.nestedLevel<("MAX_NESTED_LEVEL"in e?e.MAX_NESTED_LEVEL:l(oe))&&!e.disabled?(u(),k($,{key:0,class:L(["nc-btn-focus",{"pointer-events-none":e.isLoadingFilter}]),disabled:e.disableAddNewFilter||e.isLockedView,type:e.actionBtnType,size:"small","data-testid":"add-filter-group",onClick:p[2]||(p[2]=E(A=>Q(),["stop"]))},{default:f(()=>[d("div",ol,[(u(),k(S(("iconMap"in e?e.iconMap:l(P)).plus))),w(" "+_(e.isForm&&!e.webHook?e.$t("activity.addConditionGroup"):e.$t("activity.addFilterGroup")),1)])]),_:1},8,["class","disabled","type"])):h("",!0),U(e.$slots,"root-add-filter-row",{},void 0,!0)],2)):h("",!0)],64)):e.disabled?h("",!0):(u(),c("div",{key:1,ref_key:"addFiltersRowDomRef",ref:F,class:L(["flex gap-2",{"mt-1 mb-2":l(n).length,"cursor-wait":e.isLoadingFilter}])},[m($,{class:L(["nc-btn-focus",{"pointer-events-none":e.isLoadingFilter}]),size:"small",type:e.actionBtnType,"data-testid":"add-filter",disabled:e.isLockedView,onClick:p[3]||(p[3]=E(A=>K(),["stop"]))},{default:f(()=>[d("div",tl,[(u(),k(S(("iconMap"in e?e.iconMap:l(P)).plus))),w(" "+_(e.isForm&&!e.webHook?e.$t("activity.addCondition"):e.$t("activity.addFilter")),1)])]),_:1},8,["class","type","disabled"]),!e.link&&!e.webHook&&!e.widget&&e.nestedLevel<("MAX_NESTED_LEVEL"in e?e.MAX_NESTED_LEVEL:l(oe))?(u(),k($,{key:0,class:L(["nc-btn-focus",{"pointer-events-none":e.isLoadingFilter}]),type:e.actionBtnType,size:"small",disabled:e.isLockedView,"data-testid":"add-filter-group",onClick:p[4]||(p[4]=E(A=>Q(),["stop"]))},{default:f(()=>[d("div",nl,[(u(),k(S(("iconMap"in e?e.iconMap:l(P)).plus))),w(" "+_(e.isForm&&!e.webHook?e.$t("activity.addConditionGroup"):e.$t("activity.addFilterGroup")),1)])]),_:1},8,["class","type","disabled"])):h("",!0),U(e.$slots,"root-add-filter-row",{},void 0,!0)],2))],64)),!l(i)||!l(i).length?(u(),c("div",{key:4,class:L(["flex flex-row text-gray-400 mt-2",{"ml-1":l(a),"ml-0.5":!l(a)}])},_(e.isForm&&!e.webHook?e.$t("title.noConditionsAdded"):e.$t("title.noFiltersAdded")),3)):h("",!0),U(e.$slots,"default",{},void 0,!0),e.isLockedView&&!l(a)?(u(),k(x,{key:5,class:L(["-mb-2 -ml-4",{"mt-2":!l(i)||!l(i).length}]),onOnOpen:p[5]||(p[5]=A=>r())},null,8,["class"])):h("",!0)],2)}}}),ce=Object.assign(ve(dl,[["__scopeId","data-v-3c67eb9e"]]),{__name:"SmartsheetToolbarFilterGroup"}),sl={class:"bg-gray-100 pb-8 overflow-y-auto"},al={class:"flex gap-4"},rl={class:"flex flex-col gap-2"},ul={class:"flex-col gap-2"},pl={class:"flex-col space-y-2"},fl={class:"flex-col flex-grow space-y-2"},ml={class:"min-w-[300px] max-h-[200px] overflow-wrap bg-gray-300 overflow-y-scroll"},wl={class:"min-w-[300px] max-h-[200px] overflow-wrap bg-gray-300 overflow-y-scroll"},vl={class:"p-4"},cl={class:"p-4"},kl={class:"p-4"},bl="mtWA9ZXvsuh",Rl=te({__name:"index",setup(J){const{metas:D}=_e(),s=q({}),b=Ae(async()=>!D.value||Object.keys(D.value).length===0?[]:await Ge({rootMeta:s.value,getMeta:async a=>D.value[a]})),n=q({}),y=q([]),o=q({index:0,nestedLevel:0,disabled:!1,isLockedView:!1,isFullWidth:!1,isLogicalOpChangeAllowed:!1,showNullAndEmptyInFilter:!1,dbClientType:Be.PG,actionBtnType:"text",webHook:!1,link:!1,isForm:!1,isPublic:!1,filterPerViewLimit:50,filtersCount:0,queryFilter:!1,disableAddNewFilter:!1,handler:{addFilter:async a=>{const i={tmp_id:Math.random().toString(36).substring(2,15),fk_column_id:b.value[1].id,comparison_op:"eq",is_group:!1,logical_op:"and",fk_parent_id:a.fk_parent_id,tmp_fk_parent_id:a.tmp_fk_parent_id,parent:n.value[a.tmp_fk_parent_id]};n.value[i.tmp_id]=i,a.tmp_fk_parent_id?n.value[a.tmp_fk_parent_id].children.push(i):y.value.push(i)},addFilterGroup:async a=>{const i={tmp_id:Math.random().toString(36).substring(2,15),is_group:!0,logical_op:"and",children:[],fk_parent_id:a.fk_parent_id,tmp_fk_parent_id:a.tmp_fk_parent_id,parent:n.value[a.tmp_fk_parent_id]};n.value[i.tmp_id]=i,a.tmp_fk_parent_id?n.value[a.tmp_fk_parent_id].children.push(i):y.value.push(i)},deleteFilter:async a=>{var i,t;a.filter.parent?a.filter.parent.children=(i=a.filter.parent.children)==null?void 0:i.filter(v=>{var V;return v.tmp_id!==((V=a.filter)==null?void 0:V.tmp_id)}):(t=a.filter)!=null&&t.tmp_fk_parent_id||(y.value=y.value.filter(v=>v.tmp_id!==a.filter.tmp_id))},rowChange:async a=>{a.filter[a.type]=a.value;const i=b.value.find(t=>t.id===a.filter.fk_column_id);i&&a.type==="fk_column_id"&&De({column:i,filter:a.filter,showNullAndEmptyInFilter:o.showNullAndEmptyInFilter})}}}),F=q({}),R=q({}),I=a=>{F.value=a},O=a=>{R.value=a};return Ne(async()=>{await We(),s.value=D.value[bl]}),(a,i)=>{const t=Me,v=fe,V=we,N=Ee,G=ce;return u(),k(Re,null,{default:f(()=>[d("div",sl,[m(N,null,{default:f(()=>[i[45]||(i[45]=d("h4",null,"Simple",-1)),d("div",al,[d("div",rl,[d("div",null,[m(t,{checked:l(o).disabled,"onUpdate:checked":i[0]||(i[0]=r=>l(o).disabled=r)},{default:f(()=>i[20]||(i[20]=[w("disabled")])),_:1,__:[20]},8,["checked"])]),d("div",null,[m(t,{checked:l(o).isLogicalOpChangeAllowed,"onUpdate:checked":i[1]||(i[1]=r=>l(o).isLogicalOpChangeAllowed=r)},{default:f(()=>i[21]||(i[21]=[w("isLogicalOpChangeAllowed")])),_:1,__:[21]},8,["checked"]),i[22]||(i[22]=d("br",null,null,-1))]),d("div",null,[m(t,{checked:l(o).isLockedView,"onUpdate:checked":i[2]||(i[2]=r=>l(o).isLockedView=r)},{default:f(()=>i[23]||(i[23]=[w("isLockedView")])),_:1,__:[23]},8,["checked"])]),d("div",null,[m(t,{checked:l(o).showNullAndEmptyInFilter,"onUpdate:checked":i[3]||(i[3]=r=>l(o).showNullAndEmptyInFilter=r)},{default:f(()=>i[24]||(i[24]=[w("showNullAndEmptyInFilter")])),_:1,__:[24]},8,["checked"])]),d("div",null,[m(t,{checked:l(o).isFullWidth,"onUpdate:checked":i[4]||(i[4]=r=>l(o).isFullWidth=r)},{default:f(()=>i[25]||(i[25]=[w("isFullWidth")])),_:1,__:[25]},8,["checked"])]),d("div",null,[m(t,{checked:l(o).webHook,"onUpdate:checked":i[5]||(i[5]=r=>l(o).webHook=r)},{default:f(()=>i[26]||(i[26]=[w("webHook")])),_:1,__:[26]},8,["checked"])]),d("div",null,[m(t,{checked:l(o).link,"onUpdate:checked":i[6]||(i[6]=r=>l(o).link=r)},{default:f(()=>i[27]||(i[27]=[w("link")])),_:1,__:[27]},8,["checked"])]),d("div",null,[m(t,{checked:l(o).isForm,"onUpdate:checked":i[7]||(i[7]=r=>l(o).isForm=r)},{default:f(()=>i[28]||(i[28]=[w("isForm")])),_:1,__:[28]},8,["checked"])]),d("div",null,[m(t,{checked:l(o).isPublic,"onUpdate:checked":i[8]||(i[8]=r=>l(o).isPublic=r)},{default:f(()=>i[29]||(i[29]=[w("isPublic")])),_:1,__:[29]},8,["checked"])]),d("div",null,[m(t,{checked:l(o).queryFilter,"onUpdate:checked":i[9]||(i[9]=r=>l(o).queryFilter=r)},{default:f(()=>i[30]||(i[30]=[w("queryFilter")])),_:1,__:[30]},8,["checked"])]),d("div",null,[m(t,{checked:l(o).disableAddNewFilter,"onUpdate:checked":i[10]||(i[10]=r=>l(o).disableAddNewFilter=r)},{default:f(()=>i[31]||(i[31]=[w("disableAddNewFilter")])),_:1,__:[31]},8,["checked"])])]),d("div",ul,[d("div",pl,[d("div",null,[i[32]||(i[32]=w("dbClientType: ")),m(v,{value:l(o).dbClientType,"onUpdate:value":i[11]||(i[11]=r=>l(o).dbClientType=r)},null,8,["value"])]),d("div",null,[i[35]||(i[35]=w(" actionBtnType: ")),m(v,{value:l(o).actionBtnType,"onUpdate:value":i[12]||(i[12]=r=>l(o).actionBtnType=r)},{default:f(()=>[m(V,{value:"text"},{default:f(()=>i[33]||(i[33]=[w(" Text ")])),_:1,__:[33]}),m(V,{value:"secondary"},{default:f(()=>i[34]||(i[34]=[w(" Secondary ")])),_:1,__:[34]})]),_:1},8,["value"])]),d("div",null,[i[36]||(i[36]=w("Index: ")),j(d("input",{"onUpdate:modelValue":i[13]||(i[13]=r=>l(o).index=r),type:"number",class:"text-xs p-1 border-gray-200"},null,512),[[ee,l(o).index]]),i[37]||(i[37]=d("br",null,null,-1))]),d("div",null,[i[38]||(i[38]=w(" NestedLevel: ")),j(d("input",{"onUpdate:modelValue":i[14]||(i[14]=r=>l(o).nestedLevel=r),type:"number",class:"text-xs p-1 border-gray-200"},null,512),[[ee,l(o).nestedLevel]]),i[39]||(i[39]=d("br",null,null,-1))]),d("div",null,[i[40]||(i[40]=w(" filterPerViewLimit: ")),j(d("input",{"onUpdate:modelValue":i[15]||(i[15]=r=>l(o).filterPerViewLimit=r),type:"number",class:"text-xs p-1 border-gray-200"},null,512),[[ee,l(o).filterPerViewLimit]]),i[41]||(i[41]=d("br",null,null,-1))]),d("div",null,[i[42]||(i[42]=w(" filtersCount: ")),j(d("input",{"onUpdate:modelValue":i[16]||(i[16]=r=>l(o).filtersCount=r),type:"number",class:"text-xs p-1 border-gray-200"},null,512),[[ee,l(o).filtersCount]]),i[43]||(i[43]=d("br",null,null,-1))])])]),d("div",fl,[i[44]||(i[44]=w(" Last event: ")),d("div",ml,[d("pre",null,_(JSON.stringify(l(R),null,2)),1)]),d("div",wl,[d("pre",null,_(JSON.stringify(l(F),null,2)),1)])])])]),_:1,__:[45]}),d("div",vl,[m(G,{modelValue:l(y),"onUpdate:modelValue":i[17]||(i[17]=r=>ie(y)?y.value=r:null),index:l(o).index,"nested-level":l(o).nestedLevel,columns:l(b),disabled:l(o).disabled,"is-locked-view":l(o).isLockedView,"is-logical-op-change-allowed":l(o).isLogicalOpChangeAllowed,"is-full-width":l(o).isFullWidth,"action-btn-type":l(o).actionBtnType,"web-hook":l(o).webHook,link:l(o).link,"is-form":l(o).isForm,"is-public":l(o).isPublic,"filter-per-view-limit":l(o).filterPerViewLimit,"disable-add-new-filter":l(o).disableAddNewFilter,"filters-count":l(o).filtersCount,"query-filter":l(o).queryFilter,onChange:I,onRowChange:O},null,8,["modelValue","index","nested-level","columns","disabled","is-locked-view","is-logical-op-change-allowed","is-full-width","action-btn-type","web-hook","link","is-form","is-public","filter-per-view-limit","disable-add-new-filter","filters-count","query-filter"])]),m(N,null,{default:f(()=>i[46]||(i[46]=[d("h4",null,"With handler",-1)])),_:1,__:[46]}),d("div",cl,[m(G,{modelValue:l(y),"onUpdate:modelValue":i[18]||(i[18]=r=>ie(y)?y.value=r:null),index:l(o).index,"nested-level":l(o).nestedLevel,columns:l(b),disabled:l(o).disabled,"is-locked-view":l(o).isLockedView,"is-logical-op-change-allowed":l(o).isLogicalOpChangeAllowed,"is-full-width":l(o).isFullWidth,"action-btn-type":l(o).actionBtnType,"web-hook":l(o).webHook,link:l(o).link,"is-form":l(o).isForm,"is-public":l(o).isPublic,"filter-per-view-limit":l(o).filterPerViewLimit,"disable-add-new-filter":l(o).disableAddNewFilter,"filters-count":l(o).filtersCount,"query-filter":l(o).queryFilter,handler:l(o).handler,onChange:I,onRowChange:O},null,8,["modelValue","index","nested-level","columns","disabled","is-locked-view","is-logical-op-change-allowed","is-full-width","action-btn-type","web-hook","link","is-form","is-public","filter-per-view-limit","disable-add-new-filter","filters-count","query-filter","handler"])]),m(N,null,{default:f(()=>i[47]||(i[47]=[d("h4",null,"Custom toolbar (root only)",-1)])),_:1,__:[47]}),d("div",kl,[m(G,{modelValue:l(y),"onUpdate:modelValue":i[19]||(i[19]=r=>ie(y)?y.value=r:null),index:l(o).index,"nested-level":l(o).nestedLevel,columns:l(b),disabled:l(o).disabled,"is-locked-view":l(o).isLockedView,"is-logical-op-change-allowed":l(o).isLogicalOpChangeAllowed,"is-full-width":l(o).isFullWidth,"action-btn-type":l(o).actionBtnType,"web-hook":l(o).webHook,link:l(o).link,"is-form":l(o).isForm,"is-public":l(o).isPublic,"filter-per-view-limit":l(o).filterPerViewLimit,"disable-add-new-filter":l(o).disableAddNewFilter,"filters-count":l(o).filtersCount,"query-filter":l(o).queryFilter,onChange:I,onRowChange:O},{"root-header":f(()=>i[48]||(i[48]=[d("div",null,"Hello",-1)])),_:1},8,["modelValue","index","nested-level","columns","disabled","is-locked-view","is-logical-op-change-allowed","is-full-width","action-btn-type","web-hook","link","is-form","is-public","filter-per-view-limit","disable-add-new-filter","filters-count","query-filter"])])])]),_:1})}}});export{Rl as default};
