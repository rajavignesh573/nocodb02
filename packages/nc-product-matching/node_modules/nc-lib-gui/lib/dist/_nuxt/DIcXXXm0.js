import{ca as E,r as e,n as f,e as G,J as F,a8 as Q,as as q,aG as B,g as H,ac as J,c as h,o as l,a as m,b as c,aH as K,L as s,Q as P,w as u,ag as O,bV as X,ad as R,K as Y,t as y,aA as Z,I as C,d as ee,M as j,b3 as se,_ as oe,O as te,y as ne}from"./DRA9KN5F.js";import{_ as ae}from"./C2UaKEE0.js";import{_ as ce}from"./Dv0nYk-Y.js";import{_ as re}from"./C_VN1MCC.js";import{u as ie}from"./DgFxZClV.js";import{u as le}from"./mXY_vhPu.js";const de={type:[],workspaceId:void 0,baseId:void 0,sourceId:void 0,user:void 0,startDate:void 0,endDate:void 0,dateRangeLabel:void 0,orderBy:{created_at:"desc",user:void 0}},ue=E("auditsStore",()=>{const g=e(!1),o=e(null),_=e(!1),p=e(null),v=e(de),r=e(!1),t=f(()=>[]),b=f(()=>new Map),d=e(new Map),w=f(()=>Array.from(d.value.values())),k=e(!1),I=()=>{},S=async(...x)=>{},a=e(!1),n=async()=>{},U=e(!1);return{bases:b,basesList:t,auditCollaborators:w,collaboratorsMap:d,audits:o,isRowExpanded:_,selectedAudit:p,auditLogsQuery:v,isLoadingAudits:k,handleReset:I,loadAudits:S,isLoadingBases:a,isLoadingUsers:U,loadBasesForWorkspace:n,loadUsersForWorkspace:async(...x)=>{},onInit:async()=>{},getUserName:(...x)=>{},loadActionWorkspaceLogsOnly:g,hasMoreAudits:r}}),_e={class:"flex flex-col border-gray-200 gap-y-1"},pe={class:"flex items-center justify-between"},me=["data-email"],fe={class:"flex flex-col justify-center py-1 px-3 gap-x-2 text-gray-700 rounded-lg min-h-8 text-small leading-[18px]"},ge={key:0,class:"capitalize text-nc-content-gray font-bold"},ve={class:"flex gap-2 items-center"},be={class:"menu-btn"},xe=G({__name:"UserInfo",setup(g){const{user:o,signOut:_}=F();ie();const{leftSidebarState:p}=Q(le()),v=ue(),r=f(()=>{var a,n;return(n=(a=o.value)==null?void 0:a.display_name)==null?void 0:n.trim()}),t=e(!1),b=e(!1),d=e(!1),{isUIAllowed:w}=q(),k=async()=>{var a;d.value=!0;try{const n=!!((a=o==null?void 0:o.value)!=null&&a.sso_client_id);await _({redirectToSignin:!0,signinUrl:n?"/sso":"/signin"})}catch(n){console.error(n)}finally{d.value=!1}};B(t,()=>{b.value&&(b.value=!1)}),B(p,()=>{p.value==="peekCloseEnd"&&(t.value=!1)});const I=e(!1);H(()=>{I.value=!0});const S=f(()=>w("superAdminSetup")?"/account/setup":"/account/profile");return(a,n)=>{const U=X,M=Z,A=j,L=ae,x=ce,V=se,W=re,z=K,$=J("e");return l(),h("div",_e,[m("div",pe,[c(z,{visible:s(t),"onUpdate:visible":n[0]||(n[0]=i=>P(t)?t.value=i:null),placement:"topLeft","overlay-class-name":"!min-w-64"},{overlay:u(()=>[c(W,{variant:"small"},{default:u(()=>{var i,D,N,T;return[m("div",fe,[(i=s(r))!=null&&i.trim()?(l(),h("div",ge,y(s(r)),1)):Y("",!0),m("div",{class:O({"text-xs text-nc-content-gray-muted":(D=s(r))==null?void 0:D.trim(),"text-nc-content-gray font-semibold":!((N=s(r))!=null&&N.trim())})},y((T=s(o))==null?void 0:T.email),3)]),c(M),R((l(),C(x,{class:"!no-underline",to:s(S),onClick:s(v).handleReset},{default:u(()=>[c(L,null,{default:u(()=>[c(A,{icon:"ncSettings",class:"menu-icon"}),ee(" "+y(a.$t("title.accountSettings")),1)]),_:1})]),_:1},8,["to","onClick"])),[[$,["c:user:settings"]]]),c(L,{"data-testid":"nc-sidebar-user-logout",onClick:k},{default:u(()=>[R((l(),h("div",ve,[s(d)?(l(),C(V,{key:0,class:"!ml-0.5 !mr-0.5 !max-h-4.5 !-mt-0.5"})):(l(),C(A,{key:1,icon:"signout",class:"menu-icon"})),m("span",be,y(a.$t("general.logout")),1)])),[[$,["c:user:logout"]]])]),_:1})]}),_:1})]),default:u(()=>{var i;return[m("div",{class:O(["nc-user-icon-wrapper border-1 w-8 h-8 flex-none rounded-full overflow-hidden transition-all duration-300 cursor-pointer",{"border-nc-gray-medium":!s(t),"active border-primary shadow-selected":s(t)}]),"data-testid":"nc-sidebar-userinfo","data-email":(i=s(o))==null?void 0:i.email},[c(U,{user:s(o),size:"medium",class:"!w-full !h-full !min-w-full cursor-pointer"},null,8,["user"])],10,me)]}),_:1},8,["visible"])])])}}}),ye=Object.assign(oe(xe,[["__scopeId","data-v-5a623ca6"]]),{__name:"DashboardTopbarUserInfo"}),he={class:"flex items-center justify-between w-full border-b-1 border-nc-gray-medium py-2 px-4 h-[56px]"},we=G({__name:"index",props:{workspaceId:{}},setup(g){const o=g,_=()=>{o.workspaceId&&ne(`/${o.workspaceId}/settings`)};return(p,v)=>{const r=j,t=ye;return l(),h("div",he,[c(r,{icon:"nocodbSquarePuck",class:"w-8 h-8 cursor-pointer",onClick:te(_,["stop"])}),c(t)])}}}),Ce=Object.assign(we,{__name:"DashboardTopbar"});export{Ce as _,ue as u};
