const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BALLsGq5.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./DCm6TF8M.js","./Bj4kMpzI.js","./CbSESqy_.js","./Bxzk9hCO.js","./CbX26EBz.js","./TimeSelector.DAR2lbHN.css","./Bm6QmuXP.js","./CkpISeXq.js","./index.N-A1gxk9.css","./zMMvJhqz.js","./FilterInput.7KjqjE1F.css","./CI3EriLB.js","./ytmFgNfN.js","./Pagination.Cmvjwryu.css","./gAYHr7Gr.js","./DkDj6Z7Z.js","./CQa0sIfA.js","./DxC2Oool.js","./By5RWL3d.js","./Cd4chHHL.js","./boyBAVNN.js","./B94p8ToD.js","./DfIS_byq.js","./BVqTF1QK.js","./DP83Cqnl.js","./CNwEZGnv.js","./DlXIlcns.js","./Ce4xoeky.js","./VirtualCell.6f0pX0MN.css"])))=>i.map(i=>d[i]);
import{e as le,G as o,fO as ie,dM as re,gf as ue,r as u,kL as pe,kM as me,kn as ce,g6 as fe,ef as ve,kk as de,j1 as _e,Y as B,iZ as Ie,j2 as we,gz as xe,gx as ye,mj as Ce,iw as ge,gA as be,as as je,ki as ke,n as k,aG as E,g as Ee,iU as Re,kN as D,bz as Te,c as K,o as w,b as N,w as $,a as F,K as R,ag as T,L as t,I as S,a3 as Le,O as G,M as Ae,aX as X,bw as Ve,hL as he,a_ as Y,_ as Oe}from"./DRA9KN5F.js";import{_ as Me}from"./DAm3lfXS.js";import{a as Pe}from"./B94p8ToD.js";import{u as Ue}from"./BALLsGq5.js";import{u as ze}from"./CbX26EBz.js";import"./YYodiGXA.js";import"./DkDj6Z7Z.js";import"./gAYHr7Gr.js";import"./Cd4chHHL.js";import"./boyBAVNN.js";import"./DCm6TF8M.js";import"./Bj4kMpzI.js";import"./CbSESqy_.js";import"./Bxzk9hCO.js";import"./Bm6QmuXP.js";import"./CkpISeXq.js";import"./zMMvJhqz.js";import"./CI3EriLB.js";import"./ytmFgNfN.js";import"./CQa0sIfA.js";import"./DxC2Oool.js";import"./By5RWL3d.js";import"./DfIS_byq.js";import"./BVqTF1QK.js";import"./DP83Cqnl.js";import"./CNwEZGnv.js";import"./DlXIlcns.js";import"./Ce4xoeky.js";const Be=X(()=>Y(()=>import("./BALLsGq5.js").then(s=>s.U),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),import.meta.url).then(s=>s.default||s)),De=X(()=>Y(()=>import("./BALLsGq5.js").then(s=>s.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),import.meta.url).then(s=>s.default||s)),Ke={class:"nc-cell-field flex items-center w-full"},Ne=le({__name:"BelongsTo",async setup(s){let L,A;const i=o(ie),Z=o(ue,re()),p=o(pe,u(null)),q=o(me),d=o(ce),J=o(fe,u(!1)),V=o(ve,u(!1)),h=o(de,u(!1)),O=o(_e,!1),x=o(we,B(Ie)),M=o(xe,u(!1)),m=o(ye,null),c=o(Ce,null),Q=o(ge,B({})),f=o(be,null),{isUIAllowed:W}=je(),n=u(!1),v=u(!1),{state:y,isNew:C,removeLTARRef:H}=Pe(),{relatedTableMeta:ee,loadRelatedTableMeta:te,relatedTableDisplayValueProp:g,relatedTableDisplayValuePropId:P,unlink:ne}=Ue(i,q,C,Z.trigger);[L,A]=ke(()=>te()),await L,A();const _=k(()=>!J.value&&W("dataEdit")&&!h.value||V.value),l=k(()=>{var e;return p!=null&&p.value?p==null?void 0:p.value:C.value?(e=y==null?void 0:y.value)==null?void 0:e[i==null?void 0:i.value.title]:null}),U=async e=>{C.value?await H(e,i==null?void 0:i.value):await ne(e)};ze(d,e=>{switch(e.key){case"Enter":n.value=!0,e.stopPropagation();break}});const z=k(()=>{var e,a;return(a=(e=ee.value)==null?void 0:e.columns)==null?void 0:a.find(j=>j.title===g.value)});E(n,()=>{v.value=n.value}),E(v,e=>{e||(n.value=!1)},{flush:"post"}),E(l,e=>{e&&(v.value=!1)});function I(e){e.type!=="click"||!_.value||(M.value||V.value||d.value)&&(n.value=!0)}const b=e=>{if(!(!(e instanceof KeyboardEvent)||!e.target||Ve(e)||!_.value)&&he(e))return n.value?n.value=!1:n.value=!0,!0};return Ee(()=>{c==null||c.on(I),m==null||m.on(I),f==null||f.on(b),!(!_.value||!O||M.value||!x)&&Re(()=>{b(Q.event)||(D(".unlink-icon",x)?U(l.value):(D(".nc-canvas-table-editable-cell-wrapper .nc-plus.nc-action-icon",x),n.value=!0))})}),Te(()=>{c==null||c.off(I),m==null||m.off(I),f==null||f.off(b)}),(e,a)=>{const j=Me,ae=Ae,oe=Be,se=De;return w(),K("div",{class:T(["flex w-full chips-wrapper items-center",{active:t(d)}])},[N(se,{"is-open":v.value,"onUpdate:isOpen":a[5]||(a[5]=r=>v.value=r)},{overlay:$(()=>[n.value?(w(),S(oe,{key:0,modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=r=>n.value=r),column:t(z),"hide-back-btn":"",onEscape:a[4]||(a[4]=r=>v.value=!1)},null,8,["modelValue","column"])):R("",!0)]),default:$(()=>[F("div",Ke,[F("div",{class:T(["chips flex items-center flex-1 min-h-7",{"max-w-[calc(100%_-_16px)]":!t(h)}])},[t(l)&&(t(g)||t(P))?(w(),S(j,{key:0,item:t(l),value:!Array.isArray(t(l))&&typeof t(l)=="object"?t(l)[t(g)]??t(l)[t(P)]:t(l),column:t(z),"show-unlink-button":!0,onUnlink:a[0]||(a[0]=r=>U(t(l)))},null,8,["item","value","column"])):R("",!0)],2),t(_)?(w(),K("div",{key:0,class:"flex-none flex group items-center min-w-4",tabindex:"0",onKeydown:a[2]||(a[2]=Le(G(r=>n.value=!0,["stop"]),["enter"]))},[N(ae,{icon:"plus",class:T(["flex-none select-none !text-md text-gray-700 nc-action-icon nc-plus invisible group-hover:visible group-focus:visible",{"!visible !text-gray-600":t(O)&&t(d)}]),onClick:a[1]||(a[1]=G(r=>n.value=!0,["stop"]))},null,8,["class"])],32)):R("",!0)])]),_:1},8,["is-open"])],2)}}}),_t=Object.assign(Oe(Ne,[["__scopeId","data-v-f0506ea4"]]),{__name:"VirtualCellBelongsTo"});export{_t as default};
