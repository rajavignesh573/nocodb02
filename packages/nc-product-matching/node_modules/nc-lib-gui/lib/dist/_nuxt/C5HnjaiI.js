import{e_ as e,bo as s,eU as a,ch as S,r as u,u as lt,a6 as rt,al as ut,a8 as yt,f as pt,a9 as bt,a$ as ft,n as H,fk as gt,f8 as _,a4 as r,a5 as E,eQ as q,eR as z,eX as dt,fl as Et,j as h,e as St,I as It,K as Tt,L as F,o as vt,b9 as At,ag as _t}from"./DRA9KN5F.js";import{_ as L}from"./CBhmoxRW.js";import{u as mt}from"./DkDj6Z7Z.js";const V=u(!1),Rt=[{title:"labels.database",subtitle:"objects.integrationCategories.databaseSubtitle",value:e.DATABASE,isAvailable:!0},{title:"objects.integrationCategories.ai",subtitle:"objects.integrationCategories.ai",value:e.AI,isAvailable:!0},{title:"Auth Provider",subtitle:"Auth",value:e.AUTH,isAvailable:!0},{title:"objects.integrationCategories.communication",subtitle:"objects.integrationCategories.communicationSubtitle",value:e.COMMUNICATION},{title:"objects.integrationCategories.spreadSheet",subtitle:"objects.integrationCategories.spreadSheetSubtitle",value:e.SPREAD_SHEET,teleEventName:e.OTHERS},{title:"objects.integrationCategories.projectManagement",subtitle:"objects.integrationCategories.projectManagementSubtitle",value:e.PROJECT_MANAGEMENT},{title:"objects.integrationCategories.ticketing",subtitle:"objects.integrationCategories.ticketingSubtitle",value:e.TICKETING},{title:"objects.integrationCategories.crm",subtitle:"objects.integrationCategories.crmSubtitle",value:e.CRM},{title:"objects.integrationCategories.marketing",subtitle:"objects.integrationCategories.marketingSubtitle",value:e.MARKETING},{title:"objects.integrationCategories.ats",subtitle:"objects.integrationCategories.atsSubtitle",value:e.ATS},{title:"objects.integrationCategories.development",subtitle:"objects.integrationCategories.developmentSubtitle",value:e.DEVELOPMENT},{title:"objects.integrationCategories.finance",subtitle:"objects.integrationCategories.financeSubtitle",value:e.FINANCE},{title:"labels.storage",subtitle:"objects.integrationCategories.storageSubtitle",value:e.STORAGE},{title:"objects.integrationCategories.others",subtitle:"objects.integrationCategories.othersSubtitle",value:e.OTHERS}],j=[{title:"objects.syncData.nocodb",sub_type:a.NOCODB,icon:s.nocodbPg,type:e.DATABASE,isAvailable:!0,iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.mysql",sub_type:S.MYSQL,icon:s.mysql,type:e.DATABASE,isAvailable:!0,iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.postgreSQL",sub_type:S.PG,icon:s.postgreSql,type:e.DATABASE,isAvailable:!0},{title:"objects.syncData.sqlite",sub_type:S.SQLITE,icon:s.sqlServer,type:e.DATABASE,isAvailable:!0,isOssOnly:!0},{title:"objects.syncData.snowflake",sub_type:S.SNOWFLAKE,icon:s.snowflake,type:e.DATABASE},{title:"objects.syncData.dataBricks",sub_type:S.DATABRICKS,icon:s.dataBricks,type:e.DATABASE},{title:"objects.syncData.oracle",sub_type:a.ORACLE,icon:s.oracle,type:e.DATABASE},{title:"general.slack",sub_type:a.SLACK,icon:s.slack,type:e.COMMUNICATION,iconStyle:{width:"32px",height:"32px"}},{title:"general.discord",sub_type:a.DISCORD,icon:s.ncDiscord,type:e.COMMUNICATION,iconStyle:{width:"32px",height:"32px"}},{title:"general.twilio",sub_type:a.TWILLO,icon:s.twilio,type:e.COMMUNICATION,iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.microsoftOutlook",sub_type:a.MICROSOFT_OUTLOOK,icon:s.microsoftOutlook,type:e.COMMUNICATION},{title:"general.microsoftTeams",sub_type:a.MICROSOFT_TEAMS,icon:s.microsoftTeams,type:e.COMMUNICATION,iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.gmail",sub_type:a.GMAIL,icon:s.gmail,type:e.COMMUNICATION},{title:"objects.syncData.telegram",sub_type:a.TELEGRAM,icon:s.telegram,type:e.COMMUNICATION},{title:"objects.syncData.whatsapp",sub_type:a.WHATSAPP,icon:s.whatsappSolid,type:e.COMMUNICATION,iconStyle:{width:"32px",height:"32px"}},{title:"objects.syncData.asana",sub_type:a.ASANA,icon:s.asana,type:e.PROJECT_MANAGEMENT},{title:"objects.syncData.jira",sub_type:a.JIRA,icon:s.jira,type:e.PROJECT_MANAGEMENT},{title:"objects.syncData.miro",sub_type:a.MIRO,icon:s.miro,type:e.PROJECT_MANAGEMENT},{title:"objects.syncData.trello",sub_type:a.TRELLO,icon:s.trello,type:e.PROJECT_MANAGEMENT},{title:"objects.syncData.salesforce",sub_type:a.SALESFORCE,icon:s.salesforce,type:e.CRM},{title:"objects.syncData.hubspot",sub_type:a.HUBSPOT,icon:s.hubspot,type:e.CRM},{title:"objects.syncData.pipedrive",sub_type:a.PIPEDRIVE,icon:s.pipedrive,type:e.CRM},{title:"objects.syncData.microsoftDynamics365",sub_type:a.MICROSOFT_DYNAMICS_365,icon:s.microsoftDynamics365,type:e.CRM},{title:"objects.syncData.zohoCrm",sub_type:a.ZOHO_CRM,icon:s.zohoCrm,type:e.CRM},{title:"objects.syncData.hubspot",sub_type:a.HUBSPOT,icon:s.hubspot,type:e.MARKETING},{title:"objects.syncData.mailchimp",sub_type:a.MAILCHIMP,icon:s.mailchimp,type:e.MARKETING},{title:"objects.syncData.surveyMonkey",sub_type:a.SURVEYMONKEY,icon:s.surveyMonkey,type:e.MARKETING},{title:"objects.syncData.typeform",sub_type:a.TYPEFORM,icon:s.typeform,type:e.MARKETING},{title:"objects.syncData.workday",sub_type:a.WORKDAY,icon:s.workday,type:e.ATS},{title:"objects.syncData.greenhouse",sub_type:a.GREENHOUSE,icon:s.greenhouse,type:e.ATS},{title:"objects.syncData.lever",sub_type:a.LEVER,icon:s.lever,type:e.ATS},{title:"objects.syncData.bitbucket",sub_type:a.BITBUCKET,icon:s.bitBucket,type:e.DEVELOPMENT},{title:"objects.syncData.github",sub_type:a.GITHUB,icon:s.githubSolid,type:e.DEVELOPMENT},{title:"objects.syncData.gitlab",sub_type:a.GITLAB,icon:s.gitlab,type:e.DEVELOPMENT},{title:"objects.syncData.stripe",sub_type:a.STRIPE,icon:s.stripe,type:e.FINANCE},{title:"objects.syncData.quickbooks",sub_type:a.QUICKBOOKS,icon:s.quickbooks,type:e.FINANCE},{title:"objects.syncData.freshdesk",sub_type:a.FRESHDESK,icon:s.freshdesk,type:e.TICKETING},{title:"objects.syncData.intercom",sub_type:a.INTERCOM,icon:s.intercom,type:e.TICKETING},{title:"objects.syncData.zendesk",sub_type:a.ZENDESK,icon:s.zendesk,type:e.TICKETING},{title:"objects.syncData.salesforce",subtitle:"objects.syncData.serviceCloud",sub_type:a.SALESFORCE_SERVICE_CLOUD,icon:s.salesforce,type:e.TICKETING},{title:"objects.syncData.hubspot",subtitle:"objects.syncData.serviceHub",sub_type:a.HUBSPOT_SERVICE_HUB,icon:s.hubspot,type:e.TICKETING},{title:"objects.syncData.box",sub_type:a.BOX,icon:s.box,type:e.STORAGE},{title:"objects.syncData.dropbox",sub_type:a.DROPBOX,icon:s.dropbox,type:e.STORAGE},{title:"objects.syncData.googleDrive",sub_type:a.GOOGLE_DRIVE,icon:s.googleDrive,type:e.STORAGE},{title:"objects.syncData.appleNumbers",sub_type:a.APPLE_NUMBERS,icon:s.appleSolid,type:e.SPREAD_SHEET},{title:"objects.syncData.microsoftExcel",sub_type:a.MICROSOFT_EXCEL,icon:s.microsoftExcel,type:e.SPREAD_SHEET},{title:"objects.syncData.googleSheets",sub_type:a.GOOGLE_SHEETS,icon:s.googleSheet,type:e.SPREAD_SHEET}];j.reduce((l,p)=>(l[p.sub_type]=p,l),{});var W=(l=>(l[l.LIST=0]="LIST",l[l.ADD=1]="ADD",l[l.EDIT=2]="EDIT",l))(W||{});const A={PostgreSQL:S.PG,MySQL:S.MYSQL,SQLITE:S.SQLITE,OpenAI:a.OPENAI};function Ct(l){const p={payload:{}};switch(l){case A.PostgreSQL:return{...p,type:A.PostgreSQL,title:"PostgreSQL",logo:h(L,{"source-type":"pg",class:"logo"})};case A.MySQL:return{...p,type:A.MySQL,title:"MySQL",logo:h(L,{"source-type":"mysql2",class:"logo"})};case A.SQLITE:return{...p,type:A.SQLITE,title:"SQLite",logo:h(L,{"source-type":"sqlite3",class:"logo"})}}}const m={},[Dt,Ot]=mt(()=>{const l=lt(),p=l.currentRoute,{api:b}=rt(),y=u(null),I=u(null),T=u(null),Y=ut(),{activeWorkspaceId:k}=yt(Y),O=u([]),N=u(""),$=u([]),g=u({page:1,pageSize:25,totalRows:0}),G=u(),C=u(!1),P=gt(Symbol("integrationStore")),{$api:w,$e:d}=pt(),{t:B}=bt(),{aiIntegrations:v}=ft(),x=u(!1),M=u(0),f=u({isOpen:!1,msg:"",isLoading:!1}),R=u({isOpen:!1,title:B("msg.success.connectionAdded"),connectionTitle:"",description:B("msg.success.connectionAddedDesc")}),U=H({get(){var t;return((t=p.value.query)==null?void 0:t.tab)??"integrations"},set(t){f.value.isOpen&&(f.value.isOpen=!1),l.push({query:{...p.value.query,tab:t}})}}),D=async(t=!1,i=void 0,o=g.value.page,c=g.value.pageSize)=>{try{if(!k.value)return;C.value=!0,!t&&c*(o-1)>g.value.totalRows&&(g.value.page=1,o=1);const{list:n,pageInfo:ct}=await b.integration.list(t?{type:_.Database,includeDatabaseInfo:!0,baseId:i}:{offset:c*(o-1),limit:c,...N.value.trim()?{query:N.value}:{}});O.value=n,t||(g.value.totalRows=ct.totalRows??0)}catch(n){await r.error(await E(n)),O.value=[],g.value.totalRows=0,g.value.page=1}finally{C.value=!1}},J=async t=>{if(I.value=t.dynamic?t:Ct(t.sub_type),T.value=t,t.dynamic===!0&&!(t.sub_type in m)){const i=await w.integrations.info(t.type,t.sub_type);i!=null&&i.form&&(m[t.sub_type]=i.form,T.value.form=i.form)}else t.dynamic===!0&&(T.value.form=m[t.sub_type]);y.value=1,d("c:integration:add")},X=async(t,i=!1)=>{var o;if(t!=null&&t.id){d("a:integration:delete");try{return await b.integration.delete(t.id,{query:i?{force:"true"}:{}}),t.type===_.Ai&&(v.value=v.value.filter(c=>c.id!==t.id)),await D(),!0}catch(c){const n=await q(c);if(n.error===z.INTEGRATION_NOT_FOUND){await r.error((o=n.message)==null?void 0:o.replace(t.id,t.title)),window.location.reload();return}await r.error(await E(c))}G.value=null}},Z=async t=>{if(t.id){d("a:integration:update");try{await b.integration.update(t.id,t),t.type===_.Ai&&(v.value=v.value.map(i=>(i.id===t.id&&(i.title=t.title),i))),await D(),y.value=null,I.value=null,await r.success(`Connection "${t.title}" updated successfully`)}catch(i){await r.error(await E(i))}}},tt=async t=>{if(t.id){d("a:integration:set-default");try{await b.integration.setDefault(t.id),t.type===_.Ai&&(v.value=v.value.map(i=>(i.id===t.id?i.is_default=!0:i.is_default=!1,i))),await D(),y.value=null,I.value=null,await r.success(`Connection "${t.title}" set as default successfully`)}catch(i){await r.error(await E(i))}}},K=async(t,i="create",o=!1,c=void 0)=>{d(i==="create"?"a:integration:create":"a:integration:duplicate");try{const n=await b.integration.create(t);n&&(n!=null&&n.id)&&(o||O.value.push(n),n.type===_.Ai&&v.value.push({id:n.id,title:n.title,is_default:n.is_default,type:n.type,sub_type:n.sub_type})),await D(o,c),i==="create"&&P.emit(dt.INTEGRATION_ADD,n),y.value=null,I.value=null,n!=null&&n.title&&i==="create"&&(x.value?(U.value="connections",n.type===_.Database&&(R.value.connectionTitle=n.title??"",R.value.isOpen=!0)):await r.success(`Connection "${n.title}" created successfully`))}catch(n){await r.error(await E(n))}},et=async t=>{if(t!=null&&t.id)try{C.value=!0,K({title:t.title,config:{},type:t.type,copy_from_id:t.id},"duplicate")}catch(i){await r.error(await E(i))}finally{C.value=!1}},Q=async(t,i)=>{var o;if(t!=null&&t.id)try{return await b.integration.read(t.id,{...i||{}})}catch(c){const n=await q(c);if(n.error===z.INTEGRATION_NOT_FOUND){await r.error((o=n.message)==null?void 0:o.replace(t.id,t.title)),window.location.reload();return}await r.error(await E(c))}},st=async t=>{if(t!=null&&t.id)try{const i=await Q(t,{includeConfig:!0});I.value=i;const o=j.find(c=>c.type===t.type&&c.sub_type===t.sub_type);if(T.value=o,o.dynamic===!0&&!(o.sub_type in m)){const c=await w.integrations.info(o.type,o.sub_type);c!=null&&c.form&&(m[o.sub_type]=c.form,T.value.form=c.form)}else o.dynamic===!0&&(T.value.form=m[o.sub_type]);y.value=2,d("c:integration:edit")}catch{}},at=async t=>{if(t!=null&&t.trim()){f.value.isLoading=!0;try{d("a:integration:new-request",{value:f.value.msg}),f.value.isLoading=!1,f.value.isOpen=!1,f.value.msg="",await r.success("Your request has been successfully submitted")}catch(i){f.value.isLoading=!1,await r.error(await E(i))}}},it=async t=>{if(!k.value)return;const{list:i}=await b.integration.list({type:t});return i},ot=async()=>{var i;if(V.value)return;V.value=!0;const t=await w.integrations.list();t.sort((o,c)=>(o.manifest.order??1/0)-(c.manifest.order??1/0));for(const o of t){let c;o.manifest.icon?o.manifest.icon in s?c=s[o.manifest.icon]:Et(o.manifest.icon)&&(c=h("img",{src:o.manifest.icon,alt:o.manifest.title||o.sub_type})):c=s.puzzle;const n={title:o.manifest.title||o.sub_type,sub_type:o.sub_type,icon:c,type:o.type,isAvailable:!0,dynamic:!0,hidden:((i=o.manifest)==null?void 0:i.hidden)??!1};j.push(n),M.value++}},nt=H(()=>{M.value;const t={};for(const i of j)t[i.sub_type]=i.icon;return t});return{IntegrationsPageMode:W,integrationType:A,pageMode:y,activeIntegration:I,activeIntegrationItem:T,integrationsRefreshKey:M,integrations:O,isLoadingIntegrations:C,deleteConfirmText:G,eventBus:P,requestIntegration:f,integrationPaginationData:g,activeViewTab:U,isFromIntegrationPage:x,successConfirmModal:R,searchQuery:N,integrationsCategoryFilter:$,addIntegration:J,loadIntegrations:D,deleteIntegration:X,updateIntegration:Z,saveIntegration:K,editIntegration:st,duplicateIntegration:et,saveIntegrationRequest:at,getIntegration:Q,setDefaultIntegration:tt,integrationsIconMap:nt,listIntegrationByType:it,loadDynamicIntegrations:ot}},"integrations-store");function ht(){const l=Ot();return l??Dt()}const jt=St({__name:"IntegrationIcon",props:{type:{},size:{default:"sm"}},setup(l){const p=l,{integrationsIconMap:b}=ht();return(y,I)=>F(b)[p.type]?(vt(),It(At(F(b)[p.type]),{key:0,class:_t(["stroke-transparent flex-none",{"w-3.5 h-3.5":y.size==="sx","w-4 h-4":y.size==="sm","w-5 h-5":y.size==="md","w-6 h-6":y.size==="lg","w-7 h-7":y.size==="xl","w-8 h-8":y.size==="xxl"}])},null,8,["class"])):Tt("",!0)}}),Lt=Object.assign(jt,{__name:"GeneralIntegrationIcon"});export{Lt as _,j as a,Dt as b,Rt as i,ht as u};
