const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Bs6RX8xD.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./2d03FuDZ.js"])))=>i.map(i=>d[i]);
import{e as j,bk as M,J as z,a6 as B,a9 as D,r as T,Y as O,hG as W,c as i,o,b as n,w as c,a as t,aX as H,L as e,t as r,X,K as u,an as k,by as J,a0 as K,ar as Y,cU as Q,d,I as Z,b9 as ee,bo as se,bH as ne,y as x,a_ as te}from"./DRA9KN5F.js";import{_ as oe}from"./Dv0nYk-Y.js";import{_ as ae,a as ie}from"./ByNyc_MM.js";import{_ as re}from"./Bv0AHyYV.js";import{u as le}from"./BcrYf4lp.js";const ce=H(()=>te(()=>import("./Bs6RX8xD.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(g=>g.default||g)),de={"data-testid":"nc-form-signin",class:"md:bg-primary bg-opacity-5 signin h-full min-h-[600px] flex flex-col justify-center items-center nc-form-signin"},ue={class:"bg-white mt-[60px] relative flex flex-col justify-center gap-2 w-full max-w-[500px] mx-auto p-8 md:rounded-lg md:border-1 md:border-gray-200 md:shadow-xl"},me={class:"prose-2xl font-bold self-center my-4"},pe={key:0,class:"self-center mb-4 bg-red-500 text-white rounded-lg w-3/4 mx-auto p-1"},_e={class:"flex items-center gap-2 justify-center"},ge={class:"break-words"},fe={class:"hidden md:block text-right"},he={class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4 justify-center"},ye={key:0,"data-testid":"nc-form-signin__submit",class:"scaling-btn bg-opacity-100",type:"submit"},be={class:"flex items-center gap-2"},ve=["href"],we={class:"flex items-center gap-2"},ke={key:2,class:"self-center flex flex-col flex-wrap gap-4 items-center mt-4 justify-center"},xe=["href"],Ie={type:"button",class:"scaling-btn bg-opacity-100"},Ue={class:"flex items-center gap-2"},$e={key:3,class:"text-end prose-sm"},Ee={key:4,class:"md:hidden"},Se=j({__name:"signin",setup(g){const f=M(),{signIn:q,appInfo:a}=z(),{api:A,isLoading:P,error:p}=B({useGlobalInstance:!0}),{t:_}=D();le("nc-left-sidebar",{hasSidebar:!1});const I=T(),m=O({email:"",password:""}),U={email:[{required:!0,message:_("msg.error.signUpRules.emailRequired")},{validator:(s,l)=>new Promise((y,b)=>{if(!(l!=null&&l.length)||W(l.trim()))return y();b(new Error(_("msg.error.signUpRules.emailInvalid")))}),message:_("msg.error.signUpRules.emailInvalid")}],password:[{required:!0,message:_("msg.error.signUpRules.passwdRequired")}]};async function C(){I.value.validate()&&(h(),A.auth.signin(m).then(async({token:s})=>{q(s),await x({path:"/",query:f.query})}))}function h(){p.value&&(p.value=null)}function R(){x({path:"/signup",query:f.query})}function $(){x({path:"/forgot-password",query:f.query})}return(s,l)=>{const y=ce,b=re,S=Y,E=K,G=Q,v=oe,L=ae,N=ie,V=X,F=ne;return o(),i("div",null,[n(F,null,{default:c(()=>[t("div",de,[t("div",ue,[n(y,{class:"color-transition hover:ring hover:ring-accent hover:ring-opacity-100",animate:e(P)},null,8,["animate"]),t("h1",me,r(s.$t("general.signIn")),1),n(V,{ref_key:"formValidator",ref:I,model:e(m),layout:"vertical","no-style":"",onFinish:C},{default:c(()=>[e(a).disableEmailAuth?u("",!0):(o(),i(k,{key:0},[n(J,{name:"layout"},{default:c(()=>[e(p)?(o(),i("div",pe,[t("div",_e,[n(b),t("div",ge,r(e(p)),1)])])):u("",!0)]),_:1}),n(E,{label:s.$t("labels.email"),name:"email",rules:U.email},{default:c(()=>[n(S,{value:e(m).email,"onUpdate:value":l[0]||(l[0]=w=>e(m).email=w),type:"email",autocomplete:"email","data-testid":"nc-form-signin__email",size:"large",placeholder:s.$t("msg.info.signUp.workEmail"),onFocus:h},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),n(E,{label:s.$t("labels.password"),name:"password",rules:U.password},{default:c(()=>[n(G,{value:e(m).password,"onUpdate:value":l[1]||(l[1]=w=>e(m).password=w),autocomplete:"current-password","data-testid":"nc-form-signin__password",size:"large",class:"password",placeholder:s.$t("msg.info.signUp.enterPassword"),onFocus:h},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),t("div",fe,[n(v,{class:"prose-sm",onClick:$},{default:c(()=>[d(r(s.$t("msg.info.signUp.forgotPassword")),1)]),_:1})])],64)),t("div",he,[e(a).disableEmailAuth?u("",!0):(o(),i("button",ye,[t("span",be,[(o(),Z(ee(("iconMap"in s?s.iconMap:e(se)).signin))),d(" "+r(s.$t("general.signIn")),1)])])),e(a).googleAuthEnabled?(o(),i("a",{key:1,href:`${e(a).ncSiteUrl}/auth/google`,class:"scaling-btn bg-opacity-100 !after:bg-white !text-primary !no-underline"},[t("span",we,[n(L),d(" "+r(s.$t("labels.signInWithProvider",{provider:"Google"})),1)])],8,ve)):u("",!0),e(a).oidcAuthEnabled?(o(),i("div",ke,[t("a",{href:`${e(a).ncSiteUrl}/auth/oidc`,class:"!text-primary !no-underline"},[t("button",Ie,[t("span",Ue,[n(N),e(a).disableEmailAuth?(o(),i(k,{key:1},[d(r(s.$t("general.signIn")),1)],64)):(o(),i(k,{key:0},[d(r(s.$t("labels.signUpWithProvider",{provider:e(a).oidcProviderName||"OpenID Connect"})),1)],64))])])],8,xe)])):u("",!0),e(a).inviteOnlySignup?u("",!0):(o(),i("div",$e,[d(r(s.$t("msg.info.signUp.dontHaveAccount"))+" ",1),n(v,{onClick:R},{default:c(()=>[d(r(s.$t("general.signUp")),1)]),_:1})])),e(a).disableEmailAuth?u("",!0):(o(),i("div",Ee,[n(v,{class:"prose-sm",onClick:$},{default:c(()=>[d(r(s.$t("msg.info.signUp.forgotPassword")),1)]),_:1})]))])]),_:1},8,["model"])])])]),_:1})])}}});export{Se as default};
