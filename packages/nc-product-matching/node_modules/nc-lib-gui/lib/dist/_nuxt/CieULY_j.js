import{e as Ne,f as lt,a8 as Z,al as Re,a7 as ct,eG as rt,r as N,fm as it,n as Ie,f8 as dt,el as B,bv as ut,g as Ue,ab as q,c as m,o as i,a as o,b as l,d as u,t as c,ar as pt,L as s,ba as _t,Q as ne,w as r,M as Be,ad as mt,K as w,ag as g,I as b,an as J,aq as Te,cf as Oe,ap as yt,eU as z,bV as ft,ah as vt,O as gt,aH as bt,N as ht,ms as xt,eH as Se,ch as Ae,aA as wt,af as kt,b3 as $t,f2 as Dt,eP as Ee,aE as Ct,P as It,a3 as Tt,a4 as Ot,a5 as St,_ as oe,as as Me,eh as At,aG as Et,fh as Mt,bM as Nt,du as Rt,db as Ut,da as Bt}from"./DRA9KN5F.js";import{_ as zt,a as Lt}from"./C9dUxAef.js";import{_ as Gt}from"./QeWwuUYP.js";import{u as jt,_ as Kt,b as Pt}from"./C5HnjaiI.js";import{_ as Wt}from"./C2UaKEE0.js";import{_ as Ft}from"./C_VN1MCC.js";import{_ as Vt}from"./ytmFgNfN.js";import{_ as Yt}from"./CBhmoxRW.js";import Qt from"./CHRPOXXy.js";import{a as se}from"./CN7ac-4_.js";import{r as X}from"./DGFEr0h-.js";import{u as qt}from"./DDmv9w84.js";import{S as Jt}from"./DlXIlcns.js";import{u as Xt}from"./mXY_vhPu.js";import"./CtCRqrd3.js";import"./boyBAVNN.js";import"./BMufqs0w.js";import"./G4Pt-Lbf.js";import"./BYKJ-MHf.js";import"./BSgyuQBI.js";import"./-iDxnmJF.js";import"./D8vl_16c.js";import"./BMPzbwPk.js";import"./DkDj6Z7Z.js";import"./gByPF8bR.js";import"./BCBMEREK.js";import"./DP83Cqnl.js";const Zt={class:"h-full flex flex-col gap-6 nc-workspace-connections nc-content-max-w mx-auto"},Ht={class:"flex flex-col justify-between gap-2 mx-1"},es={class:"text-sm font-normal text-nc-content-gray-subtle2"},ts={target:"_blank",href:"https://nocodb.com/docs/product-docs/integrations/actions-on-connection",rel:"noopener noreferrer"},ss={class:"flex items-center gap-3"},ns={class:"table-container relative flex-1"},os={class:"!sticky top-0 z-5 w-full"},as={class:"flex items-center gap-3"},ls={class:"flex items-center gap-3"},cs={class:"flex items-center gap-3"},rs={class:"flex items-center gap-3"},is={class:"cell-actions"},ds={key:0,class:"h-full max-h-[calc(100%_-_55px)] w-full"},us=["onClick"],ps={class:"cell-title"},_s={key:0},ms={class:"cell-type"},ys={class:"cell-created-date"},fs={class:"cell-added-by"},vs={key:0,class:"flex items-center gap-3"},gs={class:"h-8 w-8 grid place-items-center"},bs={key:0,class:"w-full flex gap-3 items-center"},hs={class:"flex-1 flex flex-col max-w-[calc(100%_-_44px)]"},xs={class:"w-full flex gap-3"},ws={key:1,class:"w-full truncate text-nc-content-gray-muted"},ks={class:"cell-usage"},$s={class:"justify-end"},Ds={class:"flex items-center justify-center absolute left-0 top-0 w-full h-full z-10 pb-10 pointer-events-none"},Cs={class:"flex flex-col justify-center items-center gap-2"},Is={class:"text-center"},Ts={key:0,class:"flex-none integration-table-empty flex items-center justify-center py-8 px-6 h-full max-h-[calc(100%_-_94px)]"},Os={key:0,class:"px-2 py-6 text-nc-content-gray-muted flex flex-col items-center gap-6 text-center"},Ss={key:1,class:"flex-none text-center flex flex-col items-center gap-3"},As={class:"flex justify-between items-center w-full px-6"},Es={class:"text-nc-content-gray-muted text-xs"},Ms={class:"rounded-lg overflow-hidden"},Ns={class:"rounded-lg overflow-hidden mt-2"},Rs={key:1,class:"w-full flex flex-col text-nc-content-gray"},Us={class:"flex flex-row items-center py-2 px-3.25 bg-nc-bg-gray-extralight rounded-lg text-nc-content-inverted-secondary mb-4"},Bs={class:"text-ellipsis overflow-hidden select-none w-full pl-3",style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},zs={key:0,class:"flex flex-col pb-2 text-small leading-[18px] text-nc-content-gray-muted"},Ls={class:"!list-disc ml-6 mb-0"},Gs={class:"flex items-center gap-1"},js={class:"flex items-center"},Ks={class:"flex gap-4"},Ps={class:"flex flex-col gap-3"},Ws={class:"flex"},Fs={class:"!m-0 text-base font-weight-700 flex-1"},Vs={class:"text-sm text-nc-content-inverted-secondary"},Ys=Ne({__name:"ConnectionsTab",setup(ae){const{integrations:C,isLoadingIntegrations:I,deleteConfirmText:W,integrationPaginationData:f,successConfirmModal:T,searchQuery:L,loadDynamicIntegrations:F,loadIntegrations:G,deleteIntegration:E,editIntegration:H,duplicateIntegration:M,getIntegration:p,setDefaultIntegration:A}=jt(),{$api:j,$e:ee}=lt(),{allCollaborators:te}=Z(Re()),{bases:K}=Z(ct()),{isFeatureEnabled:V}=rt(),R=N(!1),x=N(null),O=N(!1),U=N(),le=N(),d=N({}),ce=N([]),{width:ze}=it(le),h=Ie(()=>{var t;const e=new Map;return(t=ce.value)==null||t.forEach(a=>{a!=null&&a.id&&e.set(a.id,a)}),e}),k=Ie(()=>(C.value||[]).filter(e=>dt.Sync!==e.type).sort((e,t)=>{var a,y,_,$;if(d.value.title){if(e.title&&t.title)return d.value.title==="asc"?e.title<t.title?-1:1:e.title>t.title?-1:1}else if(d.value.sub_type){if(e.sub_type&&t.sub_type)return d.value.sub_type==="asc"?e.sub_type<t.sub_type?-1:1:e.sub_type>t.sub_type?-1:1}else if(d.value.created_at){if(e!=null&&e.created_at&&(t!=null&&t.created_at))return d.value.created_at==="asc"?B(e.created_at).local().diff(B(t.created_at).local()):B(t.created_at).local().diff(B(e.created_at).local())}else if(d.value.created_by){if(e.created_by&&t.created_by&&h.value.get(e.created_by)&&h.value.get(t.created_by))return d.value.created_by==="asc"?((a=h.value.get(e.created_by))==null?void 0:a.email)<((y=h.value.get(t.created_by))==null?void 0:y.email)?-1:1:((_=h.value.get(e.created_by))==null?void 0:_.email)>(($=h.value.get(t.created_by))==null?void 0:$.email)?-1:1}else if(d.value.source_count&&e.source_count!==void 0&&t.source_count!==void 0)return d.value.source_count==="asc"?e.source_count-t.source_count:t.source_count-e.source_count;return 0}));async function Y(e=f.value.page,t=f.value.pageSize,a=!0){try{a&&(f.value.page=1),await G(null,void 0,a?1:e,t)}catch{}}const Le=async e=>{f.value.page=e,await Y(void 0,void 0,!1)},{onLeft:Ge,onRight:je,onUp:Ke,onDown:Pe}=qt({paginationDataRef:f,changePage:Le,isViewDataLoading:I}),We=async e=>{O.value=!0,ee("c:integration:delete"),W.value=null,R.value=!0,x.value=e;const t=await p(e,{includeSources:!0});x.value.sources=(t==null?void 0:t.sources)||[],O.value=!1},re=e=>{!V(Se.DATA_REFLECTION)&&e.sub_type===z.NOCODB||H(e)},Fe=async()=>{var t;if(await E(x.value,!0))for(const a of((t=x.value)==null?void 0:t.sources)||[]){if(!a.base_id||!a.id||a.base_id&&!K.value.get(a.base_id))continue;const y=K.value.get(a.base_id);Array.isArray(y==null?void 0:y.sources)&&K.value.set(a.base_id,{...y||{},sources:[...y.sources.filter(_=>_.id!==a.id)]})}},Ve=async()=>{try{const e=await j.orgUsers.list();if(!(e!=null&&e.list))return;ce.value=e.list}catch(e){Ot.error(await St(e))}},P=e=>{var t,a,y;(t=C.value)!=null&&t.length&&(((a=d.value)==null?void 0:a[e])==="asc"?d.value={[e]:"desc"}:((y=d.value)==null?void 0:y[e])==="desc"?d.value={[e]:void 0}:d.value={[e]:"asc"})},Ye=_t(()=>{Y()},250),S=e=>{var t;return e?!((t=h.value.get(e))!=null&&t.email):!1},ie=e=>{var t,a,y,_,$;return((t=h.value.get(e))==null?void 0:t.display_name)||(($=(a=h.value.get(e))==null?void 0:a.email)==null?void 0:$.slice(0,(_=(y=h.value.get(e))==null?void 0:y.email)==null?void 0:_.indexOf("@")))};return ut(U,"scroll",()=>{var a,y,_,$;const e=(a=U.value)==null?void 0:a.querySelector("th.cell-title"),t=(y=U.value)==null?void 0:y.querySelector("th.cell-type");!(e!=null&&e.getBoundingClientRect().right)||!(t!=null&&t.getBoundingClientRect().left)||((t==null?void 0:t.getBoundingClientRect().left)<(e==null?void 0:e.getBoundingClientRect().right)?(_=U.value)==null||_.classList.add("sticky-shadow"):($=U.value)==null||$.classList.remove("sticky-shadow"))}),Ue(async()=>{await F(),await Promise.allSettled([!C.value.length&&G(),Ve()])}),q("ArrowLeft",Ge),q("ArrowRight",je),q("ArrowUp",Ke),q("ArrowDown",Pe),(e,t)=>{var _e,me,ye,fe,ve,ge,be,he,xe,we,ke,$e,De,Ce;const a=Be,y=pt,_=yt,$=Gt,de=Kt,Qe=ft,ue=ht,Q=Wt,qe=wt,Je=Ft,Xe=bt,Ze=$t,He=Ee,et=Vt,pe=Jt,tt=Ct,st=Yt,nt=Qt,ot=It;return i(),m("div",Zt,[o("div",Ht,[o("div",es,[o("div",null,[u(c(e.$t("msg.manageConnections"))+" ",1),o("a",ts,c(e.$t("msg.learnMore")),1)])]),o("div",ss,[l(y,{value:s(L),"onUpdate:value":t[0]||(t[0]=n=>ne(L)?L.value=n:null),type:"text",class:"nc-search-integration-input !min-w-[300px] !max-w-[400px] nc-input-sm flex-none",placeholder:`${e.$t("general.search")} ${e.$t("general.connections").toLowerCase()}`,"allow-clear":"",onInput:s(Ye)},{prefix:r(()=>[l(a,{icon:"search",class:"mr-2 h-4 w-4 text-nc-content-gray-muted"})]),_:1},8,["value","placeholder","onInput"])])]),o("div",ns,[o("div",{ref_key:"tableWrapper",ref:U,class:g(["nc-workspace-integration-table relative nc-scrollbar-thin !overflow-auto max-h-[calc(100%_-_40px)]",{"h-full":(_e=s(k))==null?void 0:_e.length}])},[o("table",os,[o("thead",null,[o("tr",null,[o("th",{class:g(["cell-title !hover:bg-nc-bg-gray-light select-none cursor-pointer",{"cursor-not-allowed":!((me=s(k))!=null&&me.length),"!text-nc-content-inverted-secondary":s(d).title}]),onClick:t[1]||(t[1]=n=>P("title"))},[o("div",{ref_key:"titleHeaderCellRef",ref:le,class:"flex items-center gap-3"},[o("div",null,c(e.$t("general.name")),1),s(d).title?(i(),b(a,{key:0,icon:"chevronDown",class:g(["flex-none",{"transform rotate-180":((ye=s(d))==null?void 0:ye.title)==="asc"}])},null,8,["class"])):(i(),b(a,{key:1,icon:"chevronUpDown",class:"flex-none"}))],512)],2),o("th",{class:g(["cell-type !hover:bg-nc-bg-gray-light select-none cursor-pointer",{"cursor-not-allowed":!((fe=s(k))!=null&&fe.length),"!text-nc-content-inverted-secondary":s(d).sub_type}]),onClick:t[2]||(t[2]=n=>P("sub_type"))},[o("div",as,[o("div",null,c(e.$t("general.type")),1),s(d).sub_type?(i(),b(a,{key:0,icon:"chevronDown",class:g(["flex-none",{"transform rotate-180":s(d).sub_type==="asc"}])},null,8,["class"])):(i(),b(a,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),o("th",{class:g(["cell-created-date !hover:bg-nc-bg-gray-light select-none cursor-pointer",{"cursor-not-allowed":!((ve=s(k))!=null&&ve.length),"!text-nc-content-inverted-secondary":s(d).created_at}]),onClick:t[3]||(t[3]=n=>P("created_at"))},[o("div",ls,[o("div",null,c(e.$t("labels.dateAdded")),1),s(d).created_at?(i(),b(a,{key:0,icon:"chevronDown",class:g(["flex-none",{"transform rotate-180":s(d).created_at==="asc"}])},null,8,["class"])):(i(),b(a,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),o("th",{class:g(["cell-added-by !hover:bg-nc-bg-gray-light select-none cursor-pointer",{"cursor-not-allowed":!((ge=s(k))!=null&&ge.length),"!text-nc-content-inverted-secondary":s(d).created_by}]),onClick:t[4]||(t[4]=n=>P("created_by"))},[o("div",cs,[o("div",null,c(e.$t("labels.addedBy")),1),s(d).created_by?(i(),b(a,{key:0,icon:"chevronDown",class:g(["flex-none",{"transform rotate-180":s(d).created_by==="asc"}])},null,8,["class"])):(i(),b(a,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),o("th",{class:g(["cell-usage !hover:bg-nc-bg-gray-light select-none cursor-pointer",{"cursor-not-allowed":!((be=s(k))!=null&&be.length)}]),onClick:t[5]||(t[5]=n=>P("source_count"))},[o("div",rs,[o("div",null,c(e.$t("general.usage")),1),(he=s(d))!=null&&he.source_count?(i(),b(a,{key:0,icon:"chevronDown",class:g(["flex-none",{"transform rotate-180":((xe=s(d))==null?void 0:xe.source_count)==="asc"}])},null,8,["class"])):(i(),b(a,{key:1,icon:"chevronUpDown",class:"flex-none"}))])],2),o("th",is,[o("div",null,c(e.$t("labels.actions")),1)])])])]),(we=s(k))!=null&&we.length?(i(),m("table",ds,[o("tbody",null,[(i(!0),m(J,null,Te(s(k),n=>(i(),m("tr",{key:n.id,onClick:v=>re(n)},[o("td",ps,[o("div",{class:"gap-3",style:Oe({maxWidth:`${s(ze)}px`})},[l(_,{placement:"bottom",class:"truncate","show-on-truncate-only":""},{title:r(()=>[u(c(n.title),1)]),default:r(()=>[u(" "+c(n.title),1)]),_:2},1024),n.is_private?(i(),m("span",_s,[l($,{border:!1,class:"text-primary !h-4.5 bg-nc-bg-brand text-xs"},{default:r(()=>[u(c(e.$t("general.private")),1)]),_:1})])):w("",!0)],4)]),o("td",ms,[o("div",null,[l(_,{placement:"bottom",class:"h-8 w-8 flex-none flex items-center justify-center children:flex-none"},{title:r(()=>{var v;return[u(c(((v=("clientTypesMap"in e?e.clientTypesMap:s(se))[n==null?void 0:n.sub_type])==null?void 0:v.text)||(n==null?void 0:n.sub_type)),1)]}),default:r(()=>[l(de,{type:n.sub_type,size:n.sub_type===("SyncDataType"in e?e.SyncDataType:s(z)).NOCODB?"xxl":"lg"},null,8,["type","size"])]),_:2},1024)])]),o("td",ys,[o("div",null,[l(_,{placement:"bottom","show-on-truncate-only":""},{title:r(()=>[u(c(s(B)(n.created_at).local().format("DD MMM YYYY")),1)]),default:r(()=>[u(" "+c(s(B)(n.created_at).local().format("DD MMM YYYY")),1)]),_:2},1024)])]),o("td",fs,[o("div",null,[n.sub_type===("SyncDataType"in e?e.SyncDataType:s(z)).NOCODB?(i(),m("div",vs,[o("div",gs,[l(a,{icon:"nocodb1"})]),t[15]||(t[15]=o("div",{class:"text-sm !leading-5 capitalize font-semibold truncate"},"NocoDB Cloud",-1))])):(i(),b(_,{key:1,disabled:!S(n.created_by),class:"w-full"},{title:r(()=>[u(c(`User not part of this ${("isEeUI"in e?e.isEeUI:s(vt))?"workspace":"organisation"} anymore`),1)]),default:r(()=>{var v;return[n.created_by&&((v=s(h).get(n.created_by))!=null&&v.email)?(i(),m("div",bs,[l(Qe,{user:s(h).get(n.created_by),size:"base",class:g(["flex-none",{"!grayscale":S(n.created_by)}]),style:Oe(S(n.created_by)?{filter:"grayscale(100%) brightness(115%)"}:{})},null,8,["user","class","style"]),o("div",hs,[o("div",xs,[l(_,{class:g(["text-sm !leading-5 capitalize font-semibold truncate",{"text-nc-content-gray":!S(n.created_by),"text-nc-content-gray-muted":S(n.created_by)}]),disabled:S(n.created_by),"show-on-truncate-only":"",placement:"bottom"},{title:r(()=>[u(c(ie(n.created_by)),1)]),default:r(()=>[u(" "+c(ie(n.created_by)),1)]),_:2},1032,["class","disabled"])]),l(_,{class:g(["text-xs !leading-4 truncate",{"text-nc-content-gray-subtle2":!S(n.created_by),"text-nc-content-gray-muted":S(n.created_by)}]),disabled:S(n.created_by),"show-on-truncate-only":"",placement:"bottom"},{title:r(()=>{var D;return[u(c((D=s(h).get(n.created_by))==null?void 0:D.email),1)]}),default:r(()=>{var D;return[u(" "+c((D=s(h).get(n.created_by))==null?void 0:D.email),1)]}),_:2},1032,["class","disabled"])])])):(i(),m("div",ws,c(n.created_by),1))]}),_:2},1032,["disabled"]))])]),o("td",ks,[o("div",null,c((n==null?void 0:n.source_count)??0),1)]),o("td",{class:"cell-actions",onClick:t[6]||(t[6]=gt(()=>{},["stop"]))},[o("div",$s,[l(Xe,{placement:"bottomRight"},{overlay:r(()=>[l(Je,{variant:"small"},{default:r(()=>[n.type&&s(xt)(n.type)&&!n.is_default?(i(),b(Q,{key:0,onClick:v=>s(A)(n)},{default:r(()=>[l(a,{class:"text-current opacity-80",icon:"star"}),t[16]||(t[16]=o("span",null,"Set as default",-1))]),_:2,__:[16]},1032,["onClick"])):w("",!0),l(Q,{disabled:!s(V)(("FEATURE_FLAG"in e?e.FEATURE_FLAG:s(Se)).DATA_REFLECTION)&&n.sub_type===("SyncDataType"in e?e.SyncDataType:s(z)).NOCODB,onClick:v=>re(n)},{default:r(()=>[l(a,{class:"text-current opacity-80",icon:"edit"}),o("span",null,c(e.$t("general.edit")),1)]),_:2},1032,["disabled","onClick"]),l(_,{disabled:(n==null?void 0:n.sub_type)!==("ClientType"in e?e.ClientType:s(Ae)).SQLITE},{title:r(()=>{var v;return[u(" Not allowed for type "+c(n.sub_type&&("clientTypesMap"in e?e.clientTypesMap:s(se))[n.sub_type]?(v=("clientTypesMap"in e?e.clientTypesMap:s(se))[n.sub_type])==null?void 0:v.text:n.sub_type),1)]}),default:r(()=>[l(Q,{disabled:(n==null?void 0:n.sub_type)===("ClientType"in e?e.ClientType:s(Ae)).SQLITE||(n==null?void 0:n.sub_type)===("SyncDataType"in e?e.SyncDataType:s(z)).NOCODB,onClick:v=>s(M)(n)},{default:r(()=>[l(a,{class:"text-current opacity-80",icon:"duplicate"}),o("span",null,c(e.$t("general.duplicate")),1)]),_:2},1032,["disabled","onClick"])]),_:2},1032,["disabled"]),(n==null?void 0:n.sub_type)!==("SyncDataType"in e?e.SyncDataType:s(z)).NOCODB?(i(),m(J,{key:1},[l(qe),l(Q,{danger:"",onClick:v=>We(n)},{default:r(()=>[l(a,{icon:"delete"}),u(" "+c(e.$t("general.delete")),1)]),_:2},1032,["onClick"])],64)):w("",!0)]),_:2},1024)]),default:r(()=>[l(ue,{size:"small",type:"secondary"},{default:r(()=>[l(a,{icon:"threeDotVertical"})]),_:1})]),_:2},1024)])])],8,us))),128))])])):w("",!0)],2),mt(o("div",Ds,[o("div",Cs,[l(Ze,{size:"xlarge"}),o("span",Is,c(e.$t("general.loading")),1)])],512),[[kt,s(I)]]),!s(I)&&(!((ke=s(C))!=null&&ke.length)||!s(k).length)?(i(),m("div",Ts,[($e=s(C))!=null&&$e.length&&!s(k).length?(i(),m("div",Os,[t[17]||(t[17]=o("img",{src:Dt,class:"!w-[164px] flex-none",alt:"No search results found"},null,-1)),u(" "+c(e.$t("title.noResultsMatchedYourSearch")),1)])):(i(),m("div",Ss,[l(He,{image:("Empty"in e?e.Empty:s(Ee)).PRESENTED_IMAGE_SIMPLE,description:e.$t("labels.noData"),class:"!my-0"},null,8,["image","description"])]))])):w("",!0),s(f).totalRows?(i(),m("div",{key:1,class:g(["flex flex-row justify-center items-center bg-nc-bg-gray-extralight min-h-10",{"pointer-events-none":s(I)}])},[o("div",As,[t[18]||(t[18]=o("div",null," ",-1)),l(et,{current:s(f).page,"onUpdate:current":[t[7]||(t[7]=n=>s(f).page=n),t[9]||(t[9]=n=>Y(void 0,void 0,!1))],"page-size":s(f).pageSize,"onUpdate:pageSize":[t[8]||(t[8]=n=>s(f).pageSize=n),t[10]||(t[10]=n=>Y(s(f).page,n,!1))],total:+s(f).totalRows,"show-size-changer":"","use-stored-page-size":!1,"prev-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:s(X))()}+←`,"next-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:s(X))()}+→`,"first-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:s(X))()}+↓`,"last-page-tooltip":`${("renderAltOrOptlKey"in e?e.renderAltOrOptlKey:s(X))()}+↑`},null,8,["current","page-size","total","prev-page-tooltip","next-page-tooltip","first-page-tooltip","last-page-tooltip"]),o("div",Es,c(s(f).totalRows)+" "+c(s(f).totalRows===1?"record":"records"),1)])],2)):w("",!0)]),l(nt,{visible:s(R),"onUpdate:visible":t[11]||(t[11]=n=>ne(R)?R.value=n:null),"entity-name":e.$t("general.connection"),"on-delete":Fe,"delete-label":e.$t("general.delete"),"show-default-delete-msg":!s(O)&&!((Ce=(De=s(x))==null?void 0:De.sources)!=null&&Ce.length)},{"entity-preview":r(()=>{var n,v;return[s(O)?(i(),m(J,{key:0},[o("div",Ms,[l(pe,{active:"",class:"h-9 !rounded-md !w-full"})]),o("div",Ns,[l(pe,{active:"",class:"h-9 !rounded-md !w-full"})])],64)):s(x)?(i(),m("div",Rs,[o("div",Us,[l(de,{type:s(x).sub_type},null,8,["type"]),o("div",Bs,c(s(x).title),1)]),(v=(n=s(x))==null?void 0:n.sources)!=null&&v.length?(i(),m("div",zs,[t[21]||(t[21]=o("div",{class:"mb-1"},"Following external data sources using this connection will also be removed",-1)),o("ul",Ls,[(i(!0),m(J,null,Te(s(x).sources,(D,at)=>(i(),m("li",{key:at,class:"marker:text-nc-content-gray-muted !marker:flex !marker:items-center !!marker:-mt-1"},[o("div",Gs,[o("div",js,[t[19]||(t[19]=u("   ")),l(tt,{type:"database",class:"!grayscale min-w-5 flex-none -ml-1",style:{filter:"grayscale(100%) brightness(115%)"}})]),l(_,{class:"!truncate !max-w-[45%] flex-none","show-on-truncate-only":""},{title:r(()=>[u(c(D.project_title),1)]),default:r(()=>[u(" "+c(D.project_title),1)]),_:2},1024),t[20]||(t[20]=u(" > ")),l(st,{class:"!grayscale min-w-4 flex-none",style:{filter:"grayscale(100%) brightness(115%)"}}),l(_,{class:"truncate !max-w-[45%] capitalize","show-on-truncate-only":""},{title:r(()=>[u(c(D.alias),1)]),default:r(()=>[u(" "+c(D.alias),1)]),_:2},1024)])]))),128))]),t[22]||(t[22]=o("div",{class:"mt-2"},"Do you want to proceed anyway?",-1))])):w("",!0)])):w("",!0)]}),_:1},8,["visible","entity-name","delete-label","show-default-delete-msg"]),l(ot,{visible:s(T).isOpen,"onUpdate:visible":t[13]||(t[13]=n=>s(T).isOpen=n),centered:"",size:"small",onKeydown:t[14]||(t[14]=Tt(n=>s(T).isOpen=!1,["esc"]))},{default:r(()=>[o("div",Ks,[o("div",null,[l(a,{icon:"circleCheckSolid",class:"flex-none !text-nc-content-green-dark mt-0.5 !h-6 !w-6"})]),o("div",Ps,[o("div",Ws,[o("h3",Fs,c(s(T).title),1),l(ue,{size:"xsmall",type:"text",onClick:t[12]||(t[12]=n=>s(T).isOpen=!1)},{default:r(()=>[l(a,{icon:"close",class:"text-nc-content-gray-subtle2"})]),_:1})]),o("div",Vs,c(s(T).description),1),t[23]||(t[23]=o("a",{target:"_blank",href:"https://nocodb.com/docs/product-docs/data-sources/connect-to-data-source",rel:"noopener noreferrer"}," Learn more ",-1))])])]),_:1},8,["visible"])])}}}),Qs=Object.assign(oe(Ys,[["__scopeId","data-v-94d721d6"]]),{__name:"WorkspaceIntegrationsConnectionsTab"}),qs={key:0,class:"flex w-full flex-col nc-workspace-integrations"},Js={class:"flex gap-2 items-center min-w-0 p-2 h-[var(--topbar-height)] border-b-1 border-nc-border-gray-medium"},Xs={class:"flex-1 nc-breadcrumb nc-no-negative-margin pl-1"},Zs={class:"nc-breadcrumb-item capitalize"},Hs={class:"nc-breadcrumb-item active"},en={class:"tab-title","data-testid":"nc-workspace-settings-tab-integrations"},tn={class:"h-[calc(100vh-92px)]"},sn={class:"tab-title","data-testid":"nc-workspace-settings-tab-integrations"},nn={class:"h-[calc(100vh-92px)] p-6"},on=Ne({__name:"view",setup(ae){const{isUIAllowed:C}=Me(),{hideSidebar:I}=Z(Xt()),W=Re(),{loadRoles:f}=Me(),{activeWorkspace:T}=Z(W),{loadCollaborators:L}=W,{isFromIntegrationPage:F,integrationPaginationData:G,activeViewTab:E,loadIntegrations:H}=Pt(),M=At(async()=>{var p;return await f(void 0,{},(p=T.value)==null?void 0:p.id),T.value});return Et(()=>{var p;return(p=M.value)==null?void 0:p.title},p=>{if(!p)return;const A=p.charAt(0).toUpperCase()+p.slice(1);Mt(A)},{immediate:!0}),Ue(()=>{I.value=!0,F.value=!0,Nt(()=>{var p;return(p=M.value)==null?void 0:p.id}).toMatch(p=>!!p).then(async()=>{await Promise.all([L({includeDeleted:!0},M.value.id),H()])})}),Rt(()=>{F.value=!1,I.value=!1}),(p,A)=>{var x;const j=Be,ee=zt,te=Ut,K=Qs,V=Bt,R=Lt;return s(M)?(i(),m("div",qs,[o("div",Js,[o("div",Xs,[o("div",Zs,c((x=s(M))==null?void 0:x.title),1),l(j,{icon:"ncSlash1",class:"nc-breadcrumb-divider"}),o("h1",Hs,c(p.$t("general.integrations")),1)])]),l(V,{"active-key":s(E),"onUpdate:activeKey":A[0]||(A[0]=O=>ne(E)?E.value=O:null)},{leftExtra:r(()=>A[1]||(A[1]=[o("div",{class:"w-3"},null,-1)])),default:r(()=>[s(C)("workspaceIntegrations")?(i(),b(te,{key:"integrations",class:"w-full"},{tab:r(()=>[o("div",en,[l(j,{icon:"integration"}),u(" "+c(p.$t("general.integrations")),1)])]),default:r(()=>[o("div",tn,[l(ee,{"show-filter":""})])]),_:1})):w("",!0),s(C)("workspaceIntegrations")?(i(),b(te,{key:"connections",class:"w-full"},{tab:r(()=>{var O;return[o("div",sn,[l(j,{icon:"gitCommit"}),u(" "+c(p.$t("general.connections"))+" ",1),(O=s(G))!=null&&O.totalRows?(i(),m("div",{key:0,class:g(["tab-info flex-none",{"bg-primary-selected":s(E)==="connections","bg-nc-bg-gray-extralight":s(E)!=="connections"}])},c(s(G).totalRows),3)):w("",!0)])]}),default:r(()=>[o("div",nn,[l(K)])]),_:1})):w("",!0)]),_:1},8,["active-key"]),l(R)])):w("",!0)}}}),an=Object.assign(oe(on,[["__scopeId","data-v-bd561f09"]]),{__name:"WorkspaceIntegrationsView"}),ln={};function cn(ae,C){const I=an;return i(),b(I)}const Un=oe(ln,[["render",cn]]);export{Un as default};
