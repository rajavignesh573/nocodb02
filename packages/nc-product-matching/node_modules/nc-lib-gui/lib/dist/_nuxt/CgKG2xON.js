const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./B1qoNiTF.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./CbX26EBz.js","./TimeSelector.DAR2lbHN.css","./CYKJe2Bk.js","./DkpDpjnr.js","./Dv0nYk-Y.js","./B94p8ToD.js","./DkDj6Z7Z.js","./gAYHr7Gr.js","./Cd4chHHL.js","./boyBAVNN.js","./Cell.BBaBjsLL.css"])))=>i.map(i=>d[i]);
import{e as L,bb as F,r,k5 as G,T as $,G as q,bd as W,g as K,aG as X,a8 as Y,V as H,n as f,aj as s,jA as J,c as v,L as a,o as i,b as d,w as x,a as n,M as Q,t as c,O as E,N as Z,K as V,ag as ee,d as te,aX as ae,I as le,b9 as oe,bo as se,ap as ne,gn as ue,$ as re,fn as ie,ow as de,a_ as ce}from"./DRA9KN5F.js";import{_ as pe}from"./QeWwuUYP.js";import{u as me}from"./B94p8ToD.js";import{d as fe,c as ve}from"./CkvAmLZt.js";import"./DkDj6Z7Z.js";import"./gAYHr7Gr.js";import"./Cd4chHHL.js";import"./boyBAVNN.js";import"./D7OHpRdS.js";import"./DvtLu3FC.js";import"./D_txg4HT.js";import"./CQa0sIfA.js";import"./By5RWL3d.js";const _e=ae(()=>ce(()=>import("./B1qoNiTF.js").then(u=>u.C),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url).then(u=>u.default||u)),he={key:0},we={class:"flex items-center gap-2"},be={key:1},ge={class:"w-full flex items-center gap-2 mb-2"},xe={class:"text-small leading-[18px] flex-1 text-gray-700"},Ve={class:"flex flex-row gap-2 relative"},ye={key:0,class:"absolute pointer-events-none h-full w-full bg-white z-2 top-0 left-0 rounded-full items-center flex bg-white"},Ce={class:"-ml-2"},De={key:0,class:"text-nc-content-red-medium text-small leading-[18px] mt-1"},ke=L({__name:"DefaultValue",props:{value:{},isVisibleDefaultValueInput:{type:Boolean}},emits:["update:value","update:isVisibleDefaultValueInput"],setup(u,{emit:N}){var T;const y=u,C=N;F(G,r(!0));const o=$(y,"value",C),_=q(W,r()),D=$(y,"isVisibleDefaultValueInput",C),B=r({row:{},oldRow:{},rowMeta:{isUpdatedFromCopyNPaste:[(T=o.value)==null?void 0:T.title]}});me(B);const{isAiModeFieldModal:j}=fe(),p=r(null),k=r(!1),h=r(),w=e=>{o.value={...o.value,cdf:e},p.value=e};K(()=>{var e;w(((e=o.value)==null?void 0:e.cdf)??null)}),X(()=>o.value.cdf,e=>{p.value=e});const{sqlUis:b}=Y(H()),I=f(()=>{var e,t,l;return(e=_.value)!=null&&e.source_id&&b.value[(t=_.value)==null?void 0:t.source_id]?b.value[(l=_.value)==null?void 0:l.source_id]:Object.values(b.value)[0]}),R=f(()=>{var e,t,l;return[s.Date,s.DateTime].includes((e=o.value)==null?void 0:e.uidt)&&((l=(t=I.value)==null?void 0:t.getCurrentDateDefault)==null?void 0:l.call(t,o.value))}),M=f(()=>{var e,t,l,m;return R.value&&((t=(e=p.value)==null?void 0:e.toUpperCase)==null?void 0:t.call(e))===((m=(l=I.value)==null?void 0:l.getCurrentDateDefault)==null?void 0:m.call(l,o.value))}),{isSystem:U}=ve(),S=f(()=>J(o.value)),z=()=>{D.value=!0,!ue()&&re(()=>{ie(300).then(()=>{h.value&&de(".nc-cell",h.value)})})};return(e,t)=>{const l=Q,m=Z,O=pe,P=_e,A=ne;return a(D)?(i(),v("div",be,[n("div",ge,[n("div",xe,c(e.$t("placeholder.defaultValue")),1)]),n("div",Ve,[n("div",{class:ee(["nc-default-value-wrapper border-1 flex items-center w-full px-3 border-gray-300 rounded-lg sm:min-h-[32px] xs:min-h-13 focus-within:border-brand-500 focus-within:shadow-selected focus-within:ring-0 transition-all duration-0.3s",{"bg-white":a(j)}])},[n("div",{ref_key:"defaultValueWrapperRef",ref:h,class:"relative flex-grow max-w-full"},[a(M)?(i(),v("div",ye,[n("div",Ce,[d(O,null,{default:x(()=>[te(c(e.$t("labels.currentDate")),1)]),_:1})])])):V("",!0),d(P,{"edit-enabled":!0,"model-value":a(p),column:a(o),class:"!border-none h-auto my-auto","onUpdate:cdf":w,"onUpdate:editEnabled":t[0]||(t[0]=g=>k.value=g),onClick:t[1]||(t[1]=g=>k.value=!0)},null,8,["model-value","column"])],512),d(A,{title:e.$t("general.clear"),class:"flex"},{default:x(()=>[![a(s).Year,a(s).Date,a(s).Time,a(s).DateTime,a(s).SingleSelect,a(s).MultiSelect].includes(a(o).uidt)||a(M)?(i(),le(oe(("iconMap"in e?e.iconMap:a(se)).close),{key:0,class:"w-4 h-4 cursor-pointer rounded-full z-3 !text-black-500 text-gray-500 hover:bg-gray-50 default-value-clear",onClick:t[2]||(t[2]=E(g=>w(null),["stop"]))})):V("",!0)]),_:1},8,["title"])],2)]),a(S)?(i(),v("div",De,c(e.$t(a(S))),1)):V("",!0)])):(i(),v("div",he,[d(m,{size:"small",type:"text",class:"!text-gray-700","data-testid":"nc-show-default-value-btn",disabled:a(U),onClick:E(z,["stop"])},{default:x(()=>[n("div",we,[d(l,{icon:"plus",class:"flex-none h-4 w-4"}),n("span",null,c(e.$t("general.set"))+" "+c(e.$t("placeholder.defaultValue").toLowerCase()),1)])]),_:1},8,["disabled"])]))}}}),Pe=Object.assign(ke,{__name:"SmartsheetColumnDefaultValue"});export{Pe as default};
