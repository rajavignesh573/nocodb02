import{e as N,ak as E,f as x,a9 as M,n as c,aC as h,G as P,b5 as V,iu as j,be as v,I as F,o as T,aJ as W,L as s,ag as $,w as z,b as A,o1 as D}from"./DRA9KN5F.js";import{u as G}from"./D7poRkS0.js";const H=N({__name:"FieldListWithSearch",props:{isParentOpen:{type:Boolean},toolbarMenu:{},searchInputPlaceholder:{},selectedOptionId:{},options:{},showSelectedOption:{type:Boolean},inputBordered:{type:Boolean,default:!0}},emits:["selected"],setup(_,{emit:b}){const l=_,B=b,{isParentOpen:f,toolbarMenu:p,searchInputPlaceholder:O,selectedOptionId:y,showSelectedOption:C}=E(l),{fieldsMap:a,isLocalMode:w}=G(),{$e:g}=x(),{t:u}=M(),I=c(()=>(l.options||[]).filter(e=>{var t;return w.value&&(e!=null&&e.id)&&a.value[e.id]?(t=a.value[e.id])==null?void 0:t.initialShow:!0}).map(e=>e).sort((e,t)=>{var d,m;let o=0,n=0,r=0;return h(e)&&(o=1),h(t)&&(n=1),e!=null&&e.id&&(t!=null&&t.id)&&((d=a.value[e.id])==null?void 0:d.order)!==void 0&&((m=a.value[t.id])==null?void 0:m.order)!==void 0&&(r=a.value[e.id].order-a.value[t.id].order),o-n||r})),i=c(()=>{switch(p.value){case"groupBy":return{selectOptionEvent:"c:group-by:add:column:select",optionClassName:"nc-group-by-column-search-item"};case"sort":return{selectOptionEvent:"c:sort:add:column:select",optionClassName:"nc-sort-column-search-item"};case"globalSearch":return{selectOptionEvent:"c:search:field:select",optionClassName:""};default:return{selectOptionEvent:void 0,optionClassName:""}}}),S=e=>{B("selected",e),i.value.selectOptionEvent&&g(i.value.selectOptionEvent)},k=P(V),L=c(()=>[{searchBasisInfo:u("msg.info.matchedByButtonLabel"),filterCallback:(e,t)=>{var n;if(!t)return!1;const o=t;return j(o)&&v([(n=o.colOptions)==null?void 0:n.label],e)}},{searchBasisInfo:u("msg.info.matchedByFieldDescription"),filterCallback:(e,t)=>{if(!t)return!1;const o=t;return o.description?v([o.description],e):!1}}]);return(e,t)=>{const o=D,n=W;return T(),F(n,{class:$(["field-list-with-search",{"nc-input-bordered":e.inputBordered}]),"search-input-placeholder":s(O),"show-selected-option":s(C),"option-label-key":"title","option-value-key":"id","input-bordered":e.inputBordered,"hide-top-divider":e.inputBordered,open:s(f),"is-locked":s(k)&&s(p)!=="globalSearch","show-search-always":"","item-class-name":s(i).optionClassName,list:s(I),value:s(y),"item-height":32,"search-basis-options":s(L),onChange:S},{listItemExtraLeft:z(({option:r})=>[A(o,{column:r,class:"!w-3.5 !h-3.5 !text-gray-500"},null,8,["column"])]),_:1},8,["class","search-input-placeholder","show-selected-option","input-bordered","hide-top-divider","open","is-locked","item-class-name","list","value","search-basis-options"])}}}),q=Object.assign(H,{__name:"SmartsheetToolbarFieldListWithSearch"});export{q as _};
