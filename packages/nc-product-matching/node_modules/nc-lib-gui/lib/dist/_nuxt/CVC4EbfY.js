import{e as O,a8 as $,V as S,G as _,r as p,bc as D,bX as E,b5 as L,as as T,f as U,W as A,ac as G,I as d,o as r,w as g,a as n,ad as z,N as F,L as s,b9 as f,bo as b,K as x,O as P,c as q,t as C,an as K,aq as Q,ag as W,b as X,d as J,M as Y,Q as Z,aH as ee,a4 as se,a5 as te,_ as oe}from"./DRA9KN5F.js";import{_ as ae}from"./GU4raMbz.js";import{u as ne}from"./Bfaa-xBo.js";import"./DWLi1ZcL.js";const ie={class:"flex items-center gap-0.5"},re={class:"p-1.5 menu-filter-dropdown min-w-[160px]","data-testid":"nc-height-menu"},ce={class:"text-xs text-nc-content-gray-muted px-3 pt-2 pb-1 select-none"},le=["onClick"],de={class:"flex items-center gap-2"},he=O({__name:"RowHeight",setup(ue){const k=[{icon:"heightShort",heightClass:"short"},{icon:"heightMedium",heightClass:"medium"},{icon:"heightTall",heightClass:"tall"},{icon:"heightExtra",heightClass:"extra"}],{isSharedBase:y}=$(S()),t=_(D,p()),M=_(E,p(!1)),c=_(L,p(!1)),{isUIAllowed:I}=T(),{$api:R}=U(),{addUndo:V,defineViewScope:H}=A(),i=p(!1),w=async(e,o=!1)=>{var h;if(!c.value&&(h=t.value)!=null&&h.id){if(e===t.value.view.row_height)return;o||V({redo:{fn:a=>w(a,!0),args:[e]},undo:{fn:a=>w(a,!0),args:[t.value.view.row_height||0]},scope:H({view:t.value})});try{!M.value&&!y.value&&I("viewCreateOrEdit")&&await R.dbView.gridUpdate(t.value.id,{row_height:e}),t.value.view.row_height=e,i.value=!1}catch(a){se.error(await te(a)||"There was an error while updating view!")}}};return ne(i),(e,o)=>{const h=F,a=Y,N=ae,j=ee,B=G("e");return r(),d(j,{visible:s(i),"onUpdate:visible":o[2]||(o[2]=l=>Z(i)?i.value=l:null),"offset-y":"",class:"",trigger:["click"],"overlay-class-name":"nc-dropdown-height-menu overflow-hidden"},{overlay:g(()=>[n("div",re,[n("div",{class:"flex flex-col w-full text-sm",onClick:o[0]||(o[0]=P(()=>{},["stop"]))},[n("div",ce,C(e.$t("objects.rowHeight")),1),(r(),q(K,null,Q(k,(l,u)=>{var m,v;return n("div",{key:u,class:W(["nc-row-height-option",{"hover:bg-nc-bg-gray-light cursor-pointer":!s(c),"cursor-not-allowed":s(c)}]),onClick:pe=>w(u)},[n("div",de,[X(a,{icon:l.icon,class:"nc-row-height-icon"},null,8,["icon"]),J(" "+C(e.$t(`objects.heightClass.${l.heightClass}`)),1)]),(u===0?!((m=s(t))==null?void 0:m.view).row_height:((v=s(t))==null?void 0:v.view).row_height===u)?(r(),d(f(("iconMap"in e?e.iconMap:s(b)).check),{key:0,class:"text-primary w-4 h-4"})):x("",!0)],10,le)}),64))]),s(c)?(r(),d(N,{key:0,class:"-mx-1.5 -mb-1.5",onOnOpen:o[1]||(o[1]=l=>i.value=!1)})):x("",!0)])]),default:g(()=>[n("div",null,[z((r(),d(h,{class:"nc-height-menu-btn nc-toolbar-btn !border-0 !h-7 !px-1.5 !min-w-7",size:"small",type:"secondary","show-as-disabled":s(c)},{default:g(()=>[n("div",ie,[(r(),d(f(("iconMap"in e?e.iconMap:s(b)).rowHeight),{class:"!h-3.75 !w-3.75"}))])]),_:1},8,["show-as-disabled"])),[[B,["c:row-height"]]])])]),_:1},8,["visible"])}}}),ve=Object.assign(oe(he,[["__scopeId","data-v-9be002fe"]]),{__name:"SmartsheetToolbarRowHeight"});export{ve as default};
