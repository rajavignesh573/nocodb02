const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CE3yBREh.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./FormulaWrapperCell.COMg0Mv4.css","./CZHaB74P.js","./BGGftOd4.js"])))=>i.map(i=>d[i]);
import{e as $,bb as K,r as u,oi as J,G as r,fO as X,kL as Z,V as q,J as Q,n as c,g3 as L,g4 as Y,g5 as ee,kk as te,gz as ne,ie as O,j9 as oe,j7 as ae,I as d,c as p,L as e,o as a,aX as k,fA as se,fB as le,b as F,ag as j,w as m,a as z,t as f,bK as ie,K as x,cf as re,N as ce,O as pe,b9 as ue,bo as de,d as me,ap as _e,a_ as b}from"./DRA9KN5F.js";import{u as fe}from"./C-ZUx0lq.js";import{u as ye}from"./BJUOFlKy.js";import"./DkDj6Z7Z.js";import"./CbX26EBz.js";const ve=k(()=>b(()=>import("./CE3yBREh.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.default||s)),ge=k(()=>b(()=>import("./CZHaB74P.js"),__vite__mapDeps([4,1,2]),import.meta.url).then(s=>s.default||s)),he=k(()=>b(()=>import("./BGGftOd4.js"),__vite__mapDeps([5,1,2]),import.meta.url).then(s=>s.default||s)),xe={class:"font-bold"},ke=["innerHTML"],be={key:2,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},we={key:3,class:"text-left text-wrap mt-2 text-[#e65100] text-xs"},Ie=$({__name:"Formula",setup(s){K(J,u(!0));const n=r(X),l=r(Z),{isPg:D}=q(),{showNull:S}=Q(),y=c(()=>D(n.value.source_id)?L(Y(l==null?void 0:l.value)):L(l==null?void 0:l.value)),w=c(()=>ee(y.value)),I=r(te,u(!1)),v=r(ne,u(!1)),N=c(()=>{var t,o;return((o=(t=n.value.colOptions)==null?void 0:t.parsed_tree)==null?void 0:o.dataType)===O.NUMERIC}),{open:M}=fe(),g=c(()=>{var t,o,i,_;return I.value?!1:!((o=(t=n.value.colOptions)==null?void 0:t.parsed_tree)!=null&&o.dataType)||((_=(i=n.value.colOptions)==null?void 0:i.parsed_tree)==null?void 0:_.dataType)===O.STRING}),h=t=>{if(!g.value)return;if(t.target.tagName==="A"){t.stopPropagation();return}M({column:n.value,vModel:y.value})},{showEditNonEditableFieldWarning:R,showClearNonEditableFieldWarning:U,activateShowEditNonEditableFieldWarning:C}=ye({onEnter:t=>{g.value&&h(t)}}),E=r(oe,u(void 0)),T=r(ae,u(!1)),V=c(()=>{var t,o,i;if((t=n.value.meta)!=null&&t.display_type)return{...n.value,uidt:(o=n.value.meta)==null?void 0:o.display_type,...(i=n.value.meta)==null?void 0:i.display_column_meta}}),W=c(()=>{var t;return!!((t=n.value.meta)!=null&&t.display_type)});return(t,o)=>{const i=ve,_=ge,A=ie,B=he,P=ce,G=_e;return e(W)?(a(),d(i,{key:0,column:e(V)},null,8,["column"])):e(S)&&(("ncIsNull"in t?t.ncIsNull:e(se))(e(l))||("ncIsUndefined"in t?t.ncIsUndefined:e(le))(e(l)))?(a(),p("div",{key:1,class:j(["nc-cell w-full h-full relative nc-display-value-cell",{"text-right":e(N)&&e(T)&&!e(v)}])},[F(_)],2)):(a(),p("div",{key:2,class:j(["w-full",{"text-right":e(N)&&e(T)&&!e(v)}])},[e(n)&&e(n).colOptions&&e(n).colOptions.error?(a(),d(A,{key:0,placement:"bottom",class:"text-orange-700"},{title:m(()=>[z("span",xe,f(e(n).colOptions.error),1)]),default:m(()=>[o[1]||(o[1]=z("span",null,"ERR!",-1))]),_:1,__:[1]})):(a(),p("div",{key:1,class:"nc-cell-field group py-1",onDblclick:o[0]||(o[0]=(...H)=>e(C)&&e(C)(...H))},[e(w)?(a(),p("div",{key:0,style:re({display:"-webkit-box","max-width":"100%","-webkit-line-clamp":e(E)||1,"-webkit-box-orient":"vertical",overflow:"hidden","word-break":"break-all"}),onClick:h,innerHTML:e(w)},null,12,ke)):(a(),d(B,{key:1,value:e(y),lines:e(E)},null,8,["value","lines"])),!e(I)&&e(R)?(a(),p("div",be,f(t.$t("msg.info.computedFieldEditWarning")),1)):x("",!0),e(U)?(a(),p("div",we,f(t.$t("msg.info.computedFieldDeleteWarning")),1)):x("",!0),e(g)?(a(),d(G,{key:4,placement:"bottom",class:"nc-action-icon hidden group-hover:block absolute right-4 top-1"},{title:m(()=>[me(f(e(v)?t.$t("title.expand"):t.$t("tooltip.expandShiftSpace")),1)]),default:m(()=>[F(P,{type:"secondary",size:"xsmall",class:"nc-textarea-expand !p-0 !w-5 !h-5 !min-w-[fit-content]",onClick:pe(h,["stop"])},{default:m(()=>[(a(),d(ue(("iconMap"in t?t.iconMap:e(de)).maximize),{class:"transform !group-hover:text-gray-800 text-gray-700 w-3 h-3"}))]),_:1})]),_:1})):x("",!0)],32))],2))}}}),Oe=Object.assign(Ie,{__name:"VirtualCellFormula"});export{Oe as default};
