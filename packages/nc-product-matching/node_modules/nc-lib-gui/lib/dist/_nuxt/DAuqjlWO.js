import{e as I,fS as R,r as u,aG as S,c as f,o as p,a as o,b as l,t as a,w as s,N as K,M as P,d as r,ap as T,K as $,a3 as D,L as t,Q as G,ar as q,cf as E,an as O,aq as Q,I as H,b9 as J,bo as W,fl as X,$ as Y,_ as Z}from"./DRA9KN5F.js";import{_ as ee}from"./Dv0nYk-Y.js";import{u as te}from"./xPXNcuDa.js";import"./BYKJ-MHf.js";import"./gByPF8bR.js";import"./DkDj6Z7Z.js";import"./B94p8ToD.js";import"./gAYHr7Gr.js";import"./Cd4chHHL.js";import"./boyBAVNN.js";import"./BMufqs0w.js";import"./yMSt-9W5.js";import"./C83syoBY.js";import"./CbX26EBz.js";const le={class:"py-2 px-2 h-full flex gap-2 flex-col"},se={class:"flex w-full bg-white border-b-1 py-1 justify-between"},ae={class:"font-semibold"},oe={class:"flex-grow bg-white"},ne={class:"text-gray-800 font-semibold"},ie={class:"flex bg-white gap-2"},ce={key:0,class:"text-red-500 text-[13px]"},re={class:"font-semibold capitalize sticky top-0 bg-white text-gray-800"},de={class:"flex w-full items-center gap-2"},ue={class:"flex gap-2 items-center justify-end"},pe=I({__name:"Url",emits:["update:visible"],setup(me,{emit:C}){const U=C,{openAttachment:V}=R(),{uploadViaUrl:N,updateModelValue:z,attachments:A}=te(),h=()=>{U("update:visible",!1)},x=u(null),i=u([]),M=async()=>{z([...A.value,...i.value]),h()},n=u(""),d=u(!1),F=e=>{i.value.splice(e,1)},c=u(!1),g=u(""),w=async()=>{if(!X(n.value)){c.value=!1;return}c.value=!0;try{d.value=!0;const e=await N({url:n.value},!0);typeof e!="string"&&(e!=null&&e.length)?(i.value=[...e,...i.value],n.value=""):(c.value=!1,g.value=e)}finally{d.value=!1}await Y(()=>{var e;(e=x.value)==null||e.focus()})};return S(n,()=>{c.value=!0}),(e,_)=>{const b=P,m=K,y=T,B=q,L=ee;return p(),f("div",le,[o("div",se,[o("h1",ae,a(e.$t("title.uploadViaUrl")),1),l(y,null,{title:s(()=>[r(a(e.$t("general.close")),1)]),default:s(()=>[l(m,{type:"secondary",class:"!border-0",size:"xsmall",onClick:h},{default:s(()=>[l(b,{icon:"close"})]),_:1})]),_:1})]),o("div",oe,[o("h1",ne,a(e.$t("labels.addFilesFromUrl")),1),o("div",ie,[l(B,{ref_key:"inputRef",ref:x,value:t(n),"onUpdate:value":_[0]||(_[0]=v=>G(n)?n.value=v:null),type:"url",disabled:t(d),class:"flex-grow",placeholder:"www.google.com/hello.png",onKeydown:D(w,["enter"])},null,8,["value","disabled"]),l(m,{disabled:!t(c),loading:t(d),size:"small",class:"!h-10 !px-4",onClick:w},{default:s(()=>[r(a(e.$t("general.upload")),1)]),_:1},8,["disabled","loading"])]),t(n).length>0&&!t(c)?(p(),f("span",ce,a(t(g).length>0?t(g):e.$t("labels.enterValidUrl")),1)):$("",!0),t(i).length>0?(p(),f("div",{key:1,style:E(`height: ${t(c)?"230px":"208px"}`),class:"overflow-y-auto bg-white mt-1 !max-h-[250px]"},[o("h1",re,a(e.$t("objects.files")),1),(p(!0),f(O,null,Q(t(i),(v,k)=>(p(),f("div",{key:k,class:"flex w-full items-center mt-2 h-10 px-2 py-1 border-1 rounded-md"},[o("div",de,[l(b,{icon:"file"}),r(" "+a(v.title)+" ",1),l(y,{class:"hover:underline"},{title:s(()=>[r(a(e.$t("labels.openFile")),1)]),default:s(()=>[l(L,{class:"flex items-center",target:"_blank",onClick:j=>t(V)(v)},{default:s(()=>[(p(),H(J(("iconMap"in e?e.iconMap:t(W)).externalLink),{class:"w-3.5 h-3.5 text-gray-500"}))]),_:2},1032,["onClick"])]),_:2},1024)]),_[1]||(_[1]=o("div",{class:"flex-grow-1"},null,-1)),l(y,null,{title:s(()=>[r(a(e.$t("title.removeFile")),1)]),default:s(()=>[l(m,{type:"text",size:"xsmall",onClick:j=>F(k)},{default:s(()=>[l(b,{icon:"close"})]),_:2},1032,["onClick"])]),_:2},1024)]))),128))],4)):$("",!0)]),o("div",ue,[l(m,{disabled:t(d),type:"secondary",size:"small",onClick:h},{default:s(()=>[r(a(e.$t("labels.cancel")),1)]),_:1},8,["disabled"]),l(m,{disabled:t(d)||t(i).length===0,size:"small",onClick:M},{default:s(()=>[r(a(e.$t("activity.addFiles")),1)]),_:1},8,["disabled"])])])}}}),Ne=Object.assign(Z(pe,[["__scopeId","data-v-95ae45e5"]]),{__name:"CellAttachmentUploadProvidersUrl"});export{Ne as default};
