import{e as Y,a9 as Z,G as u,bd as O,fO as ee,r as g,o0 as ae,a7 as se,a8 as le,n as o,ef as te,j9 as ne,gu as oe,f_ as ie,c as d,o as t,L as e,aF as re,I as T,w as i,an as k,aq as E,K as ue,b9 as $,bD as ce,ag as c,b as v,bN as de,a as m,cf as P,i8 as z,bV as me,ap as fe,t as y,d as K,oj as pe,gX as ge,i3 as ve,ok as w,ol as G,_ as we}from"./DRA9KN5F.js";import{a as he,g as ye}from"./zMMvJhqz.js";import{R as _e,_ as be}from"./YbUkeyWR.js";const xe={class:"nc-cell-field nc-user-select h-full w-full flex items-center read-only"},Ce={key:0,class:"w-full max-w-full"},Ie={class:"flex-none"},Te=Y({__name:"Readonly",props:{modelValue:{},rowIndex:{},location:{},forceMulti:{type:Boolean},options:{}},setup(_){const{t:ke}=Z(),S=u(O),f=u(ee),b=u(ae,g(!1)),A=se(),{basesUser:q}=le(A),U=o(()=>S.value.base_id?q.value.get(S.value.base_id)||[]:[]),X=o(()=>U.value.reduce((a,l)=>(a[l.id]=l,a[l.email]=l,a),{})),V=u(te,g(!1)),x=o(()=>{var a;return _.forceMulti||((a=f.value.meta)==null?void 0:a.is_multi)}),h=u(ne,g(b.value?1:void 0)),j=u(oe,g(!1)),C=u(ie,g({isPageDesignerPreviewPanel:!1})),J=o(()=>C.value.isPageDesignerPreviewPanel),L=o(()=>[...[],..._.options??he(f.value,!1,V.value,U.value)]),Q=o(()=>L.value.reduce((a,l)=>(l.id&&(a[l.id]=l),l.email&&(a[l.email.trim()]=l),a),{})),I=o(()=>ye(Q.value,_.modelValue)),W=o(()=>{var a,l;return x.value?(I.value||[]).map(r=>r.value):((l=(a=I.value||[])==null?void 0:a[0])==null?void 0:l.value)||""}),p=a=>{var l,r;return!((r=(l=X.value)==null?void 0:l[a])!=null&&r.deleted)};return(a,l)=>{var B,F,N,D,M;const r=me,R=fe,H=de;return t(),d("div",xe,[e(V)&&((B=("parseProp"in a?a.parseProp:e(re))(e(f).meta))!=null&&B.isList)?(t(),d("div",Ce,[(t(),T($(e(x)?e(pe):e(be)),{value:e(W),class:"nc-field-layout-list",disabled:""},{default:i(()=>[(t(!0),d(k,null,E(e(L),s=>(t(),d(k,{key:s.id||s.email},[s.deleted?ue("",!0):(t(),T($(e(x)?e(ce):e(_e)),{key:s.id||s.email,class:c(`nc-select-option-${e(f).title}-${s.email}`),"data-testid":`select-option-${e(f).title}-${a.location==="filter"?"filter":a.rowIndex}`,value:s.id},{default:i(()=>[v(H,{class:"rounded-tag max-w-full !pl-0",color:"'#ccc'"},{default:i(()=>[m("span",{style:P({color:("getSelectTypeOptionTextColor"in a?a.getSelectTypeOptionTextColor:e(z))("#ccc")}),class:"flex items-stretch gap-2 text-small"},[m("div",null,[v(r,{disabled:!p(s.id),user:s,class:"!text-[0.5rem] !h-[16.8px]",size:"auto"},null,8,["disabled","user"])]),v(R,{class:"truncate max-w-full","show-on-truncate-only":""},{title:i(()=>{var n;return[K(y(((n=s.display_name)==null?void 0:n.trim())||s.email),1)]}),default:i(()=>{var n;return[m("span",{class:c([{"text-gray-600":!p(s.id||s.email)},"text-ellipsis overflow-hidden"]),style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},y(((n=s.display_name)==null?void 0:n.trim())||s.email),3)]}),_:2},1024)],4)]),_:2},1024)]),_:2},1032,["class","data-testid","value"]))],64))),128))]),_:1},8,["value"]))])):(t(),d("div",{key:1,class:c(["flex overflow-hidden",{"gap-y-1":!e(J),"flex-wrap flex-col items-start gap-2":((N=(F=e(C))==null?void 0:F.widget)==null?void 0:N.displayAs)==="List"}]),style:P(((M=(D=e(C))==null?void 0:D.widget)==null?void 0:M.displayAs)!=="List"?{"flex-wrap":!e(b),"max-width":"100%","-webkit-line-clamp":("rowHeightTruncateLines"in a?a.rowHeightTruncateLines:e(ve))(e(h),!0),maxHeight:`${("rowHeightInPx"in a?a.rowHeightInPx:e(ge))[e(h)]-12}px`}:{})},[(t(!0),d(k,null,E(e(I),s=>(t(),T(H,{key:s.value,class:c([{"!my-0":!e(h)||e(h)===1},"rounded-tag max-w-full !pl-0"]),color:s.value===e(w)?("themeV4Colors"in a?a.themeV4Colors:e(G)).brand[50]:a.location==="filter"?("themeV4Colors"in a?a.themeV4Colors:e(G)).gray[200]:"#ccc"},{default:i(()=>{var n;return[m("span",{class:c([{"text-sm":e(j),"text-small":!e(j)},"flex items-stretch gap-2"]),style:P({color:("getSelectTypeOptionTextColor"in a?a.getSelectTypeOptionTextColor:e(z))("#ccc")})},[m("div",Ie,[v(r,{"is-deleted":!p(s.value),disabled:!p(s.value),size:"auto",user:{display_name:(n=s.label)!=null&&n.includes("@")?"":s.label.trim(),email:s.label,meta:s.meta},class:c(["!text-[0.5rem] !h-[16.8px]",{"!bg-white":s.value===e(w)}]),"show-placeholder-icon":s.value===e(w)},null,8,["is-deleted","disabled","user","class","show-placeholder-icon"])]),v(R,{class:"truncate max-w-full","show-on-truncate-only":""},{title:i(()=>[K(y(s.label),1)]),default:i(()=>[m("span",{class:c([{"text-gray-500":!p(s.value)&&s.value!==e(w),"text-nc-content-brand":s.value===e(w),"font-600":e(b)},"text-ellipsis overflow-hidden"]),style:{wordBreak:"keep-all",whiteSpace:"nowrap",display:"inline"}},y(s.label),3)]),_:2},1024)],6)]}),_:2},1032,["class","color"]))),128))],6))])}}}),Ve=Object.assign(we(Te,[["__scopeId","data-v-f147bc6e"]]),{__name:"CellUserReadonly"});export{Ve as default};
