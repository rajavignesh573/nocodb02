const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DzI8hkox.js","./DRA9KN5F.js","./entry.CNP42Mi6.css","./gAYHr7Gr.js","./PlainCell.CJha1QXQ.css","./BKua7nEo.js","./BUnSBgDC.js","./RecordCard.pwDI-3DF.css","./Bw607vNV.js","./CQa0sIfA.js","./DkDj6Z7Z.js","./B94p8ToD.js","./Cd4chHHL.js","./boyBAVNN.js","./yMSt-9W5.js","./BYKJ-MHf.js","./By5RWL3d.js","./D7poRkS0.js","./C2xdh4Xe.js","./CI3EriLB.js","./C2UaKEE0.js","./Item.GTPiKSkc.css","./C_VN1MCC.js","./index.CMurbi1o.css","./owbQkEXm.js","./DivDataCell.3R8zfazT.css","./DlXIlcns.js","./DP83Cqnl.js","./CVZBrAgI.js","./LhVKWcKT.js","./QeWwuUYP.js","./index._6B72PDH.css","./B89wxTuy.js","./DjPyxH1k.js","./Markdown.CUPXKfeQ.css","./DCa6wpIA.js","./B8gs0dG7.js","./mXY_vhPu.js","./Comments.DTONmK0N.css","./B1qoNiTF.js","./CbX26EBz.js","./TimeSelector.DAR2lbHN.css","./CYKJe2Bk.js","./DkpDpjnr.js","./Dv0nYk-Y.js","./Cell.BBaBjsLL.css","./CHRPOXXy.js","./gByPF8bR.js","./Modal.CB1oWLel.css","./BCBMEREK.js","./DGFEr0h-.js","./DfIS_byq.js","./YbUkeyWR.js","./lL-0_K96.js","./CIOK9Y4w.js","./CNwEZGnv.js","./BVqTF1QK.js","./Ce4xoeky.js","./C3FZdmXk.js","./index.C8L8AhJa.css","./DDmv9w84.js","./DWLi1ZcL.js","./LockView.BWC8JyQk.css","./BALLsGq5.js","./DCm6TF8M.js","./Bj4kMpzI.js","./CbSESqy_.js","./Bxzk9hCO.js","./Bm6QmuXP.js","./CkpISeXq.js","./index.N-A1gxk9.css","./zMMvJhqz.js","./FilterInput.7KjqjE1F.css","./ytmFgNfN.js","./Pagination.Cmvjwryu.css","./DxC2Oool.js","./VirtualCell.6f0pX0MN.css","./CC4cUItJ.js","./EcM5l_HA.js","./BLPDl4Qg.js","./CsX17Y_h.js","./C_gbauhL.js","./BmscXXs6.js","./ColumnMenu.tCfxYPwr.css","./CG-5KGUk.js","./CkvAmLZt.js","./D7OHpRdS.js","./DvtLu3FC.js","./D_txg4HT.js","./SelectOptions.BDAXdwVJ.css","./JqUqXTOd.js","./I4o4wRE2.js","./BMPzbwPk.js","./CwPFbl3n.js","./C5HnjaiI.js","./CBhmoxRW.js","./Bc3_tI4-.js","./CJAyvGKH.js","./D43249YX.js","./U3gU45AW.js","./BBg0y0zb.js","./-iDxnmJF.js","./EditOrAddProvider.C1S70ahv.css","./C1XMFoVa.js","./C-ZUx0lq.js","./YYodiGXA.js","./C316Za7m.js","./CKrOnbU4.js","./index.DA-8lYYb.css"])))=>i.map(i=>d[i]);
import{e as X,G as j,r as k,bd as Q,as as W,gg as ee,n as T,el as i,o5 as N,c as R,L as _,o as w,b,w as V,O as U,aX as Y,an as $,aq as te,I as oe,K as re,a_ as A}from"./DRA9KN5F.js";import{i as ae,e as O}from"./gAYHr7Gr.js";import{U as ne}from"./CG-5KGUk.js";import{a as le}from"./15xfm8CF.js";import{u as ie}from"./D7poRkS0.js";import"./BLPDl4Qg.js";import"./CkvAmLZt.js";import"./D7OHpRdS.js";import"./DvtLu3FC.js";import"./D_txg4HT.js";import"./CQa0sIfA.js";import"./DkDj6Z7Z.js";import"./By5RWL3d.js";import"./C3FZdmXk.js";import"./JqUqXTOd.js";import"./I4o4wRE2.js";import"./BMPzbwPk.js";import"./CwPFbl3n.js";import"./YbUkeyWR.js";import"./C5HnjaiI.js";import"./CBhmoxRW.js";import"./DjPyxH1k.js";import"./Bc3_tI4-.js";import"./CsX17Y_h.js";import"./BCBMEREK.js";import"./CJAyvGKH.js";import"./C2UaKEE0.js";import"./C_VN1MCC.js";import"./QeWwuUYP.js";import"./Dv0nYk-Y.js";import"./D43249YX.js";import"./CNwEZGnv.js";import"./DP83Cqnl.js";import"./DlXIlcns.js";import"./BVqTF1QK.js";import"./Ce4xoeky.js";import"./U3gU45AW.js";import"./BYKJ-MHf.js";import"./B94p8ToD.js";import"./Cd4chHHL.js";import"./boyBAVNN.js";import"./BBg0y0zb.js";import"./-iDxnmJF.js";import"./C2xdh4Xe.js";const se=Y(()=>A(()=>import("./DzI8hkox.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(s=>s.default||s)),me=Y(()=>A(()=>import("./BKua7nEo.js"),__vite__mapDeps([5,1,2,6,7]),import.meta.url).then(s=>s.default||s)),de=Y(()=>A(()=>import("./Bw607vNV.js").then(s=>s.R),__vite__mapDeps([8,1,2,9,10,11,3,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108]),import.meta.url).then(s=>s.default||s)),ce=["onClick","onMouseover"],ue=X({__name:"DateField",emits:["expandRecord","newRecord"],setup(s,{emit:Z}){const C=Z,S=j(Q,k()),L=k(),{isUIAllowed:P}=W(),{selectedDate:v,formattedData:f,formattedSideBarData:z,calendarRange:M,updateRowProperty:q,isSyncedFromColumn:G}=le(),J=j(ee,k()),{fields:B}=ie(),K=T(()=>B.value?new Map(B.value.map(o=>[o.fk_column_id,{underline:o.underline,bold:o.bold,italic:o.italic}])):new Map),x=o=>K.value.get(o.id),F=T(()=>{if(!M.value)return[];const o=[];return M.value.forEach(n=>{const c=n.fk_from_col,p=n.fk_to_col;if(c&&p){const d=f.value.filter(e=>{const t=i(e.row[c.title]),a=i(e.row[p.title]);return t.isSameOrBefore(a,"day")});for(const e of d){const t=i(e.row[c.title]),a=i(e.row[p.title]),u=e.rowMeta.id??N();let l="none";const m=r=>r.isSame(v.value,"day"),y=r=>r.isBefore(v.value,"day"),D=r=>r.isAfter(v.value,"day");m(t)&&m(a)?l="rounded":y(t)&&D(a)?l="none":m(t)&&D(a)?l="leftRounded":y(t)&&m(a)?l="rightRounded":l="none",o.push({...e,rowMeta:{...e.rowMeta,position:l,id:u,range:n}})}}else if(c)for(const d of f.value){const e=d.rowMeta.id??N();o.push({...d,rowMeta:{...d.rowMeta,id:e,range:n,position:"rounded"}})}}),o}),g=k(null),E=k(null),H=o=>{var c,p,d;if(!P("dataEdit"))return;o.preventDefault();const n=(c=o.dataTransfer)==null?void 0:c.getData("text/plain");if(n){const{record:e}=JSON.parse(n),t=(p=e.rowMeta.range)==null?void 0:p.fk_from_col,a=(d=e.rowMeta.range)==null?void 0:d.fk_to_col;if(!t)return;const u=i(v.value).startOf("day");let l;const m={...e,row:{...e.row,[t.title]:i(u).format("YYYY-MM-DD HH:mm:ssZ")}},y=[t.title];if(a){const r=e.row[t.title]?i(e.row[t.title]):null,h=e.row[a.title]?i(e.row[a.title]):null;r&&h?l=i(u).add(h.diff(r,"day"),"day"):r&&!h?l=i(u).endOf("day"):!r&&h?l=i(u).endOf("day"):l=u.clone(),m.row[a.title]=i(l).format("YYYY-MM-DD HH:mm:ssZ"),y.push(a.title)}if(!m)return;const D=O(m.row,S.value.columns);g.value?f.value=f.value.map(r=>O(r.row,S.value.columns)===D?m:r):(f.value=[...f.value,m],z.value=z.value.filter(r=>O(r.row,S.value.columns)!==D)),g.value&&(g.value.style.boxShadow="none",g.value=null),q(m,y,!1),$e("c:calendar:day:drag-record")}},I=()=>{var n;if(!P("dataEdit")||!((n=M.value)!=null&&n.length)||G.value)return;const o={row:{[M.value[0].fk_from_col.title]:v.value.format("YYYY-MM-DD HH:mm:ssZ")}};C("newRecord",o)};return(o,n)=>{const c=se,p=me,d=de;return _(F).length?(w(),R("div",{key:0,ref_key:"container",ref:L,class:"w-full cursor-pointer relative overflow-y-auto nc-scrollbar-md","data-testid":"nc-calendar-day-view",onDblclick:I,onDrop:H},[b(_(ne),{height:"calc(100vh - 5rem)",list:_(F),options:{itemHeight:36}},{default:V(({data:e})=>[(w(),R("div",{key:e.rowMeta.id,class:"mt-2",style:{"line-height":"18px"},"data-testid":"nc-calendar-day-record-card",onMouseleave:n[0]||(n[0]=t=>E.value=null),onClick:U(t=>C("expandRecord",e),["prevent"]),onMouseover:t=>E.value=e.rowMeta.id},[b(d,{row:e},{default:V(()=>[b(p,{record:e,hover:_(E)===e.rowMeta.id,resize:!1,position:e.rowMeta.position,size:"small",onClick:U(t=>C("expandRecord",e),["prevent"])},{default:V(()=>[(w(!0),R($,null,te(_(J),(t,a)=>(w(),R($,{key:a},[("isRowEmpty"in o?o.isRowEmpty:_(ae))(e,t)?re("",!0):(w(),oe(c,{key:0,modelValue:e.row[t.title],"onUpdate:modelValue":u=>e.row[t.title]=u,class:"text-xs",bold:x(t).bold,column:t,italic:x(t).italic,underline:x(t).underline},null,8,["modelValue","onUpdate:modelValue","bold","column","italic","underline"]))],64))),128))]),_:2},1032,["record","hover","position","onClick"])]),_:2},1032,["row"])],40,ce))]),_:1},8,["list"])],544)):(w(),R("div",{key:1,ref_key:"container",ref:L,class:"w-full h-full cursor-pointer flex text-md font-bold text-gray-500 items-center justify-center",onDrop:H,onDblclick:I}," No records in this day ",544))}}}),at=Object.assign(ue,{__name:"SmartsheetCalendarDayViewDateField"});export{at as default};
